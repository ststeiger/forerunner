var forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{},$(function(){function r(n,t){this.reportObj=t,this.$container=n,this.isRendered=!1}var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events,t=forerunner.ssr.constants.navigateType;$.widget(i.getFullname(i.reportViewer),{options:{reportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportViewer",reportPath:null,pageNum:1,pingInterval:3e5,toolbarHeight:0,pageNavArea:null,paramArea:null,DocMapArea:null,printArea:null},_destroy:function(){},_create:function(){var n=this,t;if(setInterval(function(){n._sessionPing()},this.options.pingInterval),n.locData=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer"),n.actionHistory=[],n.curPage=0,n.pages={},n.sessionID="",n.numPages=0,n.lock=0,n.$reportContainer=new $("<DIV class='fr-report-container'/>"),n.$reportAreaContainer=null,n.$loadingIndicator=new $("<div class='fr-report-loading-indicator' ><\/div>").text(n.locData.messages.loading),n.floatingHeaders=[],n.paramLoaded=!1,n.scrollTop=0,n.scrollLeft=0,n.loadLock=0,n.finding=!1,n.findStartPage=null,n.findEndPage=null,n.findKeyword=null,n.hasDocMap=!1,n.docMapData=null,n.togglePageNum=0,n.element.append(n.$loadingIndicator),n.pageNavOpen=!1,n.savedTop=0,n.savedLeft=0,n.origionalReportPath="",n._setPageCallback=null,t=forerunner.device.isTouch(),t)$(window).on("scrollstop",function(){n._updateTableHeaders(n)});else $(window).on("scroll",function(){n._updateTableHeaders(n)});n.element.append(n.$reportContainer),n._addLoadingIndicator(),n._loadParameters(n.options.pageNum),n.hideDocMap()},getCurPage:function(){var n=this;return n.curPage},getNumPages:function(){var n=this;return n.numPages},getReportViewerAPI:function(){var n=this;return n.options.reportViewerAPI},getReportPath:function(){var n=this;return n.options.reportPath},getSessionID:function(){var n=this;return n.sessionID},getHasDocMap:function(){var n=this;return n.hasDocMap},triggerEvent:function(n){var t=this;return t._trigger(n)},_setColHeaderOffset:function(n,t){if(t){var i=n.offset(),r=$(window).scrollLeft();r>i.left&&r<i.left+n.width()?(t.css("left",Math.min(r-i.left,n.width()-t.width())+"px"),t.fadeIn("fast")):t.hide()}},_setRowHeaderOffset:function(n,t){var u=this,i,r;t&&(i=n.offset(),r=$(window).scrollTop(),r>i.top&&r<i.top+n.height()?(t.css("top",Math.min(r-i.top,n.height()-t.height())+u.options.toolbarHeight+"px"),t.fadeIn("fast")):t.hide())},_addLoadingIndicator:function(){var n=this;n.loadLock===0&&(n.loadLock=1,setTimeout(function(){n.showLoadingIndictator(n)},500))},showLoadingIndictator:function(n){if(n.loadLock===1){var t=n.$reportContainer.width()-212;n.$loadingIndicator.css("top",n.$reportContainer.scrollTop()+100+"px").css("left",t>0?t/2:"0px"),n.$reportContainer.css({opacity:.5}),n.$loadingIndicator.show()}},removeLoadingIndicator:function(){var n=this;n.loadLock=0,n.$reportContainer.css({opacity:1}),n.$loadingIndicator.hide()},_setPage:function(t){var i=this,r;i.pages[t].isRendered||i._renderPage(t),i.$reportAreaContainer?(i.$reportAreaContainer.find(".Page").detach(),i.$reportAreaContainer.append(i.pages[t].$container),i.curPage!==null&&i.curPage>t?i.pages[t].$container.show():i.pages[t].$container.show()):(r=i.$reportContainer.find(".Page"),r&&r.detach(),i.$reportAreaContainer=$("<Div/>"),i.$reportAreaContainer.addClass("fr-report-areacontainer"),i.$reportContainer.append(i.$reportAreaContainer),i.$reportAreaContainer.append(i.pages[t].$container),i._touchNav(),i.pages[t].$container.fadeIn(),i._removeDocMap()),i.curPage=t,i._trigger(n.changePage,null,{newPageNum:t,paramLoaded:i.paramLoaded,numOfVisibleParameters:i.$numOfVisibleParameters}),$(window).scrollLeft(i.scrollLeft),$(window).scrollTop(i.scrollTop),i.removeLoadingIndicator(),i.lock=0,typeof i._setPageCallback=="function"&&(i._setPageCallback(),i._setPageCallback=null),i._trigger(n.setPageDone)},_addSetPageCallback:function(n){if(typeof n=="function"){var t=this,i=t._setPageCallback;t._setPageCallback=i===null?n:function(){i(),n()}}},allowZoom:function(t){var i=this;t===!0?(forerunner.device.allowZoom(!0),i.allowSwipe(!1)):(forerunner.device.allowZoom(!1),i.allowSwipe(!0)),i._trigger(n.allowZoom,null,{isEnabled:t})},_allowSwipeState:!1,allowSwipe:function(n){var t=this;$(t.element).data("swipeEnabled",n)},_touchNav:function(){var n=this;$(n.element).hammer({stop_browser_behavior:{userSelect:!1},swipe_max_touches:2,drag_max_touches:2}).on("swipe drag touch release",function(t){if(t.gesture)switch(t.type){case"touch":n._hideTableHeaders();break;case"release":if($(n.element).data("swipeEnabled")===!1)break;var i=!1;if(t.gesture.touches.length>1&&(i=!0),(t.gesture.direction==="left"||t.gesture.direction==="up")&&i){t.gesture.preventDefault(),n.navToPage(n.curPage+1);break}if((t.gesture.direction==="right"||t.gesture.direction==="down")&&i){t.gesture.preventDefault(),n.navToPage(n.curPage-1);break}t.gesture.velocityX===0&&t.gesture.velocityY===0&&n._updateTableHeaders(n)}})},refreshReport:function(){var n=this,t=null;n.lock!==1&&(n.sessionID="",n.lock=1,n.paramLoaded===!0&&(t=n.options.paramArea.reportParameter("getParamsList")),n._resetViewer(!0),n._loadPage(1,!1,null,t,!0))},navToPage:function(n){var t=this;n!==t.curPage&&t.lock!==1&&(t.scrollLeft=0,t.scrollTop=0,n>t.numPages&&(n=1),n<1&&(n=t.numPages),n!==t.curPage&&t.lock===0&&(t.lock=1,t._loadPage(n,!1)))},_hideDocMap:function(){var t=this,i=t.options.docMapArea;i.hide(),t.element.show(),t._trigger(n.hideDocMap)},_showDocMap:function(){var t=this,i=t.options.docMapArea;i.reportDocumentMap({$reportViewer:t}),t.docMapData||$.ajax({url:t.options.reportViewerAPI+"/DocMapJSON/",data:{SessionID:t.sessionID},dataType:"json",async:!1,success:function(n){t.docMapData=n,i.reportDocumentMap("write",n)},fail:function(){forerunner.dialog.showMessageBox("Fail")}}),t.savedLeft=$(window).scrollLeft(),t.savedTop=$(window).scrollTop(),t.element.hide(),i.slideUpShow(),setTimeout(function(){window.scrollTo(0,0)},500),t._trigger(n.showDocMap)},_removeDocMap:function(){var n=this;$(".fr-docmap-panel").length!==0&&(n.hideDocMap(),n.docMapData=null,$(".fr-docmap-panel").remove())},hideDocMap:function(){var n=this,t=n.options.docMapArea;n.hasDocMap&&t&&t.is(":visible")&&n._hideDocMap()},showDocMap:function(){var n=this,t=n.options.docMapArea;if(n.hasDocMap&&t){if(t.is(":visible")){n._hideDocMap();return}n._showDocMap()}},_cachePages:function(n){var i=this,r=n-1,u=n+1,t;for(r<1&&(r=1),u>i.numPages&&(u=i.numPages),t=r;t<=u;t++)i.pages[t]||t!==n&&i._loadPage(t,!0)},back:function(){var t=this,i=t.actionHistory.pop(),r;i?(t.options.reportPath=i.ReportPath,t.sessionID=i.SessionID,t._trigger(n.drillBack),t._removeParameters(),t.hideDocMap(),t.scrollLeft=i.ScrollLeft,t.scrollTop=i.ScrollTop,i.FlushCache&&t.flushCache(),i.paramLoaded&&i.savedParams?(r=t.options.paramArea,r.reportParameter("refreshParameters",i.savedParams),t.$numOfVisibleParameters=r.reportParameter("getNumOfVisibleParameters"),t.$numOfVisibleParameters>0&&t._trigger(n.showParamArea,null,{reportPath:t.options.reportPath}),t.paramLoaded=!0):t._loadParameters(i.CurrentPage)):t._trigger(n.back,null,{path:t.options.reportPath})},showNav:function(){var t=this;t.pageNavOpen?(t.pageNavOpen=!1,document.body.parentNode.style.overflow="scroll",window.removeEventListener?window.removeEventListener("orientationchange",t._handleOrientation,!1):window.detachEvent("orientationchange",t._handleOrientation)):(t.pageNavOpen=!0,document.body.parentNode.style.overflow="hidden",window.addEventListener?window.addEventListener("orientationchange",t._handleOrientation,!1):window.attachEvent("orientationchange",t._handleOrientation)),t.options.pageNavArea&&t.options.pageNavArea.pageNav("showNav"),t._trigger(n.showNav,null,{path:t.options.reportPath,open:t.pageNavOpen})},_handleOrientation:function(){var n=$(".fr-layout-pagesection");forerunner.device.isSmall()?n.is(":visible")&&n.hide():n.is(":hidden")&&n.show()},flushCache:function(){var n=this;n.pages={},n.options.pageNavArea&&n.options.pageNavArea.pageNav("reset")},_prepareAction:function(){var n=this;(n.togglePageNum!==n.curPage||n.togglePageNum===0)&&$.ajax({url:n.options.reportViewerAPI+"/GetReportJSON/",data:{ReportPath:n.options.reportPath,SessionID:n.sessionID,PageNumber:n.curPage,ParameterList:""},dataType:"json",async:!1,success:function(){n.togglePageNum=n.curPage},fail:function(){forerunner.dialog.showMessageBox("Fail")}})},sort:function(n,t){var i=this,u,r=forerunner.ssr.constants.sortDirection;i.lock!==1&&(i.lock=1,u=n===r.asc?r.desc:r.asc,$.getJSON(i.options.reportViewerAPI+"/SortReport/",{SessionID:i.sessionID,SortItem:t,Direction:u}).done(function(n){i.scrollLeft=$(window).scrollLeft(),i.scrollTop=$(window).scrollTop(),i.numPages=n.NumPages,i._loadPage(n.NewPage,!1,null,null,!0)}).fail(function(){console.log("error"),i.removeLoadingIndicator()}))},toggleItem:function(n){var i=this;i.lock!==1&&(i.lock=1,i._addLoadingIndicator(),i._prepareAction(),$.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.toggle,SessionID:i.sessionID,UniqueID:n}).done(function(n){n.Result===!0&&(i.scrollLeft=$(window).scrollLeft(),i.scrollTop=$(window).scrollTop(),i.pages[i.curPage]=null,i._loadPage(i.curPage,!1))}).fail(function(){console.log("error"),i.removeLoadingIndicator()}))},navigateBookmark:function(n){var i=this;i.lock!==1&&(i.lock=1,i._prepareAction(),$.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.bookmark,SessionID:i.sessionID,UniqueID:n}).done(function(t){t.NewPage===i.curPage?(i._navToLink(n),i.lock=0):(i.backupCurPage(),i._loadPage(t.NewPage,!1,n))}).fail(function(){console.log("error"),i.removeLoadingIndicator()}))},isDrillThoughReport:function(){var n=this;return n.origionalReportPath===n.options.reportPath?!0:!1},navigateDrillthrough:function(i){var r=this;r.lock!==1&&(r.lock=1,r._addLoadingIndicator(),r._prepareAction(),$.getJSON(r.options.reportViewerAPI+"/NavigateTo/",{NavType:t.drillThrough,SessionID:r.sessionID,UniqueID:i}).done(function(t){r.backupCurPage(!0),t.Exception?(r.$reportAreaContainer.find(".Page").reportRender("writeError",t),r.removeLoadingIndicator()):(r.sessionID=t.SessionID,r.origionalReportPath===""&&(r.origionalReportPath=r.options.reportPath),r.options.reportPath=t.ReportPath,r._trigger(n.drillThrough,null,{path:t.ReportPath}),t.ParametersRequired?(r.$reportAreaContainer.find(".Page").detach(),r._setScrollLocation(0,0),r._showParameters(1,t.Parameters)):(r._setScrollLocation(0,0),r._loadPage(1,!1,null,null,!0)))}).fail(function(){console.log("error"),r.removeLoadingIndicator()}))},navigateDocumentMap:function(n){var i=this;i.lock!==1&&(i.lock=1,$.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.docMap,SessionID:i.sessionID,UniqueID:n}).done(function(t){i.backupCurPage(!1,!0),i.hideDocMap(),i._loadPage(t.NewPage,!1,n)}).fail(function(){console.log("error"),i.removeLoadingIndicator()}))},backupCurPage:function(n,t){var i=this,r=$(window).scrollTop(),u=$(window).scrollLeft(),f,e;n!==!0&&(n=!1),t===!0&&(r=i.savedTop,u=i.savedLeft),i.paramLoaded&&(e=i.options.paramArea,f=e.reportParameter("getParamsList",!0)),i.actionHistory.push({ReportPath:i.options.reportPath,SessionID:i.sessionID,CurrentPage:i.curPage,ScrollTop:r,ScrollLeft:u,FlushCache:n,paramLoaded:i.paramLoaded,savedParams:f})},_setScrollLocation:function(n,t){var i=this;i.scrollLeft=t,i.scrollTop=n},find:function(n,t,i,r){var u=this;if(n!=="")if(u.findKeyword&&u.findKeyword===n||(u.resetFind(),u.findKeyword=n),u.finding&&!r)u._findNext(n);else{if(t===undefined&&(t=u.getCurPage()),i===undefined&&(i=u.getNumPages()),t>i){u.resetFind(),forerunner.dialog.showMessageBox(u.locData.messages.completeFind);return}u.findStartPage===null&&(u.findStartPage=t),$.getJSON(u.options.reportViewerAPI+"/FindString/",{SessionID:u.sessionID,StartPage:t,EndPage:i,FindValue:n}).done(function(t){t.NewPage!==0?(u.finding=!0,t.NewPage!==u.getCurPage()?(u._addSetPageCallback(function(){u.setFindHighlight(n)}),u.pages[t.NewPage]=null,u._loadPage(t.NewPage,!1)):u.setFindHighlight(n)):u.findStartPage!==1?(u.find(n,1,u.findStartPage-1),u.findStartPage=1):(u.finding===!0?forerunner.dialog.showMessageBox(u.locData.messages.completeFind):forerunner.dialog.showMessageBox(u.locData.messages.keyNotFound),u.resetFind())}).fail(function(){console.log("error"),u.removeLoadingIndicator()})}},_findNext:function(n){var t=this,i,r;if($(".fr-render-find-keyword").filter(".fr-render-find-highlight").first().removeClass("fr-render-find-highlight"),i=$(".fr-render-find-keyword").filter(":visible").filter(".Unread").first(),i.length>0)i.removeClass("Unread").addClass("fr-render-find-highlight").addClass("Read"),$(window).scrollTop(i.offset().top-150),$(window).scrollLeft(i.offset().left-250);else{if(t.getNumPages()===1){forerunner.dialog.showMessageBox(t.locData.messages.completeFind),t.resetFind();return}r=t.findEndPage?t.findEndPage:t.getNumPages(),t.getCurPage()+1<=r?t.find(n,t.getCurPage()+1,undefined,!0):t.findStartPage>1?(t.findEndPage=t.findStartPage-1,t.getCurPage()===t.findEndPage?(forerunner.dialog.showMessageBox(t.locData.messages.completeFind),t.resetFind()):t.find(n,1,t.findStartPage-1,!0)):(forerunner.dialog.showMessageBox(t.locData.messages.completeFind),t.resetFind())}},setFindHighlight:function(n){var i=this,t;i._clearHighLightWord(),i._highLightWord(i.$reportContainer,n),t=i.$reportContainer.find(".fr-render-find-keyword").filter(":visible").filter(".Unread").first(),t.length>0&&(t.removeClass("Unread").addClass("fr-render-find-highlight").addClass("Read"),$(window).scrollTop(t.offset().top-150),$(window).scrollLeft(t.offset().left-250))},resetFind:function(){var n=this;n.finding=!1,n.findKeyword=null,n.findStartPage=null,n.findEndPage=null},exportReport:function(n){var t=this,i=t.options.reportViewerAPI+"/ExportReport/?ReportPath="+t.getReportPath()+"&SessionID="+t.getSessionID()+"&ParameterList=&ExportType="+n;window.open(i)},showPrint:function(){var n=this,t=n.options.printArea;t.reportPrint("togglePrintPane")},printReport:function(n){var t=this,i=t.options.reportViewerAPI+"/PrintReport/?ReportPath="+t.getReportPath()+"&SessionID="+t.getSessionID()+"&ParameterList=&PrintPropertyString="+n;window.open(i)},_setPrint:function(n){var i=this,t=i.options.printArea;t.reportPrint({$reportViewer:this}),t.reportPrint("setPrint",n)},_loadParameters:function(n){var t=this;$.getJSON(t.options.reportViewerAPI+"/ParameterJSON/",{ReportPath:t.options.reportPath}).done(function(i){t._addLoadingIndicator(),t._showParameters(n,i)}).fail(function(){console.log("error"),t.removeLoadingIndicator()})},_showParameters:function(t,i){var r=this,u;i.Type==="Parameters"?(r._removeParameters(),u=r.options.paramArea,u&&(u.reportParameter({$reportViewer:this}),u.reportParameter("writeParameterPanel",i,r,t),r.$numOfVisibleParameters=u.reportParameter("getNumOfVisibleParameters"),r.$numOfVisibleParameters>0&&r._trigger(n.showParamArea,null,{reportPath:r.options.reportPath}),r.paramLoaded=!0)):i.Exception?(r.$reportContainer.reportRender({reportViewer:this}),r.$reportContainer.reportRender("writeError",i),r.removeLoadingIndicator()):r._loadPage(t,!1)},_removeParameters:function(){var n=this,t;n.paramLoaded===!0&&(t=n.options.paramArea,t&&(t.reportParameter("removeParameter"),n.paramLoaded=!1))},_resetViewer:function(n){var t=this;t.numPages=0,t.floatingHeaders=[],n||(t.paramLoaded=!1),t.scrollTop=0,t.scrollLeft=0,t.finding=!1,t.findStartPage=null,t.hasDocMap=!1,t.docMapData=null,t.togglePageNum=0,t.findKeyword=null,t.origionalReportPath=""},loadReport:function(n,t){var i=this;i._resetViewer(),i.options.reportPath=n,i.options.pageNum=t,i._loadParameters(t)},loadReportWithNewParameters:function(n){var t=this;t._resetViewer(!0),t._loadPage(1,!1,null,n,!0)},_loadPage:function(n,t,i,r,u){var f=this;if(u===!0&&f.flushCache(),f.pages[n]&&f.pages[n].$container){t||(f._setPage(n),f.element.is(":visible")||t||f.element.show(),i&&f._navToLink(i),u!==!0&&f._cachePages(n));return}r||(r=""),t||f._addLoadingIndicator(),f.togglePageNum=n,$.getJSON(f.options.reportViewerAPI+"/ReportJSON/",{ReportPath:f.options.reportPath,SessionID:f.sessionID,PageNumber:n,ParameterList:r}).done(function(r){f._writePage(r,n,t),r.ReportContainer&&f._setPrint(r.ReportContainer.Report.PageContent.PageLayoutStart),f.element.is(":visible")||t||f.element.show(),i&&f._navToLink(i),t||u===!0||f._cachePages(n)}).fail(function(){console.log("error"),f.removeLoadingIndicator()})},_writePage:function(n,t,i){var u=this,f=$("<Div/>");if(f.addClass("Page"),n){f.reportRender({reportViewer:u}),u.pages[t]?(u.pages[t].$container=f,u.pages[t].reportObj=n):u.pages[t]=new r(f,n),u.sessionID=n.SessionID?n.SessionID:"";try{u.numPages=n.ReportContainer.NumPages===undefined?0:n.ReportContainer.NumPages}catch(e){u.numPages=0}i||(u._renderPage(t),u._setPage(t))}},_renderPage:function(n){var t=this;t.pages[n]&&t.pages[n].isRendered===!0||(t.pages[n].reportObj.Exception?t.pages[n].$container.reportRender("writeError",t.pages[n].reportObj):(t.hasDocMap=t.pages[n].reportObj.HasDocMap,t.pages[n].$container.reportRender("render",t.pages[n].reportObj)),t.pages[n].isRendered=!0)},_sessionPing:function(){var n=this;n._sessionPingPost(n.sessionID)===!1&&(n.sessionID=""),$.each(n.actionHistory,function(t,i){n._sessionPingPost(i.SessionID)})},_sessionPingPost:function(n){var t=this;n&&n!==""&&$.getJSON(t.options.reportViewerAPI+"/PingSession",{PingSessionID:n}).done(function(n){return n.Status==="Fail"?!1:!0}).fail(function(){console.log("ping error")})},_updateTableHeaders:function(n){$.each(n.floatingHeaders,function(t,i){n._setRowHeaderOffset(i.$tablix,i.$rowHeader),n._setColHeaderOffset(i.$tablix,i.$colHeader)})},_hideTableHeaders:function(){var n=this;$.each(n.floatingHeaders,function(n,t){t.$rowHeader&&t.$rowHeader.hide(),t.$colHeader&&t.$colHeader.hide()}),n.$floatingToolbar&&n.$floatingToolbar.hide()},_navToLink:function(n){var t=this,i=t.element.find("[name='"+n+"']")[0];$(document).scrollTop($(i).offset().top-100)},_stopDefaultEvent:function(n){window.ActiveXObject?window.event.returnValue=!1:(n.preventDefault(),n.stopPropagation())},_getHeight:function(n){var i,t=n.clone().css({visibility:"hidden"});return t.find("img").remove(),$("body").append(t),i=t.height()+"px",t.remove(),this._convertToMM(i)},_convertToMM:function(n){if(!n)return 0;var i=n.match(/\D+$/),t=n.match(/\d+/);i.length===1&&(i=i[0]),t.length===1&&(t=t[0]);switch(i){case"px":return t/3.78;case"pt":return t*.352777777778;case"in":return t*25.4;case"mm":return t;case"cm":return t*10;case"em":return t*4.2175176}return t},_highLightWord:function(n,t){if(t&&t!==""){var i=this;$(n).each(function(){var n=$(this).get(0);n.normalize(),$.each(n.childNodes,function(n,r){var u,f,e,o,s;if(r.nodeType===3){u=r;try{for(f=u.data.toUpperCase().indexOf(t.toUpperCase());f<u.data.length;){if(f>=0)e=document.createElement("span"),e.className="fr-render-find-keyword Unread",o=u.splitText(f),u=o.splitText(t.length),s=o.cloneNode(!0),e.appendChild(s),r.parentNode.replaceChild(e,o);else break;f=u.data.toUpperCase().indexOf(t.toUpperCase())}}catch(h){}}else i._highLightWord($(r),t)})})}else return;return $(this)},_clearHighLightWord:function(){$(".fr-render-find-keyword").each(function(){var n=document.createTextNode($(this).text());$(this).replaceWith($(n))})}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.toolTypes,i="fr-toolbase-dropdown-container";$.widget(t.getFullname(t.toolBase),{options:{toolClass:null},addTools:function(n,t,i){var r=this,u=r.element.find("."+r.options.toolClass);r._addChildTools(u,n,t,i),t?r.enableTools(i):r.disableTools(i)},_addChildTools:function(n,t,i,r){var u=this,e,h,c,f,o,s;for(u.allTools=u.allTools||{},e=$(u._getToolHtml(r[0])),t<=1?n.prepend(e):t>n.children().length?n.append(e):(h=":nth-child("+t+")",c=n.children(h),c.before(e)),f=e,u._addChildTool(f,r[0],i),o=1;o<r.length;o++)s=r[o],f.after(u._getToolHtml(s)),f=f.next(),u._addChildTool(f,s,i)},_addChildTool:function(t,i,r){var u=this;u.allTools[i.selectorClass]=i,i.toolType===n.toolGroup&&i.tools&&u._addChildTools(t,1,r,i.tools),i.sharedClass&&t.addClass(i.sharedClass),i.tooltip&&t.attr("title",i.tooltip),i.dropdown&&u._createDropdown(t,i),i.visible===!1&&t.hide()},_createDropdown:function(n,t){var u=this;t.$dropdown=$("<div class='"+i+"'/>"),t.$dropdown.toolDropdown({$reportViewer:u.options.$reportViewer}),t.$dropdown.toolDropdown("addTools",1,!0,t.tools),n.append(t.$dropdown);var r=n.find("."+i),f=t.selectorClass,e=t.imageClass;n.on("click",{toolInfo:t,$tool:n},function(n){r.css("left",n.data.$tool.filter(":visible").offset().left-n.data.$tool.filter(":visible").offsetParent().offset().left),r.css("top",n.data.$tool.height()),r.toggle()});$(document).on("click",function(n){!r.is(":visible")||$(n.target).hasClass(f)||$(n.target).hasClass(e)||r.toggle()})},getTool:function(n){var t=this;return t.allTools[n]},showTool:function(n){var t=this,i;t.allTools[n]&&(i=t.element.find("."+n),i.css({display:""}))},showAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.showTool(i.selectorClass)})},hideTool:function(n){var t=this,i;t.allTools[n]&&(i=t.element.find("."+n),i.hide())},hideAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.hideTool(i.selectorClass)})},enableTools:function(t){var i=this;$.each(t,function(t,r){var u=i.element.find("."+r.selectorClass);u.removeClass("fr-toolbase-disabled"),r.events&&(u.addClass("fr-core-cursorpointer"),i._removeEvent(u,r),i._addEvents(u,r)),r.toolType===n.toolGroup&&r.tools&&i.enableTools(r.tools)})},disableTools:function(t){var i=this;$.each(t,function(t,r){var u=i.element.find("."+r.selectorClass);u.addClass("fr-toolbase-disabled"),r.events&&(u.removeClass("fr-core-cursorpointer"),i._removeEvent(u,r)),r.toolType===n.toolGroup&&r.tools&&i.disableTools(r.tools)})},enableAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.allTools[i.selectorClass].isEnable&&n.enableTools([i])})},disableAllTools:function(){var n=this;$.each(n.allTools,function(t,i){if(i.selectorClass){var r=n.element.find("."+i.selectorClass);r.hasClass("fr-toolbase-no-disable-id")||(n.allTools[i.selectorClass].isEnable=!r.hasClass("fr-toolbase-disabled"),n.disableTools([i]))}})},_getToolHtml:function(t){var r=this,u,f,e,o,i,s,h;if(t.toolType===n.button)return"<div class='fr-toolbase-toolcontainer fr-toolbase-state "+t.selectorClass+"'><div class='fr-icons24x24 "+t.imageClass+"' /><\/div>";if(t.toolType===n.input)return u="",t.inputType&&(u=" type='"+t.inputType+"'"),"<input class='"+t.selectorClass+"'"+u+" />";if(t.toolType===n.textButton)return"<div class='fr-toolbase-textcontainer fr-toolbase-state "+t.selectorClass+"'>"+r._getText(t)+"<\/div>";if(t.toolType===n.plainText)return"<span class='"+t.selectorClass+"'> "+r._getText(t)+"<\/span>";if(t.toolType===n.containerItem){if(f="",t.text&&(f=r._getText(t)),e="",o="fr-indent24x24",t.imageClass&&(e=t.imageClass,o="fr-icons24x24"),i="",t.indent)for(s=0;s<t.indent;s++)i=i+"<div class='fr-indent24x24'><\/div>";return h="",t.rightImageClass&&(h="<div class='fr-toolbase-rightimage "+t.rightImageClass+"'><\/div>"),"<div class='fr-toolbase-itemcontainer fr-toolbase-state "+t.selectorClass+"'>"+i+"<div class='"+o+" "+e+"'><\/div>"+f+h+"<\/div>"}if(t.toolType===n.toolGroup)return"<div class='fr-toolbase-groupcontainer "+t.selectorClass+"'><\/div>"},_getText:function(n){var t=this;return typeof n.text=="function"?n.text({$reportViewer:t.options.$reportViewer}):n.text},_removeEvent:function(n,t){var r=this,i;for(i in t.events)typeof t.events[i]=="function"&&n.off(i)},_addEvents:function(n,t){var r=this,i;for(i in t.events)if(typeof t.events[i]=="function")n.on(i,null,{me:r,$reportViewer:r.options.$reportViewer},t.events[i])},_destroy:function(){},_create:function(){}}),$.widget("frInternal.toolDropdown",$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolbase-dropdown"},_init:function(){var n=this;n.element.html("<div class='"+n.options.toolClass+"'/>")}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var r=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events,n=forerunner.ssr.tools.toolbar,i=forerunner.ssr.tools.groups;$.widget(r.getFullname(r.toolbar),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolbar"},_initCallbacks:function(){var i=this;i.options.$reportViewer.on(t.reportViewerChangePage(),function(t,r){$("input.fr-toolbar-reportpage-textbox",i.element).val(r.newPageNum);var u=i.options.$reportViewer.reportViewer("getNumPages");i._updateBtnStates(r.newPageNum,u),(r.paramLoaded===!1||r.numOfVisibleParameters==0)&&i.disableTools([n.btnParamarea])});i.options.$reportViewer.on(t.reportViewerDrillBack(),function(){i._clearBtnStates()});i.options.$reportViewer.on(t.reportViewerShowParamArea(),function(){i.enableTools([n.btnParamarea])});i.options.$reportViewer.on(t.reportViewerShowDocMap(),function(){i.disableAllTools(),i.enableTools([n.btnDocumentMap,n.btnMenu,n.btnReportBack])});i.options.$reportViewer.on(t.reportViewerHideDocMap(),function(){i.enableAllTools()});i.options.$reportViewer.on(t.reportViewerShowNav(),function(t,r){r.open?(i.disableAllTools(),i.enableTools([n.btnNav,n.btnMenu])):i.enableAllTools()});i.enableTools([n.btnMenu,n.btnNav,n.btnReportBack,n.btnRefresh,n.btnFirstPage,n.btnPrev,n.btnNext,n.btnLastPage,n.btnDocumentMap,n.btnFind,n.btnZoom])},_init:function(){var t=this;t.element.html("<div class='"+t.options.toolClass+"'/>"),t.addTools(1,!0,[n.btnMenu,n.btnReportBack,n.btnNav,n.btnRefresh,i.btnVCRGroup,n.btnDocumentMap,i.btnExportDropdown,i.btnFindGroup,n.btnZoom,n.btnPrint]),t.addTools(1,!1,[n.btnParamarea]),t.options.$reportViewer&&t._initCallbacks()},_updateBtnStates:function(t,i){var r=this;r.element.find(".fr-toolbar-numPages-button").html(i),r.element.find(".fr-toolbar-reportpage-textbox").attr({max:i,min:1}),r.options.$reportViewer.reportViewer("getHasDocMap")?r.enableTools([n.btnDocumentMap]):r.disableTools([n.btnDocumentMap]),t<=1?r.disableTools([n.btnPrev,n.btnFirstPage]):r.enableTools([n.btnPrev,n.btnFirstPage]),t>=i?r.disableTools([n.btnNext,n.btnLastPage]):r.enableTools([n.btnNext,n.btnLastPage]),i===1?r.disableTools([n.btnNav]):r.enableTools([n.btnNav])},_clearBtnStates:function(){var n=this;n.element.find(".fr-toolbar-keyword-textbox").val("")},_destroy:function(){},_create:function(){var n=this}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var r=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events,n=forerunner.ssr.tools.toolpane,i=forerunner.ssr.tools.groups;$.widget(r.getFullname(r.toolPane),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolpane"},_initCallbacks:function(){var i=this;i.options.$reportViewer.on(t.reportViewerChangePage(),function(n,t){$("input.fr-item-textbox-reportpage",i.element).val(t.newPageNum);var r=i.options.$reportViewer.reportViewer("getNumPages");i._updateItemStates(t.newPageNum,r)});i.options.$reportViewer.on(t.reportViewerDrillBack(),function(){i._clearItemStates()});i.options.$reportViewer.on(t.reportViewerShowDocMap(),function(){i.disableAllTools(),i.enableTools([n.itemDocumentMap,n.itemReportBack])});i.options.$reportViewer.on(t.reportViewerHideDocMap(),function(){i.enableAllTools()});i.options.$reportViewer.on(t.reportViewerShowNav(),function(t,r){r.open?(i.disableAllTools(),i.enableTools([n.itemNav])):i.enableAllTools()});i.enableTools([n.itemFirstPage,n.itemPrev,n.itemNext,n.itemLastPage,n.itemNav,n.itemReportBack,n.itemRefresh,n.itemDocumentMap,n.itemFind])},_init:function(){var t=this;t.element.html(""),$toolpane=new $("<div />"),$toolpane.addClass(t.options.toolClass),$(t.element).append($toolpane),t.addTools(1,!0,[i.itemVCRGroup,n.itemNav,n.itemReportBack,n.itemRefresh,n.itemDocumentMap,n.itemZoom,n.itemExport,i.itemExportGroup,n.itemPrint,i.itemFindGroup]),$spacerdiv=new $("<div />"),$spacerdiv.attr("style","height:65px"),$toolpane.append($spacerdiv),t.options.$reportViewer&&t._initCallbacks()},_updateItemStates:function(t,i){var r=this;r.element.find(".fr-toolbar-numPages-button").html(i),r.element.find(".fr-item-textbox-reportpage").attr({max:i,min:1}),r.options.$reportViewer.reportViewer("getNumPages",t),r.options.$reportViewer.reportViewer("getHasDocMap")?r.enableTools([n.itemDocumentMap]):r.disableTools([n.itemDocumentMap]),t>1?r.enableTools([n.itemPrev,n.itemFirstPage]):r.disableTools([n.itemPrev,n.itemFirstPage]),t<i?r.enableTools([n.itemNext,n.itemLastPage]):r.disableTools([n.itemNext,n.itemLastPage]),i===1?r.disableTools([n.itemNav]):r.enableTools([n.itemNav])},_clearItemStates:function(){var n=this;n.element.find(".fr-item-textbox-keyword").val("")}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.pageNav),{options:{$reportViewer:null},_create:function(){},_setCurrentPage:function(n){var t=this;t.currentPageNum!==null&&t.currentPageNum!==n&&t.listItems[t.currentPageNum-1].removeClass("fr-nav-selected"),t.currentPageNum=n,t._ScrolltoPage(),t.listItems[t.currentPageNum-1].addClass("fr-nav-selected")},_ScrolltoPage:function(){var n=this,t;n.currentPageNum&&!forerunner.device.isElementInViewport(n.listItems[n.currentPageNum-1].get(0))&&(t=n.$ul.scrollLeft()+n.listItems[n.currentPageNum-1].position().left,n.$ul.scrollLeft(t))},_renderList:function(){var n=this,l=forerunner.device.isTouch(),u,t,o,i,f,r;u=new $("<UL />"),u.addClass("fr-nav-container"),n.$ul=u;var e=n.options.$reportViewer.reportViewer("getNumPages"),s=n.options.$reportViewer.reportViewer("getSessionID"),h=n.options.$reportViewer.reportViewer("getReportViewerAPI"),c=n.options.$reportViewer.reportViewer("getReportPath");for(n.listItems=new Array(e),t=1;t<=e;t++)o=h+"/GetThumbnail/?ReportPath="+c+"&SessionID="+s+"&PageNumber="+t,i=new $("<LI />"),u.append(i),n.listItems[t-1]=i,f=new $("<DIV />"),f.html("<h3 class='fr-report-centertext'>"+t.toString()+"<\/h3>"),f.addClass("fr-report-center"),r=new $("<IMG />"),r.addClass("fr-nav-page-thumb"),r.attr("src",o),r.data("pageNumber",t),this._on(r,{click:function(t){n.options.$reportViewer.reportViewer("navToPage",$(t.currentTarget).data("pageNumber")),forerunner.device.isSmall()&&n.options.$reportViewer.reportViewer("showNav")}}),i.addClass("fr-nav-item"),i.append(f),i.append(r);return u.append($("<LI />").addClass("fr-nav-li-spacer"))},reset:function(){var n=this;n.element.hide(),n.isRendered=!1},_render:function(){var n=this,u,t,i,r;n.element.html(""),u=forerunner.device.isTouch(),t=new $("<DIV />"),t.addClass("fr-nav-container"),i=new $("<DIV />"),t.append(i),r=n._renderList(),i.append(r),n.element.css("display","block"),n.element.append(t),n.element.hide(),n._initCallbacks(),n._setCurrentPage(n.options.$reportViewer.reportViewer("getCurPage"))},_makeVisible:function(n){var t=this;n?(t.element.fadeIn("fast"),t._ScrolltoPage()):t.element.fadeOut("fast")},showNav:function(){var n=this;n.isRendered||(n._render(),n.isRendered=!0),n._makeVisible(!n.element.is(":visible"))},_initCallbacks:function(){var n=this;n.options.$reportViewer.on(t.reportViewerChangePage(),function(t,i){n._setCurrentPage(i.newPageNum)})},_init:function(){var n=this;n.listItems=null,n.$ul=null,n.currentPageNum=null,n.isRendered=!1}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.tools.reportExplorerToolbar;$.widget(t.getFullname(t.reportExplorerToolbar),$.forerunner.toolBase,{options:{navigateTo:null,toolClass:"fr-toolbar"},_initCallbacks:function(){var t=this;t.enableTools([n.btnHome,n.btnBack,n.btnFav,n.btnRecent])},_init:function(){var t=this;t.element.empty(),t.element.append($("<div/>").addClass(t.options.toolClass)),t.addTools(1,!0,[n.btnBack,n.btnHome,n.btnFav,n.btnRecent]),t._initCallbacks()},_destroy:function(){},_create:function(){var n=this}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportExplorer),{options:{reportManagerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager",forerunnerPath:forerunner.config.forerunnerFolder(),path:null,view:null,selectedItemPath:null,$scrollBarOwner:null,navigateTo:null},_generatePCListItem:function(n,t){var e=this,a=e.options.reportManagerAPI+"/GetThumbnail/?ReportPath="+encodeURIComponent(n.Path)+"&DefDate="+n.ModifiedDate,u=new $("<div />"),s,l,f,i,r,o,h,c;u.addClass("fr-explorer-item"),t&&u.addClass("fr-explorer-item-selcted"),s=new $("<a />"),l=n.Type===1?"explore":"browse";s.on("click",function(){e.options.navigateTo&&e.options.navigateTo(l,n.Path)});return u.append(s),f=new $("<div />"),f.addClass("fr-report-item-image-block"),s.append(f),i=new $("<div />"),f.append(i),n.Type===1?t?i.addClass("fr-explorer-folder-selected"):i.addClass("fr-explorer-folder"):(r=new $("<img />"),f.append(r),o=new $("<div />"),f.append(o),imageSrc=a,r.addClass("fr-report-item-inner-image"),r.addClass("fr-report-item-image-base"),i.addClass("fr-report-item-image-base"),o.addClass("fr-report-item-image-base"),t?(i.addClass("fr-report-item-outer-image-selected"),o.addClass("fr-explorer-item-ear-selcted")):(i.addClass("fr-report-item-outer-image"),o.addClass("fr-report-item-ear-image")),r.attr("src",imageSrc),r.error(function(){$(this).attr("src",e.options.forerunnerPath+"/ReportExplorer/images/Report-icon.png")}),r.removeAttr("height")),t&&(e.$selectedItem=u),h=new $("<div />"),h.addClass("fr-explorer-caption"),c=new $("<div />"),c.addClass("fr-explorer-item-title"),c.html(n.Name),h.append(c),u.append(h),u},_renderPCView:function(n){var t=this,r,i,u,f;for(t.$UL=t.element.find(".fr-report-explorer"),r=t.options.selectedItemPath?decodeURIComponent(t.options.selectedItemPath):null,t.rmListItems=new Array(n.length),i=0;i<n.length;i++)u=n[i],f=!1,r&&r===decodeURIComponent(u.Path)&&(t.selectedItem=i,f=!0),t.rmListItems[i]=t._generatePCListItem(u,f),t.$UL.append(t.rmListItems[i])},_render:function(n){var t=this;t.element.html("<div class='fr-report-explorer'><\/div>"),t._renderPCView(n)},_setSelectionFromScroll:function(){for(var n=this,u=n.$explorer.scrollTop(),f=0,r=0,e=Math.abs(u-n.rmListItems[0].position().top),i,t=1;t<n.rmListItems.length;t++){if(i=Math.abs(u-n.rmListItems[t].position().top),i<e)f=t,e=i;else if(r!==0&&i>r)break;r=i}n.selectedItem=f},_fetch:function(n,t){var i=this;$.ajax({dataType:"json",url:i.options.reportManagerAPI+"/GetItems",async:!1,data:{view:n,path:t},success:function(n){i._render(n)},error:function(n){console.log(n),forerunner.dialog.showMessageBox("Failed to load the catalogs from the server.  Please try again.")}})},_initCallbacks:function(){var n=this},_init:function(){var n=this;n.$RMList=null,n.$UL=null,n.rmListItems=null,n.selectedItem=0,n.isRendered=!1,n.$explorer=n.options.$scrollBarOwner?n.options.$scrollBarOwner:$(window),n.$selectedItem=null,n._fetch(n.options.view,n.options.path)}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){function n(n,t,i,r,u,f,e){this.RS=n,this.CurrObj=t,this.CurrObjIndex=i,this.CurrObjParent=r,this.$HTMLParent=u,this.Style=f,this.CurrLocation=e}function i(){this.ReportItems={},this.Height=0,this.LowestIndex=null}function r(n,t){this.Height=n,this.Width=t}function u(n){this.TopDelta=0,this.Height=0,this.Left=0,this.Index=n,this.IndexAbove=null,this.NewHeight=null,this.NewTop=null}function f(n,t,i){this.$tablix=n,this.$rowHeader=t,this.$colHeader=i}var t=forerunner.ssr.constants.widgets;$.widget(t.getFullname(t.reportRender),{options:{reportViewer:null,responsive:!1},_create:function(){},render:function(t){var i=this,u=i.element,r=i.options.reportViewer;$.each(t.ReportContainer.Report.PageContent.Sections,function(f,e){i._writeSection(new n(r,e,f,t.ReportContainer.Report.PageContent,u,""))}),i._addPageStyle(r,t.ReportContainer.Report.PageContent.PageLayoutStart.PageStyle)},_addPageStyle:function(n,t){var i=this,u=i._getStyle(n,t),r=new $("<div class='fr-render-bglayer'><\/div>");r.attr("style",u),i.element.append(r)},writeError:function(n){var i=this,r=i.options.reportViewer.locData.errorTag,u,t;if(n.Exception.Type==="LicenseException")u=new $("<div class='fr-render-error-license Page'><div class='fr-render-error-license-container'><h3 class='fr-render-error-license-title'>Thank you for using Forerunner Mobilizer, your license has expired or is invalid.<br/> Please activate Mobilizer via the Mobilizer configuration or visit <a class='fr-render-error-license-link' href='http://www.forerunnersw.com'>www.ForerunerSW.com<\/a> for support.<\/h3><\/div><\/div>"),i.element.html(u);else if(i.element.html($("<div class='Page' ><div class='fr-render-error-message'><\/div><div class='fr-render-error-details'>"+r.moreDetail+"<\/div><div class='fr-render-error'><h3>"+r.serverError+"<\/h3><div class='fr-render-error fr-render-error-type'><\/div><div class='fr-render-error fr-render-error-targetsite'><\/div><div class='fr-render-error fr-render-error-source'><\/div><div class='fr-render-error fr-render-error-stacktrace'><\/div><\/div><\/div>")),i.options.reportViewer){t=i.element.find(".fr-render-error"),t.hide(),t=i.element.find(".fr-render-error-details");t.on("click",{$Detail:i.element.find(".fr-render-error")},function(n){n.data.$Detail.show(),$(n.target).hide()});t=i.element.find(".fr-render-error-type"),t.append("<h4>"+r.type+":<\/h4>"+n.Exception.Type),t=i.element.find(".fr-render-error-targetsite"),t.html("<h4>"+r.targetSite+":<\/h4>"+n.Exception.TargetSite),t=i.element.find(".fr-render-error-source"),t.html("<h4>"+r.source+":<\/h4>"+n.Exception.Source),t=i.element.find(".fr-render-error-message"),t.html("<h4>"+r.message+":<\/h4>"+n.Exception.Message),t=i.element.find(".fr-render-error-stacktrace"),t.html("<h4>"+r.stackTrace+":<\/h4>"+n.Exception.StackTrace)}},_writeSection:function(t){for(var i=this,u=i._getDefaultHTMLTable(),e=$("<TR/>"),h=i._getMeasurmentsObj(t.CurrObjParent,t.CurrObjIndex),o,s,f=t.CurrObj.Measurement?t.CurrObj.Measurement:t.CurrObjParent.Measurement,r=0;r<f.Count;r++)f.Measurements[r].Type==="PageHeader"&&(o=r),f.Measurements[r].Type==="PageFooter"&&(s=r);t.CurrObj.PageHeader&&u.append(i._writeHeaderFooter(t,"PageHeader",o)),t.CurrObjParent.PageHeader&&u.append(i._writeHeaderFooter(new n(t.RS,t.CurrObjParent,null,null,null,null,null),"PageHeader",o)),e.attr("Style","width:"+i._getWidth(h.Width)+"mm;"),u.append(e),$.each(t.CurrObj.Columns,function(r,u){var f=new $("<TD/>");f.append(i._writeRectangle(new n(t.RS,u,r,t.CurrObj,new $("<Div/>"),null,h))),e.append(f)}),t.CurrObj.PageFooter&&u.append(i._writeHeaderFooter(t,"PageFooter",s)),t.CurrObjParent.PageFooter&&u.append(i._writeHeaderFooter(new n(t.RS,t.CurrObjParent,null,null,null,null,null),"PageFooter",s)),t.$HTMLParent.append(u)},_writeHeaderFooter:function(t,i,r){var f=this,u,e,o;if(t.CurrObj[i])return u=$("<TR/>"),e=$("<TD/>"),u.append(e),o=f._getMeasurmentsObj(t.CurrObj,r),u.attr("Style","width:"+f._getWidth(o.Width)+"mm;"),e.append(f._writeRectangle(new n(t.RS,t.CurrObj[i],r,t.CurrObj,new $("<DIV/>"),null,o))),u},_writeRectangle:function(t){var o,e,f,i,r,u=this,s;return f=t.CurrObj.Measurement.Measurements,i=u._getRectangleLayout(f),$.each(t.CurrObj.ReportItems,function(s,h){r="",h.Type!=="Line"&&(r="display:table;border-collapse:collapse;"+u._getFullBorderStyle(h)),o=u._writeReportItems(new n(t.RS,h,s,t.CurrObj,new $("<Div/>"),r,f[s])),e=new $("<Div/>"),e.append(o),r="",i.ReportItems[s].NewHeight=h.Type==="Image"||h.Type==="Chart"||h.Type==="Gauge"||h.Type==="Map"||h.Type==="Line"?f[s].Height:u._getHeight(o),i.ReportItems[s].NewTop=i.ReportItems[s].IndexAbove===null?f[s].Top:parseFloat(i.ReportItems[i.ReportItems[s].IndexAbove].NewTop)+parseFloat(i.ReportItems[i.ReportItems[s].IndexAbove].NewHeight)+parseFloat(i.ReportItems[s].TopDelta),r+="position:absolute;top:"+i.ReportItems[s].NewTop+"mm;left:"+i.ReportItems[s].Left+"mm;",t.CurrObj.ReportItems[s].Element&&t.CurrObj.ReportItems[s].Elements.SharedElements.Style&&t.CurrObj.ReportItems[s].Elements.SharedElements.Style.BackgroundColor?r+="background-color:"+t.CurrObj.ReportItems[s].Elements.SharedElements.Style.BackgroundColor+";":t.CurrObj.ReportItems[s].Element&&t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style&&t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style.BackgroundColor&&(r+="background-color:"+t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style.BackgroundColor+";"),e.attr("Style",r),e.append(o),t.$HTMLParent.append(e)}),r="position:relative;"+u._getElementsStyle(t.RS,t.CurrObj.Elements),r+=u._getFullBorderStyle(t.CurrObj),t.CurrLocation&&(r+="width:"+u._getWidth(t.CurrLocation.Width)+"mm;",t.CurrObj.ReportItems.length===0?r+="height:"+(t.CurrLocation.Height+1)+"mm;":(s=parseFloat(i.ReportItems[i.LowestIndex].NewTop)+parseFloat(i.ReportItems[i.LowestIndex].NewHeight)+(parseFloat(t.CurrLocation.Height)-(parseFloat(f[i.LowestIndex].Top)+parseFloat(f[i.LowestIndex].Height)))+1,r+="height:"+s+"mm;")),t.$HTMLParent.attr("Style",r),t.CurrObj.Elements.NonSharedElements.UniqueName&&u._writeUniqueName(t.$HTMLParent,t.CurrObj.Elements.NonSharedElements.UniqueName),u._writeBookMark(t),t.$HTMLParent},_getRectangleLayout:function(n){var t=new i,r=this;return($.each(n,function(i,f){var e,o,s;for(t.ReportItems[i]=new u(i),e=t.ReportItems[i],e.Left=f.Left,r.isNull(t.LowestIndex)?t.LowestIndex=i:f.Top+f.Height>n[t.LowestIndex].Top+n[t.LowestIndex].Height&&(t.LowestIndex=i),o=0;o<n.length;o++)s=n[o].Top+n[o].Height,f.Top>s&&(e.IndexAbove?s>n[e.IndexAbove].Top+n[e.IndexAbove].Height&&(e.IndexAbove=o,e.TopDelta=f.Top-s):(e.IndexAbove=o,e.TopDelta=f.Top-s))}),r.options.responsive)?r._getResponsiveRectangleLayout(n,t):t},_getResponsiveRectangleLayout:function(n,t){var u=this,i=u._convertToMM(u.options.reportViewer.element.width()+"px"),r=!1;return $.each(n,function(u,f){var o=t.ReportItems[u],c,h,e,l,a,s;if(o.OrgBottom=f.Top+f.Height,o.OrgRight=f.Left+f.Width,o.OrgIndexAbove=o.IndexAbove,c=!1,h=!1,o.OrgRight>i)for(o.Left=0,e=0;e<n.length;e++)l=n[e].Top+n[e].Height,a=n[e].Left+n[e].Width,!h&&u!==e&&f.Top<n[e].Top&&o.OrgBottom>n[e].Top&&t.ReportItems[e].Left<f.Width&&(t.ReportItems[e].IndexAbove=u,t.ReportItems[e].TopDelta=1,u===t.LowestIndex&&(t.LowestIndex=t.ReportItems[e].Index),r=!0,h=!0),u!==e&&f.Top>=n[e].Top&&f.Top<l&&t.ReportItems[e].Left<f.Width&&(o.IndexAbove=e,o.TopDelta=1,e===t.LowestIndex&&(t.LowestIndex=u),c=!0,r=!0);if(r||u===n.length-1)for(s=0;s<o.Index;s++)o.IndexAbove===t.ReportItems[s].IndexAbove&&o.OrgRight<=i&&t.ReportItems[s].OrgRight>i&&(o.IndexAbove=s),(t.ReportItems[s].OrgRight>i||o.OrgRight>i)&&(o.IndexAbove===t.ReportItems[s].IndexAbove?o.IndexAbove=t.ReportItems[s].Index:t.ReportItems[s].OrgIndexAbove===o.IndexAbove&&(t.ReportItems[s].IndexAbove=o.Index))}),t},_writeReportItems:function(n){var t=this;switch(n.CurrObj.Type){case"RichTextBox":return t._writeRichText(n);case"Image":case"Chart":case"Gauge":case"Map":return t._writeImage(n);case"Tablix":return t._writeTablix(n);case"Rectangle":return t._writeRectangle(n);case"SubReport":return t._writeSubreport(n);case"Line":return t._writeLine(n)}},_writeRichText:function(n){var i=n.Style,r=$("<div/>"),u=null,t=this,f,o,s,h,a,v;if(i+="display:table;",t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0)!==""&&(i+=t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0)),i+=t._getElementsNonTextStyle(n.RS,n.CurrObj.Elements),i+="position:relative;",n.$HTMLParent.attr("Style",i),n.CurrObj.Elements.SharedElements.IsToggleParent===!0||n.CurrObj.Elements.NonSharedElements.IsToggleParent===!0){f=$("<div/>"),f.attr("id",n.CurrObj.Elements.NonSharedElements.UniqueName),f.html("&nbsp"),n.CurrObj.Elements.NonSharedElements.ToggleState!==undefined&&n.CurrObj.Elements.NonSharedElements.ToggleState===!0?f.addClass("fr-render-drilldown-collapse"):f.addClass("fr-render-drilldown-expand");f.on("click",{ToggleID:n.CurrObj.Elements.NonSharedElements.UniqueName},function(n){t.options.reportViewer.toggleItem(n.data.ToggleID)});f.addClass("fr-core-cursorpointer"),n.$HTMLParent.append(f)}if(n.CurrObj.Elements.SharedElements.CanSort!==undefined){u=$("<div/>"),u.html("&nbsp"),o="None",s=forerunner.ssr.constants.sortDirection,n.CurrObj.Elements.NonSharedElements.SortState===2?(u.attr("class","fr-render-sort-descending"),o=s.desc):n.CurrObj.Elements.NonSharedElements.SortState===1?(u.attr("class","fr-render-sort-ascending"),o=s.asc):u.attr("class","fr-render-sort-unsorted");u.on("click",{Viewer:n.RS,SortID:n.CurrObj.Elements.NonSharedElements.UniqueName,Direction:o},function(n){n.data.Viewer.sort(n.data.Direction,n.data.SortID)});n.$HTMLParent.append(u)}if(t._writeActions(n,n.CurrObj.Elements.NonSharedElements,r),n.CurrObj.Elements.NonSharedElements.UniqueName&&t._writeUniqueName(r,n.CurrObj.Elements.NonSharedElements.UniqueName),i="white-space:pre-wrap;word-break:break-word;word-wrap:break-word;",i+="margin:0;display: table-cell;",h=t._getTextDirection(n.CurrObj.Elements),h!==""?(i+="width:"+n.CurrLocation.Height+"mm;height:"+t._getWidth(n.CurrLocation.Width)+"mm;",i+="position:absolute;",a=-(t._getWidth(n.CurrLocation.Width)-n.CurrLocation.Height)/2,v=-(n.CurrLocation.Height-t._getWidth(n.CurrLocation.Width))/2,i+="left:"+v+"mm;top:"+a+"mm;",r.addClass(h)):i+="width:100%;height:100%;",n.CurrObj.Paragraphs.length===0)n.CurrObj.Elements.SharedElements.Value?(r.html(n.CurrObj.Elements.SharedElements.Value),i+=t._getElementsTextStyle(n.CurrObj.Elements)):n.CurrObj.Elements.NonSharedElements.Value?(r.html(n.CurrObj.Elements.NonSharedElements.Value),i+=t._getElementsTextStyle(n.CurrObj.Elements)):r.html("&nbsp");else{var c=null,l={},e={};e.Root="",i+="float: right",i+=t._getElementsTextStyle(n.CurrObj.Elements),$.each(n.CurrObj.Paragraphs,function(n,t){c===null&&(c=t.Paragraph.SharedElements.ListLevel),e[t.Paragraph.SharedElements.ListLevel]||(e[t.Paragraph.SharedElements.ListLevel]=[]),l[t.Paragraph.SharedElements.ListLevel]=t.Paragraph.NonSharedElements.UniqueName;var i;i=l[t.Paragraph.SharedElements.ListLevel-1]?l[t.Paragraph.SharedElements.ListLevel-1]:"Root",i={Parent:i,Value:t},e[t.Paragraph.SharedElements.ListLevel].push(i)}),t._writeRichTextItem(n,e,c,"Root",r)}return t._writeBookMark(n),r.attr("Style",i),n.$HTMLParent.append(r),u&&n.$HTMLParent.append(u),n.$HTMLParent},_writeRichTextItem:function(n,t,i,r,u){var f=null,e=this;$.each(t[i],function(o,s){var l,a,h,c,y,v;if(s.Parent===r){for(a="font-size:small;",s=s.Value,s.Paragraph.SharedElements.ListStyle===1?(f&&f.is("ol")||(f=new $("<OL />")),f.addClass(e._getListStyle(1,s.Paragraph.SharedElements.ListLevel)),l=new $("<LI />")):s.Paragraph.SharedElements.ListStyle===2?(f&&f.is("ul")||(f=new $("<UL />")),f.addClass(e._getListStyle(2,s.Paragraph.SharedElements.ListLevel)),l=new $("<LI />")):(f&&f.is("div")||(f=new $("<DIV />")),l=new $("<DIV />")),a+=e._getMeasurements(e._getMeasurmentsObj(s,i)),a+=e._getElementsStyle(n.RS,s.Paragraph),l.attr("Style",a),l.attr("name",s.Paragraph.NonSharedElements.UniqueName),h=0;h<s.TextRunCount;h++)y=!0,s.TextRuns[h].Elements.NonSharedElements.ActionInfo?(c=new $("<A />"),e._writeActions(n,s.TextRuns[h].Elements.NonSharedElements,c)):c=new $("<SPAN />"),s.TextRuns[h].Elements.SharedElements.Value&&s.TextRuns[h].Elements.SharedElements.Value!==""?c.html(s.TextRuns[h].Elements.SharedElements.Value):s.TextRuns[h].Elements.NonSharedElements.Value&&s.TextRuns[h].Elements.NonSharedElements.Value!==""?c.html(s.TextRuns[h].Elements.NonSharedElements.Value):(c.html("&nbsp"),y=!1),c.attr("Name",s.TextRuns[h].Elements.NonSharedElements.UniqueName),y&&(v="",v+=e._getMeasurements(e._getMeasurmentsObj(s.TextRuns[h],h)),v+=e._getElementsTextStyle(s.TextRuns[h].Elements),c.attr("Style",v)),l.append(c);t[i+1]&&e._writeRichTextItem(n,t,i+1,s.Paragraph.NonSharedElements.UniqueName,l),f.attr("style","width:100%;height:100%;"),f.append(l),u.append(f)}})},_writeUniqueName:function(n,t){n.attr("name",t)},_getImageURL:function(n,t){var r=this,i=r.options.reportViewer.options.reportViewerAPI+"/GetImage/?";return i+="SessionID="+r.options.reportViewer.sessionID,i+="&ImageID="+t,i+("#"+(new Date).getTime())},_writeImage:function(n){var i=new Image,t=this,r=n.Style+"display:block;max-height:100%;max-width:100%;"+t._getElementsStyle(n.RS,n.CurrObj.Elements),u,f;return r+=t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0),r+="overflow:hidden;",f=n.CurrObj.Elements.SharedElements.Sizing,u=n.CurrObj.Type==="Image"?n.CurrObj.Elements.NonSharedElements.ImageDataProperties.ImageName:n.CurrObj.Elements.NonSharedElements.StreamName,n.CurrObj.Elements.NonSharedElements.ActionImageMapAreas&&(i.useMap="#Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),i.onload=function(){var r=t._getNatural(this);t._writeActionImageMapAreas(n,i.width,i.height),t._resizeImage(this,f,r.height,r.width,n.CurrLocation.Height,n.CurrLocation.Width)},i.alt=t.options.reportViewer.locData.messages.imageNotDisplay,$(i).attr("style","display:block;"),i.src=this._getImageURL(n.RS,u),t._writeActions(n,n.CurrObj.Elements.NonSharedElements,$(i)),t._writeBookMark(n),n.CurrObj.Elements.NonSharedElements.UniqueName&&t._writeUniqueName($(i),n.CurrObj.Elements.NonSharedElements.UniqueName),n.$HTMLParent.attr("style",r),t._writeBookMark(n),n.$HTMLParent.append(i),n.$HTMLParent},_writeActions:function(n,t,i){if(t.ActionInfo)for(var r=0;r<t.ActionInfo.Count;r++)this._writeAction(n,t.ActionInfo.Actions[r],i)},_writeAction:function(n,t,i){var r=this;if(t.HyperLink)i.attr("href",t.HyperLink);else if(t.BookmarkLink){i.attr("href","#"),i.addClass("fr-core-cursorpointer");i.on("click",{BookmarkID:t.BookmarkLink},function(n){r._stopDefaultEvent(n),r.options.reportViewer.navigateBookmark(n.data.BookmarkID)})}else{i.addClass("fr-core-cursorpointer"),i.attr("href","#");i.on("click",{DrillthroughId:t.DrillthroughId},function(n){r._stopDefaultEvent(n),r.options.reportViewer.navigateDrillthrough(n.data.DrillthroughId)})}},_writeActionImageMapAreas:function(n,t,i){var l=n.CurrObj.Elements.NonSharedElements.ActionImageMapAreas,v=v,s,h,r,u,f,c,o,a,e;if(l){for(s=$("<MAP/>"),s.attr("name","Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),s.attr("id","Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),h=0;h<l.Count;h++)for(r=l.ActionInfoWithMaps[h],u=0;u<r.ImageMapAreas.Count;u++){f=$("<AREA />"),f.attr("tabindex",h+1),f.attr("style","text-decoration:none"),f.attr("alt",r.ImageMapAreas.ImageMapArea[u].Tooltip),r.Actions&&this._writeAction(n,r.Actions[0],f),o="";switch(r.ImageMapAreas.ImageMapArea[u].ShapeType){case 0:c="rect",o=parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[0]*t/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[1]*i/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[2]*t/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[3]*i/100,10);break;case 1:for(c="poly",a=r.ImageMapAreas.ImageMapArea[u].CoorCount,e=0;e<a;e++)o+=e%2==0?parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[e]*t/100,10):parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[e]*i/100,10),e<a-1&&(o+=",");break;case 2:c="circ",o=parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[0]*t/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[1]*i/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[2]*t/100,10)}f.attr("shape",c),f.attr("coords",o),s.append(f)}n.$HTMLParent.append(s)}},_resizeImage:function(n,t,i,r,u,f){var e=0,o=this,s;if(i=o._convertToMM(i+"px"),r=o._convertToMM(r+"px"),i!==0&&r!==0)switch(t){case 0:$(n).css("height",i+"mm"),$(n).css("width",r+"mm");break;case 1:$(n).css("height",u+"mm"),$(n).css("width",f+"mm");break;case 2:(i/u>1||r/f>1)&&(i/u>=r/f?(e=u/i,$(n).css("height",u+"mm"),$(n).css("width",r*e+"mm"),$(n).css("max-height",u+"mm"),$(n).css("max-width",r*e+"mm"),$(n).css("min-height",u+"mm"),$(n).css("min-width",r*e+"mm")):(e=f/r,$(n).css("width",f+"mm"),$(n).css("height",i*e+"mm"),$(n).css("max-width",f+"mm"),$(n).css("max-height",i*e+"mm"),$(n).css("min-width",f+"mm"),$(n).css("min-height",i*e+"mm")));break;case 3:s=o._getNatural(n),$(n).css("height",o._convertToMM(s.height+"px")+"mm"),$(n).css("width",o._convertToMM(s.width+"px")+"mm"),$(n).css("max-height",o._convertToMM(s.height+"px")+"mm"),$(n).css("max-width",o._convertToMM(s.width+"px")+"mm")}},_writeBookMark:function(n){var t=$("<a/>");n.CurrObj.Elements.SharedElements.Bookmark?(t.attr("name",n.CurrObj.Elements.SharedElements.Bookmark),t.attr("id",n.CurrObj.Elements.SharedElements.Bookmark)):n.CurrObj.Elements.NonSharedElements.Bookmark&&(t.attr("name",n.CurrObj.Elements.NonSharedElements.Bookmark),t.attr("id",n.CurrObj.Elements.NonSharedElements.Bookmark)),t.attr("id")&&n.$HTMLParent.append(t)},_writeTablixCell:function(t,i,u,f){var o=new $("<TD/>"),e="",s,c,h=this,l,a;return e="vertical-align:top;padding:0;margin:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-ms-box-sizing: border-box;",e+=h._getFullBorderStyle(i.Cell.ReportItem),l=i.ColumnIndex,a=h.isNull(f)?i.RowIndex:f,s=h._getWidth(t.CurrObj.ColumnWidths.Columns[l].Width),c=t.CurrObj.RowHeights.Rows[a].Height,e+="overflow:hidden;width:"+s+"mm;max-width:"+s+"mm;height:"+c+"mm;",i.RowSpan!==undefined&&o.attr("rowspan",i.RowSpan),i.ColSpan!==undefined&&o.attr("colspan",i.ColSpan),i.Cell.ReportItem.Elements.SharedElements.Style&&i.Cell.ReportItem.Elements.SharedElements.Style.BackgroundColor?e+="background-color:"+i.Cell.ReportItem.Elements.SharedElements.Style.BackgroundColor+";":i.Cell.ReportItem.Elements.NonSharedElements.Style&&i.Cell.ReportItem.Elements.NonSharedElements.Style.BackgroundColor&&(e+="background-color:"+i.Cell.ReportItem.Elements.NonSharedElements.Style.BackgroundColor+";"),o.attr("Style",e),o.append(h._writeReportItems(new n(t.RS,i.Cell.ReportItem,u,t.CurrObj,new $("<Div/>"),"margin:0;overflow:hidden;width:100%;height:100%;",new r(c,s)))),o},_writeTablix:function(n){var i=this,r=i._getDefaultHTMLTable(),h="border-collapse:collapse;padding:0;margin:0;",t,l=0,e=new $("<TABLE/>").css({display:"table",position:"absolute",top:"0px",left:"0px",padding:"0",margin:"0","border-collapse":"collapse"}),u=new $("<TABLE/>").css({display:"table",position:"absolute",top:"0px",left:"0px",padding:"0",margin:"0","border-collapse":"collapse"}),o,c,s;u.attr("CELLSPACING",0),u.attr("CELLPADDING",0);var a="",v=!1,y=!1;for(h+=i._getMeasurements(i._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex)),h+=i._getElementsStyle(n.RS,n.CurrObj.Elements),h+=i._getFullBorderStyle(n.CurrObj),r.attr("Style",h),o=$("<colgroup/>"),c=0;c<n.CurrObj.ColumnWidths.ColumnCount;c++)o.append($("<col/>").css("width",i._getWidth(n.CurrObj.ColumnWidths.Columns[c].Width)+"mm"));return r.append(o),forerunner.device.isFirefox()||(e.append(o.clone(!0,!0)),u.append(o.clone(!0,!0))),t=new $("<TR/>"),$.each(n.CurrObj.TablixRows,function(f,o){if(o.RowIndex!==l){r.append(t),n.CurrObj.RowHeights.Rows[o.RowIndex-1].FixRows===1&&e.append(t.clone(!0,!0)),t=new $("<TR/>");for(var s=l+1;s<o.RowIndex;s++)r.append(t),t=new $("<TR/>");l=o.RowIndex}o.UniqueName&&i._writeUniqueName(t,o.UniqueName),o.Type!=="Corner"&&a==="Corner"&&u.append(t.clone(!0,!0)),o.Type!=="RowHeader"&&a==="RowHeader"&&u.append(t.clone(!0,!0)),n.CurrObj.RowHeights.Rows[o.RowIndex].FixRows===1&&(v=!0),o.Type!=="BodyRow"&&n.CurrObj.ColumnWidths.Columns[o.ColumnIndex].FixColumn===1&&(y=!0),o.Type==="BodyRow"?$.each(o.Cells,function(r,u){t.append(i._writeTablixCell(n,u,r,o.RowIndex))}):o.Cell&&t.append(i._writeTablixCell(n,o,f)),a=o.Type}),r.append(t),v?e.hide():e=null,y?u.hide():u=null,s=$("<div style='position:relative'><\/div"),r.append(e),r.append(u),n.CurrObj.Elements.NonSharedElements.UniqueName&&i._writeUniqueName(r,n.CurrObj.Elements.NonSharedElements.UniqueName),n.$HTMLParent=s,i._writeBookMark(n),s.append(r),n.RS.floatingHeaders.push(new f(s,e,u)),s},_writeSubreport:function(n){var t=this;return n.Style+=t._getElementsStyle(n.RS,n.CurrObj.SubReportProperties),n.CurrObj=n.CurrObj.BodyElements,t._writeBookMark(n),t._writeRectangle(n)},_writeLine:function(n){var u=this,t=u._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),e="position:relative;width:"+t.Width+"mm;height:"+t.Height+"mm;",r;if(t.Width===0||t.Height===0)e+=u._getFullBorderStyle(n.CurrObj);else{var o=$("<Div/>"),f=Math.sqrt(Math.pow(t.Height,2)+Math.pow(t.Width,2)),i=Math.atan(t.Height/t.Width),s=f/2*Math.sin(i),h=f/2-Math.sqrt(Math.pow(f/2,2)+Math.pow(s,2));n.CurrObj.Elements.SharedElements.Slant===undefined||n.CurrObj.Elements.SharedElements.Slant===0||(i=i-2*i),r="position:absolute;top:"+s+"mm;left:"+h+"mm;",r+=u._getFullBorderStyle(n.CurrObj),r+="width:"+f+"mm;height:0;",r+="-moz-transform: rotate("+i+"rad);",r+="-webkit-transform: rotate("+i+"rad);",r+="-ms-transform: rotate("+i+"rad);",r+="transform: rotate("+i+"rad);",o.attr("Style",r),n.$HTMLParent.append(o)}return u._writeBookMark(n),n.$HTMLParent.attr("Style",e+n.Style),n.$HTMLParent},_getHeight:function(n){var r=this,i,t=n.clone().css({visibility:"hidden"});return t.find("img").remove(),$("body").append(t),i=t.outerHeight()+"px",t.remove(),r._convertToMM(i)},_getElementsStyle:function(n,t){var i="",r=this;return i+=r._getStyle(n,t.SharedElements.Style,t.NonSharedElements),i+r._getStyle(n,t.NonSharedElements.Style,t.NonSharedElements)},_getElementsTextStyle:function(n){var t="",i=this;return t+=i._getTextStyle(n.SharedElements.Style,n.NonSharedElements),t+i._getTextStyle(n.NonSharedElements.Style,n.NonSharedElements)},_getElementsNonTextStyle:function(n,t){var i="",r=this;return i+=r._getNonTextStyle(n,t.SharedElements.Style,t.NonSharedElements),i+r._getNonTextStyle(n,t.NonSharedElements.Style,t.NonSharedElements)},_getBorderSize:function(n,t){var o=this,i,f,r,e,u;return(i=n.Elements.SharedElements.Style,i?(f=i.BorderStyle,r=i["BorderStyle"+t],e=i.BorderWidth,u=i["BorderWidth"+t]):(i=n.Elements.NonSharedElements.Style,i&&(f=i.BorderStyle,r=i["BorderStyle"+t],e=i.BorderWidth,u=i["BorderWidth"+t])),!r&&f===0)?0:r===0?0:u?o._convertToMM(u):o._convertToMM(e)},_getPaddingSize:function(n,t){var u=this,i,r;return i=n.Elements.SharedElements.Style,i?r=i["Padding"+t]:(i=n.Elements.NonSharedElements.Style,i&&(r=i["Padding"+t])),u._convertToMM(r)},_getFullBorderStyle:function(n){var i=this,r="",t;return n.Elements?(t=n.Elements.SharedElements.Style,t!==undefined&&(t.BorderStyle!==undefined&&t.BorderStyle!==0&&(r+="border:"+t.BorderWidth+" "+i._getBorderStyle(t.BorderStyle)+" "+t.BorderColor+";"),(t.BorderStyleLeft!==undefined||t.BorderWidthLeft!==undefined||t.BorderColorLeft!==undefined)&&(r+="border-left:"+(t.BorderWidthLeft===undefined?t.BorderWidth:t.BorderWidthLeft)+" "+(t.BorderStyleLeft===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleLeft))+" "+(t.BorderColorLeft===undefined?t.BorderColor:t.BorderColorLeft)+";"),(t.BorderStyleRight!==undefined||t.BorderWidthRight!==undefined||t.BorderColorRight!==undefined)&&(r+="border-right:"+(t.BorderWidthRight===undefined?t.BorderWidth:t.BorderWidthRight)+" "+(t.BorderStyleRight===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleRight))+" "+(t.BorderColorRight===undefined?t.BorderColr:t.BorderColorRight)+";"),(t.BorderStyleTop!==undefined||t.BorderWidthTop!==undefined||t.BorderColorTop!==undefined)&&(r+="border-top:"+(t.BorderWidthTop===undefined?t.BorderWidth:t.BorderWidthTop)+" "+(t.BorderStyleTop===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleTop))+" "+(t.BorderColorTop===undefined?t.BorderColor:t.BorderColorTop)+";"),(t.BorderStyleBottom!==undefined||t.BorderWidthBottom!==undefined||t.BorderColorBottom!==undefined)&&(r+="border-bottom:"+(t.BorderWidthBottom===undefined?t.BorderWidth:t.BorderWidthBottom)+" "+(t.BorderStyleBottom===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleBottom))+" "+(t.BorderColorBottom===undefined?t.BorderColor:t.BorderColorBottom)+";")),t=n.Elements.NonSharedElements.Style,t!==undefined&&(t.BorderStyle!==undefined&&t.BorderStyle!==0&&(r+="border:"+t.BorderWidth+" "+i._getBorderStyle(t.BorderStyle)+" "+t.BorderColor+";"),(t.BorderStyleLeft!==undefined||t.BorderWidthLeft!==undefined||t.BorderColorLeft!==undefined)&&(r+="border-left:"+(t.BorderWidthLeft===undefined?t.BorderWidth:t.BorderWidthLeft)+" "+(t.BorderStyleLeft===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleLeft))+" "+(t.BorderColorLeft===undefined?t.BorderColor:t.BorderColorLeft)+";"),(t.BorderStyleRight!==undefined||t.BorderWidthRight!==undefined||t.BorderColorRight!==undefined)&&(r+="border-right:"+(t.BorderWidthRight===undefined?t.BorderWidth:t.BorderWidthRight)+" "+(t.BorderStyleRight===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleRight))+" "+(t.BorderColorRight===undefined?t.BorderColr:t.BorderColorRight)+";"),(t.BorderStyleTop!==undefined||t.BorderWidthTop!==undefined||t.BorderColorTop!==undefined)&&(r+="border-top:"+(t.BorderWidthTop===undefined?t.BorderWidth:t.BorderWidthTop)+" "+(t.BorderStyleTop===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleTop))+" "+(t.BorderColorTop===undefined?t.BorderColor:t.BorderColorTop)+";"),(t.BorderStyleBottom!==undefined||t.BorderWidthBottom!==undefined||t.BorderColorBottom!==undefined)&&(r+="border-bottom:"+(t.BorderWidthBottom===undefined?t.BorderWidth:t.BorderWidthBottom)+" "+(t.BorderStyleBottom===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleBottom))+" "+(t.BorderColorBottom===undefined?t.BorderColor:t.BorderColorBottom)+";")),r):""},_getMeasurementsInvert:function(n){var i=this,t="";return n?(n.Width!==undefined&&(t+="height:"+n.Width+"mm;",t+="min-height:"+n.Width+"mm;",t+="max-height:"+n.Width+"mm;"),n.Height!==undefined&&(t+="width:"+n.Height+"mm;",t+="min-width:"+n.Height+"mm;",t+="max-width:"+n.Height+"mm;"),t):""},_getMeasurements:function(n,t){var r=this,i="";return n?(n.Width!==undefined&&(i+="width:"+r._getWidth(n.Width)+"mm;",i+="min-width:"+r._getWidth(n.Width)+"mm;",i+="max-width:"+r._getWidth(n.Width)+"mm;"),t&&n.Height!==undefined&&(i+="height:"+n.Height+"mm;",i+="min-height:"+n.Height+"mm;",i+="max-height:"+n.Height+"mm;"),i):""},_getStyle:function(n,t,i){var u=this,r="";return t?(r+=u._getNonTextStyle(n,t,i),r+u._getTextStyle(t,i)):r},_backgroundRepeatTypesMap:function(){return{0:"repeat",1:"no-repeat",2:"repeat-x",3:"repeat-y"}},_getImageStyleURL:function(n,t){var i=this;return"url("+i._getImageURL(n,t)+")"},_getNonTextStyle:function(n,t){var r=this,i="";return t?(t.BackgroundColor&&(i+="background-color:"+t.BackgroundColor+";"),t.BackgroundImage&&(i+="background-image:"+r._getImageStyleURL(n,t.BackgroundImage.ImageName)+";"),t.BackgroundRepeat!==undefined&&r._backgroundRepeatTypesMap()[t.BackgroundRepeat]&&(i+="background-repeat:"+r._backgroundRepeatTypesMap()[t.BackgroundRepeat]+";"),i):i},_getTextDirection:function(n){var t="";return n.SharedElements.Style&&n.SharedElements.Style.WritingMode!==undefined&&(n.SharedElements.Style.WritingMode===1&&(t="fr-rotate-90"),n.SharedElements.Style.WritingMode===2&&(t="fr-rotate-270")),n.NonSharedElements.Style&&n.NonSharedElements.Style.WritingMode!==undefined&&(n.NonSharedElements.Style.WritingMode===1&&(t="fr-rotate-90"),n.NonSharedElements.Style.WritingMode===2&&(t="fr-rotate-270")),t},_getTextStyle:function(n,t){var r=this,i="";return n?(n.PaddingBottom!==undefined&&(i+="padding-bottom:"+n.PaddingBottom+";"),n.PaddingLeft!==undefined&&(i+="padding-left:"+n.PaddingLeft+";"),n.PaddingRight!==undefined&&(i+="padding-right:"+n.PaddingRight+";"),n.PaddingTop!==undefined&&(i+="padding-top:"+n.PaddingTop+";"),n.UnicodeBiDi!==undefined&&(i+="unicode-bidi:"+r._getBiDi(n.UnicodeBiDi)+";"),n.VerticalAlign!==undefined&&(i+="vertical-align:"+r._getVAligh(n.VerticalAlign)+";"),n.Direction!==undefined&&(i+="Direction:"+r._getDirection(n.Direction)+";"),n.TextAlign!==undefined&&(i+="text-align:"+r._getTextAlign(n.TextAlign,t)+";"),n.FontStyle!==undefined&&(i+="font-style:"+r._getFontStyle(n.FontStyle)+";"),n.FontWeight!==undefined&&(i+="font-weight:"+r._getFontWeight(n.FontWeight)+";"),n.FontFamily!==undefined&&(i+="font-family:"+n.FontFamily+";"),n.FontSize!==undefined&&(i+="font-size:"+n.FontSize+";"),n.TextDecoration!==undefined&&(i+="text-decoration:"+r._getTextDecoration(n.TextDecoration)+";"),n.Color!==undefined&&(i+="color:"+n.Color+";"),i):i},_getCalendar:function(n){switch(n){case 0:return"Gregorian";case 1:return"GregorianArabic";case 2:return"GregorianMiddleEastFrench";case 3:return"GregorianTransliteratedEnglish";case 4:return"GregorianTransliteratedFrench";case 5:return"GregorianUSEnglish";case 6:return"Hebrew";case 7:return"Hijri";case 9:return"Korean";case 10:return"Julian";case 11:return"Taiwan";case 12:return"ThaiBuddist"}return"Gregorian"},_getTextDecoration:function(n){switch(n){case 0:return"None";case 1:return"Underline";case 2:return"Overline";case 3:return"LineThrough"}return"None"},_getFontWeight:function(n){switch(n){case 0:return"Normal";case 1:return"Thin";case 2:return"ExtraLight";case 3:return"Light";case 4:return"Medium";case 5:return"SemiBold";case 6:return"Bold";case 7:return"ExtraBold";case 8:return"Heavy"}return"General"},_getFontStyle:function(n){switch(n){case 0:return"Normal";case 1:return"Italic"}return"Normal"},_getTextAlign:function(n,t){switch(n){case 0:if(t.TypeCode===undefined)return"Left";switch(t.TypeCode){case 3:case 6:case 7:case 9:case 11:case 12:case 13:case 14:case 15:case 16:return"Right";case 4:case 17:case 18:return"Left";default:return"Left"}break;case 1:return"Left";case 2:return"Center";case 3:return"Right"}},_getDirection:function(n){switch(n){case 0:return"LTR";case 1:return"RTL"}return"LTR"},_getLayoutFlow:function(n){switch(n){case 0:return"Horizontal";case 1:return"Vertical";case 2:return"Rotate270"}return"Horizontal"},_getVAligh:function(n){switch(n){case 0:return"Top";case 1:return"Middle";case 2:return"Bottom"}return"Top"},_getBiDi:function(n){switch(n){case 0:return"normal";case 1:return"embed";case 2:return"BiDiOverride"}return"normal"},_getDefaultHTMLTable:function(){var n=$("<Table/>");return n.attr("CELLSPACING",0),n.attr("CELLPADDING",0),n},_getBorderStyle:function(n){switch(n){case 0:return"None";case 1:return"Dotted";case 2:return"Dashed";case 3:return"Solid";case 4:return"Double"}return"None"},_getMeasurmentsObj:function(n,t){var i=null;return n.Measurement&&(i=n.Measurement.Measurements[t]),i},_convertToMM:function(n){if(!n)return 0;var i=n.match(/\D+$/),t=n.match(/\d+/);i.length===1&&(i=i[0]),t.length===1&&(t=t[0]);switch(i){case"px":return t/3.78;case"pt":return t*.352777777778;case"in":return t*25.4;case"mm":return t;case"cm":return t*10;case"em":return t*4.2175176}return t},_getListStyle:function(n,t){var i;if(n===1)switch(t%3){case 1:i="decimal";break;case 2:i="lower-roman";break;case 0:i="lower-latin"}else if(n===2)switch(t%3){case 0:i="square";break;case 1:i="disc";break;case 2:i="circle"}return"fr-render-list-"+i},_stopDefaultEvent:function(n){window.ActiveXObject?window.event.returnValue=!1:(n.preventDefault(),n.stopPropagation())},_getNatural:function(n){if(n.naturalWidth!==undefined&&n.naturalHeight!==undefined)return{width:n.naturalWidth,height:n.naturalHeight};var t=new Image;return t.src=n.src,{width:t.width,height:t.height}},isNull:function(n){return n===null||n===undefined?!0:!1},_getWidth:function(n){return n}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events,t="fr-param-container";$.widget(i.getFullname(i.reportParameter),{options:{$reportViewer:null,pageNum:null},$params:null,_formInit:!1,_paramCount:0,_defaultValueExist:!1,_loadedForDefault:!0,_reportDesignError:null,_savedParamExist:!1,_savedParamList:null,_savedParamCount:0,_init:function(){var n=this;n.element.html(null)},_destroy:function(){},_render:function(){var n=this,i;n.element.html(null),i=new $("<div class="+t+"><form class='fr-param-form' onsubmit='return false'><div class='fr-param-element-border'><input type='text' style='display:none'><\/div><div class='fr-param-submit-container'><input name='Parameter_ViewReport' type='button' class='fr-param-viewreport' value='"+n.options.$reportViewer.locData.paramPane.viewReport+"'/><\/div><\/form><div style='height:65px;'/><\/div>"),n.element.css("display","block"),n.element.html(i),n.$params=i,n._formInit=!0},getNumOfVisibleParameters:function(){var n=this;return n.$numVisibleParams!==undefined?n.$numVisibleParams:0},writeParameterPanel:function(i,r,u){var f=this,e,o;f.$params===null&&f._render(),f.options.pageNum=u,f._paramCount=parseInt(i.Count,10),f._defaultValueExist=i.DefaultValueExist&&!f._savedParamExist,f._loadedForDefault=!0&&!f._savedParamExist,f._render(),f.$numVisibleParams=0,e=$(".fr-param-element-border",f.$params),$.each(i.ParametersList,function(n,t){t.Prompt!==""?(e.append(f._writeParamControl(t,new $("<div />"))),f.$numVisibleParams+=1):f._checkHiddenParam(t)}),f._reportDesignError!==null&&(f._reportDesignError+="Please contact report administrator for help"),f._resetLabelWidth(),f.resetValidateMessage(),$(".fr-param-form",f.$params).validate({errorPlacement:function(n,t){$(t).is(":radio")?n.appendTo(t.parent("div").next("span")):$(t).attr("IsMultiple")==="True"?n.appendTo(t.parent("div").next("span")):n.appendTo(t.nextAll(".fr-param-error-placeholder"))},highlight:function(n){$(n).is(":radio")?$(n).parent("div").addClass("fr-param-error"):$(n).addClass("fr-param-error")},unhighlight:function(n){$(n).is(":radio")?$(n).parent("div").removeClass("fr-param-error"):$(n).removeClass("fr-param-error")}});$(".fr-param-viewreport",f.$params).on("click",function(){f._submitForm()});f._paramCount===i.DefaultValueCount&&f._loadedForDefault?f._submitForm():f._paramCount===f._savedParamCount?f._submitForm():(f._trigger(n.render),f.options.$reportViewer.removeLoadingIndicator()),o=f.element.find("."+t),o.removeAttr("style"),f._savedParamExist=!1,f._savedParamCount=0,f._setDatePicker();$(document).on("click",function(n){f._checkExternalClick(n)});$(":input",f.$params).each(function(){var n=$(this);n.on("blur",function(){$(window).scrollTop(0)});n.on("focus",function(){$(window).scrollTop(0)})})},_submitForm:function(){var t=this,i;if(t._closeAllDropdown(),t._reportDesignError!==null){forerunner.dialog.showMessageBox(t._reportDesignError);return}i=t.getParamsList(),i&&(t.options.$reportViewer.loadReportWithNewParameters(i),t._trigger(n.submit))},overrideDefaultParams:function(n){var t=this;t._savedParamList={},t._savedParamCount=0,t._savedParamExist=!0,$.each(n.ParamsList,function(n,i){t._savedParamList[i.Parameter]=i.Value,t._savedParamCount++})},_setDatePicker:function(){var n=this;$.each(n.element.find(".hasDatepicker"),function(n,t){$(t).datepicker("option","buttonImage",forerunner.config.forerunnerFolder()+"/reportviewer/Images/calendar.gif"),$(t).datepicker("option","buttonImageOnly",!0)})},_getPredefinedValue:function(n){var t=this;return t._savedParamExist?t._savedParamList[n.Name]:t._hasDefaultValue(n)?n.MultiValue===!1?n.DefaultValues[0]:n.DefaultValues:null},_writeParamControl:function(n,t){var i=this,o=new $("<div class='fr-param-label'>"+n.Name+"<\/div>"),f=!0,u=i._checkDependencies(n),e=new $("<div class='fr-param-item-container'><\/div>"),s=new $("<span class='fr-param-error-placeholder'/>"),r=null;if(n.MultiValue===!0?n.ValidValues!==""?r=i._writeDropDownWithCheckBox(n,u):(f=!1,r=i._writeDropDownWithTextArea(n,u)):r=n.ValidValues!==""?i._writeDropDownControl(n,u):n.Type==="Boolean"?i._writeRadioButton(n,u):i._writeTextArea(n,u),r!==undefined&&f)r.on("keydown",function(n){n.keyCode===13&&i._submitForm()});return e.append(r).append(i._addNullableCheckBox(n,r)).append(s),t.append(o).append(e),t},_getParameterControlProperty:function(n,t){var i=this;t.attr("AllowBlank",n.AllowBlank),n.Nullable===!1&&t.attr("required","true").watermark(i.options.$reportViewer.locData.paramPane.required),t.attr("ErrorMessage",n.ErrorMessage)},_addNullableCheckBox:function(n,t){var f=this,r,i,u;if(n.Nullable===!0){r=new $("<Span />"),i=new $("<Input type='checkbox' class='fr-param-checkbox' name='"+n.Name+"' />");i.on("click",function(){i.attr("checked")==="checked"?(i.removeAttr("checked"),n.Type==="Boolean"?$(".fr-param-radio."+n.Name).removeAttr("disabled"):t.removeAttr("disabled").removeClass("fr-param-disable").addClass("fr-param-enable")):(i.attr("checked","true"),n.Type==="Boolean"?$(".fr-param-radio."+n.Name).attr("disabled","true"):t.attr("disabled","true").removeClass("fr-param-enable").addClass("fr-param-disable"))});return u=new $("<Label class='fr-param-label-null' />"),u.html(f.options.$reportViewer.locData.paramPane.nullField),r.append(i).append(u),r}return null},_writeRadioButton:function(n,t){var u=this,o=u._getPredefinedValue(n),s=u.options.$reportViewer.locData.paramPane,i=[],e,r,f,h;for(i[0]={display:s.isTrue,value:"True"},i[1]={display:s.isFalse,value:"False"},e=new $("<div class='fr-param-checkbox-container' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' ><\/div>"),r=0;r<i.length;r++){if(f=new $("<input type='radio' class='fr-param fr-param-radio fr-paramname-"+n.Name+"' name='"+n.Name+"' value='"+i[r].value+"' id='"+n.Name+"_radio_"+i[r].value+"' datatype='"+n.Type+"' />"),t)u._disabledSubSequenceControl(e);else if(u._getParameterControlProperty(n,f),o&&(n.Nullable===!0?f.attr("disabled","true"):o===i[r].value&&f.attr("checked","true")),u._paramCount===1)f.on("click",function(){u._submitForm()});h=new $("<label class='fr-param-radio-label' for='"+n.Name+"_radio_"+i[r].value+"'>"+i[r].display+"<\/label>"),e.append(f),e.append(h)}return e},_writeTextArea:function(n,t){var r=this,u=r._getPredefinedValue(n),i=new $("<input class='fr-param fr-paramname-"+n.Name+"' name='"+n.Name+"' type='text' size='100' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' />");if(t)return r._disabledSubSequenceControl(i),i;r._getParameterControlProperty(n,i);switch(n.Type){case"DateTime":i.datepicker({showOn:"button",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,showButtonPanel:!0,gotoCurrent:!0,closeText:"Close",onClose:function(){i.removeAttr("disabled"),$(".fr-paramname-"+n.Name,r.$params).valid(),r._paramCount===1&&r._submitForm()},beforeShow:function(){i.attr("disabled",!0)}}),i.attr("dateISO","true"),u&&i.datepicker("setDate",r._getDateTimeFromDefault(u));break;case"Integer":case"Float":i.attr("number","true"),u&&i.val(u);break;case"String":u&&i.val(u)}return i},_writeDropDownControl:function(n,t){var r=this,o=!1,s=r._getPredefinedValue(n),i=$("<select class='fr-param fr-param-select fr-paramname-"+n.Name+"' name='"+n.Name+"' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' readonly='true'>"),h,u,f,e;if(t)return r._disabledSubSequenceControl(i),i;for(r._getParameterControlProperty(n,i),h=new $("<option value=''>&#60Select a Value&#62<\/option>"),i.append(h),u=0;u<n.ValidValues.length;u++)f=n.ValidValues[u].Value,e=new $("<option value='"+f+"'>"+n.ValidValues[u].Key+"<\/option>"),s&&s===f&&(e.attr("selected","true"),o=!0),i.append(e);if(o||(r._loadedForDefault=!1),r._paramCount===1)i.on("change",function(){r._submitForm()});return i},_writeDropDownWithCheckBox:function(n,t){var i=this,c=i._getPredefinedValue(n),e=new $("<div style='display:inline-block;'/>"),u=new $("<Input type='text' class='fr-param-client fr-param-dropdown-textbox fr-paramname-"+n.Name+"' name='"+n.Name+"' readonly='true' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"'/>"),l=new $("<Img class='fr-param-dropdown-img fr-paramname-"+n.Name+"-img' alt='Open DropDown List' src='"+forerunner.config.forerunnerFolder()+"/ReportViewer/images/OpenDropDown.png' />"),a,v,y,o,s,f,h,r,p,b;if(t)return i._disabledSubSequenceControl(u),e.append(u).append(l),e;i._getParameterControlProperty(n,u),a=new $("<Input class='fr-param fr-paramname-"+n.Name+"-hidden' name='"+n.Name+"' type='hidden' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"'/>");l.on("click",function(){i._popupDropDownPanel(n)});u.on("click",function(){i._popupDropDownPanel(n)});for(v=new $("<div class='fr-param-dropdown fr-paramname-"+n.Name+"-dropdown-container' value='"+n.Name+"' />"),y=i._getDefaultHTMLTable(),n.ValidValues.push({Key:"Select All",Value:"Select All"}),o="",s="",f=0;f<n.ValidValues.length;f++){f===0?(p=n.ValidValues[n.ValidValues.length-1],h=p.Key,r=p.Value):(h=n.ValidValues[f-1].Key,r=n.ValidValues[f-1].Value);var k=new $("<TR />"),d=new $("<TD/>"),g=new $("<Span />"),w=new $("<input type='checkbox' class='fr-param-dropdown-checkbox fr-paramname-"+n.Name+"-dropdown-cb' id='"+n.Name+"_DropDown_"+r+"' value='"+r+"' />");c&&i._contains(c,r)&&(w.attr("checked","true"),o+=h+",",s+=r+",");w.on("click",function(){this.value==="Select All"&&(this.checked===!0&&$(".fr-paramname-"+n.Name+"-dropdown-cb",i.$params).each(function(){this.checked=!0}),this.checked===!1&&$(".fr-paramname-"+n.Name+"-dropdown-cb",i.$params).each(function(){this.checked=!1}))});b=new $("<label for='"+n.Name+"_DropDown_"+r+"' class='fr-param-dropdown-label fr-paramname-"+n.Name+"-dropdown-"+r+"-lable' />"),b.html(h),g.append(w).append(b),d.append(g),k.append(d),y.append(k)}return v.append(y),c&&(u.val(o.substr(0,o.length-1)),a.val(s.substr(0,s.length-1))),e.append(u).append(a).append(l).append(v),e},_writeDropDownWithTextArea:function(n,t){var i=this,f=i._getPredefinedValue(n),u=new $("<div style='display:inline-block;'/>"),r=new $("<Input type='text' name='"+n.Name+"' class='fr-param fr-param-dropdown-textbox fr-paramname-"+n.Name+"' readonly='true' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' />"),e=new $("<Img class='fr-param-dropdown-img fr-paramname-"+n.Name+"-img' alt='Open DropDown List' src='"+forerunner.config.forerunnerFolder()+"/ReportViewer/images/OpenDropDown.png' />"),o,s;if(t)return i._disabledSubSequenceControl(r),u.append(r).append(e),u;i._getParameterControlProperty(n,r);r.on("click",function(){i._popupDropDownPanel(n)});e.on("click",function(){i._popupDropDownPanel(n)});return o=new $("<div class='fr-param-dropdown fr-paramname-"+n.Name+"-dropdown-container' value='"+n.Name+"' />"),s=new $("<textarea class='fr-param-dropdown-textarea fr-paramname-"+n.Name+"-dropdown-textArea' />"),f&&(s.val(i._getTextAreaValue(f,!0)),r.val(i._getTextAreaValue(f,!1))),o.append(s),u.append(r).append(e).append(o),u},_getTextAreaValue:function(n,t){var i="",r,u;if(t)for(r=0;r<n.length;r++)i+=n[r]+"\n";else{for(u=0;u<n.length;u++)i+=n[u]+",";i=i.substr(0,i.length-1)}return i},_setMultipleInputValues:function(n){var i=this,t,e,r=$(".fr-paramname-"+n.Name,i.$params).filter(":visible"),u,f;e=r.val(),r.hasClass("fr-param-client")?(u="",f="",$(".fr-paramname-"+n.Name+"-dropdown-cb",i.$params).each(function(){this.checked&&this.value!=="Select All"&&(u+=$(".fr-paramname-"+n.Name+"-dropdown-"+this.value+"-lable",i.$params).html()+",",f+=this.value+",")}),t=u.substr(0,u.length-1),$(".fr-paramname-"+n.Name,i.$params).val(t),$(".fr-paramname-"+n.Name+"-hidden",i.$params).val(f.substr(0,f.length-1))):(t=$(".fr-paramname-"+n.Name+"-dropdown-textArea",i.$params).val(),t=t.replace(/\n+/g,","),t.charAt(t.length-1)===","&&(t=t.substr(0,t.length-1)),r.val(t)),e!==t&&r.change()},_popupDropDownPanel:function(n){var t=this,e=$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params).is(":visible");if(t._closeAllDropdown(),!e){var u=t.$params,i=$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params),r=$(".fr-paramname-"+n.Name,t.$params),f=r.offset().top;u.height()-f-r.height()<i.height()?i.css("top",f-u.offset().top-i.height()-10):i.css("top",f-u.offset().top+r.height()+10),i.is(":hidden")?i.width(r.width()).addClass("fr-param-dropdown-show").show(10):t._closeDropDownPanel(n)}},_closeDropDownPanel:function(n){var t=this;t._setMultipleInputValues(n),$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params).removeClass("fr-param-dropdown-show").hide()},_closeAllDropdown:function(){var n=this;$(".fr-param-dropdown-show",n.$params).filter(":visible").each(function(t,i){n._closeDropDownPanel({Name:$(i).attr("value")})})},_checkExternalClick:function(n){var i=this,t=$(n.target);t.hasClass("fr-param-dropdown-img")||t.hasClass("fr-param-dropdown-textbox")||t.hasClass("fr-param-dropdown")||t.hasClass("fr-param-dropdown-label")||t.hasClass("fr-param-dropdown-checkbox")||t.hasClass("fr-param-dropdown-textarea")||i._closeAllDropdown()},getParamsList:function(n){var r=this,i,t,u,e,f;if(n||$(".fr-param-form",r.$params).length!==0&&$(".fr-param-form",r.$params).valid()===!0){t=[],$(".fr-param",r.$params).filter(":text").each(function(){t.push({name:this.name,ismultiple:$(this).attr("ismultiple"),type:$(this).attr("datatype"),value:r._isParamNullable(this)})}),$(".fr-param",r.$params).filter("[type='hidden']").each(function(){t.push({name:this.name,ismultiple:$(this).attr("ismultiple"),type:$(this).attr("datatype"),value:r._isParamNullable(this)})}),$(".fr-param",r.$params).filter("select").each(function(){t.push({name:this.name,ismultiple:$(this).attr("ismultiple"),type:$(this).attr("datatype"),value:r._isParamNullable(this)})}),u={},$(".fr-param",r.$params).filter(":radio").each(function(){this.name in u||(u[this.name]=null),this.checked===!0&&(u[this.name]=r._isParamNullable(this))});for(e in u)t.push({name:e,ismultiple:"",type:"Boolean",value:u[e]});for(f="[",i=0;i<t.length;i++)f+=i!==t.length-1?'{"Parameter":"'+t[i].name+'","IsMultiple":"'+t[i].ismultiple+'","Type":"'+t[i].type+'","Value":"'+t[i].value+'"},':'{"Parameter":"'+t[i].name+'","IsMultiple":"'+t[i].ismultiple+'","Type":"'+t[i].type+'","Value":"'+t[i].value+'"}';return f+="]",'{"ParamsList":'+f+"}"}return null},_isParamNullable:function(n){var t=$(".fr-param-checkbox",this.$params).filter(".fr-paramname-"+n.Name).first();return t.attr("checked")==="checked"||n.value===""?null:n.value},_resetLabelWidth:function(){var n=0;$(".fr-param-label",this.$params).each(function(t,i){$(i).width()>n&&(n=$(i).width())}),$(".fr-param-label",this.$params).each(function(t,i){$(i).width(n)})},resetValidateMessage:function(){var t=this,n=t.options.$reportViewer.locData.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,remote:n.remote,email:n.email,url:n.url,date:n.date,dateISO:n.dateISO,number:n.number,digits:n.digits,maxlength:$.validator.format(n.maxlength),minlength:$.validator.format(n.minlength),rangelength:$.validator.format(n.rangelength),range:$.validator.format(n.range),max:$.validator.format(n.max),min:$.validator.format(n.min)})},removeParameter:function(){var n=this;n._formInit=!1,n.$params=null,$("."+t,n.element).detach()},_getDefaultHTMLTable:function(){return $("<Table cellspacing='0' cellpadding='0'/>")},_contains:function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1},_hasDefaultValue:function(n){var t=this;return t._defaultValueExist&&$.isArray(n.DefaultValues)},_getDateTimeFromDefault:function(n){if(!n||n.length<9)return null;if(/^(\d{4})-(0\d{1}|1[0-2])-(0\d{1}|[12]\d{1}|3[01])$/.test(n))return n;var t=new Date(n.substr(0,n.indexOf(" ")));return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},_checkDependencies:function(n){var t=this,i=!1;return $.isArray(n.Dependencies)&&n.Dependencies.length&&$.each(n.Dependencies,function(n,r){var u=$(".fr-paramname-"+r,t.$params);u.change(function(){t.refreshParameters()}),u.val()===""&&(i=!0)}),i},refreshParameters:function(t){var i=this,r=t?t:i.getParamsList(!0);r&&i._trigger(n.loadCascadingParam,null,{reportPath:i.options.$reportViewer.options.reportPath,paramList:r})},_disabledSubSequenceControl:function(n){n.attr("disabled",!0).addClass("fr-param-disable")},_checkHiddenParam:function(n){var t=this;t._hasDefaultValue(n)||(t._reportDesignError===null&&(t._reportDesignError=""),t._reportDesignError+="The '"+n.Name+"' parameter is missing a value <\/br>")}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportDocumentMap),{options:{$reportViewer:null},_create:function(){},_init:function(){},write:function(n){var i=this,t;this.element.html(""),t=new $("<DIV />"),t.addClass("fr-docmap-panel").addClass("fr-docmap-panel-layout"),t.append(i._writeDocumentMapItem(n.DocumentMap,0)),i.element.append(t)},_writeDocumentMapItem:function(n,t){var e=this,i=new $("<div />"),u,f,r,o;t!==0&&i.css("margin-left","34px"),u=new $("<div />"),u.addClass("fr-docmap-item").attr("title","Navigate to "+n.Label).html(n.Label);u.on("click",{UniqueName:n.UniqueName},function(n){e.options.$reportViewer.navigateDocumentMap(n.data.UniqueName)});if(n.Children){f=new $("<DIV />"),f.addClass("fr-docmap-parent-container"),e._setFocus(f),r=new $("<div class='fr-docmap-icon'/>"),t===0?r.addClass("fr-docmap-icon-up"):r.addClass("fr-docmap-icon-down");r.on("click",function(){var n=i.find("[level='"+t+"']");n.is(":visible")?(i.find("[level='"+t+"']").slideUpHide(),r.removeClass("fr-docmap-icon-up").addClass("fr-docmap-icon-down")):(i.find("[level='"+t+"']").slideUpShow(),r.removeClass("fr-docmap-icon-down").addClass("fr-docmap-icon-up"))});u.addClass("fr-docmap-item-root"),f.append(r),f.append(u),i.append(f),o=new $("<div level='"+t+"'>"),$.each(n.Children,function(n,i){o.append(e._writeDocumentMapItem(i,t+1))}),i.append(o),t!==0&&o.hide()}else i.addClass("fr-docmap-item-container"),e._setFocus(i),i.append(u);return i},_setFocus:function(n){n.hover(function(){$(this).addClass("fr-docmap-item-highlight")},function(){$(this).removeClass("fr-docmap-item-highlight")})}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.reportPrint),{options:{$reportViewer:null},_create:function(){},_init:function(){var n=this;this._printOpen=!1},_printOpen:!1,setPrint:function(n){var t=this,i=t.options.$reportViewer.locData.print,r=i.unit,u;t.element.html(""),u=new $("<div class='fr-print-page'><div class='fr-print-innerPage fr-print-layout'><div class='fr-print-title'>"+i.title+"<\/div><form class='fr-print-form'><fidleset><div><label class='fr-print-label'>"+i.pageHeight+":<\/label><input class='fr-print-text' name='PageHeight' type='text' value="+t._unitConvert(n.PageHeight)+" /><label class='fr-print-unit-label'>"+r+"<\/label><\/div><div><label class='fr-print-label'>"+i.pageWidth+":<\/label><input class='fr-print-text' name='PageWidth' type='text' value="+t._unitConvert(n.PageWidth)+" /><label class='fr-print-unit-label'>"+r+"<\/label><\/div><div><label class='fr-print-label'>"+i.marginTop+":<\/label><input class='fr-print-text' name='MarginTop' type='text' value="+t._unitConvert(n.MarginTop)+" /><label class='fr-print-unit-label'>"+r+"<\/label><\/div><div><label class='fr-print-label'>"+i.marginBottom+":<\/label><input class='fr-print-text' name='MarginBottom' type='text' value="+t._unitConvert(n.MarginBottom)+" /><label class='fr-print-unit-label'>"+r+"<\/label><\/div><div><label class='fr-print-label'>"+i.marginLeft+":<\/label><input class='fr-print-text' name='MarginLeft' type='text' value="+t._unitConvert(n.MarginLeft)+" /><label class='fr-print-unit-label'>"+r+"<\/label><\/div><div><label class='fr-print-label'>"+i.marginRight+":<\/label><input class='fr-print-text' name='MarginRight' type='text' value="+t._unitConvert(n.MarginRight)+" /><label class='fr-print-unit-label'>"+r+"<\/label><\/div><div class='fr-print-button-group'><input class='fr-print-button fr-print-cancel fr-rounded' name='Cancel' type='button' value='"+i.cancel+"' /><input class='fr-print-button fr-print-submit fr-rounded' name='submit' type='button' value='"+i.print+"' /><\/div><\/fidleset><\/form><\/div><\/div>"),t.element.append(u),t.element.find(".fr-print-text").each(function(){$(this).attr("required","true").attr("number","true"),$(this).parent().addClass("fr-print-item").append($("<span class='fr-print-error-span'/>").clone())}),t._resetValidateMessage(),t._validateForm(t.element.find(".fr-print-form"));t.element.find(".fr-print-submit").on("click",function(){var n=t._generatePrintProperty();n!==null&&(t.options.$reportViewer.printReport(t._generatePrintProperty()),t.options.$reportViewer.showPrint())});t.element.find(".fr-print-cancel").on("click",function(){t.options.$reportViewer.showPrint()})},togglePrintPane:function(){var n=this;n._printOpen?(n.element.unmask().hide(),n._printOpen=!1,n._trigger(t.hidePrint)):(n.element.mask().show(),n._printOpen=!0,n._trigger(t.showPrint))},closePrintPane:function(){var n=this;n._printOpen===!0&&n.togglePrintPane()},_validateForm:function(n){n.validate({errorPlacement:function(n,t){n.appendTo($(t).parent().find("span"))},highlight:function(n){$(n).parent().find("span").addClass("fr-print-error-position"),$(n).addClass("fr-print-error")},unhighlight:function(n){$(n).parent().find("span").removeClass("fr-print-error-position"),$(n).removeClass("fr-print-error")}})},_generatePrintProperty:function(){var r=this,t=[],i,n;if(r.element.find(".fr-print-form").valid()===!0){for(r.element.find(".fr-print-text").each(function(){t.push({key:this.name,value:r._generateUnitConvert(this.value)})}),i="[",n=0;n<t.length;n++)i+=n!==t.length-1?'{"key":"'+t[n].key+'","value":"'+t[n].value+'"},':'{"key":"'+t[n].key+'","value":"'+t[n].value+'"}';return i+="]",'{"PrintPropertyList":'+i+"}"}return null},_resetValidateMessage:function(){var t=this,n=t.options.$reportViewer.locData.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,number:n.number,digits:n.digits})},_unitConvert:function(n){var t=this;return t.options.$reportViewer.locData.print.unit==="in"?Math.round(n/25.4*100)/100:n},_generateUnitConvert:function(n){var t=this;return t.options.$reportViewer.locData.print.unit==="mm"?Math.round(n/25.4*100)/100:n}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr,i=n.constants.toolTypes,t=forerunner.ssr.constants.events;n.DefaultAppTemplate=function(n){var t=this;t.options={$container:null,isFullScreen:!0},n&&$.extend(this.options,n)},n.DefaultAppTemplate.prototype={render:function(){var n=this,u=n.options.$container,i,e,o,s,t,f,h,c,l,a,v,r,y,p,w;return u.addClass("fr-layout-container"),n.$container=u,i=new $("<div />"),i.addClass("fr-layout-leftpane"),n.$leftpane=i,e=new $("<div />"),e.addClass("fr-layout-leftheader"),n.$leftheader=e,o=new $("<div />"),o.addClass("fr-layout-leftheaderspacer"),n.$leftheaderspacer=o,s=new $("<div />"),s.addClass("fr-layout-leftpanecontent"),n.$leftpanecontent=s,i.append(e),i.append(o),i.append(s),u.append(i),t=new $("<div />"),t.addClass("fr-layout-mainviewport"),n.$mainviewport=t,u.append(t),n.$printsection=new $("<div />"),n.$printsection.addClass("fr-layout-printsection"),n.$printsection.addClass("fr-dialog"),t.append(n.$printsection),f=new $("<div />"),f.addClass("fr-layout-topdiv"),n.$topdiv=f,t.append(f),h=new $("<div />"),h.addClass("fr-layout-mainheadersection"),n.$mainheadersection=h,f.append(h),c=new $("<div />"),c.addClass("fr-layout-topdivspacer"),n.$topdivspacer=c,t.append(c),l=new $("<div />"),l.addClass("fr-layout-pagesection"),n.$pagesection=l,t.append(l),n.$mainsection=new $("<div />"),n.$mainsection.addClass("fr-layout-mainsection"),n.$pagesection.append(n.$mainsection),n.$docmapsection=new $("<div />"),n.$docmapsection.addClass("fr-layout-docmapsection"),n.$pagesection.append(n.$docmapsection),a=new $("<div />"),a.addClass("fr-layout-bottomdiv"),n.$bottomdiv=a,t.append(a),v=new $("<div />"),v.addClass("fr-layout-bottomdivspacer"),n.$bottomdivspacer=v,t.append(v),r=new $("<div />"),r.addClass("fr-layout-rightpane"),n.$rightpane=r,y=new $("<div />"),y.addClass("fr-layout-rightheader"),n.$rightheader=y,p=new $("<div />"),p.addClass("fr-layout-rightheaderspacer"),n.$rightheaderspacer=p,w=new $("<div />"),w.addClass("fr-layout-rightpanecontent"),n.$rightpanecontent=w,r.append(y),r.append(p),r.append(w),u.append(r),n.options.isFullScreen||n._makePositionAbsolute(),n.bindEvents(),setInterval(function(){n.toggleZoom()},100),this},_makePositionAbsolute:function(){var n=this;n.$topdiv.addClass("fr-layout-position-absolute"),n.$leftheader.addClass("fr-layout-position-absolute"),n.$rightheader.addClass("fr-layout-position-absolute"),n.$leftpane.addClass("fr-layout-position-absolute"),n.$rightpane.addClass("fr-layout-position-absolute"),n.$leftpanecontent.addClass("fr-layout-position-absolute"),n.$rightpanecontent.addClass("fr-layout-position-absolute")},bindEvents:function(){var n=this,t=forerunner.ssr.constants.events,r=$(".fr-layout-mainheadersection",n.$container),i;r.on(t.toolbarMenuClick(),function(){n.showSlideoutPane(!0)});r.on(t.toolbarParamAreaClick(),function(){n.showSlideoutPane(!1)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterRender(),function(){n.showSlideoutPane(!1)});$(".fr-layout-leftheader",n.$container).on(t.toolbarMenuClick(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-rightheader",n.$container).on(t.toolbarParamAreaClick(),function(){n.hideSlideoutPane(!1)});$(".fr-layout-leftpanecontent",n.$container).on(t.toolPaneActionStarted(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterSubmit(),function(){n.hideSlideoutPane(!1)});$(".fr-layout-printsection",n.$container).on(t.reportPrintShowPrint(),function(){n.$container.css("overflow","hidden"),n.$container.scrollTop(0).scrollLeft(0),window.scrollTo(0,0)});$(".fr-layout-printsection",n.$container).on(t.reportPrintHidePrint(),function(){n.$container.css("overflow","auto")});if(i=forerunner.device.isTouch(),!n.options.isFullScreen){if(i){$(n.$container).hammer({stop_browser_behavior:{userSelect:!1},swipe_max_touches:22,drag_max_touches:2}).on("touch release",function(t){if(t.gesture)switch(t.type){case"touch":if(n._containElement(t.target,"fr-layout-topdiv")||n.$container.hasClass("fr-layout-container-noscroll"))return;n.$topdiv.hide();break;case"release":t.gesture.velocityX===0&&t.gesture.velocityY===0&&n._updateTopDiv(n)}});$(n.$container).on("scrollstop",function(){n._updateTopDiv(n)})}$(n.$container).on("touchmove",function(t){if(n.$container.hasClass("fr-layout-container-noscroll")){var i=n._containElement(t.target,"fr-layout-leftpane")||n._containElement(t.target,"fr-layout-rightpane");i||t.preventDefault()}})}if($(window).resize(function(){n.ResetSize(),n._updateTopDiv(n)}),!n.options.isFullScreen&&!i){$(window).on("scroll",function(){n._updateTopDiv(n)});n.$container.on("scroll",function(){n._updateTopDiv(n)})}},_containElement:function(n,t){var r=!1,i;if($(n).hasClass(t))r=!0;else for(i=n.parentElement;i!==undefined&&i!=null;){if($(i).hasClass(t)){r=!0;break}i=i.parentElement}return r},_updateTopDiv:function(n){n.options.isFullScreen||(n.$leftpane.is(":visible")?n.$leftpane.css("top",n.$container.scrollTop()):n.$rightpane.is(":visible")&&n.$rightpane.css("top",n.$container.scrollTop()),n.$topdiv.css("top",n.$container.scrollTop()),n.$topdiv.css("left",n.$container.scrollLeft()),n.isZoomed()||n.$topdiv.show())},toggleZoom:function(){var n=this,i=forerunner.device.zoomLevel(),t;if(n.isZoomed()&&!n.wasZoomed){forerunner.device.isAndroid()&&n.$topdiv.is(":visible")&&n.$topdiv.fadeOut(10).fadeIn(10),n.wasZoomed=!0;return}!n.isZoomed()&&n.wasZoomed&&(forerunner.device.isAndroid()&&n.$topdiv.is(":visible")&&n.$topdiv.fadeOut(10).fadeIn(10),t=$(".fr-layout-reportviewer",n.$container),t.reportViewer("allowZoom",!1),n.wasZoomed=!1)},wasZoomed:!1,isZoomed:function(){var n=forerunner.device.zoomLevel();return n>1.15||n<.985?!0:!1},getHeightValues:function(){var t=this,n={};return n.windowHeight=$(window).height(),n.containerHeight=t.$container.height(),forerunner.device.isiOS()?(n.windowHeight=document.documentElement.clientHeight,!forerunner.device.isiPhone()||forerunner.device.isiPhoneFullscreen()||forerunner.device.isStandalone()||(n.windowHeight+=60,n.containerHeight+=60)):forerunner.device.isAndroid()&&(n.windowHeight=window.innerHeight),n.max=Math.max(n.windowHeight,n.containerHeight),n.paneHeight=n.windowHeight-38,n},ResetSize:function(){var n=this,t=n.getHeightValues();forerunner.device.isiPhone()&&$("body").css({minHeight:t.max}),n.$leftpanecontent.css({height:t.paneHeight}),n.$rightpanecontent.css({height:t.paneHeight}),n.$leftpane.css({height:t.max}),n.$rightpane.css({height:t.max}),n.$mainviewport.css({height:"100%"}),$(".fr-param-container",n.$container).css({height:"100%"})},bindViewerEvents:function(){var n=this,i=forerunner.ssr.constants.events,t=$(".fr-layout-reportviewer",n.$container),r;n.$viewer=t;t.on(i.reportViewerDrillBack(),function(){n.hideSlideoutPane(!1)});t.on(i.reportViewerDrillThrough(),function(){n.hideSlideoutPane(!0),n.hideSlideoutPane(!1)});t.on(i.reportViewerShowNav(),function(t,i){var r=n.$bottomdivspacer;i.open?(r.show(),forerunner.device.isSmall()&&n.$pagesection.hide()):(r.hide(),n.$pagesection.show())});t.on(i.reportViewerShowDocMap(),function(){n.$container.addClass("fr-docmap-background")});t.on(i.reportViewerHideDocMap(),function(){n.$container.removeClass("fr-docmap-background")});t.on(i.reportViewerallowZoom(),function(i,r){r.isEnabled===!0?(n.$topdiv.hide(),t.reportViewer("option","toolbarHeight",0)):(n.$topdiv.show(),t.reportViewer("option","toolbarHeight",n.$topdiv.outerHeight()))});t.on(i.reportViewerSetPageDone(),function(){var t=$(".fr-report-areacontainer"),i,r;n.options.isFullScreen?$(".fr-render-bglayer").css("position","fixed").css("top",38).css("height",Math.max(t.height(),document.documentElement.clientHeight-38)).css("width",Math.max(t.width(),document.documentElement.clientWidth)):(i=t.height()-38,r=t.width(),t.height()>document.documentElement.clientHeight-38&&(i=document.documentElement.clientHeight-38),t.width()>document.documentElement.clientWidth&&(r=document.documentElement.clientWidth),$(".fr-render-bglayer").css("position","absolute").css("top",38).css("height",i).css("width",r))});t.on(i.reportViewerChangePage(),function(){n.$pagesection.show()});if(r=forerunner.device.isTouch(),r&&!n.options.isFullScreen)n.$pagesection.on("scrollstop",function(){n._updateTopDiv(n)})},getScrollPosition:function(){var n={};return n.left=$(window).scrollLeft(),n.top=$(window).scrollTop(),n},scrollToPosition:function(n){var t=this;t.savePosition=t.getScrollPosition(),$(window).scrollLeft(n.left),$(window).scrollTop(n.top)},restoreScrollPosition:function(){var n=this;n.savePosition&&($(window).scrollLeft(n.savePosition.left),$(window).scrollTop(n.savePosition.top),n.savePosition=null)},hideAddressBar:function(){var n=this;document.height<=window.outerHeight+10?setTimeout(function(){n.scrollToPosition({left:0,top:1})},50):setTimeout(function(){n.scrollToPosition({left:0,top:1})},0)},restoreScroll:function(){var n=this;document.height<=window.outerHeight+10?setTimeout(function(){n.restoreScrollPosition()},50):setTimeout(function(){n.restoreScrollPosition()},0)},hideSlideoutPane:function(n){var i=this,f=n?"fr-layout-mainViewPortShiftedRight":"fr-layout-mainViewPortShiftedLeft",o=i.$mainviewport,r=n?i.$leftpane:i.$rightpane,e=i.$topdiv,u=Number(200);r.is(":visible")&&(n?r.slideLeftHide(u*.5):r.slideRightHide(u*.5),e.removeClass(f,u),i.$mainheadersection.toolbar("showAllTools")),i.$pagesection.removeClass("fr-layout-pagesection-noscroll"),i.$container.removeClass("fr-layout-container-noscroll"),i.restoreScroll(),i.$viewer!==undefined&&i.$viewer.is(":visible")&&i.$viewer.reportViewer("triggerEvent",t.reportViewerHidePane())},showSlideoutPane:function(n){var i=this;i.$container.addClass("fr-layout-container-noscroll"),forerunner.device.allowZoom(!1),i.$container.resize();var f=n?"fr-layout-mainViewPortShiftedRight":"fr-layout-mainViewPortShiftedLeft",e=i.$mainviewport,r=n?i.$leftpane:i.$rightpane,o=i.$topdiv,u=Number(200);r.is(":visible")||(r.css({height:Math.max($(window).height(),e.height())}),n?(r.css({top:i.$container.scrollTop()}),r.slideLeftShow(u)):(r.css({top:i.$container.scrollTop()}),r.slideRightShow(u)),o.addClass(f,u),forerunner.device.allowZoom(!1),i.$mainheadersection.toolbar("hideAllTools")),i.$pagesection.addClass("fr-layout-pagesection-noscroll"),i.hideAddressBar(),i.$viewer!==undefined&&i.$viewer.is(":visible")&&i.$viewer.reportViewer("triggerEvent",t.reportViewerShowPane())},toggleSlideoutPane:function(n){var t=this,i=n?t.$leftpane:t.$rightpane;i.is(":visible")?this.hideSlideoutPane(n):this.showSlideoutPane(n)},_selectedItemPath:null}}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var t=forerunner.ssr,n=forerunner.ssr.constants.events,i=t.constants.toolTypes,r=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer");t.ReportViewerInitializer=function(n){this.options={$toolbar:null,$toolPane:null,$viewer:null,$nav:null,$paramarea:null,$lefttoolbar:null,$righttoolbar:null,$docMap:null,$print:null,ReportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportViewer",ReportManagerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager",ReportPath:null,toolbarHeight:null,navigateTo:null,isReportManager:!1},n&&$.extend(this.options,n)},t.ReportViewerInitializer.prototype={render:function(){var t=this,i=t.options.$viewer,u,f,l,s,e,o,h,r,c;if(t.options.$docMap.hide(),i.reportViewer({reportViewerAPI:t.options.ReportViewerAPI,reportPath:t.options.ReportPath,pageNum:1,docMapArea:t.options.$docMap}),u=t.options.$toolbar,u.toolbar({$reportViewer:i,$ReportViewerInitializer:this}),f=forerunner.ssr.tools.mergedButtons,t.options.isReportManager&&(u.toolbar("addTools",12,!0,[f.btnHome,f.btnFavorite]),u.toolbar("addTools",3,!0,[f.btnFav]),u.toolbar("disableTools",[f.btnFav])),i.reportViewer("option","toolbarHeight",u.outerHeight()),l=t.options.$lefttoolbar,l!==null&&l.toolbar({$reportViewer:i,$ReportViewerInitializer:this,toolClass:"fr-toolbar-slide"}),s=t.options.$righttoolbar,s!==null&&s.toolbar({$reportViewer:i,$ReportViewerInitializer:this,toolClass:"fr-toolbar-slide"}),t.options.isReportManager){s.toolbar("addTools",2,!0,[f.btnSavParam]);i.on(n.reportViewerShowParamArea(),function(n,i){$.ajax({url:t.options.ReportManagerAPI+"/GetUserParameters?reportPath="+i.reportPath,dataType:"json",async:!1,success:function(n){n.ParamsList&&r.reportParameter("overrideDefaultParams",n)}})})}if(e=forerunner.ssr.tools.mergedItems,o=t.options.$toolPane.toolPane({$reportViewer:i,$ReportViewerInitializer:this}),t.options.isReportManager){o.toolPane("addTools",2,!0,[e.itemHome]),o.toolPane("addTools",4,!0,[e.itemFav]),o.toolPane("disableTools",[e.itemFav]);i.on(n.reportViewerChangePage(),function(){o.toolPane("enableTools",[e.itemFav]),u.toolbar("enableTools",[f.btnFav])});i.on(n.reportViewerDrillThrough(),function(){t.setFavoriteState(i.reportViewer("option","reportPath"))});i.on(n.reportViewerDrillBack(),function(){t.setFavoriteState(i.reportViewer("option","reportPath"))})}if(h=t.options.$nav,h!==null&&(h.pageNav({$reportViewer:i}),i.reportViewer("option","pageNavArea",h)),r=t.options.$paramarea,r!==null){r.reportParameter({$reportViewer:i}),i.reportViewer("option","paramArea",r);r.on(n.reportParameterLoadCascadingParam(),function(n,i){$.ajax({url:t.options.ReportManagerAPI+"/GetParametersJSON?paramPath="+i.reportPath+"&paramList="+i.paramList,dataType:"json",async:!1,success:function(n){n.ParametersList&&(r.reportParameter("removeParameter"),r.reportParameter("writeParameterPanel",n))}})})}c=t.options.$print,c!==null&&(c.reportPrint({$reportViewer:i}),i.reportViewer("option","printArea",c)),t.options.isReportManager&&t.setFavoriteState(t.options.ReportPath)},setFavoriteState:function(n){var t=this;t.$btnFavorite=null,t.options.$toolbar!==null&&(t.$btnFavorite=t.options.$toolbar.find(".fr-button-update-fav").find("div")),t.$itemFavorite=null,t.options.$toolPane!==null&&(t.$itemFavorite=t.options.$toolPane.find(".fr-item-update-fav").find("div")),$.ajax({url:t.options.ReportManagerAPI+"/isFavorite?path="+n,dataType:"json",async:!0,success:function(n){t.updateFavoriteState(n.IsFavorite)},fail:function(){t.$btnFavorite&&t.$btnFavorite.hide(),t.$itemFavorite&&t.$itemFavorite.hide()}})},onClickBtnFavorite:function(n){var t=this,r=n.data.me,i="add";t.$btnFavorite.hasClass("fr-icons24x24-favorite-minus")&&(i="delete"),$.getJSON(t.options.ReportManagerAPI+"/UpdateView",{view:"favorites",action:i,path:r.options.$reportViewer.reportViewer("option","reportPath")}).done(function(){t.updateFavoriteState.call(t,i==="add")}).fail(function(){forerunner.dialog.showMessageBox("Failed")})},onClickItemFavorite:function(t){var i=this,u=t.data.me,r="add";i.$itemFavorite.hasClass("fr-icons24x24-favorite-minus")&&(r="delete"),u._trigger(n.actionStarted,null,u.allTools["fr-item-update-fav"]),$.getJSON(i.options.ReportManagerAPI+"/UpdateView",{view:"favorites",action:r,path:i.options.ReportPath}).done(function(){i.updateFavoriteState.call(i,r==="add")}).fail(function(){forerunner.dialog.showMessageBox("Failed")})},updateFavoriteState:function(n){var t=this;n?(t.$btnFavorite&&(t.$btnFavorite.addClass("fr-icons24x24-favorite-minus"),t.$btnFavorite.removeClass("fr-icons24x24-favorite-plus")),t.$itemFavorite&&(t.$itemFavorite.addClass("fr-icons24x24-favorite-minus"),t.$itemFavorite.removeClass("fr-icons24x24-favorite-plus"))):(t.$btnFavorite&&(t.$btnFavorite.removeClass("fr-icons24x24-favorite-minus"),t.$btnFavorite.addClass("fr-icons24x24-favorite-plus")),t.$itemFavorite&&(t.$itemFavorite.removeClass("fr-icons24x24-favorite-minus"),t.$itemFavorite.addClass("fr-icons24x24-favorite-plus")))}}}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportViewerEZ),$.forerunner.toolBase,{options:{DefaultAppTemplate:null,path:null,navigateTo:null,historyBack:null,isReportManager:!1,isFullScreen:!0},_render:function(){var t=this,n=t.DefaultAppTemplate,r=t.options.path,i,u;forerunner.device.allowZoom(!1),n.$bottomdivspacer.addClass("fr-nav-spacer").hide(),n.$bottomdiv.addClass("fr-nav-container").hide(),r=r!==null?String(r).replace(/%2f/g,"/"):"/",n.$mainviewport.css({width:"100%",height:"100%"}),n.$mainsection.html(null),i=new $("<DIV />"),i.addClass("fr-layout-reportviewer"),n.$mainsection.append(i),u=new forerunner.ssr.ReportViewerInitializer({$toolbar:n.$mainheadersection,$toolPane:n.$leftpanecontent,$viewer:i,$nav:n.$bottomdiv,$paramarea:n.$rightpanecontent,$lefttoolbar:n.$leftheader,$righttoolbar:n.$rightheader,$docMap:n.$docmapsection,$print:n.$printsection,ReportViewerAPI:forerunner.config.forerunnerAPIBase()+"/ReportViewer",ReportPath:r,navigateTo:t.options.navigateTo,isReportManager:t.options.isReportManager}),u.render();i.on("reportviewerback",function(i,r){n._selectedItemPath=r.path,t.options.historyBack()});t.DefaultAppTemplate.bindViewerEvents(),n.$rightheaderspacer.height(n.$topdiv.height()),n.$leftheaderspacer.height(n.$topdiv.height())},_init:function(){var n=this;n.DefaultAppTemplate=n.options.DefaultAppTemplate===null?new forerunner.ssr.DefaultAppTemplate({$container:n.element,isFullScreen:n.options.isFullScreen}).render():n.options.DefaultAppTemplate,n._render()}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportExplorerEZ),{options:{navigateTo:null,historyBack:null,isFullScreen:!0},transitionToReportManager:function(n,t){var r=this,e=n,i=r.DefaultAppTemplate,u,f;i.hideSlideoutPane(!0),i.hideSlideoutPane(!1),forerunner.device.allowZoom(!1),forerunner.dialog.closeModalDialog(),i.$bottomdivspacer.hide(),i.$bottomdiv.hide(),i.$mainviewport.css({width:"100%",height:"100%"}),n||(n="/"),t||(t="catalog"),u=i._selectedItemPath,i.$mainsection.html(null),i.$mainsection.show(),i.$docmapsection.hide(),i.$mainsection.reportExplorer({reportManagerAPI:forerunner.config.forerunnerAPIBase()+"/ReportManager",forerunnerPath:forerunner.config.forerunnerFolder(),path:n,view:t,selectedItemPath:u,navigateTo:r.options.navigateTo}),f=i.$mainheadersection,f.reportExplorerToolbar({navigateTo:r.options.navigateTo}),i.$rightheader.height(i.$topdiv.height()),i.$leftheader.height(i.$topdiv.height()),i.$rightheaderspacer.height(i.$topdiv.height()),i.$leftheaderspacer.height(i.$topdiv.height()),i._selectedItemPath=e,r.element.removeClass("fr-docmap-background"),r.element.addClass("fr-Explorer-background")},transitionToReportViewer:function(n){var t=this;t.DefaultAppTemplate._selectedItemPath=null,t.DefaultAppTemplate.$mainviewport.reportViewerEZ({DefaultAppTemplate:t.DefaultAppTemplate,path:n,navigateTo:t.options.navigateTo,historyBack:t.options.historyBack,isReportManager:!0}),t.element.addClass("fr-Explorer-background"),t.element.removeClass("fr-Explorer-background")},_init:function(){var n=this;n.DefaultAppTemplate=new forerunner.ssr.DefaultAppTemplate({$container:n.element,isFullScreen:n.isFullScreen}).render()}})});
//@ sourceMappingURL=Forerunner-widgets.min.js.map