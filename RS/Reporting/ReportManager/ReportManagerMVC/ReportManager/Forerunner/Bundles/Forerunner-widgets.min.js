var forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var t=forerunner.ssr.constants.widgets,i=forerunner.ssr.constants.events,r=function(n){return typeof n=="function"},s=function(n){return"[object RegExp]"===Object.prototype.toString.call(n)},h=function(n,t){if(n==null)return null;var i=n[t];return r(i)?i.call(n):i};has=function(n,t){return Object.hasOwnProperty.call(n,t)};var c=function(n){return n},l={},u=Array.prototype,rt=Object.prototype,ut=Function.prototype,f=u.some,a=function(n,t,i){t||(t=c);var r=!1;return n==null?r:f&&n.some===f?n.some(t,i):($.each(n,function(u,f){if(r||(r=t.call(i,f,u,n)))return l}),!!r)},e=u.map,v=collect=function(n,t,i){var r=[];return n==null?r:e&&n.map===e?n.map(t,i):($.each(n,function(u,f){r.push(t.call(i,f,u,n))}),r)},y=Object.keys,p=y||function(n){var t,i;if(n!==Object(n))throw new TypeError("Invalid object");t=[];for(i in n)has(n,i)&&(t[t.length]=i);return t},ft=Array.prototype.slice,et=Array.prototype.splice,w=/\((.*?)\)/g,b=/(\(\?)?:\w+/g,k=/\*\w+/g,d=/[\-{}\[\]+?.,\\\^$|#\s]/g;$.widget(t.getFullname(t.router),{options:{routes:{}},_create:function(){var n=this;n.options.routes&&(n.routes=n.options.routes);n._bindRoutes()},_init:function(){},route:function(n,t,u){var f=this;return s(n)||(n=f._routeToRegExp(n)),r(t)&&(u=t,t=""),u||(u=f.options[t]),forerunner.history.history("route",n,function(r){var e=f._extractParameters(n,r);f._execute(u,e);f._trigger(i.route,null,{name:t,args:e});forerunner.history.history("triggerRoute",{route:f,name:t,args:e})}),f},_execute:function(n,t){n&&n.apply(this,t)},navigate:function(n,t){return forerunner.history.history("navigate",n,t),this},_bindRoutes:function(){if(this.routes){this.routes=h(this,"routes");for(var n,t=p(this.routes);(n=t.pop())!=null;)this.route(n,this.routes[n])}},_routeToRegExp:function(n){return n=n.replace(d,"\\$&").replace(w,"(?:$1)?").replace(b,function(n,t){return t?n:"([^/?]+)"}).replace(k,"([^?]*?)"),new RegExp("^"+n+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(n,t){var i=n.exec(t).slice(1);return v(i,function(n,t){return t===i.length-1?n||null:n?decodeURIComponent(n):null})}});var o=/^[#\/]|\s+$/g,g=/^\/+|\/+$/g,nt=/msie [\w.]+/,tt=/\/$/,it=/#.*$/,n=!1;$.widget(t.getFullname(t.history),{options:{},_create:function(){var n=this;this.handlers=[]},_init:function(){typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},isStarted:function(){return n},_interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(n){var t=(n||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(n,t){if(n==null)if(this._hasPushState||!this._wantsHashChange||t){n=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(tt,"");n.indexOf(i)||(n=n.slice(i.length))}else n=this.getHash();return n.replace(o,"")},triggerRoute:function(n){this._trigger(i.route,null,n)},start:function(t){var i=this,e,s;if(n)return!1;n=!0;$.extend(i.options,{root:"/"},t);i.root=i.options.root;i._wantsHashChange=i.options.hashChange!==!1;i._wantsPushState=!!i.options.pushState;i._hasPushState=!!(i.options.pushState&&i.history&&i.history.pushState);var r=i.getFragment(),u=document.documentMode,f=nt.exec(navigator.userAgent.toLowerCase())&&(!u||u<=7);if(i.root=("/"+i.root+"/").replace(g,"/"),f&&i._wantsHashChange&&(e=Backbone.$('<iframe src="javascript:0" tabindex="-1">'),i.iframe=e.hide().appendTo("body")[0].contentWindow,i.navigate(r)),i._hasPushState)$(window).on("popstate",function(){i.checkUrl.call(i)});else if(i._wantsHashChange&&"onhashchange"in window&&!f)$(window).on("hashchange",function(){i.checkUrl.call(i)});else i._wantsHashChange&&(i._checkUrlInterval=setInterval(function(){i.checkUrl.call(i)},i.interval));if(i.fragment=r,s=i.location,i._wantsHashChange&&i._wantsPushState)if(i._hasPushState||i.atRoot())i._hasPushState&&i.atRoot()&&s.hash&&(i.fragment=i.getHash().replace(o,""),i.history.replaceState({},document.title,i.root+i.fragment));else return i.fragment=i.getFragment(null,!0),i.location.replace(i.root+"#"+i.fragment),!0;if(!i.options.silent)return i.loadUrl()},stop:function(){$(window).off("popstate").off("hashchange");clearInterval(this._checkUrlInterval);n=!1;this.handlers.length=0},route:function(n,t){this.handlers.unshift({route:n,callback:t})},checkUrl:function(){var n=this.getFragment();if(n===this.fragment&&this.iframe&&(n=this.getFragment(this.getHash(this.iframe))),n===this.fragment)return!1;this.iframe&&this.navigate(n);this.loadUrl()},loadUrl:function(n){return n=this.fragment=this.getFragment(n),a(this.handlers,function(t){if(t.route.test(n))return t.callback(n),!0})},navigate:function(t,i){if(!n)return!1;i&&i!==!0||(i={trigger:!!i});var r=this.root+(t=this.getFragment(t||""));if(t=t.replace(it,""),this.fragment!==t){if(this.fragment=t,t===""&&r!=="/"&&(r=r.slice(0,-1)),this._hasPushState)this.history[i.replace?"replaceState":"pushState"]({},document.title,r);else if(this._wantsHashChange)this._updateHash(this.location,t,i.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(i.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,i.replace));else return this.location.assign(r);if(i.trigger)return this.loadUrl(t)}},_updateHash:function(n,t,i){if(i){var r=n.href.replace(/(javascript:|#).*$/,"");n.replace(r+"#"+t)}else n.hash="#"+t}});forerunner.history=$({}).history({})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){function r(n){this.reportObj=n;this.isRendered=!1}var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events,t=forerunner.ssr.constants.navigateType;$.widget(i.getFullname(i.reportViewer),{options:{reportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportViewer",pingInterval:3e5,toolbarHeight:0,pageNavArea:null,paramArea:null,DocMapArea:null,userSettings:null,onInputBlur:null,onInputFocus:null,$appContainer:null,parameterModel:null,savePosition:null,viewerID:null,rsInstance:null,isAdmin:!1},_destroy:function(){$(window).off("resize")},_create:function(){var t=this,i;if(setInterval(function(){t._sessionPing()},t.options.pingInterval),t.locData=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer"),t.actionHistory=[],t.curPage=0,t.pages={},t.reportPath="",t.pageNum=0,t.savedParameters=null,t.sessionID="",t.numPages=0,t.lock=0,t.$reportContainer=new $("<DIV class='fr-report-container'/>"),t.$reportAreaContainer=null,t.$loadingIndicator=new $("<div class='fr-report-loading-indicator' ><\/div>").text(t.locData.messages.loading),t.floatingHeaders=[],t.paramLoaded=!1,t.scrollTop=0,t.scrollLeft=0,t.loadLock=0,t.finding=!1,t.findStartPage=null,t.findEndPage=null,t.findKeyword=null,t.hasDocMap=!1,t.docMapData=null,t.togglePageNum=0,t.element.append(t.$loadingIndicator),t.pageNavOpen=!1,t.savedTop=0,t.savedLeft=0,t.origionalReportPath="",t._setPageCallback=null,t.renderError=!1,t.autoRefreshID=null,t.reportStates={toggleStates:new forerunner.ssr.map,sortStates:[]},t.renderTime=(new Date).getTime(),t.paramDefs=null,t.credentialDefs=null,t.datasourceCredentials=null,t.viewerID=t.options.viewerID?t.options.viewerID:Math.floor(Math.random()*100+1),t.SaveThumbnail=!1,t.RDLExtProperty=null,t.options.isAdmin=!0,i=forerunner.device.isTouch(),i)$(window).on("scrollstop",function(){t._updateTableHeaders(t)});else $(window).on("scroll",function(){t._updateTableHeaders(t)});forerunner.device.isMSIE8()||window.addEventListener("orientationchange",function(){t._ReRender.call(t)},!1);$(window).on("resize",function(){t._ReRender.call(t)});if(t.element.append(t.$reportContainer),t.hideDocMap(),t.options.parameterModel)t.options.parameterModel.on(n.parameterModelSetChanged(),function(n,i){t._onModelSetChanged.call(t,n,i)})},getUserSettings:function(){return this.options.userSettings},getCurPage:function(){var n=this;return n.curPage},getNumPages:function(){var n=this;return n.numPages},getReportViewerAPI:function(){var n=this;return n.options.reportViewerAPI},getReportPath:function(){var n=this;return n.reportPath},getSessionID:function(){var n=this;return n.sessionID},getHasDocMap:function(){var n=this;return n.hasDocMap},getDataSourceCredential:function(){var n=this;return n.datasourceCredentials?n.datasourceCredentials:null},triggerEvent:function(n,t){var i=this;return i._trigger(n,null,t)},_setColHeaderOffset:function(n,t){if(t){var i=n.offset(),r=$(window).scrollLeft();r>i.left&&r<i.left+n.width()?(t.css("left",Math.min(r-i.left,n.width()-t.width())+"px"),t.css("visibility","visible")):t.css("visibility","hidden")}},_setRowHeaderOffset:function(n,t){var u=this,i,r;t&&(i=n.offset(),r=$(window).scrollTop(),r>i.top&&r<i.top+n.innerHeight()?(t.css("top",Math.min(r-i.top,n.height()-t.innerHeight())+u.options.toolbarHeight+"px"),t.css("visibility","visible")):t.css("visibility","hidden"))},_addLoadingIndicator:function(){var n=this;n.loadLock===0&&(n.loadLock=1,setTimeout(function(){n.showLoadingIndictator()},500))},showLoadingIndictator:function(n){var t=this,r,i;(t.loadLock===1||n===!0)&&(r=t.options.$appContainer.find(".fr-layout-mainviewport"),r.addClass("fr-layout-mainviewport-fullheight"),i=t.$reportContainer.width()-212,n===!0?t.$loadingIndicator.css("top",$(window).scrollTop()+100+"px").css("left",i>0?i/2:"0px"):t.$loadingIndicator.css("top",t.$reportContainer.scrollTop()+100+"px").css("left",i>0?i/2:"0px"),t.$reportContainer.addClass("fr-report-container-translucent"),t.$loadingIndicator.show())},removeLoadingIndicator:function(n){var t=this,i;(t.loadLock===1||n===!0)&&(t.loadLock=0,i=t.options.$appContainer.find(".fr-layout-mainviewport"),i.removeClass("fr-layout-mainviewport-fullheight"),t.$reportContainer.removeClass("fr-report-container-translucent"),t.$loadingIndicator.hide())},_ReRender:function(){var n=this;n.options.userSettings&&n.options.userSettings.responsiveUI===!0&&($.each(n.pages,function(n,t){t.needsLayout=!0}),n._reLayoutPage(n.curPage))},_removeCSS:function(){for(var i,r=this,t=$("head").find("style"),n=0;n<t.length;n++)t[n].id===r.viewerID.toString()&&(i=t[n],i.parentNode.removeChild(i))},_setPage:function(t){var i=this,r;i.pages[t].isRendered||i._renderPage(t);$(".fr-report-areacontainer",i.$reportContainer).length===0?(r=i.$reportContainer.find(".Page"),r&&r.detach(),i.$reportAreaContainer=$("<Div/>"),i.$reportAreaContainer.addClass("fr-report-areacontainer"),i.$reportContainer.append(i.$reportAreaContainer),i.$reportAreaContainer.append(i._getPageContainer(t)),i._touchNav(),i._removeDocMap()):(i.$reportAreaContainer.find(".Page").detach(),i.$reportAreaContainer.append(i._getPageContainer(t)));i._removeCSS();$.isEmptyObject(i.pages[t].CSS)||i.pages[t].CSS.appendTo("head");i._reLayoutPage(t);i.renderError||(i.curPage=t,i._trigger(n.changePage,null,{newPageNum:t,paramLoaded:i.paramLoaded,numOfVisibleParameters:i.$numOfVisibleParameters,renderError:i.renderError,credentialRequired:i.credentialDefs?!0:!1}));$(window).scrollLeft(i.scrollLeft);$(window).scrollTop(i.scrollTop);i.removeLoadingIndicator();i.lock=0;typeof i._setPageCallback=="function"&&(i._setPageCallback(),i._setPageCallback=null);i._trigger(n.setPageDone,null,{newPageNum:i.curPage,paramLoaded:i.paramLoaded,numOfVisibleParameters:i.$numOfVisibleParameters,renderError:i.renderError,credentialRequired:i.credentialDefs?!0:!1})},_addSetPageCallback:function(n){if(typeof n=="function"){var t=this,i=t._setPageCallback;t._setPageCallback=i===null?n:function(){i();n()}}},_allowZoomWindowsPhone:function(n){var t=this;t.backupCurPage(!0);$.each(t.actionHistory,function(n,t){$.each(t.reportPages,function(n,t){t.$container=null;t.CSS=null;t.isRendered=!1})});sessionStorage.forerunner_zoomReload_actionHistory=JSON.stringify({actionHistory:t.actionHistory});sessionStorage.forerunner_zoomReload_userZoom=JSON.stringify({userZoom:n?"zoom":"fixed"});window.location.reload()},allowZoom:function(t){var i=this;if(forerunner.device.isWindowsPhone()){i._allowZoomWindowsPhone(t);return}t===!0?(forerunner.device.allowZoom(!0),i.allowSwipe(!1)):(forerunner.device.allowZoom(!1),i.allowSwipe(!0));i._trigger(n.allowZoom,null,{isEnabled:t})},onInputBlur:function(){var n=this;n.options.onInputBlur&&n.options.onInputBlur()},onInputFocus:function(){var n=this;n.options.onInputFocus&&n.options.onInputFocus()},_allowSwipe:!0,allowSwipe:function(n){var t=this;t._allowSwipe=n},_navToPage:function(n){var t=this;t._allowSwipe===!0&&t.navToPage(n)},_touchNav:function(){if(forerunner.device.isTouch()){var n=this;$(n.element).hammer({stop_browser_behavior:{userSelect:!1},swipe_max_touches:2,drag_max_touches:2}).on("swipe drag touch release",function(t){if(t.gesture)switch(t.type){case"touch":n._hideTableHeaders();break;case"release":var i=!1;if(t.gesture.touches.length>1&&(i=!0),(t.gesture.direction==="left"||t.gesture.direction==="up")&&i){t.gesture.preventDefault();n._navToPage(n.curPage+1);break}if((t.gesture.direction==="right"||t.gesture.direction==="down")&&i){t.gesture.preventDefault();n._navToPage(n.curPage-1);break}t.gesture.velocityX===0&&t.gesture.velocityY===0&&n._updateTableHeaders(n)}})}},refreshReport:function(n){var t=this,i=null;t.lock!==1&&(n===undefined&&(n=1),t.sessionID="",t.renderTime=(new Date).getTime(),t.lock=1,t._revertUnsubmittedParameters(),t.paramLoaded===!0&&(i=t.options.paramArea.reportParameter("getParamsList")),t._resetViewer(!0),t._loadPage(n,!1,null,i,!0))},navToPage:function(n){var t=this;n!==t.curPage&&t.lock!==1&&(t._resetContextIfInvalid(),t.scrollLeft=0,t.scrollTop=0,n>t.numPages&&t.numPages!==0&&(n=1),n<1&&(n=t.numPages),n!==t.curPage&&t.lock===0&&(t.lock=1,t._loadPage(n,!1)))},_hideDocMap:function(){var t=this,i=t.options.docMapArea;t.savedTop=0;t.savedLeft=0;i.hide();t.element.unmask();t._trigger(n.hideDocMap)},_showDocMap:function(){var t=this,i;t._resetContextIfInvalid();i=t.options.docMapArea;i.reportDocumentMap({$reportViewer:t});t.docMapData||forerunner.ajax.ajax({url:t.options.reportViewerAPI+"/DocMapJSON/",data:{SessionID:t.sessionID,instance:t.options.rsInstance},dataType:"json",async:!1,success:function(n){t.docMapData=n;i.reportDocumentMap("write",n)},fail:function(){t._showMessageBox(t.locData.messages.docmapShowFailed)}});t.savedTop=$(window).scrollTop();t.savedLeft=$(window).scrollLeft();t.element.mask();i.slideUpShow();t._trigger(n.showDocMap);setTimeout(function(){t.options.savePosition&&(t.savedTop=t.options.savePosition.top,t.savedLeft=t.options.savePosition.left,t.options.savePosition=null)},100)},_removeDocMap:function(){var n=this;$(".fr-docmap-panel").length!==0&&(n.hideDocMap(),n.docMapData=null,$(".fr-docmap-panel").remove())},hideDocMap:function(){var n=this,t=n.options.docMapArea;n.hasDocMap&&t&&t.is(":visible")&&n._hideDocMap()},showDocMap:function(){var n=this,t=n.options.docMapArea;if(n.hasDocMap&&t){if(t.is(":visible")){n._hideDocMap();return}n._showDocMap()}},_cachePages:function(n){var i=this,r,u,t;for(n=parseInt(n,10),r=n-1,u=n+1,r<1&&(r=1),u>i.numPages&&i.numPages!==0&&(u=i.numPages),t=r;t<=u;t++)i.pages[t]||t!==n&&i._loadPage(t,!0)},actionHistoryDepth:function(){return this.actionHistory.length},back:function(){var t=this,i=t.actionHistory.pop();i?(t._clearReportViewerForDrill(),t.reportPath=i.ReportPath,t.sessionID=i.SessionID,t.curPage=i.CurrentPage,t.hideDocMap(),t.scrollLeft=i.ScrollLeft,t.scrollTop=i.ScrollTop,t.reportStates=i.reportStates,t.renderTime=i.renderTime,t.renderError=i.renderError,i.credentialDefs!==null&&(t.credentialDefs=i.credentialDefs,t.datasourceCredentials=i.savedCredential,t.$credentialDialog||(t.$credentialDialog=t.options.$appContainer.find(".fr-dsc-section")),t.$credentialDialog.dsCredential("resetSavedCredential",t.credentialDefs.CredentialsList,t.datasourceCredentials)),t._trigger(n.changeReport,null,{path:t.reportPath,credentialRequired:t.credentialDefs?!0:!1}),i.FlushCache&&(t._removeParameters(),t.flushCache(),t.pages=i.reportPages,t.paramDefs=i.paramDefs,t.numPages=i.reportPages[i.CurrentPage].reportObj.ReportContainer.NumPages?i.reportPages[i.CurrentPage].reportObj.ReportContainer.NumPages:0,i.paramDefs&&(t.options.paramArea.reportParameter({$reportViewer:t,$appContainer:t.options.$appContainer}),t.options.paramArea.reportParameter("setParametersAndUpdate",i.paramDefs,i.savedParams,i.CurrentPage),t.$numOfVisibleParameters=t.options.paramArea.reportParameter("getNumOfVisibleParameters"),t.$numOfVisibleParameters>0&&t._trigger(n.showParamArea,null,{reportPath:t.reportPath}),t.paramLoaded=!0,t.$paramarea=t.options.paramArea),t.options.parameterModel&&i.parameterModel&&t.options.parameterModel.parameterModel("setModel",i.parameterModel)),t._loadPage(i.CurrentPage,!1,null,null,!1,t.pages[t.curPage].Replay),t._trigger(n.actionHistoryPop,null,{path:t.reportPath})):(t.flushCache(),t._resetViewer(!1),t._trigger(n.back,null,{path:t.reportPath}))},showNav:function(){var t=this;t._resetContextIfInvalid();t.pageNavOpen?(t.pageNavOpen=!1,window.removeEventListener?window.removeEventListener("orientationchange",t._handleOrientation,!1):window.detachEvent("orientationchange",t._handleOrientation),t.element.unmask(function(){t.showNav.call(t)})):(t.pageNavOpen=!0,window.addEventListener?window.addEventListener("orientationchange",t._handleOrientation,!1):window.attachEvent("orientationchange",t._handleOrientation),t.element.mask(function(){t.showNav.call(t)}));t.options.pageNavArea&&t.options.pageNavArea.pageNav("showNav");t._trigger(n.showNav,null,{newPageNum:t.curPage,path:t.reportPath,open:t.pageNavOpen})},_handleOrientation:function(){var t=this,n=$(".fr-layout-pagesection");forerunner.device.isSmall(t.element)?n.is(":visible")&&n.hide():n.is(":hidden")&&n.show()},flushCache:function(){var n=this;n.pages={};n.options.pageNavArea&&n.options.pageNavArea.pageNav("reset")},_saveThumbnail:function(){var n=this,t=forerunner.config.forerunnerAPIBase()+"ReportManager/SaveThumbnail";n.getCurPage()!==1||n.SaveThumbnail||(n.SaveThumbnail=!0,forerunner.ajax.ajax({type:"GET",url:t,data:{ReportPath:n.reportPath,SessionID:n.sessionID,Instance:n.options.rsInstance},async:!0,success:function(){}}))},_prepareAction:function(){var n=this;(n.togglePageNum!==n.curPage||n.togglePageNum===0)&&forerunner.ajax.ajax({type:"POST",url:n.options.reportViewerAPI+"/ReportJSON/",data:{ReportPath:n.reportPath,SessionID:n.sessionID,PageNumber:n.curPage,ParameterList:"",instance:n.options.rsInstance},dataType:"json",async:!1,success:function(){n.togglePageNum=n.curPage},fail:function(){n._showMessageBox(n.locData.messages.prepareActionFailed)}})},_updateSortState:function(n,t,i){var r=this;i!==!1&&(r.reportStates.sortStates=[]);r.reportStates.sortStates.push({id:n,direction:t})},_getSortResult:function(n,t,i){var r=this;return forerunner.ajax.ajax({dataType:"json",url:r.options.reportViewerAPI+"/SortReport/",data:{SessionID:r.sessionID,SortItem:n,Direction:t,ClearExistingSort:i,instance:r.options.rsInstance},async:!1})},_replaySortStates:function(){for(var i=this,t=i.reportStates.sortStates,n=0;n<t.length;n++)i._getSortResult(t[n].id,t[n].direction,n===0)},sort:function(n,t,i){var r=this,f,u=forerunner.ssr.constants.sortDirection;r.lock!==1&&(r.lock=1,r._resetContextIfInvalid(),f=n===u.asc?u.desc:u.asc,r._callSort(t,f,i))},_callSort:function(n,t,i){var r=this;r._updateSortState(n,t);forerunner.ajax.getJSON(r.options.reportViewerAPI+"/SortReport/",{SessionID:r.sessionID,SortItem:n,Direction:t,ClearExistingSort:i,instance:r.options.rsInstance},function(n){r.scrollLeft=$(window).scrollLeft();r.scrollTop=$(window).scrollTop();r.numPages=n.NumPages;r.renderTime=(new Date).getTime();r._loadPage(n.NewPage,!1,null,null,!0)},function(n,t,i,u){r._writeError(n,t,i,u)})},_isReportContextValid:!0,invalidateReportContext:function(){this._isReportContextValid=!1},_callGetReportJSON:function(){var n=this,t=null,i;n.paramLoaded&&(i=n.options.paramArea,t=i.reportParameter("getParamsList",!0));forerunner.ajax.ajax({type:"POST",dataType:"json",url:n.options.reportViewerAPI+"/ReportJSON/",data:{ReportPath:n.reportPath,SessionID:n.sessionID,PageNumber:n.getCurPage(),ParameterList:t,instance:n.options.rsInstance},success:function(){n._isReportContextValid=!0},async:!1})},_updateToggleState:function(n){var t=this;t.reportStates.toggleStates.has(n)?t.reportStates.toggleStates.remove(n):t.reportStates.toggleStates.add(n)},_getToggleResult:function(n){var i=this;return forerunner.ajax.ajax({dataType:"json",url:i.options.reportViewerAPI+"/NavigateTo/",data:{NavType:t.toggle,SessionID:i.sessionID,UniqueID:n,instance:i.options.rsInstance},async:!1})},_replayToggleStates:function(){for(var t=this,i=t.reportStates.toggleStates.keys(),n=0;n<i.length;n++)t._getToggleResult(i[n])},toggleItem:function(n){var t=this;t.lock!==1&&(t.lock=1,t._addLoadingIndicator(),t._resetContextIfInvalid(),t._prepareAction(),t._callToggle(n))},_callToggle:function(n){var i=this;i._updateToggleState(n);forerunner.ajax.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.toggle,SessionID:i.sessionID,UniqueID:n,instance:i.options.rsInstance},function(n){if(n.Result===!0){i.scrollLeft=$(window).scrollLeft();i.scrollTop=$(window).scrollTop();var t=i.pages[i.curPage].Replay;i.pages[i.curPage]=null;i._loadPage(i.curPage,!1,undefined,undefined,undefined,t)}else i.lock=0},function(n,t,r,u){i.lock=0;i._writeError(n,t,r,u)})},_resetContextIfInvalid:function(){var n=this;n._revertUnsubmittedParameters();n._isReportContextValid||(n._callGetReportJSON(),n._replaySortStates(),n._replayToggleStates())},_revertUnsubmittedParameters:function(){var n=this,t;if(n.paramLoaded)return t=n.options.paramArea,t.reportParameter("revertParameters")},navigateBookmark:function(n){var i=this;i.lock!==1&&(i.lock=1,i._resetContextIfInvalid(),i._prepareAction(),forerunner.ajax.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.bookmark,SessionID:i.sessionID,UniqueID:n,instance:i.options.rsInstance},function(t){t.NewPage===i.curPage?(i._navToLink(n),i.lock=0):t.NewPage!==undefined&&t.NewPage>0?(i.backupCurPage(),i._loadPage(t.NewPage,!1,n)):(i._showMessageBox(i.locData.messages.bookmarkNotFound),i.lock=0)},function(n,t,r,u){i.lock=0;i._writeError(n,t,r,u)}))},isDrillThoughReport:function(){var n=this;return n.origionalReportPath===n.reportPath?!0:!1},navigateDrillthrough:function(i){var r=this;r.lock!==1&&(r.lock=1,r._addLoadingIndicator(),r._resetContextIfInvalid(),r._prepareAction(),forerunner.ajax.getJSON(r.options.reportViewerAPI+"/NavigateTo/",{NavType:t.drillThrough,SessionID:r.sessionID,UniqueID:i,instance:r.options.rsInstance},function(t){r.backupCurPage(!0);t.Exception?(r._renderPageError(r.$reportAreaContainer.find(".Page"),t),r.removeLoadingIndicator(),r.lock=0):(r.renderError=!1,r.sessionID=t.SessionID,r.origionalReportPath===""&&(r.origionalReportPath=r.reportPath),r.reportPath=t.ReportPath,r.options.parameterModel&&r.options.parameterModel.parameterModel("getCurrentParameterList",r.reportPath),r._trigger(n.drillThrough,null,{path:t.ReportPath}),t.CredentialsRequired?(r.$reportAreaContainer.find(".Page").detach(),r._setScrollLocation(0,0),r._writeDSCredential(t.Credentials)):t.ParametersRequired?(r.$reportAreaContainer.find(".Page").detach(),r._setScrollLocation(0,0),r._showParameters(1,t.Parameters)):(r._setScrollLocation(0,0),r._loadPage(1,!1,null,null,!0)))},function(n,t,i,u){r.lock=0;r._writeError(n,t,i,u)}))},navigateDocumentMap:function(n){var i=this;i.lock!==1&&(i.lock=1,i._resetContextIfInvalid(),forerunner.ajax.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.docMap,SessionID:i.sessionID,UniqueID:n,instance:i.options.rsInstance},function(t){i.backupCurPage(!1,!0);i.hideDocMap();i._loadPage(t.NewPage,!1,n)},function(n,t,r,u){i.lock=0;i._writeError(n,t,r,u)}))},backupCurPage:function(t,i){var r=this,u,f,e,o=null,s;t!==!0&&(t=!1);i===!0?(u=r.savedTop,f=r.savedLeft):(u=$(window).scrollTop(),f=$(window).scrollLeft());r.paramLoaded&&(s=r.options.paramArea,e=s.reportParameter("getParamsList",!0));r.options.parameterModel&&(o=r.options.parameterModel.parameterModel("getModel"));r.actionHistory.push({ReportPath:r.reportPath,SessionID:r.sessionID,CurrentPage:r.curPage,ScrollTop:u,ScrollLeft:f,FlushCache:t,paramLoaded:r.paramLoaded,savedParams:e,reportStates:r.reportStates,renderTime:r.renderTime,reportPages:r.pages,paramDefs:r.paramDefs,credentialDefs:r.credentialDefs,savedCredential:r.datasourceCredentials,renderError:r.renderError,parameterModel:o});r._clearReportViewerForDrill();r._trigger(n.actionHistoryPush,null,{path:r.reportPath})},_clearReportViewerForDrill:function(){var n=this;n.datasourceCredentials=null;n.credentialDefs=null},_setScrollLocation:function(n,t){var i=this;i.scrollLeft=t;i.scrollTop=n},find:function(t,i,r,u){var f=this;if(t!=="")if(f._resetContextIfInvalid(),f.findKeyword&&f.findKeyword===t||(f.resetFind(),f.findKeyword=t),f._trigger(n.find),f.finding&&!u)f._findNext(t);else{if(i===undefined&&(i=f.getCurPage()),r===undefined&&(r=f.getNumPages()===0?2147483647:f.getNumPages()),i>r){f.resetFind();f._showMessageBox(f.locData.messages.completeFind,f._findDone);return}f.findStartPage===null&&(f.findStartPage=i);forerunner.ajax.getJSON(f.options.reportViewerAPI+"/FindString/",{SessionID:f.sessionID,StartPage:i,EndPage:r,FindValue:t,instance:f.options.rsInstance},function(n){n.NewPage!==0?(f.finding=!0,n.NewPage!==f.getCurPage()?(f._addSetPageCallback(function(){f._setFindHighlight(t)}),f.pages[n.NewPage]=null,f._loadPage(n.NewPage,!1)):f._setFindHighlight(t)):f.findStartPage!==1?(f.findEndPage=f.findStartPage-1,f.find(t,1,f.findEndPage,!0),f.findStartPage=1):(f.finding===!0?f._showMessageBox(f.locData.messages.completeFind,f._findDone):f._showMessageBox(f.locData.messages.keyNotFound,f._findDone),f.resetFind())},function(n,t,i,r){f._writeError(n,t,i,r)})}},_findNext:function(t){var i=this,r,u;if($(".fr-render-find-keyword").filter(".fr-render-find-highlight").first().removeClass("fr-render-find-highlight"),r=$(".fr-render-find-keyword").filter(":visible").filter(".Unread").first(),r.length>0)r.removeClass("Unread").addClass("fr-render-find-highlight").addClass("Read"),i._trigger(n.navToPosition,null,{top:r.offset().top-150,left:r.offset().left-250});else{if(i.getNumPages()===1){i._showMessageBox(i.locData.messages.completeFind,i._findDone);i.resetFind();return}u=i.findEndPage?i.findEndPage:i.getNumPages()===0?2147483647:i.getNumPages();i.getCurPage()+1<=u?i.find(t,i.getCurPage()+1,u,!0):i.findStartPage>1?(i.findEndPage=i.findStartPage-1,i.getCurPage()===i.findEndPage?(i._showMessageBox(i.locData.messages.completeFind,i._findDone),i.resetFind()):i.find(t,1,i.findEndPage,!0)):(i._showMessageBox(i.locData.messages.completeFind,i._findDone),i.resetFind())}},_setFindHighlight:function(t){var i=this,r;i._clearHighLightWord();i._highLightWord(i.$reportContainer,t);r=i.$reportContainer.find(".fr-render-find-keyword").filter(":visible").filter(".Unread").first();r.length>0&&(r.removeClass("Unread").addClass("fr-render-find-highlight").addClass("Read"),i._trigger(n.navToPosition,null,{top:r.offset().top-150,left:r.offset().left-250}))},_findDone:function(t){t._trigger(n.findDone)},_showMessageBox:function(n,t,i){var r=this;typeof t=="function"&&t(r);forerunner.dialog.showMessageBox(r.options.$appContainer,n);typeof i=="function"&&i(r)},resetFind:function(){var n=this;n.finding=!1;n.findKeyword=null;n.findStartPage=null;n.findEndPage=null},exportReport:function(n){var t=this,i;t._resetContextIfInvalid();i=t.options.reportViewerAPI+"/ExportReport/?ReportPath="+t.getReportPath()+"&SessionID="+t.getSessionID()+"&ExportType="+n;t.options.rsInstance&&(i+="&instance="+t.options.rsInstance);window.open(i)},showPrint:function(){var n=this;n.$printDialog&&n.$printDialog.reportPrint("openDialog")},printReport:function(n){var t=this,i;t._resetContextIfInvalid();i=t.options.reportViewerAPI+"/PrintReport/?ReportPath="+t.getReportPath()+"&SessionID="+t.getSessionID()+"&PrintPropertyString="+n;t.options.rsInstance&&(i+="&instance="+t.options.rsInstance);window.open(i)},_setPrint:function(n){var t=this;t.$printDialog=t.options.$appContainer.find(".fr-print-section");t.$printDialog.reportPrint("setPrint",n)},_onModelSetChanged:function(n,t){var i=this;t&&i.refreshParameters(t,!0,1)},_getSavedParams:function(n){for(var t=0;t<n.length;t++)if(n[t])return n[t];return null},_loadParameters:function(n,t,i){var r=this,u=r._getSavedParams([t,r.savedParameters,r.options.parameterModel?r.options.parameterModel.parameterModel("getCurrentParameterList",r.reportPath):null]);i===undefined&&(i=!0);u?r.options.paramArea&&(r.options.paramArea.reportParameter({$reportViewer:this,$appContainer:r.options.$appContainer}),i===!1?(r._loadPage(n,!1,null,null,!1),r.options.paramArea.reportParameter("setsubmittedParamsList",u)):r.refreshParameters(u,i,n,!1)):r._loadDefaultParameters(n)},_paramsToString:function(n){return JSON.stringify(n)},_loadDefaultParameters:function(n){var t=this;forerunner.ajax.ajax({type:"POST",url:t.options.reportViewerAPI+"/ParameterJSON/",data:{ReportPath:t.reportPath,SessionID:t.getSessionID(),ParameterList:null,DSCredentials:t.getDataSourceCredential(),instance:t.options.rsInstance},dataType:"json",async:!1,done:function(i){i.Exception?(t._renderPageError(t.$reportContainer,i),t.removeLoadingIndicator()):(i.SessionID&&(t.sessionID=i.SessionID),t._addLoadingIndicator(),t._showParameters(n,i))},fail:function(n,i,r,u){t._writeError(n,i,r,u)}})},_showParameters:function(t,i){var r=this,u;i.Type==="Parameters"?(r._removeParameters(),r.$reportContainer.find(".Page").detach(),u=r.options.paramArea,u&&(r.paramDefs=i,u.reportParameter({$reportViewer:this,$appContainer:r.options.$appContainer}),u.reportParameter("writeParameterPanel",i,t),r.$numOfVisibleParameters=u.reportParameter("getNumOfVisibleParameters"),r.$numOfVisibleParameters>0&&r._trigger(n.showParamArea,null,{reportPath:r.reportPath}),r.paramLoaded=!0,r.$paramarea=r.options.paramArea)):i.Exception?(r._renderPageError(r.$reportContainer,i),r.removeLoadingIndicator()):r._loadPage(t,!1)},refreshParameters:function(n,t,i,r,u){var f=this;i===-1&&(i=f.getCurPage());n&&forerunner.ajax.ajax({type:"POST",url:f.options.reportViewerAPI+"/ParameterJSON",data:{ReportPath:f.reportPath,SessionID:f.getSessionID(),ParameterList:n,DSCredentials:f.getDataSourceCredential(),instance:f.options.rsInstance},dataType:"json",async:!1,success:function(n){n.Exception?(f._renderPageError(f.$reportContainer,n),f.removeLoadingIndicator()):(n.SessionID&&(f.sessionID=n.SessionID),f._updateParameterData(n,t,i,r,u))}})},_updateParameterData:function(t,i,r,u,f){var e=this;t&&(e.paramDefs=t,e.options.paramArea.reportParameter("updateParameterPanel",t,i,r,u,f),e.$numOfVisibleParameters=e.options.paramArea.reportParameter("getNumOfVisibleParameters"),e.$numOfVisibleParameters>0&&e._trigger(n.showParamArea,null,{reportPath:e.reportPath}),e.paramLoaded=!0,e.$paramarea=e.options.paramArea)},_removeParameters:function(){var n=this,t;n.paramLoaded===!0&&(t=n.options.paramArea,t&&(t.reportParameter("removeParameter"),n.paramLoaded=!1,n.$numOfVisibleParameters=0))},_resetViewer:function(n){var t=this;t.numPages=0;t.floatingHeaders=[];n||(t.paramLoaded=!1,t._removeAutoRefreshTimeout(),t.SaveThumbnail=!1);t.scrollTop=0;t.scrollLeft=0;t.finding=!1;t.findStartPage=null;t.hasDocMap=!1;t.docMapData=null;t.togglePageNum=0;t.findKeyword=null;t.origionalReportPath="";t.renderError=!1;t.reportStates={toggleStates:new forerunner.ssr.map,sortStates:[]}},_reloadFromSessionStorage:function(){var t=this,i,n;return sessionStorage.forerunner_zoomReload_actionHistory&&(i=sessionStorage.forerunner_zoomReload_actionHistory,delete sessionStorage.forerunner_zoomReload_actionHistory,n=JSON.parse(i),n.actionHistory)?(t.actionHistory=n.actionHistory,t.back(),!0):!1},loadReport:function(t,i,r){var u=this;if(u._trigger(n.preLoadReport,null,{viewer:u,oldPath:u.reportPath,newPath:t,pageNum:i}),u._reloadFromSessionStorage()){u._trigger(n.afterLoadReport,null,{viewer:u,reportPath:u.getReportPath(),sessionID:u.getSessionID()});return}u.reportPath&&u.reportPath!==t&&(u.backupCurPage(!0),u.sessionID="",u.flushCache(),u.hideDocMap(),u.element.unmask());u._resetViewer();u.reportPath=t?t:"/";u.pageNum=i?i:1;u.savedParameters=r?r:null;u._getRDLExtProp();u.options.jsonPath?u._renderJson():u._loadParameters(u.pageNum);u._addSetPageCallback(function(){u._trigger(n.afterLoadReport,null,{viewer:u,reportPath:u.getReportPath(),sessionID:u.getSessionID()})})},_getRDLExtProp:function(){var n=this;forerunner.ajax.ajax({type:"GET",dataType:"json",url:forerunner.config.forerunnerAPIBase()+"ReportManager/ReportProperty/",data:{path:n.reportPath,propertyName:"ForerunnerRDLExt",instance:n.options.rsInstance},success:function(t){n.RDLExtProperty=t},async:!1})},loadReportWithNewParameters:function(n,t){var i=this;i._resetViewer(!0);i.renderTime=(new Date).getTime();t||(t=1);i._loadPage(t,!1,null,n,!0)},loadReportWithCustomDSCredential:function(n){var t=this,i;t.getDataSourceCredential()&&t._resetDSCredential();t.datasourceCredentials=n;t.paramLoaded?(i=t.options.paramArea.reportParameter("getParamsList"),t._loadPage(1,!1,null,i,!0)):t.loadReport(t.getReportPath(),1)},_resetDSCredential:function(){var t=this,i;t.flushCache();t.sessionID=null;i=t.$reportContainer.find(".Page");i&&i.detach();t._trigger(n.resetCredential,null,{paramLoaded:t.paramLoaded})},_renderJson:function(){var n=this,i=1,t=!1;n.element.is(":visible")||t||n.element.show();n._addLoadingIndicator();n.togglePageNum=i;forerunner.ajax.ajax({type:"GET",dataType:"json",url:n.options.jsonPath,async:!1,done:function(r){n._writePage(r,i,t);t||(r.ReportContainer&&n._setPrint(r.ReportContainer.Report.PageContent.PageLayoutStart),n.element.is(":visible")||n.element.show(),n._updateTableHeaders(n))},fail:function(t,i,r,u){n._writeError(t,i,r,u)}})},_loadPage:function(n,t,i,r,u,f){var e=this;if(u===!0&&e.flushCache(),e.pages[n]&&e._getPageContainer(n)){t||(e._setPage(n),e.element.is(":visible")||t||e.element.show(),i&&e._navToLink(i),e.pages[n].reportObj.ReportContainer&&e.pages[n].reportObj.ReportContainer.Report.AutoRefresh&&e._setAutoRefresh(e.pages[n].reportObj.ReportContainer.Report.AutoRefresh),u!==!0&&e._cachePages(n));return}r||(r="");t||e._addLoadingIndicator();e.togglePageNum=n;forerunner.ajax.ajax({type:"POST",dataType:"json",url:e.options.reportViewerAPI+"/ReportJSON/",data:{ReportPath:e.reportPath,SessionID:e.sessionID,PageNumber:n,ParameterList:r,DSCredentials:e.getDataSourceCredential(),instance:e.options.rsInstance},async:!0,done:function(r){e._writePage(r,n,t);t||(r.ReportContainer&&e._setPrint(r.ReportContainer.Report.PageContent.PageLayoutStart),e.element.is(":visible")||e.element.show(),i&&e._navToLink(i),u!==!0&&e._cachePages(n),f&&e._getPageContainer(n).reportRender("replayRespTablix",f),e._updateTableHeaders(e),e._saveThumbnail())},fail:function(n,t,i,r){e._writeError(n,t,i,r)}})},_writeError:function(n,t,i,r){var u=this,f={Exception:{DetailMessage:i,Type:"Error",TargetSite:r.url,Source:"",Message:t,StackTrace:JSON.stringify(r)}};u._renderPageError(u.$reportContainer,f)},_getPageContainer:function(n){var t=this,i;return t.pages[n].$container||(t.pages[n].$container=$("<div class='Page'/>"),i=!1,t.options.userSettings&&t.options.userSettings.responsiveUI===!0&&(i=!0),t.pages[n].$container.reportRender({reportViewer:t,responsive:i,renderTime:t.renderTime})),t.pages[n].$container},_writePage:function(n,t,i){var u=this;if(n){if(n.CredentialsRequired){u._writeDSCredential(n);return}!i&&n.ReportContainer&&n.ReportContainer.Report.AutoRefresh&&u._addSetPageCallback(function(){u._setAutoRefresh(n.ReportContainer.Report.AutoRefresh)});u.pages[t]?u.pages[t].reportObj=n:u.pages[t]=new r(n);u.sessionID=n.SessionID?n.SessionID:"";try{u.numPages=n.ReportContainer.NumPages===undefined?0:n.ReportContainer.NumPages}catch(f){u.numPages=0}i||(u._renderPage(t),u._setPage(t))}},_reLayoutPage:function(n){var t=this;t.pages[n]&&t.pages[n].needsLayout&&(t.pages[n].$container.reportRender("layoutReport",!0),t.pages[n].needsLayout=!1)},_renderPage:function(n){var t=this,i;t.pages[n]&&t.pages[n].isRendered===!0||(t.pages[n].reportObj.Exception?t._renderPageError(t._getPageContainer(n),t.pages[n].reportObj):(t.renderError=!1,t.hasDocMap=t.pages[n].reportObj.HasDocMap,i=!1,t.options.userSettings&&t.options.userSettings.responsiveUI===!0&&(i=!0),t._getPageContainer(n).reportRender("render",t.pages[n],!1,t.RDLExtProperty),t.pages[n].needsLayout=!0),t.pages[n].isRendered=!0)},_renderPageError:function(t,i){var r=this,u=r.getCurPage();r.renderError=!0;r.pages[u]&&(r.pages[u].isRendered=!1);t.reportRender({reportViewer:r});t.reportRender("writeError",i);r.removeLoadingIndicator();r._trigger(n.renderError,null,i)},_writeDSCredential:function(t){var i=this;i.flushCache();i._resetViewer(!1);i.datasourceCredentials=null;i.credentialDefs=t;i.sessionID=t.SessionID;i.numPages=t.NumPages;i.curPage=1;i.$credentialDialog=i.options.$appContainer.find(".fr-dsc-section");i.$credentialDialog.dsCredential("writeDialog",t.CredentialsList);i.showDSCredential();i._trigger(n.showCredential);i.removeLoadingIndicator()},showDSCredential:function(){var n=this;n.$credentialDialog.dsCredential("openDialog")},_sessionPing:function(){var n=this;n._sessionPingPost(n.sessionID)===!1&&(n.sessionID="");$.each(n.actionHistory,function(t,i){n._sessionPingPost(i.SessionID)})},_sessionPingPost:function(n){var t=this;n&&n!==""&&forerunner.ajax.getJSON(t.options.reportViewerAPI+"/PingSession",{PingSessionID:n,instance:t.options.rsInstance},function(n){return n.Status==="Fail"?!1:!0},function(){console.log("ping error")})},_updateTableHeaders:function(n){$.each(n.floatingHeaders,function(t,i){n._setRowHeaderOffset(i.$tablix,i.$rowHeader);n._setColHeaderOffset(i.$tablix,i.$colHeader)})},_hideTableHeaders:function(){var n=this;$.each(n.floatingHeaders,function(n,t){t.$rowHeader&&t.$rowHeader.css("visibility","hidden");t.$colHeader&&t.$colHeader.css("visibility","hidden")});n.$floatingToolbar&&n.$floatingToolbar.hide()},_navToLink:function(t){var r=this,i=r.element.find("[name='"+t+"']")[0],u;i!==undefined&&(u={top:$(i).offset().top-100,left:$(i).offset().left},r._trigger(n.navToPosition,null,u))},_stopDefaultEvent:function(n){window.ActiveXObject?window.event.returnValue=!1:(n.preventDefault(),n.stopPropagation())},_getHeight:function(n){var i,t=n.clone().css({visibility:"hidden"});return t.find("img").remove(),$("body").append(t),i=t.height()+"px",t.remove(),this._convertToMM(i)},_convertToMM:function(n){if(!n)return 0;var i=n.match(/\D+$/),t=n.match(/\d+/);i.length===1&&(i=i[0]);t.length===1&&(t=t[0]);switch(i){case"px":return t/3.78;case"pt":return t*.352777777778;case"in":return t*25.4;case"mm":return t;case"cm":return t*10;case"em":return t*4.2175176}return t},_highLightWord:function(n,t){if(t&&t!==""){var i=this;$(n).each(function(){var n=$(this).get(0);n.normalize();$.each(n.childNodes,function(n,r){var u,f,e,o,s;if(r.nodeType===3){u=r;try{for(f=u.data.toUpperCase().indexOf(t.toUpperCase());f<u.data.length;){if(f>=0)e=document.createElement("span"),e.className="fr-render-find-keyword Unread",o=u.splitText(f),u=o.splitText(t.length),s=o.cloneNode(!0),e.appendChild(s),r.parentNode.replaceChild(e,o);else break;f=u.data.toUpperCase().indexOf(t.toUpperCase())}}catch(h){}}else i._highLightWord($(r),t)})})}else return;return $(this)},_clearHighLightWord:function(){$(".fr-render-find-keyword").each(function(){var n=document.createTextNode($(this).text());$(this).replaceWith($(n))})},_setAutoRefresh:function(n){var t=this;t.autoRefreshID!==undefined&&(t.autoRefreshID!==null&&t._removeAutoRefreshTimeout(),t.autoRefreshID=setTimeout(function(){if(t.lock===1){t._setAutoRefresh(n);return}var i=t.options.$appContainer.scrollTop(),r=t.options.$appContainer.scrollLeft(),u=$(window).scrollTop(),f=$(window).scrollLeft();t._addSetPageCallback(function(){t.options.$appContainer.scrollTop(i).scrollLeft(r);$(window).scrollTop(u).scrollLeft(f)});forerunner.dialog.closeAllModalDialogs(t.options.$appContainer);t.refreshReport(t.getCurPage());t.autoRefreshID=null},n*1e3))},showRDLExtDialog:function(){var t=this,n=$(".fr-rdl-section").first();n.length===0&&(n=$("<div class='fr-rdl-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),t.options.$appContainer.append(n),n.reportRDLExt({reportViewer:t}));n.reportRDLExt("openDialog")},getRDLExt:function(){var n=this;return n.RDLExtProperty},saveRDLExt:function(n){var t=this;try{t.RDLExtProperty=jQuery.parseJSON(n)}catch(i){return forerunner.dialog.showMessageBox(t.options.$appContainer,i.message,"Error Saving"),!1}return forerunner.ajax.ajax({type:"GET",dataType:"text",url:forerunner.config.forerunnerAPIBase()+"ReportManager/SaveReportProperty/",data:{value:n,path:t.reportPath,propertyName:"ForerunnerRDLExt",instance:t.options.rsInstance},success:function(){return!0},fail:function(){return!1},async:!1})},_removeAutoRefreshTimeout:function(){var n=this;n.autoRefreshID!==null&&clearTimeout(n.autoRefreshID);n.autoRefreshID=null},destroy:function(){var n=this;n._removeAutoRefreshTimeout();n.autoRefreshID=undefined;n.$credentialDialog&&n.$credentialDialog.dsCredential("destroy");n.$printDialog&&n.$printDialog.reportPrint("destroy");n.$paramarea&&n.$paramarea.reportParameter("destroy");n.$RDLExtDialog&&n.$RDLExtDialog.reportRDLExt("destroy");this._destroy()}})});forerunner=forerunner||{};forerunner.ajax=forerunner.ajax||{};forerunner.ssr=forerunner.ssr||{};forerunner.ssr.constants=forerunner.ssr.constants||{};forerunner.ssr.constants.events=forerunner.ssr.constants.events||{};$(function(){var r=forerunner.ssr,n=r.constants.events,i=forerunner.ssr.constants.widgets,t=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");$.widget(i.getFullname(i.parameterModel),{options:{rsInstance:null},_create:function(){var n=this;n.currentSetId=null;n.serverData=null;n.selectSetId=forerunner.helper.guidGen()},getNewSet:function(n,t){return{isAllUser:!1,name:n,id:forerunner.helper.guidGen(),data:t}},isCurrentSetAllUser:function(){var n=this,t;return n.serverData&&n.serverData.parameterSets&&n.currentSetId?(t=n.serverData.parameterSets[n.currentSetId],t.isAllUser):!1},canEditAllUsersSet:function(){var n=this;return n.serverData?n.serverData.canEditAllUsersSet:!1},canUserSaveCurrentSet:function(){var n=this;return n.serverData&&n.serverData.canEditAllUsersSet?!0:!n.isCurrentSetAllUser()},_addNewSet:function(n,t){var i=this,r=i.getNewSet(n,t);return(i.serverData===undefined||i.serverData===null)&&(i.serverData={canEditAllUsersSet:!1,defaultSetId:r.id,parameterSets:{}}),i.serverData.parameterSets[r.id]=r,i.serverData.defaultSetId=r.id,i.currentSetId=r.id,r},getModel:function(){var n=this;return{serverData:n.cloneServerData(),reportPath:n.reportPath}},setModel:function(n){var t=this;t.serverData=n.serverData;t.reportPath=n.reportPath;t.currentSetId=null;t._triggerModelChange()},cloneServerData:function(){var n=this;return n.serverData?$.extend(!0,{},n.serverData):null},applyServerData:function(n,t){var i=this,r=null,u,f,e,o;i.serverData.defaultSetId=n.defaultSetId;for(r in n.parameterSets)u=i.serverData.parameterSets[r],f=n.parameterSets[r],u?(u.isAllUser=f.isAllUser,u.name=f.name):i.serverData.parameterSets[r]=f;e=[];for(r in i.serverData.parameterSets)n.parameterSets.hasOwnProperty(r)||e.push(r);while(e.length>0)r=e.pop(),delete i.serverData.parameterSets[r];i._saveModel();t&&t!=i.currentSetId&&(i.currentSetId=t);o=i.getSetCount(i.serverData);o===0&&(i.currentSetId=null,i.serverData.defaultSetId=null);i._triggerModelChange()},getOptionArray:function(n){var f=this,i=[],u,r;for(u in n)r=n[u],i.push({id:r.id,name:r.name});return i.sort(function(n,t){return n.name>t.name?1:t.name>n.name?-1:0}),i.unshift({id:f.selectSetId,name:t.parameterModel.selectSet}),i},_modelChangeData:function(){var n=this,t={selectedId:n.currentSetId};return t.optionArray=n.getOptionArray(n.serverData.parameterSets),t},_triggerModelChange:function(){var t=this;t._trigger(n.modelChanged,null,t._modelChangeData())},_isLoaded:function(n){var t=this;return t.serverData!==null&&t.reportPath===n},areSetsEmpty:function(n){if(!n||!n.parameterSets)return!0;for(var t in n.parameterSets)return!1;return!0},getSetCount:function(n){var t=0,i;if(!n||!n.parameterSets)return t;for(i in n.parameterSets)t++;return t},_load:function(n){var i=this,r=forerunner.config.forerunnerAPIBase()+"ReportManager/GetUserParameters?reportPath="+n;i._isLoaded(n)||(i.options.rsInstance&&(r+="&instance="+i.options.rsInstance),forerunner.ajax.ajax({url:r,dataType:"json",async:!1,success:function(r){r.ParamsList!==undefined?i._pushNewSet(t.parameterModel.defaultName,r.ParamsList instanceof Array?r:r.ParamsList):r&&(i.serverData=r,i.currentSetId=i.areSetsEmpty(i.serverData)?null:i.serverData.defaultSetId);i.reportPath=n;i._triggerModelChange()},error:function(n){console.log("ParameterModel._load() - error: "+n.status);i.currentSetId=null;i.serverData=null}}))},_saveModel:function(n,t){var i=this,r=forerunner.config.forerunnerAPIBase()+"ReportManager/SaveUserParameters";forerunner.ajax.post(r,{reportPath:i.reportPath,parameters:JSON.stringify(i.serverData),Instance:i.options.rsInstance},function(t){n&&typeof n=="function"&&n(t)},function(){t&&typeof t=="function"&&t()})},save:function(n,i,r){var u=this;n&&(u.serverData===null||u.currentSetId===null?(u._addNewSet(t.parameterModel.defaultName,JSON.parse(n)),u._triggerModelChange()):u.serverData.parameterSets[u.currentSetId].data=JSON.parse(n),u._saveModel(i,r))},setCurrentSet:function(t){var i=this,r;t&&i.serverData&&i.serverData.parameterSets.hasOwnProperty(t)&&(i.currentSetId=t,r=i.serverData.parameterSets[t],r.data?i._trigger(n.modelSetChanged,null,JSON.stringify(r.data)):i._trigger(n.modelSetChanged,null,null))},getCurrentParameterList:function(n){var t=this,r=null,i;if(t._load(n),t.serverData){if(t.currentSetId)i=t.serverData.parameterSets[t.currentSetId];else if(t.serverData.defaultSetId)t.currentSetId=t.serverData.defaultSetId,i=t.serverData.parameterSets[t.serverData.defaultSetId],t._triggerModelChange();else return null;i&&i.data&&(r=JSON.stringify(i.data))}return r},getCurrentSet:function(){var n=this;return n.serverData&&n.currentSetId?n.serverData.parameterSets[n.currentSetId]:null}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.toolTypes,u=forerunner.ssr.constants.events,r="fr-toolbase-dropdown-container",t=function(n,t){var i=t;return typeof n!="undefined"&&(i="",n!==!1&&n!==null&&(i=n)),i};$.widget(i.getFullname(i.toolBase),{options:{toolClass:null},addTools:function(n,t,i){var r=this,u=r.element.find("."+r.options.toolClass);r._addChildTools(u,n,t,i);t?r.enableTools(i):r.disableTools(i)},_addChildTools:function(n,t,i,r){var u=this,e,h,c,f,o,s;for(u.allTools=u.allTools||{},e=$(u._getToolHtml(r[0])),t<=1?n.prepend(e):t>n.children().length?n.append(e):(h=":nth-child("+t+")",c=n.children(h),c.before(e)),f=e,u._addChildTool(f,r[0],i),o=1;o<r.length;o++)s=r[o],f.after(u._getToolHtml(s)),f=f.next(),u._addChildTool(f,s,i)},_addChildTool:function(t,i,r){var u=this;u.allTools[i.selectorClass]=i;i.toolType===n.toolGroup&&i.tools&&u._addChildTools(t,1,r,i.tools);i.sharedClass&&t.addClass(i.sharedClass);i.tooltip&&t.attr("title",i.tooltip);i.dropdown&&u._createDropdown(t,i);i.toolType===n.select&&t.selectTool($.extend(u.options,{toolInfo:i,toolClass:"fr-toolbase-selectinner"}));i.alwaysChange&&t.alwaysChange({handler:i.alwaysChange,toolBase:u});i.visible===!1&&t.hide()},_createDropdown:function(n,t){var u=this;t.$dropdown=$("<div class='"+r+"'/>");t.$dropdown.toolDropdown({$reportViewer:u.options.$reportViewer});t.$dropdown.toolDropdown("addTools",1,!0,t.tools);n.append(t.$dropdown);var i=n.find("."+r),f=t.selectorClass,e=t.imageClass;n.on("click",{toolInfo:t,$tool:n},function(n){i.css("left",n.data.$tool.filter(":visible").offset().left-n.data.$tool.filter(":visible").offsetParent().offset().left);i.css("top",n.data.$tool.height());i.toggle()});$(document).on("click",function(n){!i.is(":visible")||$(n.target).hasClass(f)||$(n.target).hasClass(e)||i.toggle()})},getTool:function(n){var t=this;return t.allTools[n]},showTool:function(n){var t=this,i;t.allTools[n]&&(i=t.element.find("."+n),i.css({display:""}))},showAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.showTool(i.selectorClass)})},hideTool:function(n){var t=this,i;t.allTools[n]&&(i=t.element.find("."+n),i.hide())},hideAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.hideTool(i.selectorClass)})},freezeEnableDisable:function(n){var t=this;t.frozen=n},enableTools:function(t){var i=this;i.frozen!==!0&&$.each(t,function(t,r){var u=i.element.find("."+r.selectorClass);u.removeClass("fr-toolbase-disabled");r.events&&(u.addClass("fr-core-cursorpointer"),i._removeEvent(u,r),i._addEvents(u,r));r.toolType===n.toolGroup&&r.tools&&i.enableTools(r.tools)})},disableTools:function(t){var i=this;i.frozen!==!0&&$.each(t,function(t,r){var u=i.element.find("."+r.selectorClass);u.addClass("fr-toolbase-disabled");r.events&&(u.removeClass("fr-core-cursorpointer"),i._removeEvent(u,r));r.toolType===n.toolGroup&&r.tools&&i.disableTools(r.tools)})},enableAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.allTools[i.selectorClass].isEnable&&n.enableTools([i])})},disableAllTools:function(){var n=this;$.each(n.allTools,function(t,i){if(i.selectorClass){var r=n.element.find("."+i.selectorClass);r.hasClass("fr-toolbase-no-disable-id")||(n.allTools[i.selectorClass].isEnable=!r.hasClass("fr-toolbase-disabled"),n.disableTools([i]))}})},onWindowResize:function(){var n=this,i=".fr-toolbar .fr-toolbar-hidden-on-small",r=".fr-toolbar .fr-toolbar-hidden-on-medium",u=".fr-toolbar .fr-toolbar-hidden-on-large",f=".fr-toolbar .fr-toolbar-hidden-on-very-large",t;n.element.find(i+", "+r+", "+u+", "+f).removeClass("fr-toolbar-hidden");t=n.element.width();t<480?n.element.find(i).addClass("fr-toolbar-hidden"):t<568?n.element.find(r).addClass("fr-toolbar-hidden"):t<768?n.element.find(u).addClass("fr-toolbar-hidden"):n.element.find(f).addClass("fr-toolbar-hidden")},_getToolHtml:function(i){var r=this,u=t(i.toolStateClass,"fr-toolbase-state "),s=t(i.iconClass,"fr-icons24x24"),h=t(i.toolContainerClass,"fr-toolbase-toolcontainer"),l=t(i.groupContainerClass,"fr-toolbase-groupcontainer"),a=t(i.itemContainerClass,"fr-toolbase-itemcontainer"),v=t(i.itemTextContainerClass,"fr-toolbase-item-text-container"),y=t(i.itemTextClass,"fr-toolbase-item-text"),f,e,c,o;return i.toolType===n.button?"<div class='"+h+" "+u+i.selectorClass+"'><div class='"+s+" "+i.imageClass+"' /><\/div>":i.toolType===n.input?(f="",i.inputType&&(f=" type='"+i.inputType+"'"),"<input class='"+i.selectorClass+"'"+f+" />"):i.toolType===n.select?"<div class='fr-toolbase-selectcontainer' />":i.toolType===n.textButton?"<div class='"+h+" "+u+i.selectorClass+"'>"+r._getText(i)+"<\/div>":i.toolType===n.plainText?"<span class='"+i.selectorClass+"'> "+r._getText(i)+"<\/span>":i.toolType===n.containerItem?(e="",i.text&&(e=r._getText(i)),c=t(i.imageClass,""),o="",i.rightImageClass&&(o="<div class='fr-toolbase-rightimage "+i.rightImageClass+"'><\/div>"),"<div class='"+a+" "+u+i.selectorClass+"'><div class='"+s+" "+c+"'><\/div><div class='"+v+"'><div class='"+y+"'>"+e+"<\/div><\/div>"+o+"<\/div>"):i.toolType===n.toolGroup?"<div class='"+l+" "+i.selectorClass+"'><\/div>":void 0},_getText:function(n){var t=this;return typeof n.text=="function"?n.text({$reportViewer:t.options.$reportViewer}):n.text},_removeEvent:function(n,t){var r=this;for(var i in t.events)typeof t.events[i]=="function"&&n.off(i)},_addEvents:function(n,t){var i=this;for(var r in t.events)if(typeof t.events[r]=="function")n.on(r,null,{me:i,$reportViewer:i.options.$reportViewer,$reportExplorer:i.options.$reportExplorer},t.events[r])},_destroy:function(){},_create:function(){},_init:function(){var n=this;n.frozen=!1}});$.widget(i.getFullname("alwaysChange"),$.forerunner.toolBase,{options:{toolBase:null,handler:null},_create:function(){var i=this,n=i.element.find("select"),t=-1;n.on("change",function(n){t=-1;typeof i.options.handler=="function"&&(n.data={me:i.options.toolBase},i.options.handler(n))});n.on("focus",function(){if(n.prop("selectedIndex")!==0&&t===-1){t=n.prop("selectedIndex");n.prop("selectedIndex",0);var i=function(r){n.is(r.target)||(n.prop("selectedIndex")===0&&n.prop("selectedIndex",t),t=-1,$("body").off("keyup mouseup",i))};$("body").off("keyup mouseup",i);$("body").on("keyup mouseup",i)}})}});$.widget(i.getFullname("toolDropdown"),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolbase-dropdown"},_init:function(){var n=this;n._super();n.element.html("<div class='"+n.options.toolClass+" fr-core-widget'/>")}});$.widget(i.getFullname("selectTool"),{options:{toolClass:"fr-toolbase-selectinner"},_init:function(){var n=this,r=t(n.options.toolInfo.optionClass,"fr-toolbase-option"),i;n.element.html("");i=$("<div class='"+n.options.toolClass+" fr-core-widget'><select class='"+n.options.toolInfo.selectorClass+"' readonly='true' ismultiple='false'><\/select><\/div>");n.element.append(i)},_create:function(){var n=this;if(n.options.toolInfo.model&&(n.model=n.options.toolInfo.model.call(n),n.options.toolInfo.modelChange))n.model.on(n.options.toolInfo.modelChange,function(t,i){n._onModelChange.call(n,t,i)})},_onModelChange:function(n,t){var r=this,i=r.element.find("."+r.options.toolInfo.selectorClass);i.html("");$.each(t.optionArray,function(n,t){var r=forerunner.helper.htmlEncode(t.name);$option=$("<option value="+t.id+">"+r+"<\/option>");i.append($option)});i.children("option").each(function(n,r){$(r).val()===t.selectedId&&i.prop("selectedIndex",n)})}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events;$.widget(t.getFullname(t.messageBox),{options:{$appContainer:null},_create:function(){},_init:function(){var t=this,i;t.element.off(n.modalDialogGenericSubmit);t.element.off(n.modalDialogGenericCancel);i=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");$messageBox=new $("<div class='fr-core-dialog-innerPage fr-core-center'><div class='fr-messagebox-innerpage'><div class='fr-core-dialog-header'><div class='fr-messagebox-title'>"+i.dialog.title+"<\/div><\/div><div class='fr-messagebox-content'><span class='fr-messagebox-msg'/><\/div><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='close' type='button' class='fr-messagebox-close-id fr-messagebox-submit fr-core-dialog-button' value='"+i.dialog.close+"' /><\/div><\/div><\/div><\/div>");t.element.append($messageBox);t.element.find(".fr-messagebox-close-id").on("click",function(){t.closeDialog()});t.element.on(n.modalDialogGenericSubmit,function(){t.closeDialog()});t.element.on(n.modalDialogGenericCancel,function(){t.closeDialog()})},openDialog:function(n,t){var i=this;i.element.find(".fr-messagebox-msg").text(n);t&&i.element.find(".fr-messagebox-title").text(t);forerunner.dialog.showModalDialog(i.options.$appContainer,i)},closeDialog:function(){var n=this;$(".fr-messagebox-msg").val();forerunner.dialog.closeModalDialog(n.options.$appContainer,n)}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var t=forerunner.ssr,r=t.constants.toolTypes,i=forerunner.ssr.constants.events,n=forerunner.ssr.constants.widgets;t.DefaultAppTemplate=function(n){var t=this;t.options={$container:null,isFullScreen:!0};n&&$.extend(this.options,n)};t.DefaultAppTemplate.prototype={render:function(){var n=this,u=n.options.$container,i,e,o,s,t,f,h,c,l,a,v,r,y,p,w,b;return u.addClass("fr-layout-container"),n.$container=u,i=new $("<div />"),i.addClass("fr-layout-leftpane"),n.$leftpane=i,e=new $("<div />"),e.addClass("fr-layout-leftheader"),n.$leftheader=e,o=new $("<div />"),o.addClass("fr-layout-leftheaderspacer"),n.$leftheaderspacer=o,s=new $("<div />"),s.addClass("fr-layout-leftpanecontent"),n.$leftpanecontent=s,i.append(e),i.append(o),i.append(s),u.append(i),t=new $("<div />"),t.addClass("fr-layout-mainviewport"),n.$mainviewport=t,u.append(t),f=new $("<div />"),f.addClass("fr-layout-topdiv"),n.$topdiv=f,t.append(f),h=new $("<div />"),h.addClass("fr-layout-mainheadersection"),n.$mainheadersection=h,f.append(h),c=new $("<div />"),c.addClass("fr-layout-topdivspacer"),n.$topdivspacer=c,t.append(c),l=new $("<div />"),l.addClass("fr-layout-pagesection"),n.$pagesection=l,t.append(l),n.$mainsection=new $("<div />"),n.$mainsection.addClass("fr-layout-mainsection"),n.$pagesection.append(n.$mainsection),n.$docmapsection=new $("<div />"),n.$docmapsection.addClass("fr-layout-docmapsection"),n.$pagesection.append(n.$docmapsection),a=new $("<div />"),a.addClass("fr-layout-bottomdiv"),n.$bottomdiv=a,t.append(a),v=new $("<div />"),v.addClass("fr-layout-bottomdivspacer"),n.$bottomdivspacer=v,t.append(v),r=new $("<div />"),r.addClass("fr-layout-rightpane"),n.$rightpane=r,y=new $("<div />"),y.addClass("fr-layout-rightheader"),n.$rightheader=y,p=new $("<div />"),p.addClass("fr-layout-rightheaderspacer"),n.$rightheaderspacer=p,w=new $("<div />"),w.addClass("fr-layout-rightpanecontent"),n.$rightpanecontent=w,r.append(y),r.append(p),r.append(w),u.append(r),b=new $("<div class=fr-layout-unzoomsection />"),n.$unzoomsection=b,t.append(n.$unzoomsection),n.options.isFullScreen||n._makePositionAbsolute(),n.bindEvents(),setInterval(function(){n.toggleZoom()},100),this},_makePositionAbsolute:function(){var n=this;n.$topdiv.addClass("fr-layout-position-absolute");n.$leftheader.addClass("fr-layout-position-absolute");n.$rightheader.addClass("fr-layout-position-absolute");n.$leftpane.addClass("fr-layout-position-absolute");n.$rightpane.addClass("fr-layout-position-absolute");n.$leftpanecontent.addClass("fr-layout-position-absolute");n.$rightpanecontent.addClass("fr-layout-position-absolute")},_makePositionFixed:function(){var n=this;n.$topdiv.removeClass("fr-layout-position-absolute");n.$leftheader.removeClass("fr-layout-position-absolute");n.$rightheader.removeClass("fr-layout-position-absolute");n.$leftpane.removeClass("fr-layout-position-absolute");n.$rightpane.removeClass("fr-layout-position-absolute");n.$leftpanecontent.removeClass("fr-layout-position-absolute");n.$rightpanecontent.removeClass("fr-layout-position-absolute")},bindEvents:function(){var n=this,t=forerunner.ssr.constants.events,i,r;forerunner.history.on(t.historyRoute(),function(n,t){t.name==="transitionToReportManager"||t.name==="transitionToOpenResource"||t.name==="transitionToSearch"?(forerunner.device.allowZoom(!1),$("html").addClass("fr-Explorer-background")):(t.name==="transitionToReportViewer"||t.name==="transitionToReportViewerWithRSURLAccess")&&$("html").removeClass("fr-Explorer-background")});i=$(".fr-layout-mainheadersection",n.$container);i.on(t.toolbarMenuClick(),function(){n.showSlideoutPane(!0)});i.on(t.toolbarParamAreaClick(),function(){n.showSlideoutPane(!1)});i.on(t.reportExplorerToolbarMenuClick(),function(){n.showSlideoutPane(!0)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterRender(),function(){n.showSlideoutPane(!1)});$(".fr-layout-leftheader",n.$container).on(t.leftToolbarMenuClick(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-rightheader",n.$container).on(t.rightToolbarParamAreaClick(),function(){n.hideSlideoutPane(!1)});$(".fr-layout-leftpanecontent",n.$container).on(t.toolPaneActionStarted(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-leftpanecontent",n.$container).on(t.reportExplorerToolPaneActionStarted(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterSubmit(),function(){n.hideSlideoutPane(!1)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterCancel(),function(){n.hideSlideoutPane(!1)});n.$container.on(t.showModalDialog,function(){n.$container.addClass("fr-layout-container-noscroll");n.$pagesection.addClass("fr-layout-pagesection-noscroll");n.showModal=!0});n.$container.on(t.closeModalDialog,function(){n.showModal=!1;n.$leftpane.is(":visible")||n.$rightpane.is(":visible")||(n.$container.removeClass("fr-layout-container-noscroll"),n.$pagesection.removeClass("fr-layout-pagesection-noscroll"))});if(r=forerunner.device.isTouch(),!n.options.isFullScreen&&r){$(n.$container).hammer({stop_browser_behavior:{userSelect:!1},swipe_max_touches:22,drag_max_touches:2}).on("touch release",function(t){if(t.gesture)switch(t.type){case"touch":if(forerunner.helper.containElement(t.target,["fr-layout-topdiv"])||n.$container.hasClass("fr-layout-container-noscroll"))return;n.$topdiv.hide();break;case"release":t.gesture.velocityX===0&&t.gesture.velocityY===0&&n._updateTopDiv(n)}});$(n.$container).on("scrollstop",function(){n._updateTopDiv(n)});$(window).on("scrollstop",function(){n._updateTopDiv(n)})}$(n.$container).on("touchmove",function(t){if(n.$container.hasClass("fr-layout-container-noscroll")){var i=forerunner.helper.containElement(t.target,["fr-layout-leftpane","fr-layout-rightpane","fr-core-dialog-form","fr-nav-container","ui-autocomplete"]);i||t.preventDefault()}});if($(window).resize(function(){n.ResetSize();n._updateTopDiv(n);n.setBackgroundLayout()}),!n.options.isFullScreen&&!r){$(window).on("scroll",function(){n._updateTopDiv(n)});n.$container.on("scroll",function(){n._updateTopDiv(n)})}if(forerunner.device.isiOS()){$(document.documentElement).height(window.innerHeight);$(window).on("orientationchange",function(){$(document.documentElement).height(window.innerHeight);n.hideSlideoutPane(!0);n.hideSlideoutPane(!1)})}},_updateTopDiv:function(n){if(!n.options.isFullScreen){var t=Math.min($(window).scrollTop()-n.$container.offset().top,n.$container.height()-38);n.$leftpane.is(":visible")?n.$leftpane.css("top",t>0?t:n.$container.scrollTop()):n.$rightpane.is(":visible")&&n.$rightpane.css("top",t>0?t:n.$container.scrollTop());n.$topdiv.css("top",t>0?t:n.$container.scrollTop());n.$topdiv.css("left",n.$container.scrollLeft());n.isZoomed()||n.$topdiv.show()}},toggleZoom:function(){var n=this,i=forerunner.device.zoomLevel(),t;if(n.isZoomed()&&!n.wasZoomed){forerunner.device.isAndroid()&&n.$topdiv.is(":visible")&&(n.$topdiv.css("width","100%"),n.$topdiv.css("width","device-width"));n.wasZoomed=!0;return}!n.isZoomed()&&n.wasZoomed&&(t=$(".fr-layout-reportviewer",n.$container),n._allowZoom(!1),n.wasZoomed=!1,forerunner.device.isAndroid()&&(n.$topdiv.css("width","100%"),n.$topdiv.fadeOut(10).fadeIn(10)))},wasZoomed:!1,isZoomed:function(){var n=forerunner.device.zoomLevel();return n>1.15||n<.985?!0:!1},_firstTime:!0,_lastHeight:0,getHeightValues:function(){var t=this,n={};return n.windowHeight=$(window).height(),n.containerHeight=t.$container.height(),forerunner.device.isiOS()?(n.windowHeight=document.documentElement.clientHeight,!forerunner.device.isiPhone()||forerunner.device.isiPhoneFullscreen()||forerunner.device.isStandalone()||(n.windowHeight+=60,t._firstTime&&(n.containerHeight+=60,t._firstTime=!1))):forerunner.device.isAndroid()&&(n.windowHeight=window.innerHeight),n.max=Math.max(n.windowHeight,n.containerHeight),n.paneHeight=t.options.isFullScreen?n.windowHeight-38:n.containerHeight-38,window.navigator.standalone&&forerunner.device.isiOS()&&(n.paneHeight=n.max),n},ResetSize:function(){var n=this,t=n.getHeightValues();forerunner.device.isiPhone()&&($("html").css({minHeight:t.max}),$("body").css({minHeight:t.max}));n.$leftpanecontent.css({height:t.paneHeight});n.$rightpanecontent.css({height:t.paneHeight});n.options.isFullScreen?(n.$leftpane.css({height:t.max}),n.$rightpane.css({height:t.max})):(n.$leftpane.css({height:t.containerHeight}),n.$rightpane.css({height:t.containerHeight}));$(".fr-param-container",n.$container).css({height:"100%"});$(".fr-toolpane",n.$container).css({height:"100%"})},showTopDiv:function(n){var t=this;n===!0?(t.$topdiv.hide(),t.$viewer.reportViewer("option","toolbarHeight",0)):(t.$topdiv.show(),t.$viewer.reportViewer("option","toolbarHeight",t.$topdiv.outerHeight()))},bindViewerEvents:function(){var n=this,i=forerunner.ssr.constants.events,t=$(".fr-layout-reportviewer",n.$container),r;n.$viewer=t;t.on(i.reportVieweractionHistoryPop(),function(){n.hideSlideoutPane(!1)});t.on(i.reportViewerDrillThrough(),function(){n.hideSlideoutPane(!0);n.hideSlideoutPane(!1)});t.on(i.reportViewerShowNav(),function(i,r){var u=n.$bottomdivspacer;r.open?(u.show(),forerunner.device.isSmall(t)&&n.$pagesection.hide(),n.$container.addClass("fr-layout-container-noscroll"),n.$pagesection.addClass("fr-layout-pagesection-noscroll")):(u.hide(),n.$pagesection.show(),n.$container.removeClass("fr-layout-container-noscroll"),n.$pagesection.removeClass("fr-layout-pagesection-noscroll"))});t.on(i.reportViewerShowDocMap(),function(){n.scrollLock=!0;n.savePosition&&n.$viewer.reportViewer("option","savePosition",n.savePosition);n.scrollToPosition(n.getOriginalPosition())});t.on(i.reportViewerHideDocMap(),function(){n.scrollLock=!1;n.restoreScrollPosition()});t.on(i.reportViewerallowZoom(),function(t,i){n.showTopDiv.call(n,i.isEnabled)});t.on(i.reportViewerSetPageDone(),function(){n.setBackgroundLayout()});t.on(i.reportViewerChangePage(),function(){n.$pagesection.show()});t.on(i.reportViewerNavToPosition(),function(t,i){n.scrollToPosition(i);n.savePosition=null});t.on(i.reportViewerPreLoadReport(),function(){n.cleanUp()});t.on(i.reportViewerFind(),function(){n.$leftpane.is(":visible")&&n.hideSlideoutPane(!0)});if(r=forerunner.device.isTouch(),r&&!n.options.isFullScreen)n.$pagesection.on("scrollstop",function(){n._updateTopDiv(n)});t.reportViewer("option","onInputFocus",n.onInputFocus);t.reportViewer("option","onInputBlur",n.onInputBlur)},onInputFocus:function(){var n=this;forerunner.device.isiOS()&&setTimeout(function(){n.options.isFullScreen&&n._makePositionAbsolute();n.$pagesection.addClass("fr-layout-pagesection-noscroll");n.$container.addClass("fr-layout-container-noscroll");$(window).scrollTop(0);$(window).scrollLeft(0);n.ResetSize()},50)},onInputBlur:function(){var n=this;forerunner.device.isiOS()&&setTimeout(function(){n.options.isFullScreen&&n._makePositionFixed();n.$leftpane.is(":visible")||n.$rightpane.is(":visible")||n.showModal===!0||(n.$pagesection.removeClass("fr-layout-pagesection-noscroll"),n.$container.removeClass("fr-layout-container-noscroll"));$(window).scrollTop(0);$(window).scrollLeft(0);n.ResetSize()},50)},getScrollPosition:function(){var t=this,n={};return n.left=$(window).scrollLeft(),n.top=$(window).scrollTop(),n.innerLeft=t.$container.scrollLeft(),n.innerTop=t.$container.scrollTop(),n},getOriginalPosition:function(){var n=this;return{left:n.$container.offset().left>100?n.$container.offset().left:0,top:0,innerLeft:0,innerTop:0}},scrollToPosition:function(n){var t=this;t.savePosition||(t.savePosition=t.getScrollPosition());n.left!==null&&$(window).scrollLeft(n.left);n.top!==null&&$(window).scrollTop(n.top);n.innerLeft!==null&&t.$container.scrollLeft(n.innerLeft);n.innerTop!==null&&t.$container.scrollTop(n.innerTop)},restoreScrollPosition:function(){var n=this;n.savePosition&&!n.scrollLock&&(n.$container.scrollLeft(n.savePosition.innerLeft),n.$container.scrollTop(n.savePosition.innerTop),$(window).scrollLeft(n.savePosition.left),$(window).scrollTop(n.savePosition.top),n.savePosition=null)},hideAddressBar:function(n,t){var i=this,r=i.getOriginalPosition(),u=document.height<=window.outerHeight+10?50:0;n||(r.left=null);setTimeout(function(){i.scrollToPosition(r);typeof t=="function"&&t()},u)},restoreScroll:function(){var n=this;document.height<=window.outerHeight+10?setTimeout(function(){n.restoreScrollPosition()},50):setTimeout(function(){n.restoreScrollPosition()},0)},hideSlideoutPane:function(t){var r=this,e=t?"fr-layout-mainViewPortShiftedRight":"fr-layout-mainViewPortShiftedLeft",h=r.$mainviewport,u=t?r.$leftpane:r.$rightpane,o=r.$topdiv,f=Number(200),s=r.$mainheadersection.is(":"+n.namespace+"-"+n.reportExplorerToolbar);u.is(":visible")&&(t?u.slideLeftHide(f*.5):u.slideRightHide(f*.5),o.removeClass(e,f),s?r.$mainheadersection.reportExplorerToolbar("showAllTools"):r.$mainheadersection.toolbar("showAllTools"));r.showModal!==!0&&(r.$pagesection.removeClass("fr-layout-pagesection-noscroll"),r.$container.removeClass("fr-layout-container-noscroll"));forerunner.device.isAndroid()&&!forerunner.device.isChrome()&&r.$pagesection.addClass("fr-layout-android");r.restoreScroll();r.$container.resize();r.$viewer!==undefined&&r.$viewer.is(":visible")&&(forerunner.device.isAllowZoom()||r.$viewer.reportViewer("allowSwipe",!0),r.$viewer.reportViewer("triggerEvent",i.hidePane,{isLeftPane:t}))},_allowZoom:function(n){var t=this;forerunner.device.isWindowsPhone()||(t.$viewer!==undefined&&t.$viewer.is(":visible")?t.$viewer.reportViewer("allowZoom",n):forerunner.device.allowZoom(n))},showUnZoomPane:function(){var n=this;n.showTopDiv(!0);n.$unzoomsection.show()},showSlideoutPane:function(t){var r=this;r._allowZoom(!1);r.$viewer!==undefined&&r.$viewer.is(":visible")&&r.$viewer.reportViewer("allowSwipe",!1);var e=t?"fr-layout-mainViewPortShiftedRight":"fr-layout-mainViewPortShiftedLeft",o=r.$mainviewport,u=t?r.$leftpane:r.$rightpane,s=r.$topdiv,f=Number(200),h=r.$mainheadersection.is(":"+n.namespace+"-"+n.reportExplorerToolbar);u.is(":visible")||(u.css({height:Math.max($(window).height(),o.height())}),t?(u.css({top:r.$container.scrollTop()}),u.slideLeftShow(f)):(u.css({top:r.$container.scrollTop()}),u.slideRightShow(f)),s.addClass(e,f),h?r.$mainheadersection.reportExplorerToolbar("hideAllTools"):r.$mainheadersection.toolbar("hideAllTools"),r._allowZoom(!1),r.$viewer!==undefined&&r.$viewer.is(":visible")&&r.$viewer.reportViewer("allowSwipe",!1));r.hideAddressBar(t,function(){r.$container.addClass("fr-layout-container-noscroll");r.$pagesection.addClass("fr-layout-pagesection-noscroll");r.$container.resize()});r.$viewer!==undefined&&r.$viewer.is(":visible")&&r.$viewer.reportViewer("triggerEvent",i.showPane,{isLeftPane:t})},toggleSlideoutPane:function(n){var t=this,i=n?t.$leftpane:t.$rightpane;i.is(":visible")?this.hideSlideoutPane(n):this.showSlideoutPane(n)},setBackgroundLayout:function(){var n=this,t=$(".fr-report-areacontainer",n.$container),i=n.$container.height(),r=n.$container.width();t.height()>i-38||t.width()>r?$(".fr-render-bglayer",n.$container).css("position","absolute").css("height",Math.max(t.height(),i-38)).css("width",Math.max(t.width(),r)):$(".fr-render-bglayer",n.$container).css("position","absolute").css("height",i-38).css("width",r)},cleanUp:function(){var n=this;n.hideSlideoutPane(!0);n.hideSlideoutPane(!1);n.$bottomdiv.hide();n.$bottomdivspacer.hide();n.$pagesection.show();n.$pagesection.removeClass("fr-layout-pagesection-noscroll");n.$container.removeClass("fr-layout-container-noscroll")},_selectedItemPath:null}});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};forerunner.ssr.tools=forerunner.ssr.tools||{};forerunner.ssr.tools.toolbar=forerunner.ssr.tools.toolbar||{};forerunner.ssr.tools.groups=forerunner.ssr.tools.groups||{};$(function(){var r=forerunner.ssr.constants.widgets,i=forerunner.ssr.constants.events,n=forerunner.ssr.tools.toolbar,t=forerunner.ssr.tools.groups,u=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");$.widget(r.getFullname(r.toolbar),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolbar"},_initCallbacks:function(){var t=this;t.options.$reportViewer.on(i.reportViewerSetPageDone(),function(i,r){if(r.renderError===!0)t.enableTools([n.btnMenu,n.btnRefresh]),t._clearBtnStates();else{$("input.fr-toolbar-reportpage-textbox",t.element).val(r.newPageNum);var f=t.options.$reportViewer.reportViewer("getNumPages");t.enableTools(t._viewerButtons(!1));t._updateBtnStates(r.newPageNum,f);r.paramLoaded&&r.numOfVisibleParameters===0&&t.disableTools([n.btnParamarea]);r.credentialRequired===!1&&t.disableTools([n.btnCredential]);t.element.find(".fr-toolbar-keyword-textbox").watermark(u.toolbar.search,{useNative:!1,className:"fr-param-watermark"})}});t.options.$reportViewer.on(i.reportViewerShowParamArea(),function(){t.enableTools([n.btnParamarea])});t.options.$reportViewer.on(i.reportViewerShowDocMap(),function(){t.disableAllTools();t.enableTools([n.btnDocumentMap,n.btnMenu,n.btnReportBack])});t.options.$reportViewer.on(i.reportViewerHideDocMap(),function(){t.enableAllTools()});t.options.$reportViewer.on(i.reportViewerShowNav(),function(i,r){if(r.open)t.disableAllTools(),t.enableTools([n.btnNav,n.btnMenu]),t.freezeEnableDisable(!0);else{t.freezeEnableDisable(!1);t.enableAllTools();var u=t.options.$reportViewer.reportViewer("getNumPages");t._updateBtnStates(r.newPageNum,u)}});t.options.$reportViewer.on(i.reportViewerDrillThrough(),function(){t._leaveCurReport()});t.options.$reportViewer.on(i.reportViewerPreLoadReport(),function(){t._leaveCurReport()});t.options.$reportViewer.on(i.reportViewerChangeReport(),function(i,r){t._leaveCurReport();r.credentialRequired===!0&&t.enableTools([n.btnCredential])});t.options.$reportViewer.on(i.reportViewerFindDone(),function(){forerunner.device.isTouch()&&t.element.find(".fr-toolbar-keyword-textbox").trigger("blur")});t.options.$reportViewer.on(i.reportViewerShowCredential(),function(){t.enableTools([n.btnMenu,n.btnCredential])});t.options.$reportViewer.on(i.reportViewerResetCredential(),function(i,r){t._clearBtnStates();t.disableTools(t._viewerButtons());r.paramLoaded===!1&&t.disableTools([n.btnParamarea]);t.enableTools([n.btnMenu,n.btnReportBack,n.btnCredential])})},_init:function(){var t=this;t._super();t.element.html("<div class='"+t.options.toolClass+" fr-core-widget'/>");t.addTools(1,!1,t._viewerButtons());t.addTools(1,!1,[n.btnParamarea]);t.enableTools([n.btnMenu]);t.options.$reportViewer&&t._initCallbacks()},_viewerButtons:function(i){var r;return r=i===!0||i===undefined?[n.btnMenu,n.btnReportBack,n.btnCredential,n.btnNav,n.btnRefresh,n.btnDocumentMap,t.btnExportDropdown,t.btnVCRGroup,t.btnFindGroup,n.btnZoom,n.btnPrint]:[n.btnMenu,n.btnCredential,n.btnNav,n.btnRefresh,n.btnDocumentMap,t.btnExportDropdown,t.btnVCRGroup,t.btnFindGroup,n.btnZoom,n.btnPrint],forerunner.device.isAndroid()&&!forerunner.device.isChrome()&&(r=i===!0||i===undefined?[n.btnMenu,n.btnReportBack,n.btnCredential,n.btnNav,n.btnRefresh,n.btnDocumentMap,t.btnExportDropdown,t.btnVCRGroup,t.btnFindGroup,n.btnPrint]:[n.btnMenu,n.btnNav,n.btnCredential,n.btnRefresh,n.btnDocumentMap,t.btnExportDropdown,t.btnVCRGroup,t.btnFindGroup,n.btnPrint]),r},_updateBtnStates:function(t,i){var r=this;i!==0?(r.element.find(".fr-toolbar-numPages-button").html(i),r.element.find(".fr-toolbar-reportpage-textbox").attr({max:i,min:1})):r.element.find(".fr-toolbar-numPages-button").html("?");r.options.$reportViewer.reportViewer("getHasDocMap")?r.enableTools([n.btnDocumentMap]):r.disableTools([n.btnDocumentMap]);t<=1?r.disableTools([n.btnPrev,n.btnFirstPage]):r.enableTools([n.btnPrev,n.btnFirstPage]);t>=i&&i!==0?r.disableTools([n.btnNext,n.btnLastPage]):i===0?r.disableTools([n.btnLastPage]):r.enableTools([n.btnNext,n.btnLastPage]);i===1?r.disableTools([n.btnNav]):r.enableTools([n.btnNav])},_clearBtnStates:function(){var n=this;n.element.find(".fr-toolbar-keyword-textbox").val("");n.element.find(".fr-toolbar-reportpage-textbox").val("");n.element.find(".fr-toolbar-numPages-button").html(0)},_leaveCurReport:function(){var t=this;t._clearBtnStates();t.disableTools(t._viewerButtons(!1));t.disableTools([n.btnCredential,n.btnParamarea])},_destroy:function(){},_create:function(){var n=this;$(window).resize(function(){n.onWindowResize.call(n)})}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var r=forerunner.ssr.constants.widgets,i=forerunner.ssr.constants.events,n=forerunner.ssr.tools.toolpane,t=forerunner.ssr.tools.groups,u=forerunner.ssr.tools.mergedItems,f=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");$.widget(r.getFullname(r.toolPane),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolpane"},_initCallbacks:function(){var r=this;r.options.$reportViewer.on(i.reportViewerSetPageDone(),function(i,e){if(e.renderError===!0)r.enableTools([n.itemRefresh,u.itemFolders,t.itemFolderGroup]);else{$("input.fr-item-textbox-reportpage",r.element).val(e.newPageNum);var o=r.options.$reportViewer.reportViewer("getNumPages");r.enableTools(r._viewerItems(!1));r._updateItemStates(e.newPageNum,o);e.credentialRequired===!1&&r.disableTools([n.itemCredential]);r.element.find(".fr-item-keyword-textbox").watermark(f.toolbar.search,{useNative:!1,className:"fr-param-watermark"})}});r.options.$reportViewer.on(i.reportViewerShowDocMap(),function(){r.disableAllTools();r.enableTools([n.itemDocumentMap])});r.options.$reportViewer.on(i.reportViewerHideDocMap(),function(){r.enableAllTools()});r.options.$reportViewer.on(i.reportViewerShowNav(),function(t,i){if(i.open)r.disableAllTools(),r.enableTools([n.itemNav]),r.freezeEnableDisable(!0);else{r.freezeEnableDisable(!1);r.enableAllTools();var u=r.options.$reportViewer.reportViewer("getNumPages");r._updateItemStates(i.newPageNum,u)}});r.options.$reportViewer.on(i.reportViewerDrillThrough(),function(){r._leaveCurReport()});r.options.$reportViewer.on(i.reportViewerPreLoadReport(),function(){r._leaveCurReport()});r.options.$reportViewer.on(i.reportViewerChangeReport(),function(t,i){r._leaveCurReport();i.credentialRequired===!0&&r.enableTools([n.itemCredential])});r.options.$reportViewer.on(i.reportViewerFindDone(),function(){forerunner.device.isTouch()&&r.element.find(".fr-item-keyword-textbox").trigger("blur")});r.options.$reportViewer.on(i.reportViewerShowCredential(),function(){r.enableTools([n.itemCredential])});r.options.$reportViewer.on(i.reportViewerResetCredential(),function(){r._clearItemStates();r.disableTools(r._viewerItems());r.enableTools([n.itemReportBack,n.itemCredential,u.itemFolders,t.itemFolderGroup])})},_init:function(){var n=this,t,i;n._super();n.element.html("");t=new $("<div class='"+n.options.toolClass+" fr-core-widget' />");$(n.element).append(t);n.addTools(1,!1,n._viewerItems());i=new $("<div />");i.attr("style","height:65px");t.append(i);n.options.$reportViewer&&n._initCallbacks()},_viewerItems:function(i){var r,u=this;return r=i===!0||i===undefined?[t.itemVCRGroup,n.itemReportBack,n.itemCredential,n.itemNav,n.itemRefresh,n.itemDocumentMap,n.itemZoom,n.itemExport,t.itemExportGroup,n.itemPrint,t.itemFindGroup]:[t.itemVCRGroup,n.itemCredential,n.itemNav,n.itemRefresh,n.itemDocumentMap,n.itemZoom,n.itemExport,t.itemExportGroup,n.itemPrint,t.itemFindGroup],forerunner.device.isAndroid()&&!forerunner.device.isChrome()&&(r=i===!0||i===undefined?[t.itemVCRGroup,n.itemReportBack,n.itemCredential,n.itemNav,n.itemRefresh,n.itemDocumentMap,n.itemExport,t.itemExportGroup,n.itemPrint,t.itemFindGroup]:[t.itemVCRGroup,n.itemCredential,n.itemNav,n.itemRefresh,n.itemDocumentMap,n.itemExport,t.itemExportGroup,n.itemPrint,t.itemFindGroup]),u.options.$reportViewer.reportViewer("option","isAdmin")&&(r=r.concat([n.itemRDLExt])),r},_updateItemStates:function(t,i){var r=this;i!==0?(r.element.find(".fr-toolbar-numPages-button").html(i),r.element.find(".fr-item-textbox-reportpage").attr({max:i,min:1})):r.element.find(".fr-toolbar-numPages-button").html("?");r.options.$reportViewer.reportViewer("getHasDocMap")?r.enableTools([n.itemDocumentMap]):r.disableTools([n.itemDocumentMap]);t<=1?r.disableTools([n.itemPrev,n.itemFirstPage]):r.enableTools([n.itemPrev,n.itemFirstPage]);t>=i&&i!==0?r.disableTools([n.itemNext,n.itemLastPage]):i===0?r.disableTools([n.itemLastPage]):r.enableTools([n.itemNext,n.itemLastPage]);i===1?r.disableTools([n.itemNav]):r.enableTools([n.itemNav])},_clearItemStates:function(){var n=this;n.element.find(".fr-item-keyword-textbox").val("");n.element.find(".fr-item-textbox-reportpage").val("");n.element.find(".fr-toolbar-numPages-button").html(0)},_leaveCurReport:function(){var t=this;t._clearItemStates();t.disableTools(t._viewerItems(!1));t.disableTools([n.itemCredential])}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events,i=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");$.widget(n.getFullname(n.pageNav),{options:{$reportViewer:null,rsInstance:null},_create:function(){},_setCurrentPage:function(n){var t=this,i;t.currentPageNum!==null&&t.currentPageNum!==n&&(i=t.listItems[t.currentPageNum-1],i.removeClass("fr-nav-selected"),i.find("img").removeClass("fr-nav-page-thumb-selected"));t.currentPageNum=n;t._ScrolltoPage();i=t.listItems[t.currentPageNum-1];i.addClass("fr-nav-selected");i.find("img").addClass("fr-nav-page-thumb-selected")},_ScrolltoPage:function(){var n=this,t,i;if(n.currentPageNum>n._maxNumPages&&n.options.$reportViewer.reportViewer("getNumPages")===0){for(t=n._maxNumPages+1;t<=n.currentPageNum;t++)n._renderListItem(t,n.$list);n._maxNumPages=n.currentPageNum}n.currentPageNum&&!forerunner.device.isElementInViewport(n.listItems[n.currentPageNum-1].get(0))&&(i=n.$ul.scrollLeft()+n.listItems[n.currentPageNum-1].position().left,n.$ul.scrollLeft(i))},_maxNumPages:null,_renderListItem:function(n,t,i){var r=this,s=r.options.$reportViewer.reportViewer("getSessionID"),h=r.options.$reportViewer.reportViewer("getReportViewerAPI"),c=r.options.$reportViewer.reportViewer("getReportPath"),e=h+"/Thumbnail/?ReportPath="+c+"&SessionID="+s+"&PageNumber="+n,f,o,u;r.options.rsInstance&&(e+="&instance="+r.options.rsInstance);f=new $("<LI />");i&&r.$loadMore?f.insertBefore(r.$loadMore):t.append(f);r.listItems[n-1]=f;o=new $("<DIV class='fr-nav-centertext'>"+n.toString()+"<\/DIV>");u=new $("<IMG />");u.addClass("fr-nav-page-thumb");u.addClass("lazy");u.attr("src",forerunner.config.forerunnerFolder()+"reportviewer/Images/page-loading.gif");u.attr("data-src",e);u.data("pageNumber",n);this._on(u,{click:function(n){r.options.$reportViewer.reportViewer("navToPage",$(n.currentTarget).data("pageNumber"));forerunner.device.isSmall(r.options.$reportViewer)&&r.options.$reportViewer.reportViewer("showNav")}});f.addClass("fr-nav-item");f.append(o);f.append(u)},_batchSize:10,_renderList:function(){var n=this,e=forerunner.device.isTouch(),i,r,t,u,f;for(i=new $("<ul class='fr-nav-container fr-core-widget' />"),n.$ul=i,n._maxNumPages=n.options.$reportViewer.reportViewer("getNumPages"),n._maxNumPages===0&&(n._maxNumPages=n._batchSize),n.listItems=new Array(n._maxNumPages),r=1;r<=n._maxNumPages;r++)n._renderListItem(r,i);if(n._maxNumPages!==n.options.$reportViewer.reportViewer("getNumPages")){t=new $("<LI />");t.addClass("fr-nav-loadmore");t.addClass("fr-nav-item");t.addClass("fr-core-cursorpointer");t.on("click",function(){var r,i,u;if(n.options.$reportViewer.reportViewer("getNumPages")===0){for(i=n._maxNumPages+1;i<=n._maxNumPages+n._batchSize;i++)n._renderListItem(i,n.$list,!0);n._maxNumPages+=n._batchSize}else{if(r=n.options.$reportViewer.reportViewer("getNumPages"),r!==n._maxNumPages){for(i=n._maxNumPages+1;i<=r;i++)n._renderListItem(i,n.$list,!0);n._maxNumPages=r}t.remove()}u=$("ul.fr-nav-container",$(n.element));$(".lazy",n.$list).lazyload({$container:u,onError:function(n){t&&t.remove();n.data.parent().remove()}})});u=new $("<Div />");u.addClass("fr-nav-loadmore-text");t.append(u);i.append(t);n.$loadMore=t}return f=new $("<LI />"),f.addClass("fr-nav-li-spacer"),i.append(f)},reset:function(){var n=this;n.element.hide();n.isRendered=!1},_render:function(){var n=this,e,t,r,u,f;n.element.html("");e=forerunner.device.isTouch();t=new $("<DIV />");t.addClass("fr-nav-container");r=$("<DIV />");r.addClass("fr-nav-close-container");u=$("<SPAN>"+i.paramPane.cancel+"<\/SPAN>");u.addClass("fr-nav-close");r.append(u);r.on("click",function(){n.options.$reportViewer.reportViewer("showNav")});t.append(r);n.currentPageNum=n.options.$reportViewer.reportViewer("getCurPage");f=n._renderList();n.$list=f;t.append(f);n.element.css("display","block");n.element.append(t);n.element.hide();n._initCallbacks();n._setCurrentPage(n.currentPageNum)},_makeVisible:function(n){var t=this;n?(t.element.fadeIn("fast"),t._ScrolltoPage()):t.element.fadeOut("fast")},showNav:function(){var n=this,t;n.isRendered||(n._render(),n.isRendered=!0,t=$("ul.fr-nav-container",$(n.element)),$(".lazy",n.$list).lazyload({$container:t,onError:function(t){n.$loadMore&&n.$loadMore.remove();t.data.parent().remove()}}));n._makeVisible(!n.element.is(":visible"));$(".fr-nav-container",$(n.element)).css("position",n.element.css("position"));forerunner.device.isMSIE()&&n._ScrolltoPage()},_initCallbacks:function(){var n=this;n.options.$reportViewer.on(t.reportViewerChangePage(),function(t,i){n._setCurrentPage(i.newPageNum)})},_init:function(){var n=this;n.listItems=null;n.$ul=null;n.currentPageNum=null;n.isRendered=!1}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};forerunner.ssr.tools=forerunner.ssr.tools||{};forerunner.ssr.tools.reportExplorerToolbar=forerunner.ssr.tools.reportExplorerToolbar||{};$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.tools.reportExplorerToolbar,i=forerunner.ssr.tools.groups,r="fr-toolbase-persistent-active-state",u=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");$.widget(t.getFullname(t.reportExplorerToolbar),$.forerunner.toolBase,{options:{navigateTo:null,toolClass:"fr-toolbar",$appContainer:null,$reportExplorer:null},setFolderBtnActive:function(n){var t=this,i;t._clearFolderBtnState();n&&(i=t.element.find("."+n),i.addClass(r))},setSearchKeyword:function(n){var t=this;t.element.find(".fr-rm-keyword-textbox").val(n)},_clearFolderBtnState:function(){var n=this;$.each(n.folderBtns,function(n,t){t.removeClass(r)})},_initCallbacks:function(){var t=this;t.enableTools([n.btnMenu,n.btnHome,n.btnBack,n.btnFav,n.btnRecent,i.explorerFindGroup]);forerunner.ajax.isFormsAuth()&&t.enableTools([n.btnLogOff]);t.element.find(".fr-rm-keyword-textbox").watermark(u.toolbar.search,{useNative:!1,className:"fr-param-watermark"});$(window).resize()},_init:function(){var t=this;t._super();t.element.empty();t.element.append($("<div class='"+t.options.toolClass+" fr-core-widget'/>"));t.addTools(1,!0,[n.btnMenu,n.btnBack,n.btnSetup,n.btnHome,n.btnRecent,n.btnFav,i.explorerFindGroup]);forerunner.ajax.isFormsAuth()&&t.addTools(8,!0,[n.btnLogOff]);t._initCallbacks();var r=t.element.find("."+n.btnHome.selectorClass),u=t.element.find("."+n.btnRecent.selectorClass),f=t.element.find("."+n.btnFav.selectorClass);t.folderBtns=[r,u,f]},_destroy:function(){},_create:function(){var n=this;$(window).resize(function(){n.onWindowResize.call(n)})}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};forerunner.ssr.tools=forerunner.ssr.tools||{};forerunner.ssr.tools.reportExplorerToolpane=forerunner.ssr.tools.reportExplorerToolpane||{};$(function(){var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.tools.reportExplorerToolpane,t=forerunner.ssr.tools.groups,r="fr-toolbase-persistent-active-state",u=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");$.widget(i.getFullname(i.reportExplorerToolpane),$.forerunner.toolBase,{options:{navigateTo:null,toolClass:"fr-toolpane",$appContainer:null,$reportExplorer:null},setFolderItemActive:function(n){var t=this,i;t._clearFolderItemState();n&&(i=t.element.find("."+n),i.addClass(r))},setSearchKeyword:function(n){var t=this;t.element.find(".fr-rm-item-keyword").val(n)},_clearFolderItemState:function(){var n=this;$.each(n.folderItems,function(n,t){t.removeClass(r)})},_initCallbacks:function(){var i=this;i.enableTools([n.itemBack,n.itemFolders,n.itemSetup,t.explorerItemFindGroup]);forerunner.ajax.isFormsAuth()&&i.enableTools([n.itemLogOff]);i.element.find(".fr-rm-item-keyword").watermark(u.toolbar.search,{useNative:!1,className:"fr-param-watermark"})},_init:function(){var i=this;i._super();i.element.empty();i.element.append($("<div class='"+i.options.toolClass+" fr-core-widget'/>"));i.addTools(1,!0,[n.itemBack,n.itemFolders,t.explorerItemFolderGroup,n.itemSetup,t.explorerItemFindGroup]);forerunner.ajax.isFormsAuth()&&i.addTools(5,!0,[n.itemLogOff]);i._initCallbacks();var r=i.element.find("."+n.itemHome.selectorClass),u=i.element.find("."+n.itemRecent.selectorClass),f=i.element.find("."+n.itemFav.selectorClass);i.folderItems=[r,u,f]},_destroy:function(){},_create:function(){}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");$.widget(t.getFullname(t.reportExplorer),{options:{reportManagerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager",forerunnerPath:forerunner.config.forerunnerFolder(),path:null,view:null,selectedItemPath:null,$scrollBarOwner:null,navigateTo:null,$appContainer:null,explorerSettings:null,rsInstance:null,isAdmin:!1,onInputBlur:null,onInputFocus:null},saveUserSettings:function(n){var t=this,r=JSON.stringify(n),i=forerunner.config.forerunnerAPIBase()+"ReportManager/SaveUserSettings?settings="+r;t.options.rsInstance&&(i+="&instance="+t.options.rsInstance);forerunner.ajax.ajax({url:i,dataType:"json",async:!1,success:function(){},error:function(n){console.log(n)}})},getUserSettings:function(n){var t=this,i;return n!==!0&&t.userSettings?t.userSettings:(i=forerunner.ssr.ReportViewerInitializer.prototype.getUserSettings(t.options),i&&(t.userSettings=i),t.userSettings)},_generatePCListItem:function(n,t){var i=this,y=i.options.reportManagerAPI+"/Thumbnail/?ReportPath="+encodeURIComponent(n.Path)+"&DefDate="+n.ModifiedDate,u,c,p,f,r,w,e,l,o,b,a,s,v,h;i.options.rsInstance&&(y+="&instance="+i.options.rsInstance);u=new $("<div />");u.addClass("fr-explorer-item");t&&u.addClass("fr-explorer-item-selcted");c=new $("<a />");p=n.Type===1||n.Type===7?"explore":n.Type===3?"open":"browse";c.on("click",function(){i.options.navigateTo&&i.options.navigateTo(p,n.Path)});return u.append(c),f=new $("<div />"),f.addClass("fr-report-item-image-block"),c.append(f),r=new $("<div />"),f.append(r),n.Type===1||n.Type===7?t?r.addClass("fr-explorer-folder-selected"):r.addClass("fr-explorer-folder"):n.Type===3?(r.addClass("fr-icons128x128"),w=i._getFileTypeClass(n.MimeType),r.addClass(w)):(e=new $("<img />"),f.append(e),l=new $("<div />"),f.append(l),l.addClass("fr-explorer-item-earcorner"),l.css("background-color",i.$UL.css("background-color")),o=new $("<div />"),f.append(o),b=y,e.addClass("fr-report-item-inner-image"),e.addClass("fr-report-item-image-base"),r.addClass("fr-report-item-image-base"),o.addClass("fr-report-item-image-base"),t?(r.addClass("fr-report-item-outer-image-selected"),o.addClass("fr-explorer-item-ear-selcted")):(r.addClass("fr-report-item-outer-image"),o.addClass("fr-report-item-ear-image")),e.attr("src",b),e.error(function(){$(this).attr("src",i.options.forerunnerPath+"ReportExplorer/images/Report-icon.png")}),e.removeAttr("height")),t&&(i.$selectedItem=u),a=new $("<div />"),a.addClass("fr-explorer-caption"),s=new $("<div />"),s.addClass("fr-explorer-item-title"),s.attr("title",n.Name),s.html(n.Name),a.append(s),u.append(a),v=new $("<div />"),h=new $("<div />"),h.addClass("fr-explorer-item-desc"),h.attr("title",n.Description),h.html(n.Description),v.append(h),u.append(v),u},_renderPCView:function(n){var t=this,r,i,u,f;for(t.$UL=t.element.find(".fr-report-explorer"),r=t.options.selectedItemPath?decodeURIComponent(t.options.selectedItemPath):null,t.rmListItems=new Array(n.length),i=0;i<n.length;i++)u=n[i],f=!1,r&&r===decodeURIComponent(u.Path)&&(t.selectedItem=i,f=!0),t.rmListItems[i]=t._generatePCListItem(u,f),t.$UL.append(t.rmListItems[i]);t.$UL.find(".fr-explorer-item-title").multiLineEllipsis();t.$UL.find(".fr-explorer-item-desc").multiLineEllipsis()},_render:function(n){var t=this;t.element.html("<div class='fr-report-explorer fr-core-widget'><\/div>");t.colorOverrideSettings&&t.colorOverrideSettings.explorer&&$(".fr-report-explorer",t.element).addClass(t.colorOverrideSettings.explorer);t._renderPCView(n);t.$selectedItem?(setTimeout(function(){t.$explorer.scrollTop(t.$selectedItem.offset().top-50)},100),setTimeout(function(){t.$explorer.scrollLeft(t.$selectedItem.offset().left-20)},100)):(setTimeout(function(){t.$explorer.scrollTop(0)},100),setTimeout(function(){t.$explorer.scrollLeft(0)},100))},_renderResource:function(n){var r=this,u=r.options.reportManagerAPI+"/Resource?",i,f,t;u+="path="+encodeURIComponent(n);u+="&instance="+r.options.rsInstance;i=$("<iframe/>");i.addClass("fr-report-explorer fr-core-widget fr-explorer-iframe");i.attr("src",u);r.element.append(i);forerunner.device.isMSIE()?(f=i[0],t=function(){var n=null;if(document.readyState){try{n=f.document.readyState}catch(i){n=null}n!=="complete"&&n?setTimeout(t,10):r._setIframeHeight(f)}},t.TimeoutInt&&(clearTimeout(t.timeoutInt),t.TimeoutInt=null),t.timeoutInt=setTimeout(t,100)):i.load(function(){r._setIframeHeight(this)})},_setIframeHeight:function(n){var t=this,i=t.options.$appContainer.height()-38;n.style.height=i+"px"},_fetch:function(t,i){var r=this,u;if(t==="resource"){r._renderResource(i);return}if(t==="search"){r._searchItems(i);return}u=r.options.reportManagerAPI+"/GetItems";r.options.rsInstance&&(u+="?instance="+r.options.rsInstance);forerunner.ajax.ajax({dataType:"json",url:u,async:!1,data:{view:t,path:i},success:function(t){t.Exception?forerunner.dialog.showMessageBox(r.options.$appContainer,t.Exception.Message,n.messages.catalogsLoadFailed):r._render(t)},error:function(t){console.log(t);forerunner.dialog.showMessageBox(r.options.$appContainer,n.messages.catalogsLoadFailed)}})},_initCallbacks:function(){var n=this},_initOverrides:function(){var n=this,t,i,r;if(n.options.explorerSettings.CustomColors){if(t=decodeURIComponent(n.options.path),i=n.options.explorerSettings.CustomColors[t],i){n.colorOverrideSettings=i;return}for(r in n.options.explorerSettings.CustomColors)if(t.indexOf(r,0)===0){n.colorOverrideSettings=n.options.explorerSettings.CustomColors[r];return}}},_init:function(){var n=this,t;n.$RMList=null;n.$UL=null;n.rmListItems=null;n.colorOverrideSettings=null;n.selectedItem=0;n.isRendered=!1;n.$explorer=n.options.$scrollBarOwner?n.options.$scrollBarOwner:$(window);n.$selectedItem=null;n.options.explorerSettings&&n._initOverrides();n._fetch(n.options.view,n.options.path);n.userSettings={responsiveUI:!1};n.getUserSettings(!0);t=n.options.$appContainer.find(".fr-us-section");t.length===0&&(t=$("<div class='fr-us-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),t.userSettings({$appContainer:n.options.$appContainer,$reportExplorer:n.element}),n.options.$appContainer.append(t),n._userSettingsDialog=t)},showCreateDashboardDialog:function(){var n=this,t=n.options.$appContainer.find(".fr-cdb-section");t.length===0&&(t=$("<div class='fr-cdb-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),t.createDashboard({$appContainer:n.options.$appContainer,$reportExplorer:n.element}),n.options.$appContainer.append(t),n._createDashboardDialog=t);n._createDashboardDialog.createDashboard("openDialog")},showUserSettingsDialog:function(){var n=this;n._userSettingsDialog.userSettings("openDialog")},savedPath:function(){var n=this;n.options.view==="catalog"&&(n.priorExplorerPath=n.options.path)},_searchItems:function(t){var i=this,r,u;if(t===""){forerunner.dialog.showMessageBox(i.options.$appContainer,"Please input valid keyword","Prompt");return}r=i.options.reportManagerAPI+"/FindItems";i.options.rsInstance&&(r+="?instance="+i.options.rsInstance);u={SearchCriteria:[{Key:"Name",Value:t},{Key:"Description",Value:t}]};forerunner.ajax.ajax({dataType:"json",url:r,async:!1,data:{folder:"",searchOperator:"",searchCriteria:JSON.stringify(u)},success:function(t){t.Exception?forerunner.dialog.showMessageBox(i.options.$appContainer,t.Exception.Message,n.messages.catalogsLoadFailed):t.length?i._render(t):i._showNotFound()},error:function(t){console.log(t);forerunner.dialog.showMessageBox(i.options.$appContainer,n.messages.catalogsLoadFailed)}})},_showNotFound:function(){var i=this,t=new $("<div class='fr-report-explorer fr-core-widget'><\/div>"),r=new $("<div class='fr-explorer-notfound'>"+n.explorerSearch.notFound+"<\/div>");t.append(r);i.element.append(t)},onInputBlur:function(){var n=this;n.options.onInputBlur&&n.options.onInputBlur()},onInputFocus:function(){var n=this;n.options.onInputFocus&&n.options.onInputFocus()},_getFileTypeClass:function(n){var t=null;switch(n){case"application/pdf":t="fr-icons128x128-file-pdf";break;case"application/vnd.ms-excel":t="fr-icons128x128-file-xls";break;case"application/msword":t="fr-icons128x128-file-doc";break;case"application/vnd.ms-powerpoint":t="fr-icons128x128-file-ppt";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t="fr-icons128x128-file-xls";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":t="fr-icons128x128-file-doc";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":t="fr-icons128x128-file-ppt";break;case"text/html":t="fr-icons128x128-file-html";break;case"audio/mpeg":t="fr-icons128x128-file-mp3";break;case"image/tiff":t="fr-icons128x128-file-tiff";break;case"application/xml":t="fr-icons128x128-file-xml";break;case"image/jpeg":t="fr-icons128x128-file-jpeg";break;case"application/x-zip-compressed":t="fr-icons128x128-file-zip";break;case"application/octet-stream":t="fr-icons128x128-file-ini";break;case"image/gif":t="fr-icons128x128-file-gif";break;case"image/png":t="fr-icons128x128-file-png";break;case"image/bmp":t="fr-icons128x128-file-bmp";break;case"text/plain":t="fr-icons128x128-file-text";break;case"text/css":t="fr-icons128x128-file-css";break;default:t="fr-icons128x128-file-unknown"}return t}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events;$.widget(t.getFullname(t.userSettings),{options:{$reportExplorer:null},_create:function(){},_init:function(){var t=this,r=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer"),i=r.userSettings,o=r.unit,e=t._getBuildVersion(),u,f;t.element.html("");t.element.off(n.modalDialogGenericSubmit);t.element.off(n.modalDialogGenericCancel);u=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-setup",i.title,"fr-us-cancel",i.cancel);f=new $("<div class='fr-core-dialog-innerPage fr-core-center'>"+u+"<form class='fr-us-form fr-core-dialog-form'><div class='fr-us-setting-container'><label class='fr-us-label'>"+i.ResponsiveUI+"<\/label><input class='fr-us-responsive-ui-id fr-us-checkbox'  name='ResponsiveUI' type='checkbox'/><\/div><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-us-submit-id fr-core-dialog-submit fr-core-dialog-button' value='"+i.submit+"'/><\/div><\/form><div class='fr-buildversion-container'>"+e+"<\/div><\/div>");t.element.append(f);t.element.find(".fr-us-submit-id").on("click",function(){t._saveSettings()});t.element.find(".fr-us-cancel").on("click",function(){t.closeDialog()});t.element.on(n.modalDialogGenericSubmit,function(){t._saveSettings()});t.element.on(n.modalDialogGenericCancel,function(){t.closeDialog()})},_getBuildVersion:function(){var i=this,t=forerunner.config.forerunnerFolder()+"version.txt",n=null;return $.ajax({url:t,dataType:"text",async:!1,success:function(t){n=t},fail:function(n){console.log(n)},error:function(n,t,i){console.log(i)}}),n},_getSettings:function(){var n=this,t;n.settings=n.options.$reportExplorer.reportExplorer("getUserSettings",!0);n.$resposiveUI=n.element.find(".fr-us-responsive-ui-id");t=n.settings.responsiveUI;n.$resposiveUI.prop("checked",t)},_saveSettings:function(){var n=this;n.settings.responsiveUI=n.$resposiveUI.prop("checked");n.options.$reportExplorer.reportExplorer("saveUserSettings",n.settings);n.closeDialog()},openDialog:function(){var n=this;n._getSettings();forerunner.dialog.showModalDialog(n.options.$appContainer,n)},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.$appContainer,n)}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){function n(n,t,i,r,u,f,e,o){this.RS=n;this.CurrObj=t;this.CurrObjIndex=i;this.CurrObjParent=r;this.$HTMLParent=u;this.Style=f;this.CurrLocation=e;this.ApplyBackgroundColor=o}function r(){this.ReportItems={};this.Height=0;this.LowestIndex=null}function t(n,t){this.Height=n;this.Width=t}function u(n){this.TopDelta=0;this.Height=0;this.Left=0;this.Index=n;this.IndexAbove=null;this.NewHeight=null;this.NewTop=null}function f(n,t,i){this.$tablix=n;this.$rowHeader=t;this.$colHeader=i}var i=forerunner.ssr.constants.widgets;$.widget(i.getFullname(i.reportRender),{options:{reportViewer:null,responsive:!1,renderTime:null},_create:function(){var n=this,t=forerunner.device.isTouch();if(n._defaultResponsizeTablix=forerunner.config.getCustomSettingsValue("DefaultResponsiveTablix","on").toLowerCase(),n._maxResponsiveRes=forerunner.config.getCustomSettingsValue("MaxResponsiveResolution",1280),t)$(window).on("scrollstop",function(){n._lazyLoadTablix(n)});else $(window).on("scroll",function(){n._lazyLoadTablix(n)})},render:function(n,t,i){var r=this;r.reportObj=n.reportObj;r.Page=n;r._tablixStream={};r.RDLExt=i;r._rectangles=[];r._currentWidth=r.options.reportViewer.element.width();r.Page.Replay===undefined&&(r.Page.Replay={});r._createStyles(r.options.reportViewer);r._reRender();t!==!0&&r.layoutReport()},_reRender:function(){var t=this,i=t.element,r=t.options.reportViewer;i.html("");$.each(t.reportObj.ReportContainer.Report.PageContent.Sections,function(u,f){t._writeSection(new n(r,f,u,t.reportObj.ReportContainer.Report.PageContent,i,""))});t._addPageStyle(r,t.reportObj.ReportContainer.Report.PageContent.PageLayoutStart.PageStyle,t.reportObj)},_addPageStyle:function(n,t,i){var r=this,f=r._getStyle(n,t),u=new $("<div class='fr-render-bglayer'><\/div>");u.attr("style",f);i.ReportContainer.Trial===1&&r.element.append(r._getWatermark());r.element.append(u)},_getWatermark:function(){var i="opacity:0.30;color: #d0d0d0;font-size: 120pt;position: absolute;margin: 0;left:0px;top:40px; pointer-events: none;",r,n,t;return forerunner.device.isMSIE8()||forerunner.device.isAndroid()?(r=$("<DIV/>").html("Evaluation"),i+="z-index: -1;",r.attr("style",i),r):(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.setAttribute("xlink","http://www.w3.org/1999/xlink"),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("pointer-events","none"),i="opacity:0.10;color: #d0d0d0;font-size: 120pt;position: absolute;margin: 0;left:0px;top:40px; pointer-events: none;",i+=forerunner.device.isSafariPC()?"z-index: -1;":"z-index: 1000;",n.setAttribute("style",i),t=document.createElementNS("http://www.w3.org/2000/svg","text"),t.setAttribute("x","10"),t.setAttribute("y","160"),t.setAttribute("fill","#000"),t.setAttribute("pointer-events","none"),t.textContent="Evaluation",n.appendChild(t),n)},writeError:function(n){var i=this,r=i.options.reportViewer.locData.errorTag,t;if(n.Exception.Type==="LicenseException")i.element.html($("<div class='Page' ><div class='fr-render-error-license Page'><div class='fr-render-error-license-container'><div class='fr-render-error-license-title'><\/div><br/><div class='fr-render-error-license-content'><\/div><\/div><\/div>")),i.options.reportViewer&&(t=i.element.find(".fr-render-error-license-title"),t.html(r.licenseErrorTitle),t=i.element.find(".fr-render-error-license-content"),t.html(r.licenseErrorContent));else if(i.element.html($("<div class='Page' ><div class='fr-render-error-message'><\/div><\/br><div class='fr-render-error-details'>"+r.moreDetail+"<\/div><div class='fr-render-error'><h3>"+r.serverError+"<\/h3><div class='fr-render-error fr-render-error-DetailMessage'><\/div><div class='fr-render-error fr-render-error-type'><\/div><div class='fr-render-error fr-render-error-targetsite'><\/div><div class='fr-render-error fr-render-error-source'><\/div><div class='fr-render-error fr-render-error-stacktrace'><\/div><\/div><\/div>")),i.options.reportViewer){t=i.element.find(".fr-render-error");t.hide();t=i.element.find(".fr-render-error-details");t.on("click",{$Detail:i.element.find(".fr-render-error")},function(n){n.data.$Detail.show();$(n.target).hide()});t=i.element.find(".fr-render-error-DetailMessage");t.append("<h4>"+r.message+":<\/h4>"+n.Exception.DetailMessage);t=i.element.find(".fr-render-error-type");t.append("<h4>"+r.type+":<\/h4>"+n.Exception.Type);t=i.element.find(".fr-render-error-targetsite");t.html("<h4>"+r.targetSite+":<\/h4>"+n.Exception.TargetSite);t=i.element.find(".fr-render-error-source");t.html("<h4>"+r.source+":<\/h4>"+n.Exception.Source);t=i.element.find(".fr-render-error-message");t.html(n.Exception.Message);t=i.element.find(".fr-render-error-stacktrace");t.html("<h4>"+r.stackTrace+":<\/h4>"+n.Exception.StackTrace)}},_writeSection:function(t){for(var r=this,u=r._getDefaultHTMLTable(),e=$("<TR/>"),o,s,h,c,f=t.CurrObj.Measurement?t.CurrObj.Measurement:t.CurrObjParent.Measurement,i=0;i<f.Count;i++)f.Measurements[i].Type==="PageHeader"&&(s=i),f.Measurements[i].Type==="PageFooter"&&(h=i),f.Measurements[i].Type==="BodyArea"&&(c=i);o=c>=0?f.Measurements[c]:r._getMeasurmentsObj(t.CurrObjParent,t.CurrObjIndex);t.CurrObj.PageHeader&&u.append(r._writeHeaderFooter(t,"PageHeader",s));t.CurrObjParent.PageHeader&&u.append(r._writeHeaderFooter(new n(t.RS,t.CurrObjParent,null,null,null,null,null),"PageHeader",s));e.attr("Style","width:"+r._getWidth(o.Width)+"mm;");u.append(e);$.each(t.CurrObj.Columns,function(i,u){var f=new $("<TD/>");f.append(r._writeRectangle(new n(t.RS,u,i,t.CurrObj,new $("<Div/>"),null,o)));e.append(f)});t.CurrObj.PageFooter&&u.append(r._writeHeaderFooter(t,"PageFooter",h));t.CurrObjParent.PageFooter&&u.append(r._writeHeaderFooter(new n(t.RS,t.CurrObjParent,null,null,null,null,null),"PageFooter",h));t.$HTMLParent.append(u)},_writeHeaderFooter:function(t,i,r){var f=this,u,e,o;if(t.CurrObj[i])return u=$("<TR/>"),e=$("<TD/>"),u.append(e),o=f._getMeasurmentsObj(t.CurrObj,r),u.attr("Style","width:"+f._getWidth(o.Width)+"mm;"),e.append(f._writeRectangle(new n(t.RS,t.CurrObj[i],r,t.CurrObj,new $("<DIV/>"),null,o))),u},_writeRectangle:function(t){var f,u,e,r,i=this,o={};return e=t.CurrObj.Measurement.Measurements,$.each(t.CurrObj.ReportItems,function(s,h){r="";h.Type!=="Line"&&h.Elements&&(r+=i._getFullBorderStyle(h.Elements.NonSharedElements.Style));f=i._writeReportItems(new n(t.RS,h,s,t.CurrObj,new $("<Div/>"),r,e[s]));h.Type!=="Line"&&h.Type!=="Tablix"&&(f.addClass("fr-render-rec"),f.addClass(i._getClassName("fr-b-",h)));u=new $("<Div/>");u.append(f);r="";o[s]={};o[s].HTMLElement=u;o[s].Type=h.Type;h.Type==="Tablix"&&i._tablixStream[h.Elements.NonSharedElements.UniqueName].BigTablix===!0&&(o[s].BigTablix=!0);r+="position:absolute;";e[s].zIndex&&(r+="z-index:"+e[s].zIndex+";");t.CurrObj.ReportItems[s].Element&&t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style&&t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style.BackgroundColor&&(r+="background-color:"+t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style.BackgroundColor+";");u.attr("Style",r);u.append(f);t.$HTMLParent.append(u)}),r="position:relative;",t.CurrObjParent.Type!=="Tablix"&&(r+=i._getElementsStyle(t.RS,t.CurrObj.Elements),t.$HTMLParent.addClass(i._getClassName("fr-n-",t.CurrObj)),t.$HTMLParent.addClass(i._getClassName("fr-t-",t.CurrObj)),t.$HTMLParent.addClass(i._getClassName("fr-b-",t.CurrObj)),r+=i._getFullBorderStyle(t.CurrObj.Elements.NonSharedElements.Style)),t.$HTMLParent.attr("Style",r),t.CurrObj.Elements.NonSharedElements.UniqueName&&i._writeUniqueName(t.$HTMLParent,t.CurrObj.Elements.NonSharedElements.UniqueName),i._writeBookMark(t),i._writeTooltip(t),i._rectangles.push({ReportItems:o,Measurements:e,HTMLRec:t.$HTMLParent,RIContext:t}),t.$HTMLParent},layoutReport:function(n){var i=this,e,t,s;for(Math.abs(i._currentWidth-i.options.reportViewer.element.width())>30&&i.options.responsive&&i._defaultResponsizeTablix==="on"&&i._maxResponsiveRes>i.options.reportViewer.element.width()&&(i._currentWidth=i.options.reportViewer.element.width(),i._reRender()),e=0;e<i._rectangles.length;e++){var u=i._rectangles[e],r=i._getRectangleLayout(u.Measurements),o=u.Measurements,f=u.RIContext;for(t=0;t<forerunner.helper.objectSize(r.ReportItems);t++)r.ReportItems[t].NewHeight=u.ReportItems[t].Type==="Image"||u.ReportItems[t].Type==="Chart"||u.ReportItems[t].Type==="Gauge"||r.ReportItems[t].Type==="Map"||u.ReportItems[t].Type==="Line"?u.Measurements[t].Height:n?i._convertToMM(u.ReportItems[t].HTMLElement.outerHeight()+"px"):u.ReportItems[t].BigTablix?u.Measurements[t].Height:i._getHeight(u.ReportItems[t].HTMLElement),r.ReportItems[t].NewTop=r.ReportItems[t].IndexAbove===null?o[t].Top:parseFloat(r.ReportItems[r.ReportItems[t].IndexAbove].NewTop)+parseFloat(r.ReportItems[r.ReportItems[t].IndexAbove].NewHeight)+parseFloat(r.ReportItems[t].TopDelta),u.ReportItems[t].HTMLElement.css("top",i._roundToTwo(r.ReportItems[t].NewTop)+"mm"),u.ReportItems[t].HTMLElement.css("left",i._roundToTwo(r.ReportItems[t].Left)+"mm");f.CurrLocation&&(u.HTMLRec.css("width",i._getWidth(f.CurrLocation.Width)+"mm"),f.CurrObj.ReportItems.length===0?u.HTMLRec.css("height",i._roundToTwo(f.CurrLocation.Height+1)+"mm"):(s=parseFloat(r.ReportItems[r.LowestIndex].NewTop)+parseFloat(r.ReportItems[r.LowestIndex].NewHeight)+(parseFloat(f.CurrLocation.Height)-(parseFloat(o[r.LowestIndex].Top)+parseFloat(o[r.LowestIndex].Height)))+1,u.HTMLRec.css("height",i._roundToTwo(s)+"mm")))}i.element.hide().show(0)},_getRectangleLayout:function(n){var t=new r,i=this;return($.each(n,function(r,f){var e,o,s;for(t.ReportItems[r]=new u(r),e=t.ReportItems[r],e.Left=f.Left,i.isNull(t.LowestIndex)?t.LowestIndex=r:f.Top+f.Height>n[t.LowestIndex].Top+n[t.LowestIndex].Height&&(t.LowestIndex=r),o=0;o<n.length;o++)s=n[o].Top+n[o].Height,f.Top>s&&(e.IndexAbove?s>n[e.IndexAbove].Top+n[e.IndexAbove].Height&&(e.IndexAbove=o,e.TopDelta=f.Top-s):(e.IndexAbove=o,e.TopDelta=f.Top-s))}),i.options.responsive)?i._getResponsiveRectangleLayout(n,t):t},_getResponsiveRectangleLayout:function(n,t){var u=this,i=u._convertToMM(u.options.reportViewer.element.width()+"px"),r=!1;return $.each(n,function(u,f){var e=t.ReportItems[u],c,h,o,l,a,s;if(e.OrgBottom=f.Top+f.Height,e.OrgRight=f.Left+f.Width,e.OrgIndexAbove=e.IndexAbove,c=!1,h=!1,e.OrgRight>i)for(e.Left=0,o=0;o<n.length;o++)l=n[o].Top+n[o].Height,a=n[o].Left+n[o].Width,!h&&u!==o&&f.Top<n[o].Top&&e.OrgBottom>n[o].Top&&(t.ReportItems[o].IndexAbove=u,t.ReportItems[o].TopDelta=1,u===t.LowestIndex&&(t.LowestIndex=t.ReportItems[o].Index),r=!0,h=!0),u!==o&&f.Top>=n[o].Top&&f.Top<l&&u>o&&(e.IndexAbove===null||t.ReportItems[e.IndexAbove].OrgBottom<t.ReportItems[o].OrgBottom)&&(e.IndexAbove=o,e.TopDelta=1,o===t.LowestIndex&&(t.LowestIndex=u),c=!0,r=!0);if(r||u===n.length-1)for(s=0;s<e.Index;s++)e.IndexAbove===t.ReportItems[s].IndexAbove&&e.OrgRight<=i&&t.ReportItems[s].OrgRight>i&&(e.IndexAbove=s),(t.ReportItems[s].OrgRight>i||e.OrgRight>i)&&(e.IndexAbove===t.ReportItems[s].IndexAbove?e.IndexAbove=t.ReportItems[s].Index:t.ReportItems[s].OrgIndexAbove===e.IndexAbove&&s>e.Index&&(t.ReportItems[s].IndexAbove=e.Index)),e.IndexAbove===t.ReportItems[s].IndexAbove&&e.Left>=n[s].Left&&e.Left<t.ReportItems[s].Left+n[s].Width&&(e.IndexAbove=t.ReportItems[s].Index)}),t},_writeReportItems:function(n){var t=this;switch(n.CurrObj.Type){case"RichTextBox":return t._writeRichText(n);case"Image":case"Chart":case"Gauge":case"Map":return t._writeImage(n);case"Tablix":return t._writeTablix(n);case"Rectangle":return t._writeRectangle(n);case"SubReport":return t._writeSubreport(n);case"Line":return t._writeLine(n)}},_writeRichText:function(n){var i=n.Style,r=$("<div/>"),u=null,t=this,f,o,s,h,v,y,c;if(i+="",t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0)!==""&&(i+=t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0)),(n.CurrObjParent.Type!=="Tablix"||n.ApplyBackgroundColor)&&(i+=t._getElementsNonTextStyle(n.RS,n.CurrObj.Elements),n.$HTMLParent.addClass(t._getClassName("fr-n-",n.CurrObj))),n.$HTMLParent.attr("Style",i),n.$HTMLParent.addClass("fr-r-rT"),i="",t._getSharedElements(n.CurrObj.Elements.SharedElements).IsToggleParent===!0||n.CurrObj.Elements.NonSharedElements.IsToggleParent===!0){f=$("<div/>");f.attr("id",n.CurrObj.Elements.NonSharedElements.UniqueName);f.html("&nbsp");n.CurrObj.Elements.NonSharedElements.ToggleState!==undefined&&n.CurrObj.Elements.NonSharedElements.ToggleState===!0?f.addClass("fr-render-drilldown-collapse"):f.addClass("fr-render-drilldown-expand");f.on("click",{ToggleID:n.CurrObj.Elements.NonSharedElements.UniqueName},function(n){t.options.reportViewer.toggleItem(n.data.ToggleID)});f.addClass("fr-core-cursorpointer");n.$HTMLParent.append(f)}if(t._getSharedElements(n.CurrObj.Elements.SharedElements).CanSort!==undefined){u=$("<div/>");u.html("&nbsp");o="None";s=forerunner.ssr.constants.sortDirection;n.CurrObj.Elements.NonSharedElements.SortState===2?(u.attr("class","fr-render-sort-descending"),o=s.desc):n.CurrObj.Elements.NonSharedElements.SortState===1?(u.attr("class","fr-render-sort-ascending"),o=s.asc):u.attr("class","fr-render-sort-unsorted");u.on("click",{Viewer:n.RS,SortID:n.CurrObj.Elements.NonSharedElements.UniqueName,Direction:o},function(n){n.data.Viewer.sort(n.data.Direction,n.data.SortID,!n.shiftKey)});i+="width:"+(t._getWidth(n.CurrLocation.Width)-6)+"mm;";n.$HTMLParent.append(u)}if(t._writeActions(n,n.CurrObj.Elements.NonSharedElements,r),n.CurrObj.Elements.NonSharedElements.UniqueName&&t._writeUniqueName(r,n.CurrObj.Elements.NonSharedElements.UniqueName),h=t._getTextDirection(n.CurrObj.Elements),h!==""?(i+="width:"+n.CurrLocation.Height+"mm;height:"+t._getWidth(n.CurrLocation.Width)+"mm;",i+="position:absolute;",v=-(t._getWidth(n.CurrLocation.Width)-n.CurrLocation.Height)/2,y=-(n.CurrLocation.Height-t._getWidth(n.CurrLocation.Width))/2,i+="left:"+y+"mm;top:"+v+"mm;",r.addClass(h)):r.addClass("fr-r-fS"),n.CurrObj.Paragraphs.length===0)c=t._getSharedElements(n.CurrObj.Elements.SharedElements).Value?t._getSharedElements(n.CurrObj.Elements.SharedElements).Value:n.CurrObj.Elements.NonSharedElements.Value,c?(r.text(t._getNewLineFormatText(c)),i+=t._getElementsTextStyle(n.CurrObj.Elements),n.CurrObj.Elements.NonSharedElements.TypeCode&&(t._getSharedElements(n.CurrObj.Elements.SharedElements).TextAlign===0||t._getSharedElements(n.CurrObj.Elements.SharedElements).Style.TextAlign===0)&&(i+="text-align:"+t._getTextAlign(0,n.CurrObj.Elements.NonSharedElements)+";")):(r.html("&nbsp"),i+="text-decoration:none;"),r.addClass(t._getClassName("fr-t-",n.CurrObj));else{var l=null,a={},e={};e.Root="";i+=t._getElementsTextStyle(n.CurrObj.Elements);$.each(n.CurrObj.Paragraphs,function(n,i){var r=t._getSharedElements(i.Paragraph.SharedElements).ListLevel,u;l===null&&(l=r);e[r]||(e[r]=[]);a[r]=i.Paragraph.NonSharedElements.UniqueName;u=a[r-1]?a[r-1]:"Root";u={Parent:u,Value:i};e[r].push(u)});t._writeRichTextItem(n,e,l,"Root",r)}return t._writeBookMark(n),t._writeTooltip(n),r.attr("Style",i),r.addClass(t._getClassName("fr-t-",n.CurrObj)),r.addClass("fr-r-t"),n.$HTMLParent.append(r),u&&n.$HTMLParent.append(u),n.$HTMLParent},_writeRichTextItem:function(n,t,i,r,u){var e=null,f=this;$.each(t[i],function(o,s){var c,a,h,l,y,v;if(s.Parent===r){for(a="font-size:small;",s=s.Value,f._getSharedElements(s.Paragraph.SharedElements).ListStyle===1?(e&&e.is("ol")||(e=new $("<OL />")),e.addClass(f._getListStyle(1,f._getSharedElements(s.Paragraph.SharedElements).ListLevel)),c=new $("<LI />")):f._getSharedElements(s.Paragraph.SharedElements).ListStyle===2?(e&&e.is("ul")||(e=new $("<UL />")),e.addClass(f._getListStyle(2,f._getSharedElements(s.Paragraph.SharedElements).ListLevel)),c=new $("<LI />")):(e&&e.is("div")||(e=new $("<DIV />")),c=new $("<DIV />")),a+=f._getMeasurements(f._getMeasurmentsObj(s,i)),a+=f._getElementsStyle(n.RS,s.Paragraph),c.attr("Style",a),c.addClass(f._getClassName("fr-n-",s.Paragraph)),c.addClass(f._getClassName("fr-t-",s.Paragraph)),c.attr("name",s.Paragraph.NonSharedElements.UniqueName),h=0;h<s.TextRunCount;h++)y=!0,s.TextRuns[h].Elements.NonSharedElements.ActionInfo?(l=new $("<A />"),f._writeActions(n,s.TextRuns[h].Elements.NonSharedElements,l)):l=new $("<SPAN />"),f._getSharedElements(s.TextRuns[h].Elements.SharedElements).Value&&f._getSharedElements(s.TextRuns[h].Elements.SharedElements).Value!==""?l.text(f._getNewLineFormatText(f._getSharedElements(s.TextRuns[h].Elements.SharedElements).Value)):s.TextRuns[h].Elements.NonSharedElements.Value&&s.TextRuns[h].Elements.NonSharedElements.Value!==""?l.text(f._getNewLineFormatText(s.TextRuns[h].Elements.NonSharedElements.Value)):(l.html("&nbsp"),y=!1),l.attr("Name",s.TextRuns[h].Elements.NonSharedElements.UniqueName),y&&(v="",v+=f._getMeasurements(f._getMeasurmentsObj(s.TextRuns[h],h)),v+=f._getElementsTextStyle(s.TextRuns[h].Elements),l.attr("Style",v),l.addClass(f._getClassName("fr-t-",s.TextRuns[h]))),c.append(l);t[i+1]&&f._writeRichTextItem(n,t,i+1,s.Paragraph.NonSharedElements.UniqueName,c);e.addClass("fr-r-pL");e.append(c);u.append(e)}})},_writeUniqueName:function(n,t){n.attr("name",t)},_getImageURL:function(n,t){var i=this,r;return i.imageList||(i.imageList={}),i.imageList[t]||(r=i.options.reportViewer.options.reportViewerAPI+"/Image/?",r+="SessionID="+i.options.reportViewer.sessionID,r+="&ImageID="+t,r+="&"+i.options.renderTime,i.options.reportViewer.options.rsInstance&&(r+="&instance="+i.options.reportViewer.options.rsInstance),i.imageList[t]=r),i.imageList[t]},_writeImage:function(n){var i=$("<img/>"),t=this,a=t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),u=n.Style,o,e,r,f,s,h,c,l;n.$HTMLParent.addClass("fr-render-image");u+=t._getTextStyle(n.CurrObj.Elements);n.$HTMLParent.addClass(t._getClassName("fr-t-",n.CurrObj));n.CurrObjParent.Type!=="Tablix"&&(u+=t._getElementsStyle(n.RS,n.CurrObj.Elements),n.$HTMLParent.addClass(t._getClassName("fr-n-",n.CurrObj)));u+=t._getMeasurements(a,!0);e="";f=t._getSharedElements(n.CurrObj.Elements.SharedElements).Sizing;f||(f=0);s=t._getPaddingSize(n.CurrObj,"Left")+t._getPaddingSize(n.CurrObj,"Right");h=t._getPaddingSize(n.CurrObj,"Top")+t._getPaddingSize(n.CurrObj,"Bottom");n.CurrObj.Type==="Image"?(o=n.CurrObj.Elements.NonSharedElements.ImageDataProperties.ImageName,n.CurrObj.Elements.NonSharedElements.ImageDataProperties.NonSharedImageDataProperties&&(r=n.CurrObj.Elements.NonSharedElements.ImageDataProperties.NonSharedImageDataProperties.ImageConsolidationOffsets)):(o=n.CurrObj.Elements.NonSharedElements.StreamName,n.CurrObj.Elements.NonSharedElements.ImageConsolidationOffsets&&(r=n.CurrObj.Elements.NonSharedElements.ImageConsolidationOffsets,u+="width:"+r.Width+"px;height:"+r.Height+"px"));r&&(e+="position:relative;top:"+r.Top*-1+"px;left:"+r.Left*-1+"px");n.CurrObj.Elements.NonSharedElements.ActionImageMapAreas&&i.attr("useMap","#Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName);i.attr("alt",t.options.reportViewer.locData.messages.imageNotDisplay);i.attr("src",this._getImageURL(n.RS,o));t._writeActions(n,n.CurrObj.Elements.NonSharedElements,$(i));t._writeBookMark(n);t._writeTooltip(n);n.CurrObj.Elements.NonSharedElements.UniqueName&&t._writeUniqueName($(i),n.CurrObj.Elements.NonSharedElements.UniqueName);r?(c=r.Width,l=r.Height):(c=n.CurrLocation.Width*3.78,l=n.CurrLocation.Height*3.78);n.$HTMLParent.attr("style",u).append(i);t._writeActionImageMapAreas(n,c,l,r);u=e?e:"display:block;";i.attr("style",u);switch(f){case 1:$(i).css("height",n.CurrLocation.Height-h+"mm");$(i).css("width",n.CurrLocation.Width-s+"mm");break;case 2:case 3:$(i).css("height",n.CurrLocation.Height+"mm");$(i).css("width",n.CurrLocation.Width+"mm");i.on("load",function(){var u=t._getNatural(this),e,o;r?(e=r.Width,o=r.Height):(e=i.width,o=i.height);t._resizeImage(this,f,u.height,u.width,n.CurrLocation.Height-h,n.CurrLocation.Width-s)})}return n.$HTMLParent},_writeActions:function(n,t,i){if(t.ActionInfo)for(var r=0;r<t.ActionInfo.Count;r++)this._writeAction(n,t.ActionInfo.Actions[r],i)},_writeAction:function(n,t,i){var r=this;if(t.HyperLink){i.addClass("fr-core-cursorpointer");i.attr("href","#");i.on("click",{HyperLink:t.HyperLink},function(n){r._stopDefaultEvent(n);location.href=n.data.HyperLink;r.options.reportViewer.navigateDrillthrough(n.data.DrillthroughId)})}else if(t.BookmarkLink){i.attr("href","#");i.addClass("fr-core-cursorpointer");i.on("click",{BookmarkID:t.BookmarkLink},function(n){r._stopDefaultEvent(n);r.options.reportViewer.navigateBookmark(n.data.BookmarkID)})}else if(t.DrillthroughId){i.addClass("fr-core-cursorpointer");i.attr("href","#");i.on("click",{DrillthroughId:t.DrillthroughId},function(n){r._stopDefaultEvent(n);r.options.reportViewer.navigateDrillthrough(n.data.DrillthroughId)})}},_writeActionImageMapAreas:function(n,t,i,r){var y=n.CurrObj.Elements.NonSharedElements.ActionImageMapAreas,w=this,h=0,c=0,l,a,u,f,e,v,s,p,o;if(r&&(h=r.Left,c=r.Top),y){for(l=$("<MAP/>"),l.attr("name","Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),l.attr("id","Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),a=0;a<y.Count;a++)for(u=y.ActionInfoWithMaps[a],f=0;f<u.ImageMapAreas.Count;f++){e=$("<AREA />");e.attr("tabindex",a+1);e.attr("style","text-decoration:none");e.attr("alt",u.ImageMapAreas.ImageMapArea[f].Tooltip);u.Actions&&this._writeAction(n,u.Actions[0],e);s="";switch(u.ImageMapAreas.ImageMapArea[f].ShapeType){case 0:v="rect";s=parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[0]*t/100,10)+h+","+(parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[1]*i/100,10)+c)+","+(parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[2]*t/100,10)+h)+","+(parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[3]*i/100,10)+c);break;case 1:for(v="poly",p=u.ImageMapAreas.ImageMapArea[f].CoorCount,o=0;o<p;o++)s+=o%2==0?parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[o]*t/100,10)+h:parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[o]*i/100,10)+c,o<p-1&&(s+=",");break;case 2:v="circ";s=parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[0]*t/100,10)+h+","+(parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[1]*i/100,10)+c)+","+parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[2]*t/100,10)}e.attr("shape",v);e.attr("coords",s);l.append(e)}n.$HTMLParent.append(l)}},_resizeImage:function(n,t,i,r,u,f){var o=0,s=this,e,h;if(i=s._convertToMM(i+"px"),r=s._convertToMM(r+"px"),e=$(n),i!==0&&r!==0)switch(t){case 0:e.css("height",i+"mm");e.css("width",r+"mm");break;case 1:e.css("height",u+"mm");e.css("width",f+"mm");break;case 2:(i/u>1||r/f>1)&&(i/u>=r/f?(o=u/i,e.css("height",u+"mm"),e.css("width",r*o+"mm"),e.css("max-height",u+"mm"),e.css("max-width",r*o+"mm"),e.css("min-height",u+"mm"),e.css("min-width",r*o+"mm")):(o=f/r,e.css("width",f+"mm"),e.css("height",i*o+"mm"),e.css("max-width",f+"mm"),e.css("max-height",i*o+"mm"),e.css("min-width",f+"mm"),e.css("min-height",i*o+"mm")));break;case 3:h=s._getNatural(n);e.css("height",s._convertToMM(h.height+"px")+"mm");e.css("width",s._convertToMM(h.width+"px")+"mm");e.css("max-height",s._convertToMM(h.height+"px")+"mm");e.css("max-width",s._convertToMM(h.width+"px")+"mm")}},_writeTablixCell:function(i,r,u,f,e){var o=new $("<TD/>"),s="",c,l,h=this,v,y,a;return s="",r.Cell&&(r.Cell.ReportItem.Type!=="SubReport"?r.Cell.ReportItem.Elements.NonSharedElements&&(s+=h._getFullBorderStyle(r.Cell.ReportItem.Elements.NonSharedElements.Style)):r.Cell.ReportItem.SubReportProperties.NonSharedElements&&(s+=h._getFullBorderStyle(r.Cell.ReportItem.SubReportProperties.NonSharedElements.Style)),o.addClass(h._getClassName("fr-b-",r.Cell.ReportItem))),v=r.ColumnIndex,y=h.isNull(f)?r.RowIndex:f,c=h._getWidth(i.CurrObj.ColumnWidths.Columns[v].Width),l=i.CurrObj.RowHeights.Rows[y].Height,s+="width:"+c+"mm;max-width:"+c+"mm;",s+=forerunner.device.isMSIE()?"min-height:"+l+"mm;":"height:"+l+"mm;",r.RowSpan!==undefined&&o.attr("rowspan",r.RowSpan),r.ColSpan!==undefined&&o.attr("colspan",r.ColSpan),r.Cell?(r.Cell.ReportItem.Type!=="SubReport"?r.Cell.ReportItem.Elements.NonSharedElements.Style&&r.Cell.ReportItem.Elements.NonSharedElements.Style.BackgroundColor&&(s+="background-color:"+r.Cell.ReportItem.Elements.NonSharedElements.Style.BackgroundColor+";"):r.Cell.ReportItem.SubReportProperties.NonSharedElements.Style&&r.Cell.ReportItem.SubReportProperties.NonSharedElements.Style.BackgroundColor&&(s+="background-color:"+r.Cell.ReportItem.SubReportProperties.NonSharedElements.Style.BackgroundColor+";"),o.addClass(h._getClassName("fr-n-",r.Cell.ReportItem)),o.attr("Style",s),o.addClass("fr-r-tC"),a=h._writeReportItems(new n(i.RS,r.Cell.ReportItem,u,i.CurrObj,new $("<Div/>"),"",new t(l,c))),a.addClass("fr-r-tCI"),e&&a.prepend(e),o.append(a)):o.html("&nbsp"),o},_writeTablix:function(n){var t=this,e=t._getDefaultHTMLTable(),y="",h=new $("<TABLE/>").css({display:"table",position:"absolute",top:"0px",left:"0px",padding:"0",margin:"0","border-collapse":"collapse"}),o=new $("<TABLE/>").css({display:"table",position:"absolute",top:"0px",left:"0px",padding:"0",margin:"0","border-collapse":"collapse"}),l,c,v;o.attr("CELLSPACING",0);o.attr("CELLPADDING",0);var w=!1,b=!1,i={isResp:!1};if(y+=t._getElementsStyle(n.RS,n.CurrObj.Elements),y+=t._getFullBorderStyle(n.CurrObj.Elements.NonSharedElements),e.addClass("fr-render-tablix"),e.addClass(t._getClassName("fr-n-",n.CurrObj)),e.addClass(t._getClassName("fr-t-",n.CurrObj)),e.addClass(t._getClassName("fr-b-",n.CurrObj)),n.CurrObj.ColumnWidths){var p=$("<colgroup/>"),g=t._convertToMM(t.options.reportViewer.element.width()+"px"),k=t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex).Width,r,it=t._getSharedElements(n.CurrObj.Elements.SharedElements),u=null;if(t.RDLExt&&(u=t.RDLExt[it.Name]),i.Columns=new Array(n.CurrObj.ColumnWidths.ColumnCount),i.ColumnCount=n.CurrObj.ColumnWidths.ColumnCount,i.ColumnHeaders={},u.ColumnHeaders)for(l=0;l<u.ColumnHeaders.length;l++)i.ColumnHeaders[u.ColumnHeaders[l]]=l;if(i.ColHeaderRow===undefined&&(i.ColHeaderRow=0),i.BackgroundColor===undefined&&(i.BackgroundColor="#F2F2F2"),t.options.responsive&&t._defaultResponsizeTablix==="on"&&t._maxResponsiveRes>t.options.reportViewer.element.width()){var nt=!0,a=n.CurrObj.ColumnWidths.ColumnCount,tt=n.CurrObj.ColumnWidths.Columns,d=-1,s;if(u&&u.Columns&&u.Columns.length<n.CurrObj.ColumnWidths.ColumnCount)for(r=0;r<u.Columns.length;r++)i.Columns[parseInt(u.Columns[r].Col)-1]={show:!0};while(nt){if(d=-1,u&&u.Columns){if(i.ColumnCount>u.Columns.length){for(r=i.ColumnCount-1;r>=0;r--)if(i.Columns[r]===undefined){s=r;i.Columns[s]={show:!1};break}}else{for(r=0;r<u.Columns.length;r++)u.Columns[r].Pri>=d&&i.Columns[parseInt(u.Columns[r].Col)-1].show===!0&&(a=r,d=u.Columns[r].Pri);s=parseInt(u.Columns[a].Col)-1;i.Columns[s].Ext=u.Columns[a];i.Columns[s]={show:!1}}i.ColumnCount--}else a--,s=a,i.Columns[s]={show:!1},i.ColumnCount--;k-=tt[s].Width;(k<g||i.ColumnCount===0)&&(nt=!1,(g-k>tt[s].Width*.9||i.ColumnCount===0)&&(i.Columns[s].show=!0,i.ColumnCount++))}}for(r=0;r<n.CurrObj.ColumnWidths.ColumnCount;r++)i.Columns[r]===undefined?i.Columns[r]={show:!0}:i.Columns[r].show===!1&&(i.isResp=!0),i.Columns[r].show&&p.append($("<col/>").css("width",t._getWidth(n.CurrObj.ColumnWidths.Columns[r].Width)+"mm"));i.isResp===!1&&(y+=t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex)));e.attr("Style",y);e.append(p);forerunner.device.isFirefox()||o.append(p.clone(!0,!0));h.append(p.clone(!0,!0));o.addClass("fr-render-tablix");h.addClass("fr-render-tablix");h.addClass(t._getClassName("fr-n-",n.CurrObj));o.addClass(t._getClassName("fr-n-",n.CurrObj));h.addClass(t._getClassName("fr-t-",n.CurrObj));o.addClass(t._getClassName("fr-t-",n.CurrObj))}return t._tablixStream[n.CurrObj.Elements.NonSharedElements.UniqueName]={$Tablix:e,$FixedColHeader:h,$FixedRowHeader:o,HasFixedRows:w,HasFixedCols:b,RIContext:n,respCols:i},c=t._tablixStream[n.CurrObj.Elements.NonSharedElements.UniqueName],c.State={LastRowIndex:0,LastObjType:"",StartIndex:0,CellCount:0},c.EndRow=$("<TR/>").addClass("fr-lazyNext").css("visible",!1).text(t.options.reportViewer.locData.messages.loading),t._writeTablixRowBatch(c),w=c.HasFixedRows,b=c.HasFixedCols,w?h.css("visibility","hidden"):h=null,b?o.css("visibility","hidden"):o=null,v=$("<div style='position:relative'><\/div"),e.append(h),e.append(o),n.CurrObj.Elements.NonSharedElements.UniqueName&&t._writeUniqueName(e,n.CurrObj.Elements.NonSharedElements.UniqueName),n.$HTMLParent=v,t._writeBookMark(n),t._writeTooltip(n),v.append(e),n.RS.floatingHeaders.push(new f(v,h,o)),v},_writeSingleTablixRow:function(i,r,u,f,e,o,s,h){var a=this,w=s.LastRowIndex,b=s.LastObjType,l=s.Row,g=!1,nt=!1,c=s.ExtRow,v=s.ExtCell,k,y,d,p,tt;if(s.ExtRow===undefined&&h.isResp&&(c=new $("<TR/>"),v=new $("<TD/>").attr("colspan",h.ColumnCount).css("background-color",h.BackgroundColor),c.append(v),c.hide()),s.Row===undefined&&(l=new $("<TR/>")),f.RowIndex!==w){for(r.append(l),h.isResp&&c&&c.children()[0].children.length>0?r.append(c):l.find(".fr-render-respIcon").hide(),i.CurrObj.RowHeights.Rows[f.RowIndex-1].FixRows===1&&e.append(l.clone(!0,!0)),l=new $("<TR/>"),h.isResp&&(c=new $("<TR/>"),v=new $("<TD/>").attr("colspan",h.ColumnCount).css("background-color",h.BackgroundColor),c.append(v),c.hide()),d=w+1;d<f.RowIndex;d++)r.append(l),l=new $("<TR/>");w=f.RowIndex}return f.UniqueName&&a._writeUniqueName(l,f.UniqueName),f.Type!=="Corner"&&b==="Corner"&&o.append(l.clone(!0,!0)),f.Type!=="RowHeader"&&b==="RowHeader"&&o.append(l.clone(!0,!0)),i.CurrObj.RowHeights.Rows[f.RowIndex].FixRows===1&&(nt=!0),f.Type!=="BodyRow"&&i.CurrObj.ColumnWidths.Columns[f.ColumnIndex]&&i.CurrObj.ColumnWidths.Columns[f.ColumnIndex].FixColumn===1&&(g=!0),k=i.CurrObj.RowHeights.Rows[f.RowIndex].Height,f.Type==="BodyRow"?($.each(f.Cells,function(u,e){y=i.CurrObj.ColumnWidths.Columns[e.ColumnIndex].Width;p=undefined;h.Columns[e.ColumnIndex].show?(h.isResp&&h.ColHeaderRow!==f.RowIndex&&e.RowSpan===undefined&&c&&c.HasDrill!==!0&&(p=a._addTablixRespDrill(c,e.ColumnIndex,r,e.Cell),c.HasDrill=!0),l.append(a._writeTablixCell(i,e,u,f.RowIndex,p))):h.ColHeaderRow===f.RowIndex||a._isHeader(h,e.Cell)?(h.Columns[e.ColumnIndex].Header=a._writeReportItems(new n(i.RS,e.Cell.ReportItem,u,i.CurrObj,new $("<Div/>"),"",new t(k,y),!0)),h.Columns[e.ColumnIndex].Header.children().removeClass("fr-r-fS"),c=null):(h.Columns[e.ColumnIndex].Header&&v.append(h.Columns[e.ColumnIndex].Header.clone(!0,!0)),v.append(a._writeReportItems(new n(i.RS,e.Cell.ReportItem,u,i.CurrObj,new $("<Div/>"),"",new t(k,y)))))}),s.CellCount+=f.Cells.length):(y=i.CurrObj.ColumnWidths.Columns[f.ColumnIndex].Width,f.Cell&&(h.Columns[f.ColumnIndex].show===!1&&(f.Type==="Corner"||f.Type==="ColumnHeader")?(tt=a._writeReportItems(new n(i.RS,f.Cell.ReportItem,u,i.CurrObj,new $("<Div/>"),"",new t(k,y),!0)),h.Columns[f.ColumnIndex].Header===undefined&&(h.Columns[f.ColumnIndex].Header=new $("<div/>")),h.Columns[f.ColumnIndex].Header.append(tt),h.Columns[f.ColumnIndex].Header.children().children().removeClass("fr-r-fS"),c=null):(h.isResp&&f.Type==="RowHeader"&&f.RowSpan===undefined&&h.ColHeaderRow!==f.RowIndex&&c&&c.HasDrill!==!0&&(p=a._addTablixRespDrill(c,f.ColumnIndex,r,f.Cell),v.attr("colspan",h.ColumnCount-f.ColumnIndex),c.HasDrill=!0),h.isResp&&f.RowSpan!==undefined&&f.ColumnIndex===0&&(f.Type==="Corner"?l.addClass("fr-resp-corner"):l.addClass("fr-resp-rowspan")),l.append(a._writeTablixCell(i,f,u,undefined,p))),s.CellCount+=1)),b=f.Type,{LastRowIndex:w,LastObjType:b,Row:l,ExtRow:c,ExtCell:v,HasFixedCols:g,HasFixedRows:nt,CellCount:s.CellCount}},_isHeader:function(n,t){var i=this,r=i._getSharedElements(t.ReportItem.Elements.SharedElements).Name;return n.ColumnHeaders[r]?!0:!1},replayRespTablix:function(n){var t=this;n&&$.each(n,function(n,i){var r,u,f;i.Visible&&(f=t.element.find('[name="'+i.UniqueName+'"]'),r=f.prev(),u=r.parent().parent().parent().next(),t._TablixRespShow(r,u,i.ColIndex,i.UniqueName))})},_addTablixRespDrill:function(n,t,i,r){var f=this,u=new $("<div/>");u.html("&nbsp");u.addClass("fr-render-drilldown-expand");u.addClass("fr-render-respIcon");u.on("click",{ExtRow:n,ColIndex:t,UniqueName:r.ReportItem.Elements.NonSharedElements.UniqueName,$Tablix:i},function(n){f._TablixRespShow(this,n.data.ExtRow,n.data.ColIndex,n.data.UniqueName,n.data.$Tablix);return});return u.addClass("fr-core-cursorpointer"),u},_TablixRespShow:function(n,t,i,r,u){var f=this,o=!t.is(":visible"),e;o?(t.show(),e=1,f.Page.Replay[r]={Visible:!0,ColIndex:i,UniqueName:r}):(e=-1,f.Page.Replay[r]={Visible:!1,ColIndex:i,UniqueName:r});i>0&&$.each(t.prevAll(),function(n,t){return $(t).hasClass("fr-resp-corner")?!1:($.each($(t).children("[rowspan]"),function(n,t){$(t).height()>0&&$(t).attr("rowspan",parseInt($(t).attr("rowspan"))+e)}),$(t).hasClass("fr-resp-rowspan")?!1:void 0)});o?($(n).addClass("fr-render-drilldown-collapse"),$(n).removeClass("fr-render-drilldown-expand")):(t.hide(),$(n).removeClass("fr-render-drilldown-collapse"),$(n).addClass("fr-render-drilldown-expand"));f.layoutReport(!0);u&&u.hide().show(0)},_batchSize:function(){return forerunner.config.getCustomSettingsValue("BigTablixBatchSize",3e3)},_tablixStream:{},_writeTablixRowBatch:function(n){for(var r,i=this,t=n.State.StartIndex;t<n.RIContext.CurrObj.TablixRows.length&&n.State.CellCount<i._batchSize();t++)r=n.RIContext.CurrObj.TablixRows[t],n.State=i._writeSingleTablixRow(n.RIContext,n.$Tablix,t,r,n.$FixedColHeader,n.$FixedRowHeader,n.State,n.respCols),n.State.HasFixedRows===!0&&(n.HasFixedRows=!0),n.State.HasFixedCols===!0&&(n.HasFixedCols=!0);n.State.StartIndex=t;n.State.CellCount=0;n.State.StartIndex<n.RIContext.CurrObj.TablixRows.length?(n.$Tablix.append(n.EndRow),n.BigTablix=!0):(n.$Tablix.append(n.State.Row),n.respCols.isResp&&(n.$Tablix.append(n.State.ExtRow),n.State.ExtRow.hide()),n.BigTablixDone=!0)},_lazyLoadTablix:function(n){var f=$(window).scrollLeft(),r=$(window).scrollTop(),e=$(window).innerWidth(),u=$(window).innerHeight(),t,i;for(t in n._tablixStream)i=n._tablixStream[t].EndRow.offset(),i.top>r&&i.top+100<r+u&&(n._tablixStream[t].EndRow.detach(),n._writeTablixRowBatch(n._tablixStream[t]),n._tablixStream[t].BigTablixDone&&n.layoutReport(!0))},_writeSubreport:function(n){var t=this;return n.CurrObjParent.Type!=="Tablix"&&(n.Style+=t._getElementsStyle(n.RS,n.CurrObj.SubReportProperties)),n.CurrObj=n.CurrObj.BodyElements,t._writeBookMark(n),t._writeTooltip(n),t._writeRectangle(n)},_writeLine:function(n){var t=this,i=t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),o="position:relative;width:"+i.Width+"mm;height:"+i.Height+"mm;",u;if(i.Width===0||i.Height===0)o+=t._getFullBorderStyle(n.CurrObj.Elements.NonSharedElements),n.$HTMLParent.addClass(t._getClassName("fr-b-",n.CurrObj));else{var e=$("<Div/>"),f=Math.sqrt(Math.pow(i.Height,2)+Math.pow(i.Width,2)),r=Math.atan(i.Height/i.Width),s=f/2*Math.sin(r),h=f/2-Math.sqrt(Math.pow(f/2,2)+Math.pow(s,2));t._getSharedElements(n.CurrObj.Elements.SharedElements).Slant===undefined||t._getSharedElements(n.CurrObj.Elements.SharedElements).Slant===0||(r=r-2*r);u="position:absolute;top:"+s+"mm;left:"+h+"mm;";u+=t._getFullBorderStyle(n.CurrObj.Elements.NonSharedElements);e.addClass(t._getClassName("fr-b-",n.CurrObj));u+="width:"+f+"mm;height:0;";u+="-moz-transform: rotate("+r+"rad);";u+="-webkit-transform: rotate("+r+"rad);";u+="-ms-transform: rotate("+r+"rad);";u+="transform: rotate("+r+"rad);";e.attr("Style",u);n.$HTMLParent.append(e)}return t._writeBookMark(n),t._writeTooltip(n),n.$HTMLParent.attr("Style",o+n.Style),n.$HTMLParent},_writeBookMark:function(n){var u=this,i=$("<a/>"),r=n.CurrObj.Elements,t=u._getSharedElements(r.SharedElements).Bookmark||r.NonSharedElements.Bookmark;t&&(i.attr("name",t).attr("id",t),n.$HTMLParent.append(i))},_writeTooltip:function(n){var r=this,i=n.CurrObj.Elements,t=r._getSharedElements(i.SharedElements).Tooltip||i.NonSharedElements.Tooltip;t&&(n.CurrObjParent.Type==="Image"?n.$HTMLParent.attr("alt",t):n.CurrObjParent.Type==="Chart"?n.$HTMLParent.attr("alt",t):n.CurrObjParent.Type==="Gauge"?n.$HTMLParent.attr("alt",t):n.CurrObjParent.Type==="Map"?n.$HTMLParent.attr("alt",t):n.$HTMLParent.attr("title",t))},_getHeight:function(n){var r=this,i,t;return t=n.clone().css({visibility:"hidden"}),t.find("img").remove(),$("body").append(t),i=t.outerHeight()+"px",t.remove(),r._convertToMM(i)},_getElementsStyle:function(n,t){var i="",r=this;return i+=r._getStyle(n,t.NonSharedElements.Style,t.NonSharedElements),i+r._getStyle(n,t,t)},_getElementsTextStyle:function(n){var t=this;return""+t._getTextStyle(n.NonSharedElements.Style,n.NonSharedElements)},_getElementsNonTextStyle:function(n,t){var i=this;return""+i._getNonTextStyle(n,t.NonSharedElements.Style,t.NonSharedElements)},_getBorderSize:function(n,t){var f=this,i,e,r,o,u;return(i=f._getSharedElements(n.Elements.SharedElements).Style,i?(e=i.BorderStyle,r=i["BorderStyle"+t],o=i.BorderWidth,u=i["BorderWidth"+t]):(i=n.Elements.NonSharedElements.Style,i&&(e=i.BorderStyle,r=i["BorderStyle"+t],o=i.BorderWidth,u=i["BorderWidth"+t])),!r&&e===0)?0:r===0?0:u?f._convertToMM(u):f._convertToMM(o)},_getPaddingSize:function(n,t){var u=this,i,r;return i=u._getSharedElements(n.Elements.SharedElements).Style,i?r=i["Padding"+t]:(i=n.Elements.NonSharedElements.Style,i&&(r=i["Padding"+t])),u._convertToMM(r)},_getFullBorderStyle:function(n){var i=this,r="",t;return n?(t=n,t!==undefined&&(t.BorderStyle!==undefined&&t.BorderStyle!==0&&(r+="border:"+t.BorderWidth+" "+i._getBorderStyle(t.BorderStyle)+" "+t.BorderColor+"!important;"),(t.BorderStyleLeft!==undefined||t.BorderWidthLeft!==undefined||t.BorderColorLeft!==undefined)&&(r+="border-left:"+(t.BorderWidthLeft===undefined?t.BorderWidth:t.BorderWidthLeft)+" "+(t.BorderStyleLeft===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleLeft))+" "+(t.BorderColorLeft===undefined?t.BorderColor:t.BorderColorLeft)+"!important;"),(t.BorderStyleRight!==undefined||t.BorderWidthRight!==undefined||t.BorderColorRight!==undefined)&&(r+="border-right:"+(t.BorderWidthRight===undefined?t.BorderWidth:t.BorderWidthRight)+" "+(t.BorderStyleRight===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleRight))+" "+(t.BorderColorRight===undefined?t.BorderColor:t.BorderColorRight)+"!important;"),(t.BorderStyleTop!==undefined||t.BorderWidthTop!==undefined||t.BorderColorTop!==undefined)&&(r+="border-top:"+(t.BorderWidthTop===undefined?t.BorderWidth:t.BorderWidthTop)+" "+(t.BorderStyleTop===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleTop))+" "+(t.BorderColorTop===undefined?t.BorderColor:t.BorderColorTop)+"!important;"),(t.BorderStyleBottom!==undefined||t.BorderWidthBottom!==undefined||t.BorderColorBottom!==undefined)&&(r+="border-bottom:"+(t.BorderWidthBottom===undefined?t.BorderWidth:t.BorderWidthBottom)+" "+(t.BorderStyleBottom===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleBottom))+" "+(t.BorderColorBottom===undefined?t.BorderColor:t.BorderColorBottom)+"!important;"),t.BackgroundColor&&(r+="background-color:"+t.BackgroundColor+";")),r):""},_getMeasurementsInvert:function(n){var i=this,t="";return n?(n.Width!==undefined&&(t+="height:"+n.Width+"mm;",t+="min-height:"+n.Width+"mm;",t+="max-height:"+n.Width+"mm;"),n.Height!==undefined&&(t+="width:"+n.Height+"mm;",t+="min-width:"+n.Height+"mm;",t+="max-width:"+n.Height+"mm;"),n.zIndex&&(t+="z-index:"+n.zIndex+";"),t):""},_getMeasurements:function(n,t){var r=this,i="";return n?(n.Width!==undefined&&(i+="width:"+r._getWidth(n.Width)+"mm;",i+="min-width:"+r._getWidth(n.Width)+"mm;",i+="max-width:"+r._getWidth(n.Width)+"mm;"),t&&n.Height!==undefined&&(i+="height:"+n.Height+"mm;",i+="min-height:"+n.Height+"mm;",i+="max-height:"+n.Height+"mm;"),n.zIndex&&(i+="z-index:"+n.zIndex+";"),i):""},_getStyle:function(n,t,i){var u=this,r="";return t?(r+=u._getNonTextStyle(n,t,i),r+u._getTextStyle(t,i)):r},_backgroundRepeatTypesMap:function(){return{0:"repeat",1:"no-repeat",2:"repeat-x",3:"repeat-y"}},_getImageStyleURL:function(n,t){var i=this;return"url("+i._getImageURL(n,t)+")"},_getNonTextStyle:function(n,t){var r=this,i="";return t?(t.BackgroundColor&&(i+="background-color:"+t.BackgroundColor+";"),t.BackgroundImage&&(i+="background-image:"+r._getImageStyleURL(n,t.BackgroundImage.ImageName)+";"),t.BackgroundRepeat!==undefined&&r._backgroundRepeatTypesMap()[t.BackgroundRepeat]&&(i+="background-repeat:"+r._backgroundRepeatTypesMap()[t.BackgroundRepeat]+";"),i):i},_getTextDirection:function(n){var t="",i=this;return i._getSharedElements(n.SharedElements).Style&&i._getSharedElements(n.SharedElements).Style.WritingMode!==undefined&&(i._getSharedElements(n.SharedElements).Style.WritingMode===1&&(t="fr-rotate-90"),i._getSharedElements(n.SharedElements).Style.WritingMode===2&&(t="fr-rotate-270")),n.NonSharedElements.Style&&n.NonSharedElements.Style.WritingMode!==undefined&&(n.NonSharedElements.Style.WritingMode===1&&(t="fr-rotate-90"),n.NonSharedElements.Style.WritingMode===2&&(t="fr-rotate-270")),t},_getTextStyle:function(n,t){var r=this,i="";return n?(n.PaddingBottom!==undefined&&(i+="padding-bottom:"+n.PaddingBottom+";"),n.PaddingLeft!==undefined&&(i+="padding-left:"+n.PaddingLeft+";"),n.PaddingRight!==undefined&&(i+="padding-right:"+n.PaddingRight+";"),n.PaddingTop!==undefined&&(i+="padding-top:"+n.PaddingTop+";"),n.UnicodeBiDi!==undefined&&(i+="unicode-bidi:"+r._getBiDi(n.UnicodeBiDi)+";"),n.VerticalAlign!==undefined&&(i+="vertical-align:"+r._getVAligh(n.VerticalAlign)+";"),n.Direction!==undefined&&(i+="Direction:"+r._getDirection(n.Direction)+";"),n.TextAlign!==undefined&&(i+="text-align:"+r._getTextAlign(n.TextAlign,t)+";"),n.FontStyle!==undefined&&(i+="font-style:"+r._getFontStyle(n.FontStyle)+";"),n.FontWeight!==undefined&&(i+="font-weight:"+r._getFontWeight(n.FontWeight)+";"),n.FontFamily!==undefined&&(i+="font-family:"+n.FontFamily+";"),n.FontSize!==undefined&&(i+="font-size:"+r._getFontSize(n.FontSize)+";"),n.TextDecoration!==undefined&&(i+="text-decoration:"+r._getTextDecoration(n.TextDecoration)+";"),n.Color!==undefined&&(i+="color:"+n.Color+";"),i):i},_getCalendar:function(n){switch(n){case 0:return"Gregorian";case 1:return"GregorianArabic";case 2:return"GregorianMiddleEastFrench";case 3:return"GregorianTransliteratedEnglish";case 4:return"GregorianTransliteratedFrench";case 5:return"GregorianUSEnglish";case 6:return"Hebrew";case 7:return"Hijri";case 9:return"Korean";case 10:return"Julian";case 11:return"Taiwan";case 12:return"ThaiBuddist"}return"Gregorian"},_getTextDecoration:function(n){switch(n){case 0:return"None";case 1:return"Underline";case 2:return"Overline";case 3:return"LineThrough"}return"None"},_getFontWeight:function(n){switch(n){case 0:return"Normal";case 1:return"Thin";case 2:return"ExtraLight";case 3:return"Light";case 4:return"Medium";case 5:return"SemiBold";case 6:return"Bold";case 7:return"ExtraBold";case 8:return"Heavy"}return"General"},_getFontStyle:function(n){switch(n){case 0:return"Normal";case 1:return"Italic"}return"Normal"},_getTextAlign:function(n,t){switch(n){case 0:if(t===undefined||t.TypeCode===undefined)return"Left";switch(t.TypeCode){case 3:case 6:case 7:case 9:case 11:case 12:case 13:case 14:case 15:case 16:return"Right";case 4:case 17:case 18:return"Left";default:return"Left"}break;case 1:return"Left";case 2:return"Center";case 3:return"Right"}},_getDirection:function(n){switch(n){case 0:return"LTR";case 1:return"RTL"}return"LTR"},_getLayoutFlow:function(n){switch(n){case 0:return"Horizontal";case 1:return"Vertical";case 2:return"Rotate270"}return"Horizontal"},_getVAligh:function(n){switch(n){case 0:return"Top";case 1:return"Middle";case 2:return"Bottom"}return"Top"},_getBiDi:function(n){switch(n){case 0:return"normal";case 1:return"embed";case 2:return"BiDiOverride"}return"normal"},_getDefaultHTMLTable:function(){var n=$("<Table/>");return n.attr("CELLSPACING",0),n.attr("CELLPADDING",0),n},_getBorderStyle:function(n){switch(n){case 0:return"None";case 1:return"Dotted";case 2:return"Dashed";case 3:return"Solid";case 4:return"Double"}return"None"},_getMeasurmentsObj:function(n,t){var i=null;return n.Measurement&&(i=n.Measurement.Measurements[t]),i},_getSharedElements:function(n){var t=this;return n.SID?t.reportObj.ReportContainer.SharedElements[n.SID]:n},_convertToMM:function(n){if(!n)return 0;var i=n.match(/\D+$/),t=n.match(/\d+/);i.length===1&&(i=i[0]);t.length===1&&(t=t[0]);switch(i){case"px":return t/3.78;case"pt":return t*.352777777778;case"in":return t*25.4;case"mm":return t;case"cm":return t*10;case"em":return t*4.2175176}return t},_getFontSize:function(n){return n?n:""},_getListStyle:function(n,t){var i;if(n===1)switch(t%3){case 1:i="decimal";break;case 2:i="lower-roman";break;case 0:i="lower-latin"}else if(n===2)switch(t%3){case 0:i="square";break;case 1:i="disc";break;case 2:i="circle"}return"fr-render-list-"+i},_stopDefaultEvent:function(n){window.ActiveXObject?window.event.returnValue=!1:(n.preventDefault(),n.stopPropagation())},_getNatural:function(n){if(n.naturalWidth&&n.naturalHeight)return{width:n.naturalWidth,height:n.naturalHeight};var t=new Image;return t.src=n.src,{width:t.width,height:t.height}},isNull:function(n){return n===null||n===undefined?!0:!1},_getWidth:function(n){return n},_getNewLineFormatText:function(n){return n.replace(/\r\n+/g,"\n")},_createStyles:function(n){var t=this,u="<style type='text/css' id='"+t.options.reportViewer.viewerID+"'>",i=t.reportObj.ReportContainer.SharedElements;for(var r in i)u+=".fr-b-"+i[r].SID+"-"+t.options.reportViewer.viewerID+"{"+t._getFullBorderStyle(i[r].Style)+"} ",u+=".fr-t-"+i[r].SID+"-"+t.options.reportViewer.viewerID+"{"+t._getTextStyle(i[r].Style,i[r])+"} ",u+=".fr-n-"+i[r].SID+"-"+t.options.reportViewer.viewerID+"{"+t._getNonTextStyle(n,i[r].Style)+"} ";t.Page.CSS=$(u+"<\/style>");t.Page.CSS.appendTo("head")},_getClassName:function(n,t){var i=this;return(t.SubReportProperties&&(t=t.SubReportProperties),t.Elements&&t.Elements.SharedElements)?n+t.Elements.SharedElements.SID+"-"+i.options.reportViewer.viewerID:t.SharedElements?n+t.SharedElements.SID+"-"+i.options.reportViewer.viewerID:""},_roundToTwo:function(n){return+(Math.round(n+"e+2")+"e-2")}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events,t="fr-param-container";$.widget(i.getFullname(i.reportParameter),{options:{$reportViewer:null,pageNum:null,$appContainer:null},$params:null,_formInit:!1,_paramCount:0,_defaultValueExist:!1,_loadedForDefault:!0,_reportDesignError:null,_revertLock:!1,_init:function(){var n=this;n.element.html(null);n.enableCascadingTree=forerunner.config.getCustomSettingsValue("EnableCascadingTree",!0)==="on"},_destroy:function(){},_render:function(){var n=this,i;n.element.html(null);i=new $("<div class='"+t+" fr-core-widget'><form class='fr-param-form' onsubmit='return false'><div class='fr-param-element-border'><input type='text' style='display:none'><\/div><div><div class='fr-param-submit-container'><input name='Parameter_ViewReport' type='button' class='fr-param-viewreport fr-param-button' value='"+n.options.$reportViewer.locData.paramPane.viewReport+"'/><\/div><div class='fr-param-cancel-container'><span class='fr-param-cancel'>"+n.options.$reportViewer.locData.paramPane.cancel+"<\/span><\/div><\/div><\/form><div style='height:65px;'/><\/div>");n.element.css("display","block");n.element.html(i);n.$params=i;n.$form=n.element.find(".fr-param-form");n._formInit=!0},_dependencyList:null,_isDropdownTree:!0,_writeParamDoneCallback:null,getNumOfVisibleParameters:function(){var n=this;return n.$numVisibleParams!==undefined?n.$numVisibleParams:0},_parameterDefinitions:{},_hasPostedBackWithoutSubmitForm:!1,updateParameterPanel:function(n,t,i,r,u){var f=this,e,o;if(u&&f._isDropdownTree&&f.enableCascadingTree){e=f.element.find(".fr-param-tree-loading");f._dataPreprocess(n.ParametersList);var c=e.parent("ul").attr("level"),l=e.parent().attr("name"),h=f._dependencyList[l],s=null;for(o=0;o<h.length;o++)s=f._getCascadingTree(f._parameterDefinitions[h[o]],parseInt(c,10)+1),s&&e.append(s);e.removeClass("fr-param-tree-loading")}else this.removeParameter(),this.writeParameterPanel(n,i,t,r);this._hasPostedBackWithoutSubmitForm=!0},setParametersAndUpdate:function(n,t,i){var r=this;r.updateParameterPanel(n,!1,i,!1);r._submittedParamsList=t;this._hasPostedBackWithoutSubmitForm=!1;r.revertParameters()},writeParameterPanel:function(i,r,u,f){var e=this,o,s;e.$params===null&&e._render();e.options.pageNum=r;e._paramCount=parseInt(i.Count,10);e._defaultValueExist=i.DefaultValueExist;e._loadedForDefault=!0;e._render();e.$numVisibleParams=0;e._dataPreprocess(i.ParametersList);o=$(".fr-param-element-border",e.$params);$.each(i.ParametersList,function(n,t){t.Prompt!==""&&(t.PromptUserSpecified?t.PromptUser:!0)?(e.$numVisibleParams+=1,o.append(e._writeParamControl(t,new $("<div />"),r))):e._checkHiddenParam(t)});e._reportDesignError!==null&&(e._reportDesignError+=e.options.$reportViewer.locData.messages.contactAdmin);e.$form.validate({ignoreTitle:!0,errorPlacement:function(n,t){t.is(":radio")?n.appendTo(t.parent("div").nextAll(".fr-param-error-placeholder")):t.attr("ismultiple")==="true"?n.appendTo(t.parent("div").next("span")):t.hasClass("ui-autocomplete-input")||t.hasClass("fr-param-tree-input")?n.appendTo(t.parent("div").nextAll(".fr-param-error-placeholder")):n.appendTo(t.nextAll(".fr-param-error-placeholder"))},highlight:function(n){$(n).is(":radio")?$(n).parent("div").addClass("fr-param-error"):$(n).addClass("fr-param-error")},unhighlight:function(n){$(n).is(":radio")?$(n).parent("div").removeClass("fr-param-error"):$(n).removeClass("fr-param-error")}});$(".fr-param-viewreport",e.$params).on("click",function(){e._submitForm(r)});$(".fr-param-cancel",e.$params).on("click",function(){e._cancelForm()});u!==!1?e._paramCount===i.DefaultValueCount&&e._loadedForDefault?e._submitForm(r):(f!==!1&&e._trigger(n.render),e.options.$reportViewer.removeLoadingIndicator()):(f!==!1&&e._trigger(n.render),e.options.$reportViewer.removeLoadingIndicator());s=e.element.find("."+t);s.removeAttr("style");e._setDatePicker();$(document).off("click",e._checkExternalClick);$(document).on("click",{me:e},e._checkExternalClick);$(":text",e.$params).each(function(){var n=$(this);n.on("blur",function(){e.options.$reportViewer.onInputBlur()});n.on("focus",function(){e.options.$reportViewer.onInputFocus()})});typeof e._writeParamDoneCallback=="function"&&(e._writeParamDoneCallback(),e._writeParamDoneCallback=null)},_addWriteParamDoneCallback:function(n){if(typeof n=="function"){var t=this,i=t._writeParamDoneCallback;t._writeParamDoneCallback=i===null?n:function(){i();n()}}},_submittedParamsList:null,setsubmittedParamsList:function(n){var t=this;t._submittedParamsList=n},_submitForm:function(t){var i=this,r;if(i._closeAllDropdown(),i._reportDesignError!==null){forerunner.dialog.showMessageBox(i.options.$appContainer,i._reportDesignError);return}r=i.getParamsList();r&&(i.options.$reportViewer.loadReportWithNewParameters(r,t),i._submittedParamsList=r,i._trigger(n.submit));i._hasPostedBackWithoutSubmitForm=!1},revertParameters:function(){var n=this,o,e,i,u,r,t,s,h,f;if(n.getParamsList(!0)!==n._submittedParamsList&&n._submittedParamsList!==null){for(n._revertLock=!0,n._hasPostedBackWithoutSubmitForm&&(n.refreshParameters(n._submittedParamsList,!1),n._hasPostedBackWithoutSubmitForm=!1,n.options.$reportViewer.invalidateReportContext()),o=JSON.parse(n._submittedParamsList),e=o.ParamsList,u=0;u<e.length;u++){if(r=e[u],t=n._parameterDefinitions[r.Parameter],n._isDropdownTree&&n.enableCascadingTree&&(t.isParent||t.isChild)){s=t.isParent===!0&&t.isChild!==!0;n._setTreeItemStatus(t,r,s);i=n.element.find(".fr-paramname-"+t.Name);i.attr("backendValue",JSON.stringify(r.Value));continue}t.MultiValue?t.ValidValues!==""?(i=$(".fr-paramname-"+t.Name+"-dropdown-cb",n.$params),n._setCheckBoxes(i,r.Value),n._setMultipleInputValues(t)):(i=$(".fr-paramname-"+t.Name),h=$(".fr-paramname-"+t.Name+"-dropdown-textArea"),h.val(n._getTextAreaValue(r.Value,!0)),i.val(n._getTextAreaValue(r.Value,!1)),i.attr("jsonValues",JSON.stringify(r.Value))):(i=$(".fr-paramname-"+t.Name,n.$params),t.Nullable&&r.Value===null?(f=$(".fr-param-checkbox",n.$params).filter("[name*='"+t.Name+"']").first(),f.length!==0&&f.attr("checked")!=="checked"&&f.trigger("click")):t.ValidValues!==""?forerunner.device.isTouch()&&t.ValidValues.length<=forerunner.config.getCustomSettingsValue("MinItemToEnableBigDropdownOnTouch",10)?n._setSelectedIndex(i,r.Value):n._setBigDropDownIndex(t,r.Value,i):t.Type==="Boolean"?n._setRadioButton(i,r.Value):i.attr("datatype").toLowerCase()==="datetime"?i.val(n._getDateTimeFromDefault(r.Value)):i.val(r.Value))}n._isDropdownTree&&n.enableCascadingTree&&n._closeCascadingTree(!0);n._revertLock=!1}},_cancelForm:function(){var t=this;t._closeAllDropdown();t.revertParameters();t.$form.valid();t._trigger(n.cancel,null,{})},_setDatePicker:function(){var n=this,t=n._getDatePickerLoc();t&&$.datepicker.setDefaults(t);$.each(n.element.find(".hasDatepicker"),function(t,i){$(i).datepicker("option","buttonImage",forerunner.config.forerunnerFolder()+"reportviewer/Images/calendar.png");$(i).datepicker("option","buttonImageOnly",!0);$(i).datepicker("option","buttonText",n.options.$reportViewer.locData.paramPane.datePicker)})},_getPredefinedValue:function(n){var t=this;return t._hasDefaultValue(n)?n.MultiValue===!1?n.DefaultValues[0]:n.DefaultValues:null},_writeParamControl:function(n,t,i){var r=this,h=new $("<div class='fr-param-label'>"+n.Prompt+"<\/div>"),s=!0,f=r._getPredefinedValue(n),o=new $("<div class='fr-param-item-container'><\/div>"),c=new $("<span class='fr-param-error-placeholder'/>"),u=null,e;if(r._isDropdownTree&&r.enableCascadingTree&&r._parameterDefinitions[n.Name].isParent===!0&&r._parameterDefinitions[n.Name].isChild!==!0&&(u=r._writeCascadingTree(n,f)),r._isDropdownTree&&r.enableCascadingTree&&r._parameterDefinitions[n.Name].isChild===!0&&(u=r._writeCascadingChildren(n,f),t.addClass("fr-param-tree-hidden")),u===null&&(e=r._checkDependencies(n),e&&(r._loadedForDefault=!1),n.MultiValue===!0?n.ValidValues!==""?u=r._writeDropDownWithCheckBox(n,e,f):(s=!1,u=r._writeDropDownWithTextArea(n,e,f)):n.ValidValues!==""?(s=!1,u=forerunner.device.isTouch()&&n.ValidValues.length<=forerunner.config.getCustomSettingsValue("MinItemToEnableBigDropdownOnTouch",10)?r._writeDropDownControl(n,e,i,f):r._writeBigDropDown(n,e,i,f)):u=n.Type==="Boolean"?r._writeRadioButton(n,e,i,f):r._writeTextArea(n,e,i,f)),u!==undefined&&s)u.on("keydown",function(n){n.keyCode===13&&r._submitForm(i)});return o.append(u),t.hasClass("fr-param-tree-hidden")||(u.find(".fr-param").hasClass("fr-param-required")||o.append(r._addNullableCheckBox(n,u,f)),o.append(c)),t.append(h).append(o),t},_getParameterControlProperty:function(n,t){var i=this;t.attr("allowblank",n.AllowBlank);t.attr("nullable",n.Nullable);n.QueryParameter||(n.Nullable===!1||!i._isNullChecked(t))&&n.AllowBlank===!1?(t.attr("required","true").watermark(i.options.$reportViewer.locData.paramPane.required,{useNative:!1,className:"fr-param-watermark"}),t.addClass("fr-param-required"),i._parameterDefinitions[n.Name].ValidatorAttrs.push("required")):n.MultiValue&&(n.ValidValues||!n.ValidValues&&n.AllowBlank)&&(t.attr("required","true"),t.addClass("fr-param-required"),i._parameterDefinitions[n.Name].ValidatorAttrs.push("required"));t.attr("ErrorMessage",n.ErrorMessage)},_addNullableCheckBox:function(n,t,i){var u=this,f,r,e;if(n.Nullable===!0){t=t.hasClass("fr-param-element-container")?t.find(".fr-param"):n.Type==="Boolean"?$(".fr-paramname-"+n.Name,t):t;f=new $("<div class='fr-param-nullable' />");r=new $("<Input type='checkbox' class='fr-param-checkbox' name='"+n.Name+"' />");r.on("click",function(){r.attr("checked")==="checked"?(r.removeAttr("checked"),t.removeAttr("disabled").removeClass("fr-param-disable"),$.each(u._parameterDefinitions[n.Name].ValidatorAttrs,function(n,i){t.attr(i,"true")}),n.Type==="DateTime"&&t.datepicker("enable")):(r.attr("checked","true"),t.attr("disabled","true").addClass("fr-param-disable"),$.each(u._parameterDefinitions[n.Name].ValidatorAttrs,function(n,i){t.removeAttr(i)}),n.Type==="DateTime"&&setTimeout(function(){t.datepicker("disable")},100))});return i===null&&n.State!=="MissingValidValue"&&r.trigger("click"),e=new $("<Label class='fr-param-label-null' />"),e.html(u.options.$reportViewer.locData.paramPane.nullField),f.append(r).append(e),f}return null},_setRadioButton:function(n,t){for(var i=0;i<n.length;i++)n[i].checked=n[i].value===t?!0:!1},_writeRadioButton:function(n,t,i,r){var s=this,h=s.options.$reportViewer.locData.paramPane,u=[],f,e,o,c;for(u[0]={display:h.isTrue,value:"True"},u[1]={display:h.isFalse,value:"False"},f=s._createDiv(["fr-param-checkbox-container"]),f.attr("ismultiple",n.MultiValue),f.attr("datatype",n.Type),e=0;e<u.length;e++){if(o=new $("<input type='radio' class='fr-param fr-param-radio fr-paramname-"+n.Name+"' name='"+n.Name+"' value='"+u[e].value+"' datatype='"+n.Type+"' />"),t)o.attr("disabled","true");else{s._getParameterControlProperty(n,o);r&&r===u[e].value&&o.attr("checked","true");o.on("click",function(){s.getNumOfVisibleParameters()===1&&s._submitForm(i)})}c=new $("<label class='fr-param-radio-label'>"+u[e].display+"<\/label>");f.append(o);f.append(c)}return f},_writeTextArea:function(n,t,i,r){var f=this,u=new $("<input class='fr-param fr-paramname-"+n.Name+"' name='"+n.Name+"' type='text' size='100' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' />");if(t)return f._disabledSubSequenceControl(u),u;f._getParameterControlProperty(n,u);switch(n.Type){case"DateTime":u.datepicker({showOn:"button",changeMonth:!0,changeYear:!0,showButtonPanel:!0,dateFormat:forerunner.ssr._internal.getDateFormat(),onClose:function(){u.removeAttr("disabled");$(".fr-paramname-"+n.Name,f.$params).valid();f.getNumOfVisibleParameters()===1&&f._submitForm(i)},beforeShow:function(){u.attr("disabled",!0)}});u.attr("formattedDate","true");f._parameterDefinitions[n.Name].ValidatorAttrs.push("formattedDate");r&&u.datepicker("setDate",f._getDateTimeFromDefault(r));break;case"Integer":case"Float":u.attr("number","true");f._parameterDefinitions[n.Name].ValidatorAttrs.push("number");r&&u.val(r);break;case"String":r&&u.val(r)}return u},_setSelectedIndex:function(n,t){for(var r=n[0],i=0;i<r.length;i++)if(r[i].value===t){r[i].selected=!0;return}},_setBigDropDownIndex:function(n,t,i){for(var r=0;r<n.ValidValues.length;r++)(t&&t===n.ValidValues[r].Value||!t&&r===0)&&i.val(n.ValidValues[r].Key).attr("backendValue",n.ValidValues[r].Value);i.hasClass("fr-param-autocomplete-error")&&i.removeClass("fr-param-autocomplete-error")},_writeBigDropDown:function(n,t,i,r){var f=this,c=!1,l=!1,s=!1,h=f._createDiv(["fr-param-element-container"]),u=f._createInput(n,"text",!1,["fr-param","fr-param-autocomplete-textbox","fr-param-not-close","fr-paramname-"+n.Name]),o,a,e;if(f._getParameterControlProperty(n,u),u.attr("autoCompleteDropdown","true"),f._parameterDefinitions[n.Name].ValidatorAttrs.push("autoCompleteDropdown"),o=f._createDiv(["fr-param-dropdown-iconcontainer","fr-core-cursorpointer"]),a=f._createDiv(["fr-param-dropdown-icon","fr-param-not-close"]),o.append(a),t)return f._disabledSubSequenceControl(u),h.append(u).append(o),h;o.on("mousedown",function(){l=u.autocomplete("widget").is(":visible")});o.on("click",function(){u.attr("disabled")||(forerunner.device.isTouch()||u.focus(),l)||(f._closeAllDropdown(),setTimeout(function(){u.autocomplete("search","")},50))});for(e=0;e<n.ValidValues.length;e++)(r&&r===n.ValidValues[e].Value||!r&&e===0)&&(u.val(n.ValidValues[e].Key).attr("title",n.ValidValues[e].Key).attr("backendValue",n.ValidValues[e].Value),c=!0),n.ValidValues[e].label=n.ValidValues[e].Key,n.ValidValues[e].value=n.ValidValues[e].Value;c||n.Nullable===!0||(f._loadedForDefault=!1);u.autocomplete({source:n.ValidValues,minLength:0,delay:0,autoFocus:!0,appendTo:f.$params,maxItem:forerunner.config.getCustomSettingsValue("MaxBigDropdownItem",50),select:function(n,t){return u.attr("backendValue",t.item.value).attr("title",t.item.label).val(t.item.label).trigger("change",{item:t.item.value}),s=!0,f.getNumOfVisibleParameters()===1&&setTimeout(function(){f._submitForm(i)},100),!1},focus:function(){return!1},response:function(n,t){t.content.length===0?u.addClass("fr-param-autocomplete-error"):u.removeClass("fr-param-autocomplete-error")},change:function(n,t){t.item?u.removeClass("fr-param-autocomplete-error"):(u.removeAttr("backendValue"),u.addClass("fr-param-autocomplete-error"));u.attr("required")||u.val()!==""||u.removeClass("fr-param-autocomplete-error");u.valid()},close:function(n){n.originalEvent&&n.originalEvent.originalEvent.type==="click"&&(s=!1)}});u.on("focus",function(){$(".ui-autocomplete",f.options.$appContainer).hide()});u.on("change",function(n,t){t||u.val()===""||n.stopImmediatePropagation()});u.on("keydown",function(n){if(n.keyCode===13){if(s){s=!1;return}f._submitForm(i)}});return h.append(u).append(o),h},_writeDropDownControl:function(n,t,i,r){var e=this,s=!1,u=new $("<select class='fr-param fr-param-select fr-paramname-"+n.Name+"' name='"+n.Name+"' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' readonly='true'>"),o,h,f;if(t)return e._disabledSubSequenceControl(u),u;for(e._getParameterControlProperty(n,u),o=e.options.$reportViewer.locData.paramPane.select,h=new $("<option title='"+o+"' value=''>&#60"+o+"&#62<\/option>"),u.append(h),f=0;f<n.ValidValues.length;f++){var c=forerunner.helper.htmlEncode(n.ValidValues[f].Key),l=n.ValidValues[f].Value,a=new $("<option title='"+c+"' value='"+l+"'>"+c+"<\/option>");(r&&r===l||!r&&f===0)&&(a.attr("selected","true"),u.attr("title",n.ValidValues[f].Key),s=!0);u.append(a)}s||(e._loadedForDefault=!1);u.on("change",function(){u.attr("title",$(this).find("option:selected").text());e.getNumOfVisibleParameters()===1&&e._submitForm(i)});return u},_writeCascadingTree:function(n,t){var i=this,o=i._createDiv(["fr-param-element-container fr-param-tree-container"]),r=i._createInput(n,"text",!1,["fr-param-client","fr-param-not-close","fr-paramname-"+n.Name]),f,u,s,e,h;r.attr("cascadingTree",!0).attr("readonly","readonly").addClass("fr-param-tree-input");i._getParameterControlProperty(n,r);f=i._createInput(n,"hidden",!1,["fr-param","fr-paramname-"+n.Name]);i._setTreeElementProperty(n,f);i._setTreeDefaultValue(n,t,r,f);u=i._createDiv(["fr-param-tree","ui-corner-all","fr-param-not-close"]);s=i._getCascadingTree(n,1);u.append(s);e=i._createDiv(["fr-param-dropdown-iconcontainer","fr-core-cursorpointer"]);h=i._createDiv(["fr-param-dropdown-icon","fr-param-not-close"]);e.append(h);r.on("click",function(){i._showTreePanel(u,r)});e.on("click",function(){i._showTreePanel(u,r)});return i._addWriteParamDoneCallback(function(){i._setTreeSelectedValues(u)}),o.append(r).append(f).append(e).append(u),o},_showTreePanel:function(n,t){var i=this;n.is(":visible")?(i._setTreeSelectedValues(n),n.hide()):(t.removeClass("fr-param-cascadingtree-error").attr("cascadingTree",""),n.show(),n.position({my:"left top",at:"left bottom",of:t}),t.blur())},_writeCascadingChildren:function(n,t){var r=this,u=null,i=null;return u=r._createDiv(["fr-param-element-container"]),i=r._createInput(n,"hidden",!1,["fr-param","fr-paramname-"+n.Name]),i.val("#"),r._setTreeElementProperty(n,i),r._setTreeDefaultValue(n,t,null,i),u.append(i),u},_getCascadingTree:function(n,t){var u=this,r=null,i,e,h;if(!!n.ValidValues){var f=u._getPredefinedValue(n),o=!!u._dependencyList[n.Name],s=n.ValidValues.length;for(r=new $("<ul />"),r.attr("name",n.Name).attr("allowmultiple",n.MultiValue).attr("haschild",o).attr("nullable",n.Nullable).attr("level",t).addClass("fr-param-tree-ul"),n.isChild&&(r.attr("parent",n.Dependencies.join()),r.addClass("fr-param-tree-child")),i=0;i<s;i++)e=!1,f&&(n.MultiValue?u._contains(f,n.ValidValues[i].Value)&&(e=!0):f&&f===n.ValidValues[i].Value&&(e=!0)),h=u._getCascadingTreeItem(n,n.ValidValues[i],o,i===s-1,e,t),r.append(h)}return r},_getCascadingTreeItem:function(n,t,i,r,u,f){var o=this,e=new $("<li/>"),h,c,v,l,s,y,a,w,p;e.addClass("fr-param-tree-item").attr("value",t.Value);r&&e.addClass("fr-param-tree-item-last");h=new $("<i/>");h.addClass("fr-param-tree-icon");h.addClass("fr-param-tree-ocl");h.on("click",function(){if(e.hasClass("fr-param-tree-item-close")){if(o._revertLock===!0){e.children("ul").length!==0&&(e.children("ul").show(),e.removeClass("fr-param-tree-item-close").addClass("fr-param-tree-item-open"));return}if(o._setRuntimeTreeValues(e),e.children("ul").length===0?(e.addClass("fr-param-tree-loading"),o.refreshParameters(null,!0)):e.children("ul").show(),n.MultiValue===!1){var t=o.element.find(".fr-param-tree-container ul[level='"+f+"']").children("li.fr-param-tree-item-open");$.each(t,function(n,t){$(t).children(".fr-param-tree-icon").trigger("click")})}e.removeClass("fr-param-tree-item-close").addClass("fr-param-tree-item-open")}else e.hasClass("fr-param-tree-item-open")&&(n.MultiValue===!1?o._clearTreeItemStatus(e.children("ul")):(o._revertLock===!0&&o._clearTreeItemStatus(e.children("ul")),e.children("ul").hide(),e.removeClass("fr-param-tree-item-open").addClass("fr-param-tree-item-close")))});c=new $("<i/>");c.addClass("fr-param-tree-icon fr-param-tree-icon-cb");n.MultiValue===!1&&c.addClass("fr-param-tree-icon-hidden");v=new $("<i/>");v.addClass("fr-param-tree-icon fr-param-tree-icon-theme");l=new $("<span/>");l.addClass("fr-param-tree-item-text");l.text(t.Key);s=new $("<a href=''/>");s.addClass("fr-param-tree-anchor");s.on("click",function(t){var u,r,c;if(t.preventDefault(),n.MultiValue===!1&&(i?(u=o.element.find(".fr-param-tree-container ul[level='"+f+"']").children("li.fr-param-tree-item-open"),$.each(u,function(n,t){if(e.attr("value")===$(t).attr("value"))return!0;$(t).children(".fr-param-tree-ocl").trigger("click")})):(u=o.element.find(".fr-param-tree-container ul[level='"+f+"']").children("li.fr-param-tree-item-selected"),$.each(u,function(n,t){if(e.attr("value")===$(t).attr("value"))return!0;$(t).children(".fr-param-tree-anchor").trigger("click")}))),r=e.children("ul"),c=r.attr("allowmultiple")==="true",s.hasClass("fr-param-tree-anchor-selected"))if(i){if(r.length!==0&&r.is(":visible")){if(s.removeClass("fr-param-tree-anchor-selected"),e.removeClass("fr-param-tree-item-selected"),c&&r.children("li.fr-param-tree-item-selected").length===0){s.trigger("click");return}r.find(".fr-param-tree-item .fr-param-tree-anchor").removeClass("fr-param-tree-anchor-selected");r.find(".fr-param-tree-item").removeClass("fr-param-tree-item-selected")}}else s.removeClass("fr-param-tree-anchor-selected"),e.removeClass("fr-param-tree-item-selected");else e.addClass("fr-param-tree-item-selected"),s.addClass("fr-param-tree-anchor-selected"),i&&c&&r.is(":visible")&&(r.children("li").children(".fr-param-tree-anchor").addClass("fr-param-tree-anchor-selected"),r.children("li").addClass("fr-param-tree-item-selected"));i&&(r.length===0||r.is(":visible")===!1)&&h.trigger("click");o._setParentStatus(e)});if(s.append(c).append(v).append(l),e.append(h).append(s),i)if(u){for(f+=1,y=o._dependencyList[n.Name],a=0;a<y.length;a++)w=o._parameterDefinitions[y[a]],p=o._getCascadingTree(w,f),p&&e.append(p);f-=1;e.addClass("fr-param-tree-item-open")}else e.addClass("fr-param-tree-item-close");return u&&!i&&o._addWriteParamDoneCallback(function(){s.trigger("click")}),e},_setParentStatus:function(n){var u=this;if(n.parent().attr("parent")){var i=n.parent(),t=i.parent("li"),r=t.children(".fr-param-tree-anchor");i.find("li a").filter(".fr-param-tree-anchor-selected").length===0?(t.removeClass("fr-param-tree-item-selected"),r.removeClass("fr-param-tree-anchor-selected")):(t.addClass("fr-param-tree-item-selected"),r.addClass("fr-param-tree-anchor-selected"));u._setParentStatus(t)}},_setRuntimeTreeValues:function(n){var i=this,t=n.parent(),u=t.attr("name"),r=i.element.find(".fr-paramname-"+u);t.attr("allowmultiple")==="true"?r.filter(".fr-param").val("#").attr("backendValue",'["'+n.attr("value")+'"]'):r.filter(".fr-param").val("#").attr("backendValue",n.attr("value"));t.attr("parent")&&i._setRuntimeTreeValues(t.parent("li"))},_setTreeSelectedValues:function(n){var r=this,t=null,u=null,s=null,f=null,i=null,c=!0,e=null,o=n.siblings(".fr-param-tree-input"),h,l;o.removeClass("fr-param-cascadingtree-error").attr("cascadingTree","");for(h in r._parameterDefinitions)r._parameterDefinitions.hasOwnProperty(h)&&(t=r._parameterDefinitions[h],(t.isParent||t.isChild)&&(u=r.element.find(".fr-paramname-"+t.Name),f="",t.MultiValue?(i=[],$.each(n.find("ul[name="+t.Name+"] > li.fr-param-tree-item-selected"),function(n,t){i.push($(t).attr("value"))}),i.length&&(f=JSON.stringify(i))):(l=n.find("ul[name="+t.Name+"] > li.fr-param-tree-item-selected"),i=l.attr("value"),i&&(f=i)),u.hasClass("fr-param-required")&&!!f==!1&&(e=e||[],e.push(t.Prompt),c=!1),u.filter(".fr-param").attr("backendValue",f),t.isParent&&!t.isChild&&(s=r._getTreeDisplayText(n),s?u.val(s):u.val(""))));c===!1&&(e.length&&o.attr("cascadingTree","["+e.join()+"]"),o.addClass("fr-param-cascadingtree-error"));o.blur()},_getTreeDisplayText:function(n){var u=this,t=n.children("ul");if(t.length===0)return"";var i=null,r=[],f=t.attr("haschild").toLowerCase()==="true"?!0:!1;return $.each(t.children("li.fr-param-tree-item-selected"),function(n,t){i=$(t).children("a").text();f&&(i+=u._getTreeDisplayText($(t)));r.push(i)}),t.hasClass("fr-param-tree-child")?"("+r.join()+")":r.join(", ")},_setTreeDefaultValue:function(n,t,i,r){var o=this,f=n.ValidValues,e,u;if(t)if(n.MultiValue){for(e=[],u=0;u<f.length;u++)o._contains(t,f[u].Value)&&e.push(f[u].Key);e.length&&(i&&i.val(e.join()),r.attr("backendValue",JSON.stringify(t)))}else for(u=0;u<f.length;u++)if(t&&t===f[u].Value){i&&i.val(f[u].Key);r.attr("backendValue",f[u].Value);break}},_setTreeItemStatus:function(n,t,i){var r=this,u=r.element.find(".fr-param-tree ul[name='"+n.Name+"']"),f;i&&u.children("li.fr-param-tree-item-open").children(".fr-param-tree-ocl").trigger("click");f=u.children("li");$.each(f,function(i,u){n.MultiValue?r._contains(t.Value,$(u).attr("value"))&&$(u).children(".fr-param-tree-anchor").trigger("click"):$(u).attr("value")===t.Value&&$(u).children(".fr-param-tree-anchor").trigger("click")})},_clearTreeItemStatus:function(n){var i=this,r=n.attr("haschild")==="true",t;r&&(t=n.children("li.fr-param-tree-item-open").children("ul"),$.each(t,function(n,t){i._clearTreeItemStatus($(t))}));n.children("li.fr-param-tree-item-selected").children(".fr-param-tree-anchor").removeClass("fr-param-tree-anchor-selected");n.children("li.fr-param-tree-item-selected").removeClass("fr-param-tree-item-selected");n.hide();n.parent("li").children(".fr-param-tree-anchor").removeClass("fr-param-tree-anchor-selected");n.parent("li").removeClass("fr-param-tree-item-selected").removeClass("fr-param-tree-item-open").addClass("fr-param-tree-item-close")},_closeCascadingTree:function(n){var t=this,i=t.element.find(".fr-param-tree");$.each(i,function(i,r){var u=$(r);(n||u.is(":visible"))&&(t._setTreeSelectedValues(u),u.hide())})},_setTreeElementProperty:function(n,t){var i=this;t.attr("treeInput","");t.attr("backendValue","");t.attr("allowblank",n.AllowBlank);t.attr("nullable",n.Nullable);t.addClass("fr-param-tree-hidden-input");(n.QueryParameter||n.Nullable===!1&&n.AllowBlank===!1)&&(t.attr("required"),t.addClass("fr-param-required"))},_createInput:function(n,t,i,r){var u=new $("<Input />"),f;for(u.attr("type",t),u.attr("name",n.Name),u.attr("ismultiple",n.MultiValue),u.attr("datatype",n.Type),i&&u.attr("readonly",!0),f=0;f<r.length;f++)u.addClass(r[f]);return u},_createDiv:function(n){for(var i=new $("<div />"),t=0;t<n.length;t++)i.addClass(n[t]);return i},_createLabel:function(n){for(var i=new $("<label />"),t=0;t<n.length;t++)i.addClass(n[t]);return i},_writeDropDownWithCheckBox:function(n,t,i){var r=this,s=r._createDiv(["fr-param-element-container"]),f=r._createInput(n,"text",!0,["fr-param-client","fr-param-dropdown-textbox","fr-param-not-close","fr-paramname-"+n.Name]),h=r._createDiv(["fr-param-dropdown-iconcontainer","fr-core-cursorpointer"]),nt=r._createDiv(["fr-param-dropdown-icon","fr-param-not-close"]),y,c,p,l,b,u,a,e,w,o;if(h.append(nt),t)return r._disabledSubSequenceControl(f),s.append(f).append(h),s;r._getParameterControlProperty(n,f);y=r._createInput(n,"hidden",!1,["fr-param","fr-paramname-"+n.Name]);h.on("click",function(){r._popupDropDownPanel(n)});f.on("click",function(){r._popupDropDownPanel(n)});for(c=r._createDiv(["fr-param-dropdown","fr-param-not-close","fr-paramname-"+n.Name+"-dropdown-container"]),c.attr("value",n.Name),p=r._getDefaultHTMLTable(),n.ValidValues.length&&n.ValidValues[n.ValidValues.length-1].Key!=="Select All"&&n.ValidValues.push({Key:"Select All",Value:"Select All"}),l="",b="",u=0;u<n.ValidValues.length;u++){u===0?(w=n.ValidValues[n.ValidValues.length-1],a=w.Key,e=w.Value):(a=n.ValidValues[u-1].Key,e=n.ValidValues[u-1].Value);var k=new $("<TR />"),d=new $("<TD/>"),g=new $("<Span />"),v=r._createInput(n,"checkbox",!1,["fr-param-dropdown-checkbox","fr-paramname-"+n.Name+"-dropdown-cb"]);v.attr("value",e);i&&r._contains(i,e)&&(v.attr("checked","true"),l+=a+",",b+=e+",");v.on("click",function(){this.value==="Select All"&&(this.checked===!0&&$(".fr-paramname-"+n.Name+"-dropdown-cb",r.$params).each(function(){this.checked=!0}),this.checked===!1&&$(".fr-paramname-"+n.Name+"-dropdown-cb",r.$params).each(function(){this.checked=!1}))});o=r._createLabel(["fr-param-dropdown-label","fr-paramname-"+n.Name+"-dropdown-"+u.toString()+"-label"]);o.attr("for",n.Name+"_DropDown_"+u.toString());o.attr("value",e);o.text(a);g.append(v).append(o);d.append(g);k.append(d);p.append(k)}return c.append(p),i&&(f.val(l.substr(0,l.length-1)),y.val(JSON.stringify(i))),s.append(f).append(y).append(h).append(c),s},_writeDropDownWithTextArea:function(n,t,i){var r=this,f=r._createDiv(["fr-param-element-container"]),u=r._createInput(n,"text",!0,["fr-param","fr-param-dropdown-textbox","fr-param-not-close","fr-paramname-"+n.Name]),e=r._createDiv(["fr-param-dropdown-iconcontainer","fr-core-cursorpointer"]),h=r._createDiv(["fr-param-dropdown-icon","fr-param-not-close"]),o,s;if(e.append(h),t)return r._disabledSubSequenceControl(u),f.append(u).append(e),f;r._getParameterControlProperty(n,u);u.on("click",function(){r._popupDropDownPanel(n)});e.on("click",function(){r._popupDropDownPanel(n)});return o=r._createDiv(["fr-param-dropdown","fr-param-not-close","fr-paramname-"+n.Name+"-dropdown-container"]),o.attr("value",n.Name),s=new $("<textarea class='fr-param-dropdown-textarea fr-paramname-"+n.Name+"-dropdown-textArea' />"),i&&(s.val(r._getTextAreaValue(i,!0)),u.val(r._getTextAreaValue(i,!1)).attr("title",r._getTextAreaValue(i,!1)),u.attr("jsonValues",JSON.stringify(i))),o.append(s),f.append(u).append(e).append(o),f},_getTextAreaValue:function(n,t){var i="",r,u;if(t){for(r=0;r<n.length;r++)i+=n[r]+"\n";i=i.substr(0,i.length-1)}else{for(u=0;u<n.length;u++)i+=n[u]+",";i=i.substr(0,i.length-1)}return i},_setCheckBoxes:function(n,t){for(var i=0;i<n.length;i++)n[i].checked=$.inArray(n[i].value,t)>=0?!0:!1},_setMultipleInputValues:function(n){var i=this,t,e,r=$(".fr-paramname-"+n.Name,i.$params),u,f,o;e=r.val();r.hasClass("fr-param-client")?(u="",f=[],$(".fr-paramname-"+n.Name+"-dropdown-cb",i.$params).each(function(t){this.checked&&this.value!=="Select All"&&(u+=$(".fr-paramname-"+n.Name+"-dropdown-"+t.toString()+"-label",i.$params).text()+",",f.push(this.value))}),t=u.substr(0,u.length-1),$(".fr-paramname-"+n.Name,i.$params).val(t).attr("title",t),$(".fr-paramname-"+n.Name,i.$params).filter(".fr-param").val(JSON.stringify(f))):(t=$(".fr-paramname-"+n.Name+"-dropdown-textArea",i.$params).val(),o=t.split("\n"),t=t.replace(/\n+/g,","),t.charAt(t.length-1)===","&&(t=t.substr(0,t.length-1)),r.val(t).attr("title",t),r.attr("jsonValues",JSON.stringify(o)));e!==t&&r.change()},_popupDropDownPanel:function(n){var t=this,u=$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params).is(":visible");if(t._closeAllDropdown(),!u){var f=t.$params,i=$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params),r=$(".fr-paramname-"+n.Name,t.$params),e=r.offset().top;r.parent().css("z-index",1);f.height()-e-r.height()<i.height()?i.css("top",(i.height()+10)*-1+4):i.css("top",r.height()+15);i.is(":hidden")?i.width(r.width()+20).addClass("fr-param-dropdown-show").show(10):t._closeDropDownPanel(n)}},_closeDropDownPanel:function(n){var t=this;t._setMultipleInputValues(n);$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params).removeClass("fr-param-dropdown-show").hide();$(".fr-paramname-"+n.Name,t.$params).focus().blur().parent().css("z-index","inherit")},_closeAllDropdown:function(){var n=this;$(".fr-param-dropdown-show",n.$params).filter(":visible").each(function(t,i){n._closeDropDownPanel({Name:$(i).attr("value")})});$(".ui-autocomplete",n.options.$appContainer).hide();n._closeCascadingTree(!1)},_checkExternalClick:function(n){var t=n.data.me;forerunner.helper.containElement(n.target,["fr-param-not-close"])||t._closeAllDropdown()},_shouldInclude:function(n,t){var r;if(!t)return!0;var i=this,u=$(n).attr("datatype")==="String",f=$(n).attr("allowblank")==="true";return u&&f?!0:n.value===""?i._isNullChecked(n):(r=!!$(n).attr("required"),r&&n.value===i.options.$reportViewer.locData.paramPane.required)?!1:!0},getParamsList:function(n){var t=this,i,r,u,f;if(n||t._closeAllDropdown(),n||t.$form.length!==0&&t.$form.valid()===!0){i=[];$(".fr-param",t.$params).filter(":text").each(function(){if(t._shouldInclude(this,n))if($(this).attr("ismultiple")==="false")i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:t._isParamNullable(this)});else{var r=$(this).attr("jsonValues");i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:JSON.parse(r?r:null)})}});$(".fr-param",t.$params).filter("[type='hidden']").each(function(){if(t._shouldInclude(this,n))if($(this).attr("ismultiple")==="false")i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:t._isParamNullable(this)});else{var r=t._isParamNullable(this);i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:JSON.parse(r?r:null)})}});$(".fr-param",t.$params).filter("select").each(function(){var r=this.value!==null&&this.value!==""&&t._shouldInclude(this,n);r&&i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:t._isParamNullable(this)})});r={};$(".fr-param",t.$params).filter(":radio").each(function(){this.name in r||(!n||t._isNullChecked(this))&&(r[this.name]=null);this.checked===!0&&(r[this.name]=t._isParamNullable(this))});for(u in r)i.push({Parameter:u,IsMultiple:"",Type:"Boolean",Value:r[u]});return f={ParamsList:i},JSON.stringify(f)}return null},_isNullChecked:function(n){var t=$(".fr-param-checkbox",this.$params).filter("[name*='"+n.name+"']").first();return t.length!==0&&t.attr("checked")==="checked"},_isParamNullable:function(n){var r=this,t=$(".fr-paramname-"+n.name,this.$params).filter(".fr-param"),i;return r._isNullChecked(n)?null:t.hasClass("fr-param-tree-hidden-input")?t.attr("backendValue")===""&&t.attr("nullable")==="true"?null:t.attr("backendValue"):t.attr("allowblank")==="true"&&t.val()===""?"":forerunner.helper.hasAttr(t,"backendValue")?t.attr("backendValue"):t.attr("datatype").toLowerCase()==="datetime"?(i=moment(t.val(),forerunner.ssr._internal.getMomentDateFormat(),!0),i.format("YYYY-MM-DD")):t.attr("datatype").toLowerCase()==="boolean"?t.filter(":checked").val():t.val()!==""?t.val():null},_hasValidValues:function(n){var t=!0;return n.ValidValues===""&&n.ValidValuesQueryBased===!1&&(t=!1),t},removeParameter:function(){var n=this;n._formInit=!1;n.$params=null;$("."+t,n.element).detach();n._parameterDefinitions={}},_getDefaultHTMLTable:function(){return $("<Table cellspacing='0' cellpadding='0'/>")},_contains:function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1},_hasDefaultValue:function(n){var t=this;return t._defaultValueExist&&$.isArray(n.DefaultValues)},_getDateTimeFromDefault:function(n){if(!n)return null;var t=moment(n);return t.isValid()?t.format(forerunner.ssr._internal.getMomentDateFormat()):null},_checkDependencies:function(n){var t=this,i=!1;return $.isArray(n.Dependencies)&&n.Dependencies.length&&$.each(n.Dependencies,function(n,i){var r=$(".fr-paramname-"+i,t.$params);r.on("change",function(){t.refreshParameters(null,!0)})}),n.State==="HasOutstandingDependencies"&&(i=!0),i},_dataPreprocess:function(n){var t=this;$.each(n,function(n,i){t._parameterDefinitions[i.Name]=i;t._parameterDefinitions[i.Name].ValidatorAttrs=[];$.isArray(i.Dependencies)&&i.Dependencies.length&&(t._dependencyList=t._dependencyList||{},t._parameterDefinitions[i.Name].isChild=!0,t._hasValidValues(t._parameterDefinitions[i.Name])===!1&&(t._isDropdownTree=!1),$.each(i.Dependencies,function(n,r){t._parameterDefinitions[r].isParent=!0;t._hasValidValues(t._parameterDefinitions[r])===!1&&(t._isDropdownTree=!1);t._dependencyList[r]||(t._dependencyList[r]=[]);t._contains(t._dependencyList[r],i.Name)||t._dependencyList[r].push(i.Name)}))})},refreshParameters:function(n,t){var i=this,r=n?n:i.getParamsList(!0);r&&i.options.$reportViewer.refreshParameters(r,!1,-1,!1,t)},_disabledSubSequenceControl:function(n){n.attr("disabled",!0).addClass("fr-param-disable")},_checkHiddenParam:function(n){var t=this;!t._hasDefaultValue(n)},_getDatePickerLoc:function(){var n=this;return n.options.$reportViewer.locData.datepicker},destroy:function(){var n=this;$(document).off("click",n._checkExternalClick)}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportDocumentMap),{options:{$reportViewer:null},_create:function(){},_init:function(){},write:function(n){var i=this,t;this.element.html("");t=new $("<div class='fr-docmap-panel fr-docmap-panel-layout fr-core-widget'/>");t.append(i._writeDocumentMapItem(n.DocumentMap,0));i.element.append(t)},_writeDocumentMapItem:function(n,t){var e=this,i=new $("<div />"),u,f,r,o;t!==0&&i.css("margin-left","34px");u=new $("<div />");u.addClass("fr-docmap-item").attr("title","Navigate to "+n.Label).html(n.Label);u.on("click",{UniqueName:n.UniqueName},function(n){e.options.$reportViewer.navigateDocumentMap(n.data.UniqueName)});if(n.Children){f=new $("<DIV />");f.addClass("fr-docmap-parent-container");e._setFocus(f);r=new $("<div class='fr-docmap-icon'/>");t===0?r.addClass("fr-docmap-icon-up"):r.addClass("fr-docmap-icon-down");r.on("click",function(){var n=i.find("[level='"+t+"']");n.is(":visible")?(i.find("[level='"+t+"']").slideUpHide(),r.removeClass("fr-docmap-icon-up").addClass("fr-docmap-icon-down")):(i.find("[level='"+t+"']").slideUpShow(),r.removeClass("fr-docmap-icon-down").addClass("fr-docmap-icon-up"))});u.addClass("fr-docmap-item-root");f.append(r);f.append(u);i.append(f);o=new $("<div level='"+t+"'>");$.each(n.Children,function(n,i){o.append(e._writeDocumentMapItem(i,t+1))});i.append(o);t!==0&&o.hide()}else i.addClass("fr-docmap-item-container"),e._setFocus(i),i.append(u);return i},_setFocus:function(n){n.hover(function(){$(this).addClass("fr-docmap-item-highlight")},function(){$(this).removeClass("fr-docmap-item-highlight")})}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events;$.widget(t.getFullname("settingsPairWidget"),{options:{label1:null,name1:null,text1:null,unit1:null,label2:null,name2:null,text2:null,unit2:null},_init:function(){var n=this,i="",t,r;n.options.name1&&(i="name='"+n.options.name1+"'");t="";n.options.name2&&(t="name='"+n.options.name2+"'");n.element.html("");r=new $("<table class=fr-print-settings><tr><td><label class='fr-print-label'>"+n.options.label1+"<\/label><\/td><td><input class='fr-print-text' "+i+" type='text' value='"+n.options.text1+"'/><\/td><td><label class='fr-print-unit-label'>"+n.options.unit1+"<\/label><\/td><\/tr><tr><td><label class='fr-print-label'>"+n.options.label2+"<\/label><\/td><td><input class='fr-print-text' "+t+" type='text' value='"+n.options.text2+"'/><\/td><td><label class='fr-print-unit-label'>"+n.options.unit2+"<\/label><\/td><\/tr><\/table>");n.element.append(r);n.element.addClass("fr-print-settings-pair-widget")}});$.widget(t.getFullname(t.reportPrint),{options:{$reportViewer:null,$appContainer:null},_printData:null,_create:function(){},_init:function(){var n=this;n.locData=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer")},_initBody:function(){var t=this,i=t.locData.print,r,u;t.element.html("");t.element.off(n.modalDialogGenericSubmit);t.element.off(n.modalDialogGenericCancel);r=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-printreport",i.title,"fr-print-cancel",i.cancel);u=new $("<div class='fr-core-dialog-innerPage fr-core-center'>"+r+"<form class='fr-print-form fr-core-dialog-form'><div class='fr-print-options-label'>"+i.pageLayoutOptions+"<\/div><div class=fr-print-height-width-id><\/div><div class='fr-print-orientation-container'><div class='fr-print-portrait'><\/div><div class='fr-print-landscape'><\/div><\/div><div class='fr-print-margins-label'>"+i.margin+"<\/div><div class=fr-print-top-bottom-id><\/div><div class=fr-print-left-right-id><\/div><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-print-submit-id fr-core-dialog-submit fr-core-dialog-button' value='"+i.print+"'/><\/div><\/div><\/form><\/div>");t.element.append(u);t.$form=t.element.find(".fr-print-form");t._resetValidateMessage();t.element.find(".fr-print-submit-id").on("click",function(){t._submitPrint()});t.element.find(".fr-print-cancel").on("click",function(){t.closeDialog();t._printData&&t._createItems()});t.element.on(n.modalDialogGenericSubmit,function(){t._submitPrint()});t.element.on(n.modalDialogGenericCancel,function(){t.closeDialog()})},setPrint:function(n){var t=this;t._initBody();t._printData=n||t._printData;t._printData&&t._createItems(t._printData)},_submitPrint:function(){var n=this,t=n._generatePrintProperty();t!==null&&(n.options.$reportViewer.reportViewer("printReport",t),n.closeDialog())},_createItems:function(n){var t=this,i=t.locData.print,r=i.unit;n=n||t._printData;t.element.find(".fr-print-height-width-id").settingsPairWidget({label1:i.pageHeight,name1:"PageHeight",text1:t._unitConvert(n.PageHeight),unit1:r,label2:i.pageWidth,name2:"PageWidth",text2:t._unitConvert(n.PageWidth),unit2:r});t.element.find(".fr-print-top-bottom-id").settingsPairWidget({label1:i.marginTop,name1:"MarginTop",text1:t._unitConvert(n.MarginTop),unit1:r,label2:i.marginBottom,name2:"MarginBottom",text2:t._unitConvert(n.MarginBottom),unit2:r});t.element.find(".fr-print-left-right-id").settingsPairWidget({label1:i.marginLeft,name1:"MarginLeft",text1:t._unitConvert(n.MarginLeft),unit1:r,label2:i.marginRight,name2:"MarginRight",text2:t._unitConvert(n.MarginRight),unit2:r});t.element.find(".fr-print-text").each(function(){$(this).attr("required","true").attr("number","true");$(this).parent().addClass("fr-print-item").append($("<span class='fr-print-error-span'/>").clone())});t._validateForm(t.$form);t.$pageWidth=t.element.find("[name=PageWidth]");t.$pageHeight=t.element.find("[name=PageHeight]");t.$pageWidth.on("change",function(){t._setOrientationIconState.call(t)});t.$pageHeight.on("change",function(){t._setOrientationIconState.call(t)});t.$printPortrait=t.element.find(".fr-print-portrait");t.$printLandscape=t.element.find(".fr-print-landscape");t.$printPortrait.on("click",function(){t._isPortrait()||t._swapWidthHeight()});t.$printLandscape.on("click",function(){t._isPortrait()&&t._swapWidthHeight()});t._setOrientationIconState();$(":text",t.element).each(function(){var n=$(this);n.on("blur",function(){t.options.$reportViewer.reportViewer("onInputBlur")});n.on("focus",function(){t.options.$reportViewer.reportViewer("onInputFocus")})})},_isPortrait:function(){var n=this;return Number(n.$pageWidth.val())>Number(n.$pageHeight.val())?!1:!0},_swapWidthHeight:function(){var n=this,t=n.$pageWidth.val();n.$pageWidth.val(n.$pageHeight.val());n.$pageHeight.val(t);n._setOrientationIconState()},_setOrientationIconState:function(){var n=this;Number(n.$pageWidth.val())>Number(n.$pageHeight.val())?(n.$printLandscape.removeClass("fr-core-cursorpointer"),n.$printLandscape.removeClass("fr-print-landscape-icon"),n.$printLandscape.addClass("fr-print-landscape-icon-active"),n.$printPortrait.removeClass("fr-print-portrait-icon-active"),n.$printPortrait.addClass("fr-core-cursorpointer"),n.$printPortrait.addClass("fr-print-portrait-icon")):(n.$printLandscape.addClass("fr-core-cursorpointer"),n.$printLandscape.removeClass("fr-print-landscape-icon-active"),n.$printLandscape.addClass("fr-print-landscape-icon"),n.$printPortrait.removeClass("fr-print-portrait-icon"),n.$printPortrait.removeClass("fr-core-cursorpointer"),n.$printPortrait.addClass("fr-print-portrait-icon-active"))},openDialog:function(){var n=this;forerunner.dialog.showModalDialog(n.options.$appContainer,n)},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.$appContainer,n)},_validateForm:function(n){n.validate({errorPlacement:function(n,t){n.appendTo($(t).parent().find("span"))},highlight:function(n){$(n).parent().find("span").addClass("fr-print-error-position");$(n).addClass("fr-print-error")},unhighlight:function(n){$(n).parent().find("span").removeClass("fr-print-error-position");$(n).removeClass("fr-print-error")}})},_generatePrintProperty:function(){var n=this,t=[],i;return n.element.find(".fr-print-form").valid()===!0?(n.element.find(".fr-print-text").each(function(){t.push({key:this.name,value:n._generateUnitConvert(this.value)})}),i={PrintPropertyList:t},JSON.stringify(i)):null},_resetValidateMessage:function(){var t=this,n=t.locData.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,number:n.number,digits:n.digits})},_unitConvert:function(n){var t=this;return t.locData.print.unit==="in"?Math.round(n/25.4*100)/100:n},_generateUnitConvert:function(n){var t=this;return t.locData.print.unit==="mm"?Math.round(n/25.4*100)/100:n},destroy:function(){var n=this;n._printData=null;this._destroy()}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events;$.widget(t.getFullname(t.reportRDLExt),{options:{reportViewer:null},_create:function(){},_init:function(){var t=this,i=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer").RDLExt,r,u;t.element.html("");t.element.off(n.modalDialogGenericSubmit);t.element.off(n.modalDialogGenericCancel);r=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-setup",i.title,"fr-rdl-cancel",i.cancel);u=new $("<div class='fr-core-dialog-innerPage fr-core-center'>"+r+"<form class='fr-rdl-form fr-core-dialog-form'><div class='fr-rdl-container'><label class='fr-rdl-label'>"+i.dialogTitle+"<\/label><textarea class='fr-rdl-text' rows='5' class='fr-rdl-id '  name='RDL' />  <\/div><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-rdl-submit-id fr-core-dialog-submit fr-core-dialog-button' value='"+i.submit+"'/><\/div><\/form><\/div>");t.element.append(u);t.element.find(".fr-rdl-submit-id").on("click",function(){t._saveSettings()});t.element.find(".fr-rdl-cancel").on("click",function(){t.closeDialog()});t.element.on(n.modalDialogGenericSubmit,function(){t._saveSettings()});t.element.on(n.modalDialogGenericCancel,function(){t.closeDialog()})},_getSettings:function(){var n=this;n.settings=n.options.reportViewer.getRDLExt();n.$RLDExt=n.element.find(".fr-rdl-text");n.settings&&n.$RLDExt.val(JSON.stringify(n.settings))},_saveSettings:function(){var n=this;n.options.reportViewer.saveRDLExt(n.$RLDExt.val())&&n.closeDialog()},openDialog:function(){var n=this;n._getSettings();forerunner.dialog.showModalDialog(n.options.reportViewer.options.$appContainer,n)},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.reportViewer.options.$appContainer,n)}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var i=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events,r=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer"),n=r.manageParamSets;$.widget(i.getFullname(i.manageParamSets),{options:{$reportViewer:null,$appContainer:null,model:null},_initTBody:function(){var n=this;(n.serverData=n.options.model.parameterModel("cloneServerData"),n.serverData!==null&&n.serverData!==undefined)&&(n._createRows(),n.lastAddedSetId=null)},_createRows:function(){var n=this,t;n.element.find(".fr-mps-text-input").off("change");n.element.find(".fr-mps-default-id").off("click");n.element.find(".fr-mps-all-users-id").off("click");n.element.find(".fr-mps-delete-id").off("click");n.$tbody.html("");t=n.options.model.parameterModel("getOptionArray",n.serverData.parameterSets);$.each(t,function(t,i){if(t>0){var u=n.serverData.parameterSets[i.id],r=n._createRow(t,u);if(n.$tbody.append(r),n.serverData.canEditAllUsersSet)r.find(".fr-mps-all-users-id").on("click",function(t){n._onClickAllUsers(t)});if(n.serverData.canEditAllUsersSet||!u.isAllUser)r.find(".fr-mps-delete-id").on("click",function(t){n._onClickDelete(t)})}});n.element.find(".fr-mps-text-input").on("change",function(t){n._onChangeInput(t)});n.element.find(".fr-mps-default-id").on("click",function(t){n._onClickDefault(t)});$(":text",n.element).each(function(){var t=$(this);t.on("blur",function(){n.options.$reportViewer.reportViewer("onInputBlur")});t.on("focus",function(){n.options.$reportViewer.reportViewer("onInputFocus")})});n._validateForm(n.$form)},_createRow:function(n,t){var i=this,f="",u,h,c;i.serverData.canEditAllUsersSet&&(f=" fr-core-cursorpointer");var r=forerunner.helper.htmlEncode(t.name),e="<input type='text' required='true' name=name"+n+" class='fr-mps-text-input' value='"+r+"'/><span class='fr-mps-error-span'/>",o="fr-mps-all-users-check-id ",s=" class='ui-icon-circle-close ui-icon fr-core-center'";return t.isAllUser&&(i.serverData.canEditAllUsersSet||(e=r,s=""),o="fr-mps-all-users-check-id ui-icon-check ui-icon "),u="fr-mps-default-check-id ",t.id===i.serverData.defaultSetId&&(u="fr-mps-default-check-id ui-icon-check ui-icon "),h=n+1&1?" class='fr-mps-odd-row'":"",c=$("<tr"+h+" modelid='"+t.id+"'><td title='"+r+"'>"+e+"<\/td><td class='fr-mps-default-id fr-core-cursorpointer'><div class='"+u+"fr-core-center' /><\/td><td class='fr-mps-all-users-id"+f+"'><div class='"+o+"fr-core-center' /><\/td><td class='fr-mps-delete-id ui-state-error-text fr-core-cursorpointer'><div"+s+"/><\/td><\/tr>"),c},_init:function(){var i=this,r,u;i.element.html("");i.element.off(t.modalDialogGenericSubmit);i.element.off(t.modalDialogGenericCancel);r=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-parameterSets",n.manageSets,"fr-mps-cancel",n.cancel);u=$("<div class='fr-core-dialog-innerPage fr-core-center'>"+r+"<form class='fr-mps-form fr-core-dialog-form'><div class='fr-core-center'><input name='add' type='button' value='"+n.add+"' title='"+n.addNewSet+"' class='fr-mps-add-id fr-mps-action-button fr-core-dialog-button'/><table class='fr-mps-main-table'><thead><tr><th class='fr-mps-name-header'>"+n.name+"<\/th><th class='fr-mps-property-header'>"+n.defaultHeader+"<\/th><th class='fr-mps-property-header'>"+n.allUsers+"<\/th><th class='fr-mps-property-header'>"+n.deleteHeader+"<\/th><\/tr><\/thead><tbody class='fr-mps-main-table-body-id'><\/tbody><\/table><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-mps-submit-id fr-core-dialog-submit fr-core-dialog-button' value='"+n.apply+"' /><\/div><\/div><\/div><\/form><\/div>");i.element.append(u);i.$tbody=i.element.find(".fr-mps-main-table-body-id");i._initTBody();i.$form=i.element.find(".fr-mps-form");i._resetValidateMessage();i.element.find(".fr-mps-cancel").on("click",function(){i.closeDialog()});i.element.find(".fr-mps-add-id").on("click",function(n){i._onAdd(n)});i.element.find(".fr-mps-submit-id").on("click",function(){i._submitParamSet()});i.element.on(t.modalDialogGenericSubmit,function(){i._submitParamSet()});i.element.on(t.modalDialogGenericCancel,function(){i.closeDialog()})},_submitParamSet:function(){var n=this;n.$form.valid()===!0&&(n.options.model.parameterModel("applyServerData",n.serverData,n.lastAddedSetId),n.closeDialog())},_findId:function(n){for(var i=$(n.target),t=i;!t.is("tr")&&!t.is("table");)t=t.parent();return t.is("tr")?t.attr("modelid"):null},_findRow:function(n){var t=this;return t.$tbody.find("[modelid='"+n+"']")},_onAdd:function(){var t=this,i=t.options.model.parameterModel("getNewSet",n.newSet,t.parameterList),r,u,f;t.serverData.parameterSets[i.id]=i;r=t.options.model.parameterModel("getSetCount",t.serverData);r===1&&(t.serverData.defaultSetId=i.id);t._createRows();u=t._findRow(i.id);f=u.find("input");f.focus();t.lastAddedSetId=i.id},_onChangeInput:function(n){var t=this,i=$(n.target),r;i.attr("title",i.val());r=t._findId(n);t.serverData.parameterSets[r].name=i.val();t._createRows()},_onClickDefault:function(n){var i=this,t;i.$tbody.find(".fr-mps-default-id div").removeClass("ui-icon-check ui-icon");t=$(n.target);t.hasClass("fr-mps-default-check-id")||(t=t.find(".fr-mps-default-check-id"));t.addClass("ui-icon-check ui-icon");i.serverData.defaultSetId=i._findId(n)},_onClickAllUsers:function(n){var r=this,t=$(n.target),u,i;t.hasClass("fr-mps-all-users-check-id")||(t=t.find(".fr-mps-all-users-check-id"));t.toggleClass("ui-icon-check ui-icon");u=r._findId(n);i=r.serverData.parameterSets[u];i.isAllUser=!i.isAllUser},_onClickDelete:function(n){var t=this,u=t.options.model.parameterModel("getSetCount",t.serverData),i=t._findId(n),f=t._findRow(i),r;f.remove();u===1?t.serverData.defaultSetId=null:i===t.serverData.defaultSetId&&(r=t.$tbody.find(".fr-mps-default-check-id").first(),t._onClickDefault({target:r}));i===t.lastAddedSetId&&(t.lastAddedSetId=t.serverData.defaultSetId);delete t.serverData.parameterSets[i]},openDialog:function(n){var t=this,i;n&&(t.parameterList=JSON.parse(n),forerunner.dialog.showModalDialog(t.options.$appContainer,t),i=t.options.model.parameterModel("getCurrentSet"),i&&!i.data&&(i.data=t.parameterList))},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.$appContainer,n)},_validateForm:function(n){n.validate({errorPlacement:function(n,t){n.appendTo($(t).parent().find("span"))},highlight:function(n){$(n).parent().find("span").addClass("fr-mps-error-position");$(n).addClass("fr-mps-error")},unhighlight:function(n){$(n).parent().find("span").removeClass("fr-mps-error-position");$(n).removeClass("fr-mps-error")}})},_resetValidateMessage:function(){var t=this,n=r.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,number:n.number,digits:n.digits})}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var i=forerunner.ssr,n=forerunner.ssr.constants.events,u=i.constants.toolTypes,t=forerunner.ssr.constants.widgets,r=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer");i.ReportViewerInitializer=function(n){var t=this;t.options={$toolbar:null,$toolPane:null,$viewer:null,$nav:null,$paramarea:null,$lefttoolbar:null,$righttoolbar:null,$docMap:null,ReportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportViewer",ReportManagerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager",toolbarHeight:null,navigateTo:null,isReportManager:!1,userSettings:null,$appContainer:null,rsInstance:null,useReportManagerSettings:!1,$unzoomtoolbar:null,isAdmin:!1};n&&$.extend(t.options,n);t.parameterModel=null;(t.options.isReportManager||t.options.useReportManagerSettings)&&(t.parameterModel=$({}).parameterModel({rsInstance:t.options.rsInstance}))};i.ReportViewerInitializer.prototype={getParameterModel:function(){var n=this;return n.parameterModel},render:function(){var t=this,i=t.options.$viewer,a=t.options.userSettings,f,u,s,v,y,p,h,c,l,r;(t.options.isReportManager||t.options.useReportManagerSettings)&&!a&&(a=t.getUserSettings(t.options));t.options.$docMap.hide();i.reportViewer({reportViewerAPI:t.options.ReportViewerAPI,jsonPath:t.options.jsonPath,docMapArea:t.options.$docMap,parameterModel:t.parameterModel,userSettings:a,$appContainer:t.options.$appContainer,rsInstance:t.options.rsInstance,isAdmin:t.options.isAdmin});f=t.options.$toolbar;f.toolbar({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer});u=forerunner.ssr.tools.mergedButtons;s=forerunner.ssr.tools.rightToolbar;t.options.isReportManager&&(v=[u.btnHome,u.btnRecent,u.btnFavorite],forerunner.ajax.isFormsAuth()&&v.push(u.btnLogOff),f.toolbar("addTools",12,!0,v),f.toolbar("addTools",4,!0,[u.btnFav]),f.toolbar("disableTools",[u.btnFav]));i.reportViewer("option","toolbarHeight",f.outerHeight());y=t.options.$unzoomtoolbar;y!==null&&y.unzoomToolbar({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer});p=t.options.$lefttoolbar;p!==null&&p.leftToolbar({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer});h=t.options.$righttoolbar;h!==null&&h.rightToolbar({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer});(t.options.isReportManager||t.options.useReportManagerSettings)&&h.rightToolbar("addTools",2,!0,[s.btnRTBManageSets,s.btnSelectSet,s.btnSavParam]);var e=forerunner.ssr.tools.mergedItems,w=forerunner.ssr.tools.groups,o=t.options.$toolPane.toolPane({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer});if(t.options.isReportManager){o.toolPane("addTools",2,!0,[e.itemFolders,w.itemFolderGroup]);forerunner.ajax.isFormsAuth()&&o.toolPane("addTools",13,!0,[e.itemLogOff]);o.toolPane("addTools",5,!0,[e.itemFav]);o.toolPane("disableTools",[e.itemFav]);i.on(n.reportViewerChangePage(),function(){o.toolPane("enableTools",[e.itemFav]);f.toolbar("enableTools",[u.btnFav])});i.on(n.reportViewerDrillThrough(),function(){t.setFavoriteState(i.reportViewer("getReportPath"))});i.on(n.reportViewerChangeReport(),function(){t.setFavoriteState(i.reportViewer("getReportPath"))});i.on(n.reportViewerPreLoadReport(),function(n,i){i.newPath&&t.setFavoriteState(i.newPath)})}c=t.options.$nav;c!==null&&(c.pageNav({$reportViewer:i,rsInstance:t.options.rsInstance}),i.reportViewer("option","pageNavArea",c));l=t.options.$paramarea;l!==null&&(l.reportParameter({$reportViewer:i}),i.reportViewer("option","paramArea",l));r=t.options.$appContainer.find(".fr-print-section");r.length===0&&(r=$("<div class='fr-print-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),t.options.$appContainer.append(r));r.reportPrint({$appContainer:t.options.$appContainer,$reportViewer:i});r=t.options.$appContainer.find(".fr-dsc-section");r.length===0&&(r=$("<div class='fr-dsc-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),t.options.$appContainer.append(r));r.dsCredential({$appContainer:t.options.$appContainer,$reportViewer:i});t.parameterModel&&(r=t.options.$appContainer.find(".fr-mps-section"),r.length===0&&(r=$("<div class='fr-mps-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),r.manageParamSets({$appContainer:t.options.$appContainer,$reportViewer:i,$reportViewerInitializer:t,model:t.parameterModel}),t.options.$appContainer.append(r)),t._manageParamSetsDialog=r)},showManageParamSetsDialog:function(n){var t=this,i=t.options.$viewer;t._manageParamSetsDialog.manageParamSets({$appContainer:t.options.$appContainer,$reportViewer:i,$reportViewerInitializer:t,model:t.parameterModel});t._manageParamSetsDialog.manageParamSets("openDialog",n)},setFavoriteState:function(n){var t=this,i;t.$btnFavorite=null;t.options.$toolbar!==null&&(t.$btnFavorite=t.options.$toolbar.find(".fr-button-update-fav").find("div"));t.$itemFavorite=null;t.options.$toolPane!==null&&(t.$itemFavorite=t.options.$toolPane.find(".fr-item-update-fav").find("div"));i=t.options.ReportManagerAPI+"/isFavorite?path="+n;t.options.rsInstance&&(i+="&instance="+t.options.rsInstance);forerunner.ajax.ajax({url:i,dataType:"json",async:!0,success:function(n){t.updateFavoriteState(n.IsFavorite)},fail:function(){t.$btnFavorite&&t.$btnFavorite.hide();t.$itemFavorite&&t.$itemFavorite.hide()}})},getUserSettings:function(n){var t=null,i=forerunner.config.forerunnerAPIBase()+"ReportManager/GetUserSettings";return n.rsInstance&&(i+="?instance="+n.rsInstance),forerunner.ajax.ajax({url:i,dataType:"json",async:!1,success:function(n){n&&n.responsiveUI!==undefined&&(t=n)}}),t},onClickBtnFavorite:function(n){var t=this,f=n.data.me,i="add",u;t.$btnFavorite.hasClass("fr-icons24x24-favorite-minus")&&(i="delete");u=t.options.ReportManagerAPI+"/UpdateView";forerunner.ajax.getJSON(u,{view:"favorites",action:i,path:f.options.$reportViewer.reportViewer("getReportPath"),instance:t.options.rsInstance},function(){t.updateFavoriteState.call(t,i==="add")},function(){forerunner.dialog.showMessageBox(t.options.$appContainer,r.messages.favoriteFailed)})},onClickItemFavorite:function(t){var i=this,u=t.data.me,f="add",e;i.$itemFavorite.hasClass("fr-icons24x24-favorite-minus")&&(f="delete");u._trigger(n.actionStarted,null,u.allTools["fr-item-update-fav"]);e=i.options.ReportManagerAPI+"/UpdateView";forerunner.ajax.getJSON(e,{view:"favorites",action:f,path:u.options.$reportViewer.reportViewer("getReportPath"),instance:i.options.rsInstance},function(){i.updateFavoriteState.call(i,f==="add")},function(){forerunner.dialog.showMessageBox(i.options.$appContainer,r.messages.favoriteFailed)})},updateFavoriteState:function(n){var t=this;n?(t.$btnFavorite&&(t.$btnFavorite.addClass("fr-icons24x24-favorite-minus"),t.$btnFavorite.removeClass("fr-icons24x24-favorite-plus")),t.$itemFavorite&&(t.$itemFavorite.addClass("fr-icons24x24-favorite-minus"),t.$itemFavorite.removeClass("fr-icons24x24-favorite-plus"))):(t.$btnFavorite&&(t.$btnFavorite.removeClass("fr-icons24x24-favorite-minus"),t.$btnFavorite.addClass("fr-icons24x24-favorite-plus")),t.$itemFavorite&&(t.$itemFavorite.removeClass("fr-icons24x24-favorite-minus"),t.$itemFavorite.addClass("fr-icons24x24-favorite-plus")))}};$.widget(t.getFullname(t.unzoomToolbar),$.forerunner.toolBase,{options:{$reportViewer:null,$ReportViewerInitializer:null,toolClass:"fr-toolbar-zoom",$appContainer:null},_init:function(){var n=this,t,i;n._super();t=forerunner.ssr.tools.unZoomToolbar;n.element.html("");i=new $("<div class='"+n.options.toolClass+" fr-core-widget' />");$(n.element).append(i);n.addTools(1,!0,[t.btnUnZoom])}});$.widget(t.getFullname(t.leftToolbar),$.forerunner.toolBase,{options:{$reportViewer:null,$ReportViewerInitializer:null,toolClass:"fr-toolbar-slide",$appContainer:null},_init:function(){var n=this,t,i;n._super();t=forerunner.ssr.tools.leftToolbar;n.element.html("");i=new $("<div class='"+n.options.toolClass+" fr-core-widget' />");$(n.element).append(i);n.addTools(1,!0,[t.btnLTBMenu])}});$.widget(t.getFullname(t.rightToolbar),$.forerunner.toolBase,{options:{$reportViewer:null,$ReportViewerInitializer:null,toolClass:"fr-toolbar-slide",$appContainer:null},_initCallbacks:function(){var t=this;if(t.parameterModel){t.parameterModel.on(n.parameterModelChanged(),function(n,i){t._onModelChange.call(t,n,i)});t.parameterModel.on(n.parameterModelSetChanged(),function(n,i){t._onModelChange.call(t,n,i)})}},_init:function(){var n=this,t,i;n._super();t=forerunner.ssr.tools.rightToolbar;n.parameterModel=n.options.$ReportViewerInitializer.getParameterModel();n.element.html("");i=new $("<div class='"+n.options.toolClass+" fr-core-widget' />");$(n.element).append(i);n.addTools(1,!0,[t.btnRTBParamarea]);n._initCallbacks()},_onModelChange:function(){var n=this,t=forerunner.ssr.tools.rightToolbar;n.parameterModel.parameterModel("canUserSaveCurrentSet")?n.enableTools([t.btnSavParam]):n.disableTools([t.btnSavParam])}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportViewerEZ),$.forerunner.toolBase,{options:{DefaultAppTemplate:null,jsonPath:null,navigateTo:null,historyBack:null,isReportManager:!1,isFullScreen:!0,userSettings:null,rsInstance:null,useReportManagerSettings:!1,isAdmin:!1},_render:function(){var t=this,n=t.DefaultAppTemplate,i,r;forerunner.device.allowZoom(!1);n.$bottomdivspacer.addClass("fr-nav-spacer").hide();n.$bottomdiv.addClass("fr-nav-container").hide();n.$bottomdiv.css("position",t.options.isFullScreen?"fixed":"absolute");n.$mainsection.html(null);i=new $("<DIV />");i.addClass("fr-layout-reportviewer");n.$mainsection.append(i);r=new forerunner.ssr.ReportViewerInitializer({$toolbar:n.$mainheadersection,$toolPane:n.$leftpanecontent,$viewer:i,$nav:n.$bottomdiv,$paramarea:n.$rightpanecontent,$lefttoolbar:n.$leftheader,$righttoolbar:n.$rightheader,$docMap:n.$docmapsection,ReportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportViewer",jsonPath:t.options.jsonPath,navigateTo:t.options.navigateTo,isReportManager:t.options.isReportManager,userSettings:t.options.userSettings,$appContainer:n.$container,rsInstance:t.options.rsInstance,useReportManagerSettings:t.options.useReportManagerSettings,$unzoomtoolbar:n.$unzoomsection,isAdmin:t.options.isAdmin});r.render();i.on("reportviewerback",function(i,r){n._selectedItemPath=r.path;t.options.historyBack&&t.options.historyBack()});i.on("reportvieweractionhistorypop",function(){t.options.historyBack||i.reportViewer("actionHistoryDepth")!==0||(n.$mainheadersection.toolbar("disableTools",[forerunner.ssr.tools.toolbar.btnReportBack]),n.$leftpanecontent.toolPane("disableTools",[forerunner.ssr.tools.toolpane.itemReportBack]))});i.on("reportvieweractionhistorypush",function(){t.options.historyBack||(n.$mainheadersection.toolbar("enableTools",[forerunner.ssr.tools.toolbar.btnReportBack]),n.$leftpanecontent.toolPane("enableTools",[forerunner.ssr.tools.toolpane.itemReportBack]))});t.options.historyBack&&(n.$mainheadersection.toolbar("enableTools",[forerunner.ssr.tools.toolbar.btnReportBack]),n.$leftpanecontent.toolPane("enableTools",[forerunner.ssr.tools.toolpane.itemReportBack]));t.DefaultAppTemplate.bindViewerEvents();n.$rightheaderspacer.height(n.$topdiv.height());n.$leftheaderspacer.height(n.$topdiv.height())},_init:function(){var n=this,t,i,u,r;n._super();n.DefaultAppTemplate=n.options.DefaultAppTemplate===null?new forerunner.ssr.DefaultAppTemplate({$container:n.element,isFullScreen:n.options.isFullScreen}).render():n.options.DefaultAppTemplate;n._render();n.options.isFullScreen&&forerunner.device.isWindowsPhone()&&(t=$("#fr-viewport-style"),t.length===0&&(i="fixed",sessionStorage.forerunner_zoomReload_userZoom&&(u=sessionStorage.forerunner_zoomReload_userZoom,delete sessionStorage.forerunner_zoomReload_userZoom,r=JSON.parse(u),r.userZoom&&(i=r.userZoom)),t=$("<style id=fr-viewport-style>@-ms-viewport {width:device-width; user-zoom:"+i+";}<\/style>"),$("head").slice(0).append(t),i==="zoom"&&n.DefaultAppTemplate.showUnZoomPane.call(n.DefaultAppTemplate)))},getPageNav:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$bottomdiv:null},getReportDocumentMap:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$docmapsection:null},getReportParameter:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$rightpanecontent:null},getReportViewer:function(){var t=this,n;return t.DefaultAppTemplate&&(n=t.DefaultAppTemplate.$mainsection.find(".fr-layout-reportviewer"),n.length!==0)?n:null},getToolbar:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$mainheadersection:null},getToolPane:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$leftpanecontent:null},getLeftToolbar:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$leftheader:null},getRightToolbar:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$rightheader:null}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var i=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events,r=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer"),n=r.dsCredential;$.widget(i.getFullname(i.dsCredential),{options:{$reportViewer:null,$appContainer:null},_credentialData:null,_create:function(){},_init:function(){},_initBody:function(){var i=this,r,u;i.element.html("");i.element.off(t.modalDialogGenericSubmit);i.element.off(t.modalDialogGenericCancel);r=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-dataSourceCred",n.title,"fr-dsc-cancel",n.cancel);u=$("<div class='fr-core-dialog-innerPage fr-core-center fr-dsc-innerPage'>"+r+"<form class='fr-core-dialog-form fr-dsc-form'><div class='fr-core-center'><div class='fr-dsc-main-container'><\/div><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-dsc-submit-id fr-dsc-button fr-core-dialog-button' value='"+n.submit+"' /><input name='reset' type='button' class='fr-dsc-reset-id fr-dsc-button fr-core-dialog-button' value='"+n.reset+"' /><\/div><\/div><\/div><\/form><\/div>");i.element.append(u);i.$container=i.element.find(".fr-dsc-main-container");i.$form=i.element.find(".fr-dsc-form");i._resetValidateMessage();i.element.find(".fr-dsc-cancel").on("click",function(){i.closeDialog();i._credentialData&&i._createRows()});i.element.find(".fr-dsc-reset-id").on("click",function(){i._resetCredential()});i.element.find(".fr-dsc-submit-id").on("click",function(){i._submitCredential()});i.element.on(t.modalDialogGenericSubmit,function(){i._submitCredential()});i.element.on(t.modalDialogGenericCancel,function(){i.closeDialog()});i.options.$reportViewer&&i._initCallback()},_createRows:function(t){var i=this;t=t||i._credentialData;i.$container.html("");$.each(t,function(t,r){var u=$("<div class='fr-dsc-item-container' name='"+r.DataSourceID+"'><div class='fr-dsc-prompt'><div>"+r.Name+" - "+r.Prompt+"<\/div><\/div><div class='fr-dsc-username'><label class='fr-dsc-label' >"+n.username+"<\/label><div class='fr-dsc-input-container'><input type='text' autocomplete='off' name='"+r.Name+"-username' required='true' class='fr-dsc-text-input fr-dsc-username-input' /><span class='fr-dsc-error-span' /><\/div><\/div><div class='fr-dsc-password'><label class='fr-dsc-label' >"+n.password+"<\/label><div class='fr-dsc-input-container'><input type='password' autocomplete='off' name='"+r.Name+"-password' required='true' class='fr-dsc-text-input fr-dsc-password-input' /><span class='fr-dsc-error-span' /><\/div><\/div><\/div>");i.$container.append(u)});i._validateForm(i.$form)},_initCallback:function(){var n=this;n.options.$reportViewer.on(t.reportViewerRenderError(),function(t,i){var r=i.Exception.Message.match(/["']([^"']*)["']/),u;r&&n._credentialData&&(u=r[0].replace(/["']/g,""),n.element.find("[name='"+u+"']").find(".fr-dsc-label").addClass("fr-dsc-label-error"),n.openDialog())})},_submitCredential:function(){var n=this,t=n.getCredentialList();t&&(n.options.$reportViewer.reportViewer("loadReportWithCustomDSCredential",t),n.closeDialog(),n.element.find(".fr-dsc-label-error").removeClass("fr-dsc-label-error"))},openDialog:function(){var n=this;forerunner.dialog.showModalDialog(n.options.$appContainer,n)},writeDialog:function(n){var t=this;t._initBody();t._credentialData=n||t._credentialData;t._credentialData&&t._createRows(t._credentialData)},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.$appContainer,n)},resetSavedCredential:function(n,t){var i=this,r;n&&(i._initBody(),i._createRows(n));t&&(r=JSON.parse(t),$.each(r.CredentialList,function(n,t){var r=i.element.find("[name='"+t.DataSourceID+"']");r.find(".fr-dsc-username-input").val(t.Username);r.find(".fr-dsc-password-input").val(t.Password)}))},_resetCredential:function(){var n=this;n.element.find(".fr-dsc-text-input").val("")},getCredentialList:function(){var t=this,n,i;return t.$form.valid()?(n=[],i=t.options.$appContainer.find(".fr-dsc-item-container"),$.each(i,function(t,i){var r=$(i).attr("name"),u=$(i).find(".fr-dsc-username-input").val(),f=$(i).find(".fr-dsc-password-input").val();n.push({DataSourceID:r,Username:u,Password:f})}),JSON.stringify({CredentialList:n})):null},_validateForm:function(n){n.validate({errorPlacement:function(n,t){n.appendTo($(t).parent().find(".fr-dsc-error-span"))},highlight:function(n){$(n).parent().find(".fr-dsc-error-span").addClass("fr-dsc-error-position");$(n).addClass("fr-dsc-error")},unhighlight:function(n){$(n).parent().find(".fr-dsc-error-span").removeClass("fr-dsc-error-position");$(n).removeClass("fr-dsc-error")}})},_resetValidateMessage:function(){var t=this,n=r.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,number:n.number,digits:n.digits})},destroy:function(){var n=this;n._credentialData=null;this._destroy()}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};forerunner.ssr.tools=forerunner.ssr.tools||{};forerunner.ssr.tools.reportExplorerToolbar=forerunner.ssr.tools.reportExplorerToolbar||{};$(function(){var i=forerunner.ssr.constants.widgets,r=forerunner.ssr.constants.events,n=forerunner.ssr.tools.reportExplorerToolbar,t=forerunner.ssr.tools.reportExplorerToolpane,u={catalog:n.btnHome.selectorClass,favorites:n.btnFav.selectorClass,recent:n.btnRecent.selectorClass},f={catalog:t.itemHome.selectorClass,favorites:t.itemFav.selectorClass,recent:t.itemRecent.selectorClass};$.widget(i.getFullname(i.reportExplorerEZ),{options:{navigateTo:null,historyBack:null,isFullScreen:!0,explorerSettings:null,rsInstance:null,isAdmin:!1},_createReportExplorer:function(n,t,i){var u=this,e=n,r=u.DefaultAppTemplate,f;n||(n="/");t||(t="catalog");f=r._selectedItemPath;r.$mainsection.html(null);i?r.$mainsection.show():r.$mainsection.hide();r.$docmapsection.hide();u.$reportExplorer=r.$mainsection.reportExplorer({reportManagerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager",forerunnerPath:forerunner.config.forerunnerFolder(),path:n,view:t,selectedItemPath:f,navigateTo:u.options.navigateTo,$appContainer:r.$container,explorerSettings:u.options.explorerSettings,rsInstance:u.options.rsInstance,isAdmin:u.options.isAdmin,onInputFocus:r.onInputFocus,onInputBlur:r.onInputBlur})},_initNavigateTo:function(){var n=this;n.options.navigateTo=function(){n._navigateTo.apply(n,arguments)};n.router=$({}).router({routes:{"":"transitionToReportManager","explore/:path":"transitionToReportManager","browse/:path":"transitionToReportViewer","view/:args":"transitionToReportViewerWithRSURLAccess","open/:path":"transitionToOpenResource","search/:keyword":"transitionToSearch",favorites:"transitionToFavorites",recent:"transitionToRecent","createDashboard/:name":"transitionToCreateDashboard"}});n.router.on(r.routerRoute(),function(){n._onRoute.apply(n,arguments)});n.options.historyBack||(n.options.historyBack=function(){window.history.back()});forerunner.history.history("start")},_onRoute:function(n,t){var r=this,u=args=keyword=name=t.args[0],f,i;if(t.name==="transitionToReportManager")r.transitionToReportManager(u,null);else if(t.name==="transitionToReportViewer")f=u.split("?"),u=f[0],i=f.length>1?forerunner.ssr._internal.getParametersFromUrl(f[1]):null,i&&(i=JSON.stringify({ParamsList:i})),r.transitionToReportViewer(u,i);else if(t.name==="transitionToReportViewerWithRSURLAccess"){var e=args.indexOf("&"),u=e>0?args.substring(1,e):args,i=e>0?args.substring(e+1):null;i&&(i=i.length>0?forerunner.ssr._internal.getParametersFromUrl(i):null);i&&(i=JSON.stringify({ParamsList:i}));r.transitionToReportViewer(u,i)}else t.name==="transitionToOpenResource"?r.transitionToReportManager(u,"resource"):t.name==="transitionToSearch"?r.transitionToReportManager(keyword,"search"):t.name==="transitionToFavorites"?r.transitionToReportManager(null,"favorites"):t.name==="transitionToRecent"?r.transitionToReportManager(null,"recent"):t.name==="transitionToCreateDashboard"&&r.transitionToCreateDashboard(name)},_lastAction:null,_navigateTo:function(n,t){var i=this,r,u;t!==null&&(t=encodeURIComponent(t));n==="home"?i.router.router("navigate","#",{trigger:!0,replace:!1}):n==="back"?i.options.historyBack():n==="favorites"?i.router.router("navigate","#favorites",{trigger:!0,replace:!1}):n==="recent"?i.router.router("navigate","#recent",{trigger:!0,replace:!1}):(r="#"+n+"/"+t,u=!forerunner.device.isFirefox()||i._lastAction===n||!i._lastAction,i.router.router("navigate",r,{trigger:u,replace:!1}));i._lastAction=n},transitionToReportManager:function(n,t){var r=this,o=n,i=r.DefaultAppTemplate,e;i.$mainsection.html()!==""&&i.$mainsection.html()!==null&&(i.$mainsection.html(""),i.$mainsection.hide());i.cleanUp();forerunner.device.allowZoom(!1);forerunner.dialog.closeAllModalDialogs(i.$container);e=forerunner.device.isWindowsPhone()?500:forerunner.device.isTouch()?50:0;setTimeout(function(){var e,h,s,c;r._createReportExplorer(n,t,!0);e=i.$mainheadersection;e.reportExplorerToolbar({navigateTo:r.options.navigateTo,$appContainer:i.$container,$reportExplorer:r.$reportExplorer});e.reportExplorerToolbar("setFolderBtnActive",u[t]);t==="search"&&e.reportExplorerToolbar("setSearchKeyword",n);h=i.$leftheader;h!==null&&h.leftToolbar({$appContainer:i.$container});s=i.$leftpanecontent;s.reportExplorerToolpane({navigateTo:r.options.navigateTo,$appContainer:i.$container,$reportExplorer:r.$reportExplorer});s.reportExplorerToolpane("setFolderItemActive",f[t]);t==="search"&&s.reportExplorerToolpane("setSearchKeyword",n);i.$rightheader.height(i.$topdiv.height());i.$leftheader.height(i.$topdiv.height());i.$rightheaderspacer.height(i.$topdiv.height());i.$leftheaderspacer.height(i.$topdiv.height());i._selectedItemPath=o;c=$(".fr-report-explorer",r.$reportExplorer);r.element.css("background-color",c.css("background-color"))},e)},transitionToReportViewer:function(n,t){var i=this,r;i.DefaultAppTemplate.$mainsection.html("");i.DefaultAppTemplate.$mainsection.hide();forerunner.dialog.closeAllModalDialogs(i.DefaultAppTemplate.$container);i.DefaultAppTemplate._selectedItemPath=null;r=forerunner.device.isWindowsPhone()?500:forerunner.device.isTouch()?50:0;setTimeout(function(){i.DefaultAppTemplate.$mainviewport.reportViewerEZ({DefaultAppTemplate:i.DefaultAppTemplate,path:n,navigateTo:i.options.navigateTo,historyBack:i.options.historyBack,isReportManager:!0,rsInstance:i.options.rsInstance,savedParameters:t,isAdmin:i.options.isAdmin});var r=i.DefaultAppTemplate.$mainviewport.reportViewerEZ("getReportViewer");r&&n!==null&&(n=String(n).replace(/%2f/g,"/"),r.reportViewer("loadReport",n,1,t),i.DefaultAppTemplate.$mainsection.fadeIn("fast"))},r);i.element.css("background-color","")},transitionToCreateDashboard:function(n){var t=this,i;t.DefaultAppTemplate.$mainsection.html("");t.DefaultAppTemplate.$mainsection.hide();forerunner.dialog.closeAllModalDialogs(t.DefaultAppTemplate.$container);t.DefaultAppTemplate._selectedItemPath=null;i=forerunner.device.isWindowsPhone()?500:forerunner.device.isTouch()?50:0;setTimeout(function(){var i=t.DefaultAppTemplate.$mainviewport.dashboardEditor({navigateTo:t.options.navigateTo,historyBack:t.options.historyBack});i.dashboardEditor("loadTemplate",n)},i);t.element.css("background-color","")},_init:function(){var n=this;n.DefaultAppTemplate=new forerunner.ssr.DefaultAppTemplate({$container:n.element,isFullScreen:n.isFullScreen}).render();n.options.navigateTo||n._initNavigateTo()},getReportExplorerToolbar:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$mainheadersection:null},getReportExplorerToolpane:function(){var n=this;return n.DefaultAppTemplate?n.DefaultAppTemplate.$leftpanecontent:null}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var t=forerunner.ssr.constants.widgets,i=forerunner.ssr.constants.events,u=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"ReportViewer/loc/ReportViewer"),f=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"Dashboard/dashboards/dashboards"),r=f.templates,n=u.createDashboard;$.widget(t.getFullname(t.createDashboard),{options:{$reportExplorer:null,$appContainer:null,model:null},_createOptions:function(){var n=this,t;n.$select=n.element.find(".fr-cdb-select-id");for(item in r)t=$("<option value="+item+">"+r[item]+"<\/option>"),n.$select.append(t)},_init:function(){},_create:function(){var t=this,r,u;t.element.html("");r=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-createdashboard",n.title,"fr-cdb-cancel",n.cancel);u=$("<div class='fr-core-dialog-innerPage fr-core-center'>"+r+"<form class='fr-cdb-form fr-core-dialog-form'><div class='fr-core-center'><select class='fr-cdb-select-id'><\/select><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-cdb-submit-id fr-core-dialog-submit fr-core-dialog-button' value='"+n.submit+"' /><\/div><\/div><\/div><\/form><\/div>");t.element.append(u);t._createOptions();t.$form=t.element.find(".fr-cdb-form");t.element.find(".fr-cdb-cancel").on("click",function(){t.closeDialog()});t.element.find(".fr-cdb-submit-id").on("click",function(){t._submit()});t.element.on(i.modalDialogGenericSubmit,function(){t._submit()});t.element.on(i.modalDialogGenericCancel,function(){t.closeDialog()})},_submit:function(){var n=this,t=n.options.$reportExplorer.reportExplorer("option","navigateTo"),i=n.$select.val();t("createDashboard",i);n.closeDialog()},openDialog:function(){var n=this;forerunner.dialog.showModalDialog(n.options.$appContainer,n)},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.$appContainer,n)}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.dashboardBase),{options:{},_init:function(){var n=this;n.clearState();n.element.html("")},clearState:function(){var n=this;n.dashboardDef={templateName:null,template:null,reports:{}}},_destory:function(){}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.dashboardEditor),$.forerunner.dashboardBase,{options:{reportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager"},loadTemplate:function(n){var t=this,i=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"Dashboard/dashboards/"+n,"text");t.dashboardDef.template=i;t._renderTemplate()},_renderTemplate:function(){var n=this;n.element.html(n.dashboardDef.template)},_create:function(){},_init:function(){var n=this;n._super()},_destroy:function(){}})});forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{};$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.dashboardViewer),$.forerunner.dashboardBase,{options:{reportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager"},_create:function(){var n=this},_init:function(){var n=this;n._super()},_destroy:function(){}})});
/*
//# sourceMappingURL=Forerunner-widgets.min.js.map
*/