var forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{},$(function(){function r(n,t){this.reportObj=t,this.$container=n,this.isRendered=!1}var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events,t=forerunner.ssr.constants.navigateType;$.widget(i.getFullname(i.reportViewer),{options:{reportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportViewer",reportPath:null,pageNum:1,pingInterval:3e5,toolbarHeight:0,pageNavArea:null,paramArea:null,DocMapArea:null,userSettings:null,onInputBlur:null,onInputFocus:null,$appContainer:null},_destroy:function(){},_create:function(){var t=this,i;if(setInterval(function(){t._sessionPing()},this.options.pingInterval),t.locData=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer"),t.actionHistory=[],t.curPage=0,t.pages={},t.sessionID="",t.numPages=0,t.lock=0,t.$reportContainer=new $("<DIV class='fr-report-container'/>"),t.$reportAreaContainer=null,t.$loadingIndicator=new $("<div class='fr-report-loading-indicator' ><\/div>").text(t.locData.messages.loading),t.floatingHeaders=[],t.paramLoaded=!1,t.scrollTop=0,t.scrollLeft=0,t.loadLock=0,t.finding=!1,t.findStartPage=null,t.findEndPage=null,t.findKeyword=null,t.hasDocMap=!1,t.docMapData=null,t.togglePageNum=0,t.element.append(t.$loadingIndicator),t.pageNavOpen=!1,t.savedTop=0,t.savedLeft=0,t.origionalReportPath="",t._setPageCallback=null,t.renderError=!1,t.autoRefreshID=null,t.reportStates={toggleStates:new forerunner.ssr.map,sortStates:[]},t.renderTime=(new Date).getTime(),i=forerunner.device.isTouch(),i)$(window).on("scrollstop",function(){t._updateTableHeaders(t)});else $(window).on("scroll",function(){t._updateTableHeaders(t)});if(forerunner.device.isMSIE8()||window.addEventListener("orientationchange",function(){t._ReRender.call(t)},!1),t.element.append(t.$reportContainer),t._addLoadingIndicator(),t.hideDocMap(),t.options.parameterModel)t.options.parameterModel.on(n.parameterModelSetChanged(),function(n,i){t._onModelSetChanged.call(t,n,i)})},getUserSettings:function(){return this.options.userSettings},getCurPage:function(){var n=this;return n.curPage},getNumPages:function(){var n=this;return n.numPages},getReportViewerAPI:function(){var n=this;return n.options.reportViewerAPI},getReportPath:function(){var n=this;return n.options.reportPath},getSessionID:function(){var n=this;return n.sessionID},getHasDocMap:function(){var n=this;return n.hasDocMap},triggerEvent:function(n){var t=this;return t._trigger(n)},_setColHeaderOffset:function(n,t){if(t){var i=n.offset(),r=$(window).scrollLeft();r>i.left&&r<i.left+n.width()?(t.css("left",Math.min(r-i.left,n.width()-t.width())+"px"),t.fadeIn("fast")):t.hide()}},_setRowHeaderOffset:function(n,t){var u=this,i,r;t&&(i=n.offset(),r=$(window).scrollTop(),r>i.top&&r<i.top+n.height()?(t.css("top",Math.min(r-i.top,n.height()-t.height())+u.options.toolbarHeight+"px"),t.fadeIn("fast")):t.hide())},_addLoadingIndicator:function(){var n=this;n.loadLock===0&&(n.loadLock=1,setTimeout(function(){n.showLoadingIndictator(n)},500))},showLoadingIndictator:function(n){var i,t;n.loadLock===1&&(i=n.options.$appContainer.find(".fr-layout-mainviewport"),i.addClass("fr-layout-mainviewport-fullheight"),t=n.$reportContainer.width()-212,n.$loadingIndicator.css("top",n.$reportContainer.scrollTop()+100+"px").css("left",t>0?t/2:"0px"),n.$reportContainer.addClass("fr-report-container-translucent"),n.$loadingIndicator.show())},removeLoadingIndicator:function(){var n=this,t;n.loadLock===1&&(n.loadLock=0,t=n.options.$appContainer.find(".fr-layout-mainviewport"),t.removeClass("fr-layout-mainviewport-fullheight"),n.$reportContainer.removeClass("fr-report-container-translucent"),n.$loadingIndicator.hide())},_ReRender:function(){var n=this,t;if(n.options.userSettings&&n.options.userSettings.responsiveUI===!0){for(t=1;t<=forerunner.helper.objectSize(n.pages);t++)n.pages[t].isRendered=!1,n.pages[t].$container.html("");n._setPage(n.curPage)}},_setPage:function(t){var i=this,r;i.pages[t].isRendered||i._renderPage(t),$(".fr-report-areacontainer",i.$reportContainer).length===0?(r=i.$reportContainer.find(".Page"),r&&r.detach(),i.$reportAreaContainer=$("<Div/>"),i.$reportAreaContainer.addClass("fr-report-areacontainer"),i.$reportContainer.append(i.$reportAreaContainer),i.$reportAreaContainer.append(i.pages[t].$container),i._touchNav(),i._removeDocMap()):(i.$reportAreaContainer.find(".Page").detach(),i.$reportAreaContainer.append(i.pages[t].$container)),i.curPage=t,i._trigger(n.changePage,null,{newPageNum:t,paramLoaded:i.paramLoaded,numOfVisibleParameters:i.$numOfVisibleParameters,renderError:i.renderError}),$(window).scrollLeft(i.scrollLeft),$(window).scrollTop(i.scrollTop),i.removeLoadingIndicator(),i.lock=0,typeof i._setPageCallback=="function"&&(i._setPageCallback(),i._setPageCallback=null),i._trigger(n.setPageDone,null,{newPageNum:t,paramLoaded:i.paramLoaded,numOfVisibleParameters:i.$numOfVisibleParameters,renderError:i.renderError})},_addSetPageCallback:function(n){if(typeof n=="function"){var t=this,i=t._setPageCallback;t._setPageCallback=i===null?n:function(){i(),n()}}},allowZoom:function(t){var i=this;t===!0?(forerunner.device.allowZoom(!0),i.allowSwipe(!1)):(forerunner.device.allowZoom(!1),i.allowSwipe(!0)),i._trigger(n.allowZoom,null,{isEnabled:t})},onInputBlur:function(){var n=this;n.options.onInputBlur&&n.options.onInputBlur()},onInputFocus:function(){var n=this;n.options.onInputFocus&&n.options.onInputFocus()},_allowSwipe:!0,allowSwipe:function(n){var t=this;t._allowSwipe=n},_navToPage:function(n){var t=this;t._allowSwipe===!0&&t.navToPage(n)},_touchNav:function(){if(forerunner.device.isTouch()){var n=this;$(n.element).hammer({stop_browser_behavior:{userSelect:!1},swipe_max_touches:2,drag_max_touches:2}).on("swipe drag touch release",function(t){if(t.gesture)switch(t.type){case"touch":n._hideTableHeaders();break;case"release":var i=!1;if(t.gesture.touches.length>1&&(i=!0),(t.gesture.direction==="left"||t.gesture.direction==="up")&&i){t.gesture.preventDefault(),n._navToPage(n.curPage+1);break}if((t.gesture.direction==="right"||t.gesture.direction==="down")&&i){t.gesture.preventDefault(),n._navToPage(n.curPage-1);break}t.gesture.velocityX===0&&t.gesture.velocityY===0&&n._updateTableHeaders(n)}})}},refreshReport:function(n){var t=this,i=null;t.lock!==1&&(n===undefined&&(n=1),t.sessionID="",t.renderTime=(new Date).getTime(),t.lock=1,t._revertUnsubmittedParameters(),t.paramLoaded===!0&&(i=t.options.paramArea.reportParameter("getParamsList")),t._resetViewer(!0),t._loadPage(n,!1,null,i,!0))},navToPage:function(n){var t=this;n!==t.curPage&&t.lock!==1&&(t._resetContextIfInvalid(),t.scrollLeft=0,t.scrollTop=0,n>t.numPages&&(n=1),n<1&&(n=t.numPages),n!==t.curPage&&t.lock===0&&(t.lock=1,t._loadPage(n,!1)))},_hideDocMap:function(){var t=this,i=t.options.docMapArea;i.hide(),t.element.unmask(),t._trigger(n.hideDocMap)},_showDocMap:function(){var t=this,i;t._resetContextIfInvalid(),i=t.options.docMapArea,i.reportDocumentMap({$reportViewer:t}),t.docMapData||forerunner.ajax.ajax({url:t.options.reportViewerAPI+"/DocMapJSON/",data:{SessionID:t.sessionID},dataType:"json",async:!1,success:function(n){t.docMapData=n,i.reportDocumentMap("write",n)},fail:function(){forerunner.dialog.showMessageBox(t.options.$appContainer,t.locData.messages.docmapShowFailed)}}),t.element.mask(),i.slideUpShow(),t._trigger(n.showDocMap)},_removeDocMap:function(){var n=this;$(".fr-docmap-panel").length!==0&&(n.hideDocMap(),n.docMapData=null,$(".fr-docmap-panel").remove())},hideDocMap:function(){var n=this,t=n.options.docMapArea;n.hasDocMap&&t&&t.is(":visible")&&n._hideDocMap()},showDocMap:function(){var n=this,t=n.options.docMapArea;if(n.hasDocMap&&t){if(t.is(":visible")){n._hideDocMap();return}n._showDocMap()}},_cachePages:function(n){var i=this,r,u,t;for(n=parseInt(n,10),r=n-1,u=n+1,r<1&&(r=1),u>i.numPages&&(u=i.numPages),t=r;t<=u;t++)i.pages[t]||t!==n&&i._loadPage(t,!0)},actionHistoryDepth:function(){return this.actionHistory.length},back:function(){var t=this,i=t.actionHistory.pop();i?(t.options.reportPath=i.ReportPath,t.sessionID=i.SessionID,t._trigger(n.drillBack),t._removeParameters(),t.hideDocMap(),t.scrollLeft=i.ScrollLeft,t.scrollTop=i.ScrollTop,t.reportStates=i.reportStates,t.renderTime=i.renderTime,i.FlushCache&&t.flushCache(),t._loadParameters(i.CurrentPage,i.savedParams),t._trigger(n.actionHistoryPop,null,{path:t.options.reportPath})):t._trigger(n.back,null,{path:t.options.reportPath})},showNav:function(){var t=this;t._resetContextIfInvalid(),t.pageNavOpen?(t.pageNavOpen=!1,window.removeEventListener?window.removeEventListener("orientationchange",t._handleOrientation,!1):window.detachEvent("orientationchange",t._handleOrientation),t.options.$appContainer.css("overflow",""),t.element.unmask()):(t.pageNavOpen=!0,window.addEventListener?window.addEventListener("orientationchange",t._handleOrientation,!1):window.attachEvent("orientationchange",t._handleOrientation),t.options.$appContainer.css("overflow","hidden"),t.element.mask()),t.options.pageNavArea&&t.options.pageNavArea.pageNav("showNav"),t._trigger(n.showNav,null,{path:t.options.reportPath,open:t.pageNavOpen})},_handleOrientation:function(){var n=$(".fr-layout-pagesection");forerunner.device.isSmall()?n.is(":visible")&&n.hide():n.is(":hidden")&&n.show()},flushCache:function(){var n=this;n.pages={},n.options.pageNavArea&&n.options.pageNavArea.pageNav("reset")},_prepareAction:function(){var n=this;(n.togglePageNum!==n.curPage||n.togglePageNum===0)&&forerunner.ajax.ajax({type:"POST",url:n.options.reportViewerAPI+"/ReportJSON/",data:{ReportPath:n.options.reportPath,SessionID:n.sessionID,PageNumber:n.curPage,ParameterList:""},dataType:"json",async:!1,success:function(){n.togglePageNum=n.curPage},fail:function(){forerunner.dialog.showMessageBox(n.options.$appContainer,n.locData.messages.prepareActionFailed)}})},_updateSortState:function(n,t,i){var r=this;i!==!1&&(r.reportStates.sortStates=[]),r.reportStates.sortStates.push({id:n,direction:t})},_getSortResult:function(n,t,i){var r=this;return forerunner.ajax.ajax({dataType:"json",url:r.options.reportViewerAPI+"/SortReport/",data:{SessionID:r.sessionID,SortItem:n,Direction:t,ClearExistingSort:i},async:!1})},_replaySortStates:function(){for(var i=this,t=i.reportStates.sortStates,n=0;n<t.length;n++)i._getSortResult(t[n].id,t[n].direction,n===0)},sort:function(n,t,i){var r=this,f,u=forerunner.ssr.constants.sortDirection;r.lock!==1&&(r.lock=1,r._resetContextIfInvalid(),f=n===u.asc?u.desc:u.asc,r._callSort(t,f,i))},_callSort:function(n,t,i){var r=this;r._updateSortState(n,t),forerunner.ajax.getJSON(r.options.reportViewerAPI+"/SortReport/",{SessionID:r.sessionID,SortItem:n,Direction:t,ClearExistingSort:i},function(n){r.scrollLeft=$(window).scrollLeft(),r.scrollTop=$(window).scrollTop(),r.numPages=n.NumPages,r.renderTime=(new Date).getTime(),r._loadPage(n.NewPage,!1,null,null,!0)},function(){console.log("error"),r.removeLoadingIndicator()})},_isReportContextValid:!0,invalidateReportContext:function(){this._isReportContextValid=!1},_callGetReportJSON:function(){var n=this,t=null,i;n.paramLoaded&&(i=n.options.paramArea,t=i.reportParameter("getParamsList",!0)),forerunner.ajax.ajax({type:"POST",dataType:"json",url:n.options.reportViewerAPI+"/ReportJSON/",data:{ReportPath:n.options.reportPath,SessionID:n.sessionID,PageNumber:n.getCurPage(),ParameterList:t},success:function(){n._isReportContextValid=!0},async:!1})},_updateToggleState:function(n){var t=this;t.reportStates.toggleStates.has(n)?t.reportStates.toggleStates.remove(n):t.reportStates.toggleStates.add(n)},_getToggleResult:function(n){var i=this;return forerunner.ajax.ajax({dataType:"json",url:i.options.reportViewerAPI+"/NavigateTo/",data:{NavType:t.toggle,SessionID:i.sessionID,UniqueID:n},async:!1})},_replayToggleStates:function(){for(var t=this,i=t.reportStates.toggleStates.keys(),n=0;n<i.length;n++)t._getToggleResult(i[n])},toggleItem:function(n){var t=this;t.lock!==1&&(t.lock=1,t._addLoadingIndicator(),t._resetContextIfInvalid(),t._prepareAction(),t._callToggle(n))},_callToggle:function(n){var i=this;i._updateToggleState(n),forerunner.ajax.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.toggle,SessionID:i.sessionID,UniqueID:n},function(n){n.Result===!0?(i.scrollLeft=$(window).scrollLeft(),i.scrollTop=$(window).scrollTop(),i.pages[i.curPage]=null,i._loadPage(i.curPage,!1)):i.lock=0},function(){i.lock=0,console.log("error"),i.removeLoadingIndicator()})},_resetContextIfInvalid:function(){var n=this;n._revertUnsubmittedParameters(),n._isReportContextValid||(n._callGetReportJSON(),n._replaySortStates(),n._replayToggleStates())},_revertUnsubmittedParameters:function(){var n=this,t;if(n.paramLoaded)return t=n.options.paramArea,t.reportParameter("revertParameters")},navigateBookmark:function(n){var i=this;i.lock!==1&&(i.lock=1,i._resetContextIfInvalid(),i._prepareAction(),forerunner.ajax.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.bookmark,SessionID:i.sessionID,UniqueID:n},function(t){t.NewPage===i.curPage?(i._navToLink(n),i.lock=0):t.NewPage!==undefined&&t.NewPage>0?(i.backupCurPage(),i._loadPage(t.NewPage,!1,n)):(forerunner.dialog.showMessageBox(i.options.$appContainer,i.locData.messages.bookmarkNotFound),i.lock=0)},function(){i.lock=0,console.log("error"),i.removeLoadingIndicator()}))},isDrillThoughReport:function(){var n=this;return n.origionalReportPath===n.options.reportPath?!0:!1},navigateDrillthrough:function(i){var r=this;r.lock!==1&&(r.lock=1,r._addLoadingIndicator(),r._resetContextIfInvalid(),r._prepareAction(),forerunner.ajax.getJSON(r.options.reportViewerAPI+"/NavigateTo/",{NavType:t.drillThrough,SessionID:r.sessionID,UniqueID:i},function(t){r.backupCurPage(!0),t.Exception?(r._renderPageError(r.$reportAreaContainer.find(".Page"),t),r.removeLoadingIndicator(),r.lock=0):(r.sessionID=t.SessionID,r.origionalReportPath===""&&(r.origionalReportPath=r.options.reportPath),r.options.reportPath=t.ReportPath,r._trigger(n.drillThrough,null,{path:t.ReportPath}),t.ParametersRequired?(r.$reportAreaContainer.find(".Page").detach(),r._setScrollLocation(0,0),r._showParameters(1,t.Parameters)):(r._setScrollLocation(0,0),r._loadPage(1,!1,null,null,!0)))},function(){r.lock=0,console.log("error"),r.removeLoadingIndicator()}))},navigateDocumentMap:function(n){var i=this;i.lock!==1&&(i.lock=1,i._resetContextIfInvalid(),forerunner.ajax.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.docMap,SessionID:i.sessionID,UniqueID:n},function(t){i.backupCurPage(!1,!0),i.hideDocMap(),i._loadPage(t.NewPage,!1,n)},function(){i.lock=0,console.log("error"),i.removeLoadingIndicator()}))},backupCurPage:function(t,i){var r=this,u=$(window).scrollTop(),f=$(window).scrollLeft(),e,o;t!==!0&&(t=!1),i===!0&&(u=r.savedTop,f=r.savedLeft),r.paramLoaded&&(o=r.options.paramArea,e=o.reportParameter("getParamsList",!0)),r.actionHistory.push({ReportPath:r.options.reportPath,SessionID:r.sessionID,CurrentPage:r.curPage,ScrollTop:u,ScrollLeft:f,FlushCache:t,paramLoaded:r.paramLoaded,savedParams:e,reportStates:r.reportStates,renderTime:r.renderTime}),r._trigger(n.actionHistoryPush,null,{path:r.options.reportPath})},_setScrollLocation:function(n,t){var i=this;i.scrollLeft=t,i.scrollTop=n},find:function(n,t,i,r){var u=this;if(n!=="")if(u._resetContextIfInvalid(),u.findKeyword&&u.findKeyword===n||(u.resetFind(),u.findKeyword=n),u.finding&&!r)u._findNext(n);else{if(t===undefined&&(t=u.getCurPage()),i===undefined&&(i=u.getNumPages()),t>i){u.resetFind(),forerunner.dialog.showMessageBox(u.options.$appContainer,u.locData.messages.completeFind);return}u.findStartPage===null&&(u.findStartPage=t),forerunner.ajax.getJSON(u.options.reportViewerAPI+"/FindString/",{SessionID:u.sessionID,StartPage:t,EndPage:i,FindValue:n},function(t){t.NewPage!==0?(u.finding=!0,t.NewPage!==u.getCurPage()?(u._addSetPageCallback(function(){u.setFindHighlight(n)}),u.pages[t.NewPage]=null,u._loadPage(t.NewPage,!1)):u.setFindHighlight(n)):u.findStartPage!==1?(u.find(n,1,u.findStartPage-1),u.findStartPage=1):(u.finding===!0?forerunner.dialog.showMessageBox(u.options.$appContainer,u.locData.messages.completeFind):forerunner.dialog.showMessageBox(u.options.$appContainer,u.locData.messages.keyNotFound),u.resetFind())},function(){console.log("error"),u.removeLoadingIndicator()})}},_findNext:function(t){var i=this,r,u;if($(".fr-render-find-keyword").filter(".fr-render-find-highlight").first().removeClass("fr-render-find-highlight"),r=$(".fr-render-find-keyword").filter(":visible").filter(".Unread").first(),r.length>0)r.removeClass("Unread").addClass("fr-render-find-highlight").addClass("Read"),i._trigger(n.navToPosition,null,{top:r.offset().top-150,left:r.offset().left-250});else{if(i.getNumPages()===1){forerunner.dialog.showMessageBox(i.options.$appContainer,i.locData.messages.completeFind),i.resetFind();return}u=i.findEndPage?i.findEndPage:i.getNumPages(),i.getCurPage()+1<=u?i.find(t,i.getCurPage()+1,undefined,!0):i.findStartPage>1?(i.findEndPage=i.findStartPage-1,i.getCurPage()===i.findEndPage?(forerunner.dialog.showMessageBox(i.options.$appContainer,i.locData.messages.completeFind),i.resetFind()):i.find(t,1,i.findStartPage-1,!0)):(forerunner.dialog.showMessageBox(i.options.$appContainer,i.locData.messages.completeFind),i.resetFind())}},setFindHighlight:function(t){var i=this,r;i._clearHighLightWord(),i._highLightWord(i.$reportContainer,t),r=i.$reportContainer.find(".fr-render-find-keyword").filter(":visible").filter(".Unread").first(),r.length>0&&(r.removeClass("Unread").addClass("fr-render-find-highlight").addClass("Read"),i._trigger(n.navToPosition,null,{top:r.offset().top-150,left:r.offset().left-250}))},resetFind:function(){var n=this;n.finding=!1,n.findKeyword=null,n.findStartPage=null,n.findEndPage=null},exportReport:function(n){var t=this,i;t._resetContextIfInvalid(),i=t.options.reportViewerAPI+"/ExportReport/?ReportPath="+t.getReportPath()+"&SessionID="+t.getSessionID()+"&ParameterList=&ExportType="+n,window.open(i)},showPrint:function(){var n=this;n._printDialog.reportPrint("openDialog")},printReport:function(n){var t=this,i;t._resetContextIfInvalid(),i=t.options.reportViewerAPI+"/PrintReport/?ReportPath="+t.getReportPath()+"&SessionID="+t.getSessionID()+"&ParameterList=&PrintPropertyString="+n,window.open(i)},_printDialog:null,_setPrint:function(n){var t=this,i=t.options.$appContainer.find(".fr-print-section");i.reportPrint("setPrint",n),t._printDialog=i},_onModelSetChanged:function(n,t){var i=this,r=i.getCurPage();t&&i.refreshParameters(t,!0,r)},_loadParameters:function(n,t){var i=this,r=t?t:i.options.parameterModel?i.options.parameterModel.parameterModel("getCurrentParameterList",i.options.reportPath):null;r?i.options.paramArea&&(i.options.paramArea.reportParameter({$reportViewer:this,$appContainer:i.options.$appContainer}),i.refreshParameters(r,!0,n)):i._loadDefaultParameters(n)},_paramsToString:function(n){return JSON.stringify(n)},_loadDefaultParameters:function(n){var t=this;forerunner.ajax.ajax({type:"POST",url:t.options.reportViewerAPI+"/ParameterJSON/",data:{ReportPath:t.options.reportPath,SessionID:t.getSessionID(),ParameterList:null},dataType:"json",async:!0,success:function(i){i.SessionID&&(t.sessionID=i.SessionID),t._addLoadingIndicator(),t._showParameters(n,i)},error:function(){console.log("error"),t.removeLoadingIndicator()}})},_showParameters:function(t,i){var r=this,u;i.Type==="Parameters"?(r._removeParameters(),u=r.options.paramArea,u&&(u.reportParameter({$reportViewer:this,$appContainer:r.options.$appContainer}),u.reportParameter("writeParameterPanel",i,t),r.$numOfVisibleParameters=u.reportParameter("getNumOfVisibleParameters"),r.$numOfVisibleParameters>0&&r._trigger(n.showParamArea,null,{reportPath:r.options.reportPath}),r.paramLoaded=!0)):i.Exception?(r._renderPageError(r.$reportContainer,i),r.removeLoadingIndicator()):r._loadPage(t,!1)},refreshParameters:function(t,i,r,u){var f=this;r===-1&&(r=f.getCurPage()),t&&forerunner.ajax.ajax({type:"POST",url:f.options.reportViewerAPI+"/ParameterJSON",data:{ReportPath:f.options.reportPath,SessionID:f.getSessionID(),ParameterList:t},dataType:"json",async:!1,success:function(t){t.SessionID&&(f.sessionID=t.SessionID),t.ParametersList&&(f.options.paramArea.reportParameter("updateParameterPanel",t,i,r,u),f.$numOfVisibleParameters=f.options.paramArea.reportParameter("getNumOfVisibleParameters"),f.$numOfVisibleParameters>0&&f._trigger(n.showParamArea,null,{reportPath:f.options.reportPath}),f.paramLoaded=!0)}})},_removeParameters:function(){var n=this,t;n.paramLoaded===!0&&(t=n.options.paramArea,t&&(t.reportParameter("removeParameter"),n.paramLoaded=!1,n.$numOfVisibleParameters=0))},_resetViewer:function(n){var t=this;t.numPages=0,t.floatingHeaders=[],n||(t.paramLoaded=!1,t._removeSetTimeout()),t.scrollTop=0,t.scrollLeft=0,t.finding=!1,t.findStartPage=null,t.hasDocMap=!1,t.docMapData=null,t.togglePageNum=0,t.findKeyword=null,t.origionalReportPath="",t.renderError=!1,t.reportStates={toggleStates:new forerunner.ssr.map,sortStates:[]}},loadReport:function(n,t){var i=this;i._resetViewer(),i.options.reportPath=n,i.options.pageNum=t,i.options.jsonPath?i._renderJson():i._loadParameters(t)},loadReportWithNewParameters:function(n,t){var i=this;i._resetViewer(!0),i.renderTime=(new Date).getTime(),t||(t=1),i._loadPage(t,!1,null,n,!0)},_renderJson:function(){var n=this,i=1,t=!1;n.element.is(":visible")||t||n.element.show(),n._addLoadingIndicator(),n.togglePageNum=i,forerunner.ajax.ajax({type:"GET",dataType:"json",url:n.options.jsonPath,async:!1,success:function(r){n._writePage(r,i,t),t||(r.ReportContainer&&n._setPrint(r.ReportContainer.Report.PageContent.PageLayoutStart),n.element.is(":visible")||n.element.show(),n._updateTableHeaders(n))},error:function(){console.log("error"),n.removeLoadingIndicator()}})},_loadPage:function(n,t,i,r,u){var f=this;if(u===!0&&f.flushCache(),f.pages[n]&&f.pages[n].$container){t||(f._setPage(n),f.element.is(":visible")||t||f.element.show(),i&&f._navToLink(i),f.pages[n].reportObj.ReportContainer&&f.pages[n].reportObj.ReportContainer.Report.AutoRefresh&&f._setAutoRefresh(f.pages[n].reportObj.ReportContainer.Report.AutoRefresh),u!==!0&&f._cachePages(n));return}r||(r=""),t||f._addLoadingIndicator(),f.togglePageNum=n,forerunner.ajax.ajax({type:"POST",dataType:"json",url:f.options.reportViewerAPI+"/ReportJSON/",data:{ReportPath:f.options.reportPath,SessionID:f.sessionID,PageNumber:n,ParameterList:r},async:!0,success:function(r){f._writePage(r,n,t),t||(r.ReportContainer&&f._setPrint(r.ReportContainer.Report.PageContent.PageLayoutStart),f.element.is(":visible")||f.element.show(),i&&f._navToLink(i),u!==!0&&f._cachePages(n),f._updateTableHeaders(f))},error:function(){console.log("error"),f.removeLoadingIndicator()}})},_writePage:function(n,t,i){var u=this,f=$("<Div/>"),e;if(f.addClass("Page"),n){e=!1,u.options.userSettings&&u.options.userSettings.responsiveUI===!0&&(e=!0),f.reportRender({reportViewer:u,responsive:e,renderTime:u.renderTime}),i||n.Exception||!n.ReportContainer.Report.AutoRefresh||u._addSetPageCallback(function(){u._setAutoRefresh(n.ReportContainer.Report.AutoRefresh)}),u.pages[t]?(u.pages[t].$container=f,u.pages[t].reportObj=n):u.pages[t]=new r(f,n),u.sessionID=n.SessionID?n.SessionID:"";try{u.numPages=n.ReportContainer.NumPages===undefined?0:n.ReportContainer.NumPages}catch(o){u.numPages=0}i||(u._renderPage(t),u._setPage(t))}},_renderPage:function(n){var t=this,i;t.pages[n]&&t.pages[n].isRendered===!0||(t.pages[n].reportObj.Exception?t._renderPageError(t.pages[n].$container,t.pages[n].reportObj):(t.hasDocMap=t.pages[n].reportObj.HasDocMap,i=!1,t.options.userSettings&&t.options.userSettings.responsiveUI===!0&&(i=!0),t.pages[n].$container.reportRender({reportViewer:t,responsive:i,renderTime:t.renderTime}),t.pages[n].$container.reportRender("render",t.pages[n].reportObj)),t.pages[n].isRendered=!0)},_renderPageError:function(n,t){var i=this;i.renderError=!0,n.reportRender({reportViewer:i}),n.reportRender("writeError",t)},_sessionPing:function(){var n=this;n._sessionPingPost(n.sessionID)===!1&&(n.sessionID=""),$.each(n.actionHistory,function(t,i){n._sessionPingPost(i.SessionID)})},_sessionPingPost:function(n){var t=this;n&&n!==""&&forerunner.ajax.getJSON(t.options.reportViewerAPI+"/PingSession",{PingSessionID:n},function(n){return n.Status==="Fail"?!1:!0},function(){console.log("ping error")})},_updateTableHeaders:function(n){$.each(n.floatingHeaders,function(t,i){n._setRowHeaderOffset(i.$tablix,i.$rowHeader),n._setColHeaderOffset(i.$tablix,i.$colHeader)})},_hideTableHeaders:function(){var n=this;$.each(n.floatingHeaders,function(n,t){t.$rowHeader&&t.$rowHeader.hide(),t.$colHeader&&t.$colHeader.hide()}),n.$floatingToolbar&&n.$floatingToolbar.hide()},_navToLink:function(t){var r=this,i=r.element.find("[name='"+t+"']")[0],u;i!==undefined&&(u={top:$(i).offset().top-100,left:$(i).offset().left},r._trigger(n.navToPosition,null,u))},_stopDefaultEvent:function(n){window.ActiveXObject?window.event.returnValue=!1:(n.preventDefault(),n.stopPropagation())},_getHeight:function(n){var i,t=n.clone().css({visibility:"hidden"});return t.find("img").remove(),$("body").append(t),i=t.height()+"px",t.remove(),this._convertToMM(i)},_convertToMM:function(n){if(!n)return 0;var i=n.match(/\D+$/),t=n.match(/\d+/);i.length===1&&(i=i[0]),t.length===1&&(t=t[0]);switch(i){case"px":return t/3.78;case"pt":return t*.352777777778;case"in":return t*25.4;case"mm":return t;case"cm":return t*10;case"em":return t*4.2175176}return t},_highLightWord:function(n,t){if(t&&t!==""){var i=this;$(n).each(function(){var n=$(this).get(0);n.normalize(),$.each(n.childNodes,function(n,r){var u,f,e,o,s;if(r.nodeType===3){u=r;try{for(f=u.data.toUpperCase().indexOf(t.toUpperCase());f<u.data.length;){if(f>=0)e=document.createElement("span"),e.className="fr-render-find-keyword Unread",o=u.splitText(f),u=o.splitText(t.length),s=o.cloneNode(!0),e.appendChild(s),r.parentNode.replaceChild(e,o);else break;f=u.data.toUpperCase().indexOf(t.toUpperCase())}}catch(h){}}else i._highLightWord($(r),t)})})}else return;return $(this)},_clearHighLightWord:function(){$(".fr-render-find-keyword").each(function(){var n=document.createTextNode($(this).text());$(this).replaceWith($(n))})},_setAutoRefresh:function(n){var t=this;t.autoRefreshID!==undefined&&(t.autoRefreshID!==null&&t._removeSetTimeout(),t.autoRefreshID=setTimeout(function(){if(t.lock===1){t._setAutoRefresh(n);return}var i=t.options.$appContainer.scrollTop(),r=t.options.$appContainer.scrollLeft(),u=$(window).scrollTop(),f=$(window).scrollLeft();t._addSetPageCallback(function(){t.options.$appContainer.scrollTop(i).scrollLeft(r),$(window).scrollTop(u).scrollLeft(f)}),t.refreshReport(t.getCurPage())},n*1e3))},_removeSetTimeout:function(){var n=this;n.autoRefreshID!==null&&clearTimeout(n.autoRefreshID),n.autoRefreshID=null},destroy:function(){var n=this;n._removeSetTimeout(),n.autoRefreshID=undefined,this._destroy()}})}),forerunner=forerunner||{},forerunner.ajax=forerunner.ajax||{},forerunner.ssr=forerunner.ssr||{},forerunner.ssr.constants=forerunner.ssr.constants||{},forerunner.ssr.constants.events=forerunner.ssr.constants.events||{},$(function(){var r=forerunner.ssr,n=r.constants.events,i=forerunner.ssr.constants.widgets,t=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer");$.widget(i.getFullname(i.parameterModel),{options:{},_create:function(){var n=this;n.currentSetId=null,n.serverData=null},getNewSet:function(n,t){return{isAllUser:!1,name:n,id:forerunner.helper.guidGen(),data:t}},isCurrentSetAllUser:function(){var n=this,t;return n.serverData&&n.serverData.parameterSets&&n.currentSetId?(t=n.serverData.parameterSets[n.currentSetId],t.isAllUser):!1},canEditAllUsersSet:function(){var n=this;return n.serverData?n.serverData.canEditAllUsersSet:!1},canUserSaveCurrentSet:function(){var n=this;return n.serverData&&n.serverData.canEditAllUsersSet?!0:!n.isCurrentSetAllUser()},_addNewSet:function(n,t){var i=this,r=i.getNewSet(n,t);return(i.serverData===undefined||i.serverData===null)&&(i.serverData={canEditAllUsersSet:!1,defaultSetId:r.id,parameterSets:{}}),i.serverData.parameterSets[r.id]=r,i.serverData.defaultSetId=r.id,i.currentSetId=r.id,r},cloneServerData:function(){var n=this;return n.serverData?$.extend(!0,{},n.serverData):null},applyServerData:function(n){var i=this,t=null,r,u,f;i.serverData.defaultSetId=n.defaultSetId;for(t in n.parameterSets)r=i.serverData.parameterSets[t],u=n.parameterSets[t],r?(r.isAllUser=u.isAllUser,r.name=u.name):i.serverData.parameterSets[t]=u;f=[];for(t in i.serverData.parameterSets)n.parameterSets.hasOwnProperty(t)||f.push(t);while(f.length>0)t=f.pop(),delete i.serverData.parameterSets[t];i._saveModel(),i._triggerModelChange()},getOptionArray:function(n){var t=[],r,i;for(r in n)i=n[r],t.push({id:i.id,name:i.name});return t.sort(function(n,t){return n.name>t.name?1:t.name>n.name?-1:0}),t},_modelChangeData:function(){var n=this,t={selectedId:n.currentSetId};return t.optionArray=n.getOptionArray(n.serverData.parameterSets),t},_triggerModelChange:function(){var t=this;t._trigger(n.modelChanged,null,t._modelChangeData())},_isLoaded:function(n){var t=this;return t.serverData!==null&&t.reportPath===n},areSetsEmpty:function(n){if(n.parameterSets===undefined||n.parameterSets===null)return!0;for(var t in n.parameterSets)return!1;return!0},_load:function(n){var i=this,r=forerunner.config.forerunnerAPIBase()+"ReportManager/GetUserParameters?reportPath="+n;i._isLoaded(n)||forerunner.ajax.ajax({url:r,dataType:"json",async:!1,success:function(r){r.ParamsList!==undefined?i._pushNewSet(t.parameterModel.defaultName,r.ParamsList instanceof Array?r:r.ParamsList):r&&(i.serverData=r,i.areSetsEmpty(i.serverData)?i._addNewSet(t.parameterModel.defaultName):i.currentSetId=i.serverData.defaultSetId),i.reportPath=n,i._triggerModelChange()},error:function(n){console.log("ParameterModel._load() - error: "+n.status)}})},_saveModel:function(n,t){var i=this,r=forerunner.config.forerunnerAPIBase()+"ReportManager/SaveUserParameters";forerunner.ajax.post(r,{reportPath:i.reportPath,parameters:JSON.stringify(i.serverData)},function(t){n&&typeof n=="function"&&n(t)},function(){t&&typeof t=="function"&&t()})},save:function(n,i,r){var u=this;n&&(u.serverData===null||u.currentSetId===null?u._addNewSet(t.parameterModel.defaultName,JSON.parse(n)):u.serverData.parameterSets[u.currentSetId].data=JSON.parse(n),u._saveModel(i,r))},setCurrentSet:function(t){var i=this,r;t&&i.serverData&&i.serverData.parameterSets.hasOwnProperty(t)&&(i.currentSetId=t,r=i.serverData.parameterSets[t],r.data?i._trigger(n.modelSetChanged,null,JSON.stringify(r.data)):i._trigger(n.modelSetChanged,null,null))},getCurrentParameterList:function(n){var t=this,r=null,i;if(t._load(n),t.serverData){if(t.currentSetId)i=t.serverData.parameterSets[t.currentSetId];else if(t.serverData.defaultSetId)t.currentSetId=t.serverData.defaultSetId,i=t.serverData.parameterSets[t.serverData.defaultSetId],t._triggerModelChange();else return null;i.data&&(r=JSON.stringify(i.data))}return r}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.toolTypes,u=forerunner.ssr.constants.events,r="fr-toolbase-dropdown-container",t=function(n,t){var i=t;return typeof n!="undefined"&&(i="",n!==!1&&n!==null&&(i=n)),i};$.widget(i.getFullname(i.toolBase),{options:{toolClass:null},addTools:function(n,t,i){var r=this,u=r.element.find("."+r.options.toolClass);r._addChildTools(u,n,t,i),t?r.enableTools(i):r.disableTools(i)},_addChildTools:function(n,t,i,r){var u=this,e,h,c,f,o,s;for(u.allTools=u.allTools||{},e=$(u._getToolHtml(r[0])),t<=1?n.prepend(e):t>n.children().length?n.append(e):(h=":nth-child("+t+")",c=n.children(h),c.before(e)),f=e,u._addChildTool(f,r[0],i),o=1;o<r.length;o++)s=r[o],f.after(u._getToolHtml(s)),f=f.next(),u._addChildTool(f,s,i)},_addChildTool:function(t,i,r){var u=this;u.allTools[i.selectorClass]=i,i.toolType===n.toolGroup&&i.tools&&u._addChildTools(t,1,r,i.tools),i.sharedClass&&t.addClass(i.sharedClass),i.tooltip&&t.attr("title",i.tooltip),i.dropdown&&u._createDropdown(t,i),i.toolType===n.select&&t.selectTool($.extend(u.options,{toolInfo:i,toolClass:"fr-toolbase-selectinner"})),i.visible===!1&&t.hide()},_createDropdown:function(n,t){var u=this;t.$dropdown=$("<div class='"+r+"'/>"),t.$dropdown.toolDropdown({$reportViewer:u.options.$reportViewer}),t.$dropdown.toolDropdown("addTools",1,!0,t.tools),n.append(t.$dropdown);var i=n.find("."+r),f=t.selectorClass,e=t.imageClass;n.on("click",{toolInfo:t,$tool:n},function(n){i.css("left",n.data.$tool.filter(":visible").offset().left-n.data.$tool.filter(":visible").offsetParent().offset().left),i.css("top",n.data.$tool.height()),i.toggle()});$(document).on("click",function(n){!i.is(":visible")||$(n.target).hasClass(f)||$(n.target).hasClass(e)||i.toggle()})},getTool:function(n){var t=this;return t.allTools[n]},showTool:function(n){var t=this,i;t.allTools[n]&&(i=t.element.find("."+n),i.css({display:""}))},showAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.showTool(i.selectorClass)})},hideTool:function(n){var t=this,i;t.allTools[n]&&(i=t.element.find("."+n),i.hide())},hideAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.hideTool(i.selectorClass)})},freezeEnableDisable:function(n){var t=this;t.frozen=n},enableTools:function(t){var i=this;i.frozen!==!0&&$.each(t,function(t,r){var u=i.element.find("."+r.selectorClass);u.removeClass("fr-toolbase-disabled"),r.events&&(u.addClass("fr-core-cursorpointer"),i._removeEvent(u,r),i._addEvents(u,r)),r.toolType===n.toolGroup&&r.tools&&i.enableTools(r.tools)})},disableTools:function(t){var i=this;i.frozen!==!0&&$.each(t,function(t,r){var u=i.element.find("."+r.selectorClass);u.addClass("fr-toolbase-disabled"),r.events&&(u.removeClass("fr-core-cursorpointer"),i._removeEvent(u,r)),r.toolType===n.toolGroup&&r.tools&&i.disableTools(r.tools)})},enableAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.allTools[i.selectorClass].isEnable&&n.enableTools([i])})},disableAllTools:function(){var n=this;$.each(n.allTools,function(t,i){if(i.selectorClass){var r=n.element.find("."+i.selectorClass);r.hasClass("fr-toolbase-no-disable-id")||(n.allTools[i.selectorClass].isEnable=!r.hasClass("fr-toolbase-disabled"),n.disableTools([i]))}})},_getToolHtml:function(i){var r=this,u=t(i.toolStateClass,"fr-toolbase-state "),s=t(i.iconClass,"fr-icons24x24"),h=t(i.toolContainerClass,"fr-toolbase-toolcontainer"),l=t(i.groupContainerClass,"fr-toolbase-groupcontainer"),a=t(i.itemContainerClass,"fr-toolbase-itemcontainer"),v=t(i.itemTextContainerClass,"fr-toolbase-item-text-container"),y=t(i.itemTextClass,"fr-toolbase-item-text"),f,e,c,o;return i.toolType===n.button?"<div class='"+h+" "+u+i.selectorClass+"'><div class='"+s+" "+i.imageClass+"' /><\/div>":i.toolType===n.input?(f="",i.inputType&&(f=" type='"+i.inputType+"'"),"<input class='"+i.selectorClass+"'"+f+" />"):i.toolType===n.select?"<div class='fr-toolbase-selectcontainer' />":i.toolType===n.textButton?"<div class='"+h+" "+u+i.selectorClass+"'>"+r._getText(i)+"<\/div>":i.toolType===n.plainText?"<span class='"+i.selectorClass+"'> "+r._getText(i)+"<\/span>":i.toolType===n.containerItem?(e="",i.text&&(e=r._getText(i)),c=t(i.imageClass,""),o="",i.rightImageClass&&(o="<div class='fr-toolbase-rightimage "+i.rightImageClass+"'><\/div>"),"<div class='"+a+" "+u+i.selectorClass+"'><div class='"+s+" "+c+"'><\/div><div class='"+v+"'><div class='"+y+"'>"+e+"<\/div><\/div>"+o+"<\/div>"):i.toolType===n.toolGroup?"<div class='"+l+" "+i.selectorClass+"'><\/div>":void 0},_getText:function(n){var t=this;return typeof n.text=="function"?n.text({$reportViewer:t.options.$reportViewer}):n.text},_removeEvent:function(n,t){var r=this,i;for(i in t.events)typeof t.events[i]=="function"&&n.off(i)},_addEvents:function(n,t){var r=this,i;for(i in t.events)if(typeof t.events[i]=="function")n.on(i,null,{me:r,$reportViewer:r.options.$reportViewer},t.events[i])},_destroy:function(){},_create:function(){}}),$.widget(i.getFullname("toolDropdown"),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolbase-dropdown"},_init:function(){var n=this;n.element.html("<div class='"+n.options.toolClass+" fr-core-widget'/>")}}),$.widget(i.getFullname("selectTool"),{options:{toolClass:"fr-toolbase-selectinner"},_init:function(){var n=this,r=t(n.options.toolInfo.optionClass,"fr-toolbase-option"),i;n.element.html(""),i=$("<div class='"+n.options.toolClass+" fr-core-widget'><select class='"+n.options.toolInfo.selectorClass+"' readonly='true' ismultiple='false'><\/select><\/div>"),n.element.append(i)},_create:function(){var n=this;n.model=n.options.toolInfo.model.call(n);n.model.on(u.parameterModelChanged(),function(t,i){n._onModelChange.call(n,t,i)})},_onModelChange:function(n,t){var r=this,i=r.element.find("."+r.options.toolInfo.selectorClass);i.html(""),$.each(t.optionArray,function(n,t){$option=$("<option value="+t.id+">"+t.name+"<\/option>"),i.append($option)}),i.children("option").each(function(n,r){$(r).val()===t.selectedId&&i.prop("selectedIndex",n)})}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.messageBox),{options:{$appContainer:null},_create:function(){},_init:function(){var n=this,t=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer");$messageBox=new $("<div class='fr-messagebox-innerpage fr-core-dialog-innerPage fr-core-center'><div class='fr-core-dialog-header'><div class='fr-messagebox-title'>"+t.dialog.title+"<\/div><\/div><div class='fr-messagebox-content'><span class='fr-messagebox-msg'/><\/div><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='close' type='button' class='fr-messagebox-close-id fr-messagebox-submit fr-core-dialog-button' value='"+t.dialog.close+"' /><\/div><\/div>"),n.element.append($messageBox);n.element.find(".fr-messagebox-close-id").on("click",function(){n.closeDialog()})},openDialog:function(n,t){var i=this;i.element.find(".fr-messagebox-msg").text(n),t&&i.element.find(".fr-messagebox-title").text(t),forerunner.dialog.showModalDialog(i.options.$appContainer,i)},closeDialog:function(){var n=this;$(".fr-messagebox-msg").val(),forerunner.dialog.closeModalDialog(n.options.$appContainer,n)}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr,i=n.constants.toolTypes,t=forerunner.ssr.constants.events;n.DefaultAppTemplate=function(n){var t=this;t.options={$container:null,isFullScreen:!0},n&&$.extend(this.options,n)},n.DefaultAppTemplate.prototype={render:function(){var n=this,u=n.options.$container,i,e,o,s,t,f,h,c,l,a,v,r,y,p,w;return u.addClass("fr-layout-container"),n.$container=u,i=new $("<div />"),i.addClass("fr-layout-leftpane"),n.$leftpane=i,e=new $("<div />"),e.addClass("fr-layout-leftheader"),n.$leftheader=e,o=new $("<div />"),o.addClass("fr-layout-leftheaderspacer"),n.$leftheaderspacer=o,s=new $("<div />"),s.addClass("fr-layout-leftpanecontent"),n.$leftpanecontent=s,i.append(e),i.append(o),i.append(s),u.append(i),t=new $("<div />"),t.addClass("fr-layout-mainviewport"),n.$mainviewport=t,u.append(t),f=new $("<div />"),f.addClass("fr-layout-topdiv"),n.$topdiv=f,t.append(f),h=new $("<div />"),h.addClass("fr-layout-mainheadersection"),n.$mainheadersection=h,f.append(h),c=new $("<div />"),c.addClass("fr-layout-topdivspacer"),n.$topdivspacer=c,t.append(c),l=new $("<div />"),l.addClass("fr-layout-pagesection"),n.$pagesection=l,t.append(l),n.$mainsection=new $("<div />"),n.$mainsection.addClass("fr-layout-mainsection"),n.$pagesection.append(n.$mainsection),n.$docmapsection=new $("<div />"),n.$docmapsection.addClass("fr-layout-docmapsection"),n.$pagesection.append(n.$docmapsection),a=new $("<div />"),a.addClass("fr-layout-bottomdiv"),n.$bottomdiv=a,t.append(a),v=new $("<div />"),v.addClass("fr-layout-bottomdivspacer"),n.$bottomdivspacer=v,t.append(v),r=new $("<div />"),r.addClass("fr-layout-rightpane"),n.$rightpane=r,y=new $("<div />"),y.addClass("fr-layout-rightheader"),n.$rightheader=y,p=new $("<div />"),p.addClass("fr-layout-rightheaderspacer"),n.$rightheaderspacer=p,w=new $("<div />"),w.addClass("fr-layout-rightpanecontent"),n.$rightpanecontent=w,r.append(y),r.append(p),r.append(w),u.append(r),n.options.isFullScreen||n._makePositionAbsolute(),n.bindEvents(),setInterval(function(){n.toggleZoom()},100),this},_makePositionAbsolute:function(){var n=this;n.$topdiv.addClass("fr-layout-position-absolute"),n.$leftheader.addClass("fr-layout-position-absolute"),n.$rightheader.addClass("fr-layout-position-absolute"),n.$leftpane.addClass("fr-layout-position-absolute"),n.$rightpane.addClass("fr-layout-position-absolute"),n.$leftpanecontent.addClass("fr-layout-position-absolute"),n.$rightpanecontent.addClass("fr-layout-position-absolute")},_makePositionFixed:function(){var n=this;n.$topdiv.removeClass("fr-layout-position-absolute"),n.$leftheader.removeClass("fr-layout-position-absolute"),n.$rightheader.removeClass("fr-layout-position-absolute"),n.$leftpane.removeClass("fr-layout-position-absolute"),n.$rightpane.removeClass("fr-layout-position-absolute"),n.$leftpanecontent.removeClass("fr-layout-position-absolute"),n.$rightpanecontent.removeClass("fr-layout-position-absolute")},bindEvents:function(){var n=this,t=forerunner.ssr.constants.events,r=$(".fr-layout-mainheadersection",n.$container),i;r.on(t.toolbarMenuClick(),function(){n.showSlideoutPane(!0)});r.on(t.toolbarParamAreaClick(),function(){n.showSlideoutPane(!1)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterRender(),function(){n.showSlideoutPane(!1)});$(".fr-layout-leftheader",n.$container).on(t.leftToolbarMenuClick(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-rightheader",n.$container).on(t.rightToolbarParamAreaClick(),function(){n.hideSlideoutPane(!1)});$(".fr-layout-leftpanecontent",n.$container).on(t.toolPaneActionStarted(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterSubmit(),function(){n.hideSlideoutPane(!1)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterCancel(),function(){n.hideSlideoutPane(!1)});n.$container.on(t.showModalDialog,function(){n.$container.addClass("fr-layout-container-noscroll"),n.$pagesection.addClass("fr-layout-pagesection-noscroll"),n.showModal=!0});n.$container.on(t.closeModalDialog,function(){n.showModal=!1,n.$container.removeClass("fr-layout-container-noscroll"),n.$pagesection.removeClass("fr-layout-pagesection-noscroll")});if(i=forerunner.device.isTouch(),!n.options.isFullScreen&&i){$(n.$container).hammer({stop_browser_behavior:{userSelect:!1},swipe_max_touches:22,drag_max_touches:2}).on("touch release",function(t){if(t.gesture)switch(t.type){case"touch":if(forerunner.helper.containElement(t.target,["fr-layout-topdiv"])||n.$container.hasClass("fr-layout-container-noscroll"))return;n.$topdiv.hide();break;case"release":t.gesture.velocityX===0&&t.gesture.velocityY===0&&n._updateTopDiv(n)}});$(n.$container).on("scrollstop",function(){n._updateTopDiv(n)})}$(n.$container).on("touchmove",function(t){if(n.$container.hasClass("fr-layout-container-noscroll")){var i=forerunner.helper.containElement(t.target,["fr-layout-leftpane","fr-layout-rightpane","fr-core-dialog-form"]);i||t.preventDefault()}});if($(window).resize(function(){n.ResetSize(),n._updateTopDiv(n),n.setBackgroundLayout()}),!n.options.isFullScreen&&!i){$(window).on("scroll",function(){n._updateTopDiv(n)});n.$container.on("scroll",function(){n._updateTopDiv(n)})}if(forerunner.device.isiOS()){$(document.documentElement).height(window.innerHeight);$(window).on("orientationchange",function(){$(document.documentElement).height(window.innerHeight)})}},_updateTopDiv:function(n){n.options.isFullScreen||(n.$leftpane.is(":visible")?n.$leftpane.css("top",n.$container.scrollTop()):n.$rightpane.is(":visible")&&n.$rightpane.css("top",n.$container.scrollTop()),n.$topdiv.css("top",n.$container.scrollTop()),n.$topdiv.css("left",n.$container.scrollLeft()),n.isZoomed()||n.$topdiv.show())},toggleZoom:function(){var n=this,i=forerunner.device.zoomLevel(),t;if(n.isZoomed()&&!n.wasZoomed){forerunner.device.isAndroid()&&n.$topdiv.is(":visible")&&(n.$topdiv.css("width","100%"),n.$topdiv.css("width","device-width")),n.wasZoomed=!0;return}!n.isZoomed()&&n.wasZoomed&&(t=$(".fr-layout-reportviewer",n.$container),t.reportViewer("allowZoom",!1),n.wasZoomed=!1,forerunner.device.isAndroid()&&(n.$topdiv.css("width","100%"),n.$topdiv.fadeOut(10).fadeIn(10)))},wasZoomed:!1,isZoomed:function(){var n=forerunner.device.zoomLevel();return n>1.15||n<.985?!0:!1},_firstTime:!0,getHeightValues:function(){var t=this,n={};return n.windowHeight=$(window).height(),n.containerHeight=t.$container.height(),forerunner.device.isiOS()?(n.windowHeight=document.documentElement.clientHeight,!forerunner.device.isiPhone()||forerunner.device.isiPhoneFullscreen()||forerunner.device.isStandalone()||(n.windowHeight+=60,t._firstTime&&(n.containerHeight+=60,t._firstTime=!1))):forerunner.device.isAndroid()&&(n.windowHeight=window.innerHeight),n.max=Math.max(n.windowHeight,n.containerHeight),n.paneHeight=n.windowHeight-38,window.navigator.standalone&&forerunner.device.isiOS()&&(n.paneHeight=n.max),n},ResetSize:function(){var n=this,t=n.getHeightValues();forerunner.device.isiPhone()&&($("html").css({minHeight:t.max}),$("body").css({minHeight:t.max})),n.$leftpanecontent.css({height:t.paneHeight}),n.$rightpanecontent.css({height:t.paneHeight}),n.$leftpane.css({height:t.max}),n.$rightpane.css({height:t.max}),$(".fr-param-container",n.$container).css({height:"100%"}),$(".fr-toolpane",n.$container).css({height:"100%"})},bindViewerEvents:function(){var n=this,i=forerunner.ssr.constants.events,t=$(".fr-layout-reportviewer",n.$container),r,u,f;n.$viewer=t;t.on(i.reportViewerDrillBack(),function(){n.hideSlideoutPane(!1)});t.on(i.reportViewerDrillThrough(),function(){n.hideSlideoutPane(!0),n.hideSlideoutPane(!1)});t.on(i.reportViewerShowNav(),function(t,i){var r=n.$bottomdivspacer;i.open?(r.show(),forerunner.device.isSmall()&&n.$pagesection.hide()):(r.hide(),n.$pagesection.show())});t.on(i.reportViewerShowDocMap(),function(){n.scrollLock=!0,n.scrollToPosition(n.getOriginalPosition())});t.on(i.reportViewerHideDocMap(),function(){n.scrollLock=!1,n.restoreScrollPosition()});t.on(i.reportViewerallowZoom(),function(i,r){r.isEnabled===!0?(n.$topdiv.hide(),t.reportViewer("option","toolbarHeight",0)):(n.$topdiv.show(),t.reportViewer("option","toolbarHeight",n.$topdiv.outerHeight()))});t.on(i.reportViewerSetPageDone(),function(){n.setBackgroundLayout()});t.on(i.reportViewerChangePage(),function(){n.$pagesection.show()});t.on(i.reportViewerNavToPosition(),function(t,i){n.scrollToPosition(i),n.savePosition=null});if(r=forerunner.device.isTouch(),r&&!n.options.isFullScreen)n.$pagesection.on("scrollstop",function(){n._updateTopDiv(n)});u=function(){forerunner.device.isiOS()&&(n.options.isFullScreen&&n._makePositionAbsolute(),n.$pagesection.addClass("fr-layout-pagesection-noscroll"),n.$container.addClass("fr-layout-container-noscroll"),$(window).scrollTop(0),$(window).scrollLeft(0),n.ResetSize())},f=function(){forerunner.device.isiOS()&&(n.options.isFullScreen&&n._makePositionFixed(),n.$leftpane.is(":visible")||n.$rightpane.is(":visible")||n.showModal===!0||(n.$pagesection.removeClass("fr-layout-pagesection-noscroll"),n.$container.removeClass("fr-layout-container-noscroll")),$(window).scrollTop(0),$(window).scrollLeft(0),n.ResetSize())},t.reportViewer("option","onInputFocus",u),t.reportViewer("option","onInputBlur",f)},getScrollPosition:function(){var t=this,n={};return n.left=$(window).scrollLeft(),n.top=$(window).scrollTop(),n.innerLeft=t.$container.scrollLeft(),n.innerTop=t.$container.scrollTop(),n},getOriginalPosition:function(){var n=this;return{left:n.$container.offset().left>100?n.$container.offset().left:0,top:0,innerLeft:0,innerTop:0}},scrollToPosition:function(n){var t=this;t.savePosition||(t.savePosition=t.getScrollPosition()),n.left!==null&&$(window).scrollLeft(n.left),n.top!==null&&$(window).scrollTop(n.top),n.innerLeft!==null&&t.$container.scrollLeft(n.innerLeft),n.innerTop!==null&&t.$container.scrollTop(n.innerTop)},restoreScrollPosition:function(){var n=this;n.savePosition&&!n.scrollLock&&($(window).scrollLeft(n.savePosition.left),$(window).scrollTop(n.savePosition.top),n.$container.scrollLeft(n.savePosition.innerLeft),n.$container.scrollTop(n.savePosition.innerTop),n.savePosition=null)},hideAddressBar:function(n){var t=this,i=t.getOriginalPosition();n||(i.left=null),document.height<=window.outerHeight+10?setTimeout(function(){t.scrollToPosition(i)},50):setTimeout(function(){t.scrollToPosition(i)},0)},restoreScroll:function(){var n=this;document.height<=window.outerHeight+10?setTimeout(function(){n.restoreScrollPosition()},50):setTimeout(function(){n.restoreScrollPosition()},0)},hideSlideoutPane:function(n){var i=this,f=n?"fr-layout-mainViewPortShiftedRight":"fr-layout-mainViewPortShiftedLeft",o=i.$mainviewport,r=n?i.$leftpane:i.$rightpane,e=i.$topdiv,u=Number(200);r.is(":visible")&&(n?r.slideLeftHide(u*.5):r.slideRightHide(u*.5),e.removeClass(f,u),i.$mainheadersection.toolbar("showAllTools")),i.showModal!==!0&&(i.$pagesection.removeClass("fr-layout-pagesection-noscroll"),i.$container.removeClass("fr-layout-container-noscroll")),forerunner.device.isAndroid()&&!forerunner.device.isChrome()&&i.$pagesection.addClass("fr-layout-android"),i.restoreScroll(),i.$container.resize(),i.$viewer!==undefined&&i.$viewer.is(":visible")&&(forerunner.device.isAllowZoom()||i.$viewer.reportViewer("allowSwipe",!0),i.$viewer.reportViewer("triggerEvent",t.hidePane))},showSlideoutPane:function(n){var i=this;i.$viewer!==undefined?(i.$viewer.reportViewer("allowZoom",!1),i.$viewer.reportViewer("allowSwipe",!1)):forerunner.device.allowZoom(!1);var f=n?"fr-layout-mainViewPortShiftedRight":"fr-layout-mainViewPortShiftedLeft",e=i.$mainviewport,r=n?i.$leftpane:i.$rightpane,o=i.$topdiv,u=Number(200);r.is(":visible")||(r.css({height:Math.max($(window).height(),e.height())}),n?(r.css({top:i.$container.scrollTop()}),r.slideLeftShow(u)):(r.css({top:i.$container.scrollTop()}),r.slideRightShow(u)),o.addClass(f,u),i.$mainheadersection.toolbar("hideAllTools"),i.$viewer!==undefined?(i.$viewer.reportViewer("allowZoom",!1),i.$viewer.reportViewer("allowSwipe",!1)):forerunner.device.allowZoom(!1)),i.$container.addClass("fr-layout-container-noscroll"),i.$pagesection.addClass("fr-layout-pagesection-noscroll"),i.hideAddressBar(n),i.$container.resize(),i.$viewer!==undefined&&i.$viewer.is(":visible")&&i.$viewer.reportViewer("triggerEvent",t.showPane)},toggleSlideoutPane:function(n){var t=this,i=n?t.$leftpane:t.$rightpane;i.is(":visible")?this.hideSlideoutPane(n):this.showSlideoutPane(n)},setBackgroundLayout:function(){var n=this,t=$(".fr-report-areacontainer",n.$container),i=n.$container.height(),r=n.$container.width();t.height()>i-38||t.width()>r?$(".fr-render-bglayer",n.$container).css("position","absolute").css("height",Math.max(t.height(),i-38)).css("width",Math.max(t.width(),r)):$(".fr-render-bglayer",n.$container).css("position","absolute").css("height",i-38).css("width",r)},cleanUp:function(){var n=this;n.hideSlideoutPane(!0),n.hideSlideoutPane(!1),n.$bottomdiv.hide(),n.$bottomdivspacer.hide(),n.$pagesection.removeClass("fr-layout-pagesection-noscroll"),n.$container.removeClass("fr-layout-container-noscroll")},_selectedItemPath:null}}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},forerunner.ssr.tools=forerunner.ssr.tools||{},forerunner.ssr.tools.toolbar=forerunner.ssr.tools.toolbar||{},forerunner.ssr.tools.groups=forerunner.ssr.tools.groups||{},$(function(){var r=forerunner.ssr.constants.widgets,i=forerunner.ssr.constants.events,n=forerunner.ssr.tools.toolbar,t=forerunner.ssr.tools.groups;$.widget(r.getFullname(r.toolbar),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolbar"},_initCallbacks:function(){var t=this;t.options.$reportViewer.on(i.reportViewerSetPageDone(),function(i,r){$("input.fr-toolbar-reportpage-textbox",t.element).val(r.newPageNum);var u=t.options.$reportViewer.reportViewer("getNumPages");r.renderError===!0?t.enableTools([n.btnMenu,n.btnRefresh]):(t.enableTools(t._viewerButtons(!1)),t._updateBtnStates(r.newPageNum,u),r.numOfVisibleParameters===0&&t.disableTools([n.btnParamarea]))});t.options.$reportViewer.on(i.reportViewerShowParamArea(),function(){t.enableTools([n.btnParamarea])});t.options.$reportViewer.on(i.reportViewerShowDocMap(),function(){t.disableAllTools(),t.enableTools([n.btnDocumentMap,n.btnMenu,n.btnReportBack])});t.options.$reportViewer.on(i.reportViewerHideDocMap(),function(){t.enableAllTools()});t.options.$reportViewer.on(i.reportViewerShowNav(),function(i,r){r.open?(t.disableAllTools(),t.enableTools([n.btnNav,n.btnMenu]),t.freezeEnableDisable(!0)):(t.freezeEnableDisable(!1),t.enableAllTools())});t.options.$reportViewer.on(i.reportViewerDrillThrough(),function(){t._leaveCurReport()});t.options.$reportViewer.on(i.reportViewerDrillBack(),function(){t._leaveCurReport()})},_init:function(){var t=this;t.element.html("<div class='"+t.options.toolClass+" fr-core-widget'/>"),t.addTools(1,!1,t._viewerButtons()),t.addTools(1,!1,[n.btnParamarea]),t.enableTools([n.btnMenu]),t.options.$reportViewer&&t._initCallbacks()},_viewerButtons:function(i){var r;return r=i===!0||i===undefined?[n.btnMenu,n.btnReportBack,n.btnNav,n.btnRefresh,n.btnDocumentMap,t.btnExportDropdown,t.btnVCRGroup,t.btnFindGroup,n.btnZoom,n.btnPrint]:[n.btnMenu,n.btnNav,n.btnRefresh,n.btnDocumentMap,t.btnExportDropdown,t.btnVCRGroup,t.btnFindGroup,n.btnZoom,n.btnPrint],(forerunner.device.isMSIEAndTouch()||forerunner.device.isWindowsPhone()||forerunner.device.isAndroid()&&!forerunner.device.isChrome())&&(r=i===!0||i===undefined?[n.btnMenu,n.btnNav,n.btnRefresh,n.btnDocumentMap,t.btnExportDropdown,t.btnVCRGroup,t.btnFindGroup,n.btnPrint]:[n.btnMenu,n.btnReportBack,n.btnNav,n.btnRefresh,n.btnDocumentMap,t.btnExportDropdown,t.btnVCRGroup,t.btnFindGroup,n.btnPrint]),r},_updateBtnStates:function(t,i){var r=this;r.element.find(".fr-toolbar-numPages-button").html(i),r.element.find(".fr-toolbar-reportpage-textbox").attr({max:i,min:1}),r.options.$reportViewer.reportViewer("getHasDocMap")?r.enableTools([n.btnDocumentMap]):r.disableTools([n.btnDocumentMap]),t<=1?r.disableTools([n.btnPrev,n.btnFirstPage]):r.enableTools([n.btnPrev,n.btnFirstPage]),t>=i?r.disableTools([n.btnNext,n.btnLastPage]):r.enableTools([n.btnNext,n.btnLastPage]),i===1?r.disableTools([n.btnNav]):r.enableTools([n.btnNav])},_clearBtnStates:function(){var n=this;n.element.find(".fr-toolbar-keyword-textbox").val(""),n.element.find(".fr-toolbar-reportpage-textbox").val(""),n.element.find(".fr-toolbar-numPages-button").html(0)},_leaveCurReport:function(){var n=this;n._clearBtnStates(),n.disableTools(n._viewerButtons(!1))},_destroy:function(){},_create:function(){var n=this}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var r=forerunner.ssr.constants.widgets,i=forerunner.ssr.constants.events,n=forerunner.ssr.tools.toolpane,t=forerunner.ssr.tools.groups;$.widget(r.getFullname(r.toolPane),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolpane"},_initCallbacks:function(){var t=this;t.options.$reportViewer.on(i.reportViewerSetPageDone(),function(i,r){$("input.fr-item-textbox-reportpage",t.element).val(r.newPageNum);var u=t.options.$reportViewer.reportViewer("getNumPages");r.renderError===!0?t.enableTools([n.itemRefresh]):(t.enableTools(t._viewerItems(!1)),t._updateItemStates(r.newPageNum,u))});t.options.$reportViewer.on(i.reportViewerShowDocMap(),function(){t.disableAllTools(),t.enableTools([n.itemDocumentMap])});t.options.$reportViewer.on(i.reportViewerHideDocMap(),function(){t.enableAllTools()});t.options.$reportViewer.on(i.reportViewerShowNav(),function(i,r){r.open?(t.disableAllTools(),t.enableTools([n.itemNav]),t.freezeEnableDisable(!0)):(t.freezeEnableDisable(!1),t.enableAllTools())});t.options.$reportViewer.on(i.reportViewerDrillThrough(),function(){t._leaveCurReport()});t.options.$reportViewer.on(i.reportViewerDrillBack(),function(){t._leaveCurReport()})},_init:function(){var n=this;n.element.html(""),$toolpane=new $("<div class='"+n.options.toolClass+" fr-core-widget' />"),$(n.element).append($toolpane),n.addTools(1,!1,n._viewerItems()),$spacerdiv=new $("<div />"),$spacerdiv.attr("style","height:65px"),$toolpane.append($spacerdiv),n.options.$reportViewer&&n._initCallbacks()},_viewerItems:function(i){var r;return r=i===!0||i===undefined?[t.itemVCRGroup,n.itemNav,n.itemReportBack,n.itemRefresh,n.itemDocumentMap,n.itemZoom,n.itemExport,t.itemExportGroup,n.itemPrint,t.itemFindGroup]:[t.itemVCRGroup,n.itemNav,n.itemRefresh,n.itemDocumentMap,n.itemZoom,n.itemExport,t.itemExportGroup,n.itemPrint,t.itemFindGroup],(forerunner.device.isMSIEAndTouch()||forerunner.device.isWindowsPhone()||forerunner.device.isAndroid()&&!forerunner.device.isChrome())&&(r=i===!0||i===undefined?[t.itemVCRGroup,n.itemNav,n.itemReportBack,n.itemRefresh,n.itemDocumentMap,n.itemExport,t.itemExportGroup,n.itemPrint,t.itemFindGroup]:[t.itemVCRGroup,n.itemNav,n.itemRefresh,n.itemDocumentMap,n.itemExport,t.itemExportGroup,n.itemPrint,t.itemFindGroup]),r},_updateItemStates:function(t,i){var r=this;r.element.find(".fr-toolbar-numPages-button").html(i),r.element.find(".fr-item-textbox-reportpage").attr({max:i,min:1}),r.options.$reportViewer.reportViewer("getNumPages",t),r.options.$reportViewer.reportViewer("getHasDocMap")?r.enableTools([n.itemDocumentMap]):r.disableTools([n.itemDocumentMap]),t>1?r.enableTools([n.itemPrev,n.itemFirstPage]):r.disableTools([n.itemPrev,n.itemFirstPage]),t<i?r.enableTools([n.itemNext,n.itemLastPage]):r.disableTools([n.itemNext,n.itemLastPage]),i===1?r.disableTools([n.itemNav]):r.enableTools([n.itemNav])},_clearItemStates:function(){var n=this;n.element.find(".fr-item-textbox-keyword").val(""),n.element.find(".fr-item-textbox-reportpage").val(""),n.element.find(".fr-toolbar-numPages-button").html(0)},_leaveCurReport:function(){var n=this;n._clearItemStates(),n.disableTools(n._viewerItems(!1))}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.pageNav),{options:{$reportViewer:null},_create:function(){},_setCurrentPage:function(n){var t=this,i;t.currentPageNum!==null&&t.currentPageNum!==n&&(i=t.listItems[t.currentPageNum-1],i.removeClass("fr-nav-selected"),i.find("img").removeClass("fr-nav-page-thumb-selected")),t.currentPageNum=n,t._ScrolltoPage(),i=t.listItems[t.currentPageNum-1],i.addClass("fr-nav-selected"),i.find("img").addClass("fr-nav-page-thumb-selected")},_ScrolltoPage:function(){var n=this,t;n.currentPageNum&&!forerunner.device.isElementInViewport(n.listItems[n.currentPageNum-1].get(0))&&(t=n.$ul.scrollLeft()+n.listItems[n.currentPageNum-1].position().left,n.$ul.scrollLeft(t))},_renderList:function(){var n=this,l=forerunner.device.isTouch(),u,t,e,r,o,i;u=new $("<ul class='fr-nav-container fr-core-widget' />"),n.$ul=u;var f=n.options.$reportViewer.reportViewer("getNumPages"),s=n.options.$reportViewer.reportViewer("getSessionID"),h=n.options.$reportViewer.reportViewer("getReportViewerAPI"),c=n.options.$reportViewer.reportViewer("getReportPath");for(n.listItems=new Array(f),t=1;t<=f;t++)e=h+"/Thumbnail/?ReportPath="+c+"&SessionID="+s+"&PageNumber="+t,r=new $("<LI />"),u.append(r),n.listItems[t-1]=r,o=new $("<DIV class='fr-nav-centertext'>"+t.toString()+"<\/DIV>"),i=new $("<IMG />"),i.addClass("fr-nav-page-thumb"),i.addClass("lazy"),i.attr("data-original",e),i.data("pageNumber",t),this._on(i,{click:function(t){n.options.$reportViewer.reportViewer("navToPage",$(t.currentTarget).data("pageNumber")),forerunner.device.isSmall()&&n.options.$reportViewer.reportViewer("showNav")}}),r.addClass("fr-nav-item"),r.append(o),r.append(i);return u.append($("<LI />").addClass("fr-nav-li-spacer"))},reset:function(){var n=this;n.element.hide(),n.isRendered=!1},_render:function(){var n=this,r,t,i;n.element.html(""),r=forerunner.device.isTouch(),t=new $("<DIV />"),t.addClass("fr-nav-container"),i=n._renderList(),n.$list=i,t.append(i),n.element.css("display","block"),n.element.append(t),n.element.hide(),n._initCallbacks(),n._setCurrentPage(n.options.$reportViewer.reportViewer("getCurPage"))},_makeVisible:function(n){var t=this;n?(t.element.fadeIn("fast"),t._ScrolltoPage()):t.element.fadeOut("fast")},showNav:function(){var n=this;n.isRendered||(n._render(),n.isRendered=!0),n._makeVisible(!n.element.is(":visible")),$(".fr-nav-container",$(n.element)).css("position",n.element.css("position")),$container=$("ul.fr-nav-container",$(n.element)),$(".lazy",n.$list).lazyload({container:$container}),forerunner.device.isMSIE()&&n._ScrolltoPage()},_initCallbacks:function(){var n=this;n.options.$reportViewer.on(t.reportViewerChangePage(),function(t,i){n._setCurrentPage(i.newPageNum)})},_init:function(){var n=this;n.listItems=null,n.$ul=null,n.currentPageNum=null,n.isRendered=!1}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},forerunner.ssr.tools=forerunner.ssr.tools||{},forerunner.ssr.tools.reportExplorerToolbar=forerunner.ssr.tools.reportExplorerToolbar||{},$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.tools.reportExplorerToolbar,i="fr-toolbase-persistent-active-state";$.widget(t.getFullname(t.reportExplorerToolbar),$.forerunner.toolBase,{options:{navigateTo:null,toolClass:"fr-toolbar"},setFolderBtnActive:function(n){var t=this,r;t._clearFolderBtnState(),n&&(r=t.element.find("."+n),r.addClass(i))},_clearFolderBtnState:function(){var n=this;$.each(n.folderBtns,function(n,t){t.removeClass(i)})},_initCallbacks:function(){var t=this;t.enableTools([n.btnHome,n.btnBack,n.btnFav,n.btnRecent])},_init:function(){var t=this;t.element.empty(),t.element.append($("<div class='"+t.options.toolClass+" fr-core-widget'/>")),t.addTools(1,!0,[n.btnBack,n.btnSetup,n.btnHome,n.btnRecent,n.btnFav]),t._initCallbacks();var i=t.element.find("."+n.btnHome.selectorClass),r=t.element.find("."+n.btnRecent.selectorClass),u=t.element.find("."+n.btnFav.selectorClass);t.folderBtns=[i,r,u]},_destroy:function(){},_create:function(){var n=this}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer");$.widget(n.getFullname(n.reportExplorer),{options:{reportManagerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager",forerunnerPath:forerunner.config.forerunnerFolder(),path:null,view:null,selectedItemPath:null,$scrollBarOwner:null,navigateTo:null,$appContainer:null},saveUserSettings:function(n){var r=this,t=JSON.stringify(n),i=forerunner.config.forerunnerAPIBase()+"ReportManager/SaveUserSettings?settings="+t;forerunner.ajax.ajax({url:i,dataType:"json",async:!1,success:function(){},error:function(n){console.log(n)}})},getUserSettings:function(n){var t=this,i,r;return n!==!0&&t.userSettings?t.userSettings:(r=forerunner.config.forerunnerAPIBase()+"ReportManager/GetUserSettings",forerunner.ajax.ajax({url:r,dataType:"json",async:!1,success:function(n){i=n}}),i&&(t.userSettings=i),t.userSettings)},_generatePCListItem:function(n,t){var e=this,v=e.options.reportManagerAPI+"/Thumbnail/?ReportPath="+encodeURIComponent(n.Path)+"&DefDate="+n.ModifiedDate,u=new $("<div />"),h,l,f,i,r,o,a,c,s;u.addClass("fr-explorer-item"),t&&u.addClass("fr-explorer-item-selcted"),h=new $("<a />"),l=n.Type===1||n.Type===7?"explore":"browse";h.on("click",function(){e.options.navigateTo&&e.options.navigateTo(l,n.Path)});return u.append(h),f=new $("<div />"),f.addClass("fr-report-item-image-block"),h.append(f),i=new $("<div />"),f.append(i),n.Type===1||n.Type===7?t?i.addClass("fr-explorer-folder-selected"):i.addClass("fr-explorer-folder"):(r=new $("<img />"),f.append(r),o=new $("<div />"),f.append(o),a=v,r.addClass("fr-report-item-inner-image"),r.addClass("fr-report-item-image-base"),i.addClass("fr-report-item-image-base"),o.addClass("fr-report-item-image-base"),t?(i.addClass("fr-report-item-outer-image-selected"),o.addClass("fr-explorer-item-ear-selcted")):(i.addClass("fr-report-item-outer-image"),o.addClass("fr-report-item-ear-image")),r.attr("src",a),r.error(function(){$(this).attr("src",e.options.forerunnerPath+"/ReportExplorer/images/Report-icon.png")}),r.removeAttr("height")),t&&(e.$selectedItem=u),c=new $("<div />"),c.addClass("fr-explorer-caption"),s=new $("<div />"),s.addClass("fr-explorer-item-title"),s.attr("title",n.Name),s.html(n.Name),c.append(s),u.append(c),u},_renderPCView:function(n){var t=this,r,i,u,f;for(t.$UL=t.element.find(".fr-report-explorer"),r=t.options.selectedItemPath?decodeURIComponent(t.options.selectedItemPath):null,t.rmListItems=new Array(n.length),i=0;i<n.length;i++)u=n[i],f=!1,r&&r===decodeURIComponent(u.Path)&&(t.selectedItem=i,f=!0),t.rmListItems[i]=t._generatePCListItem(u,f),t.$UL.append(t.rmListItems[i]);t.$UL.find(".fr-explorer-item-title").multiLineEllipsis()},_render:function(n){var t=this;t.element.html("<div class='fr-report-explorer fr-core-widget'><\/div>"),t._renderPCView(n),t.$selectedItem?(setTimeout(function(){t.$explorer.scrollTop(t.$selectedItem.offset().top-50)},100),setTimeout(function(){t.$explorer.scrollLeft(t.$selectedItem.offset().left-20)},100)):(setTimeout(function(){t.$explorer.scrollTop(0)},100),setTimeout(function(){t.$explorer.scrollLeft(0)},100))},_fetch:function(n,i){var r=this;forerunner.ajax.ajax({dataType:"json",url:r.options.reportManagerAPI+"/GetItems",async:!1,data:{view:n,path:i},success:function(n){r._render(n)},error:function(n){console.log(n),forerunner.dialog.showMessageBox(r.options.$appContainer,t.messages.catalogsLoadFailed)}})},_initCallbacks:function(){var n=this},_init:function(){var n=this,t;n.$RMList=null,n.$UL=null,n.rmListItems=null,n.selectedItem=0,n.isRendered=!1,n.$explorer=n.options.$scrollBarOwner?n.options.$scrollBarOwner:$(window),n.$selectedItem=null,n._fetch(n.options.view,n.options.path),n.userSettings={responsiveUI:!1},n.getUserSettings(!0),t=n.options.$appContainer.find(".fr-us-section"),t.length===0&&(t=$("<div class='fr-us-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),t.userSettings({$appContainer:n.options.$appContainer,$reportExplorer:n.element}),n.options.$appContainer.append(t),n._userSettingsDialog=t)},showUserSettingsDialog:function(){var n=this;n._userSettingsDialog.userSettings("openDialog")}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.userSettings),{options:{$reportExplorer:null},_create:function(){},_init:function(){var n=this,i=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer"),t=i.userSettings,e=i.unit,f=n._getBuildVersion(),r,u;n.element.html(""),r=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-setup",t.title,"fr-us-cancel",t.cancel),u=new $("<div class='fr-core-dialog-innerPage fr-core-center'>"+r+"<form class='fr-us-form fr-core-dialog-form'><div class='fr-us-setting-container'><label class='fr-us-label'>"+t.ResponsiveUI+"<\/label><input class='fr-us-responsive-ui-id fr-us-checkbox'  name='ResponsiveUI' type='checkbox'/><\/div><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-us-submit-id fr-core-dialog-submit fr-core-dialog-button' value='"+t.submit+"'/><\/div><\/form><div class='fr-buildversion-container'>"+f+"<\/div><\/div>"),n.element.append(u);n.element.find(".fr-us-submit-id").on("click",function(){n._saveSettings(),n.closeDialog()});n.element.find(".fr-us-cancel").on("click",function(){n.closeDialog()})},_getBuildVersion:function(){var i=this,t=forerunner.config.forerunnerFolder()+"/version.txt",n=null;return $.ajax({url:t,dataType:"json",async:!1,success:function(t){n=t.buildVersion},fail:function(n){console.log(n)},error:function(n,t,i){console.log(i)}}),n},_getSettings:function(){var n=this,t;n.settings=n.options.$reportExplorer.reportExplorer("getUserSettings",!0),n.$resposiveUI=n.element.find(".fr-us-responsive-ui-id"),t=n.settings.responsiveUI,n.$resposiveUI.prop("checked",t)},_saveSettings:function(){var n=this;n.settings.responsiveUI=n.$resposiveUI.prop("checked"),n.options.$reportExplorer.reportExplorer("saveUserSettings",n.settings)},openDialog:function(){var n=this;n._getSettings(),forerunner.dialog.showModalDialog(n.options.$appContainer,n)},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.$appContainer,n)}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){function n(n,t,i,r,u,f,e){this.RS=n,this.CurrObj=t,this.CurrObjIndex=i,this.CurrObjParent=r,this.$HTMLParent=u,this.Style=f,this.CurrLocation=e}function i(){this.ReportItems={},this.Height=0,this.LowestIndex=null}function r(n,t){this.Height=n,this.Width=t}function u(n){this.TopDelta=0,this.Height=0,this.Left=0,this.Index=n,this.IndexAbove=null,this.NewHeight=null,this.NewTop=null}function f(n,t,i){this.$tablix=n,this.$rowHeader=t,this.$colHeader=i}var t=forerunner.ssr.constants.widgets;$.widget(t.getFullname(t.reportRender),{options:{reportViewer:null,responsive:!1,renderTime:null},_create:function(){},render:function(t){var i=this,u=i.element,r=i.options.reportViewer;$.each(t.ReportContainer.Report.PageContent.Sections,function(f,e){i._writeSection(new n(r,e,f,t.ReportContainer.Report.PageContent,u,""))}),i._addPageStyle(r,t.ReportContainer.Report.PageContent.PageLayoutStart.PageStyle,t)},_addPageStyle:function(n,t,i){var r=this,f=r._getStyle(n,t),u=new $("<div class='fr-render-bglayer'><\/div>");u.attr("style",f),i.ReportContainer.Trial===1&&r.element.append(r._getWatermark()),r.element.append(u)},_getWatermark:function(){var i="opacity:0.10;color: #d0d0d0;font-size: 120pt;position: absolute;margin: 0;left:0px;top:40px; pointer-events: none;",r,n,t;return forerunner.device.isMSIE8()?(r=$("<DIV/>").html("Evaluation"),i+="z-index: -1;",r.attr("style",i),r):(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.setAttribute("xlink","http://www.w3.org/1999/xlink"),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("pointer-events","none"),i="opacity:0.10;color: #d0d0d0;font-size: 120pt;position: absolute;margin: 0;left:0px;top:40px; pointer-events: none;",i+=forerunner.device.isSafariPC()?"z-index: -1;":"z-index: 1000;",n.setAttribute("style",i),t=document.createElementNS("http://www.w3.org/2000/svg","text"),t.setAttribute("x","10"),t.setAttribute("y","160"),t.setAttribute("fill","#000"),t.setAttribute("pointer-events","none"),t.textContent="Evaluation",n.appendChild(t),n)},writeError:function(n){var i=this,r=i.options.reportViewer.locData.errorTag,t;if(n.Exception.Type==="LicenseException")i.element.html($("<div class='Page' ><div class='fr-render-error-license Page'><div class='fr-render-error-license-container'><div class='fr-render-error-license-title'><\/div><br/><div class='fr-render-error-license-content'><\/div><\/div><\/div>")),i.options.reportViewer&&(t=i.element.find(".fr-render-error-license-title"),t.html(r.licenseErrorTitle),t=i.element.find(".fr-render-error-license-content"),t.html(r.licenseErrorContent));else if(i.element.html($("<div class='Page' ><div class='fr-render-error-message'><\/div><\/br><div class='fr-render-error-details'>"+r.moreDetail+"<\/div><div class='fr-render-error'><h3>"+r.serverError+"<\/h3><div class='fr-render-error fr-render-error-DetailMessage'><\/div><div class='fr-render-error fr-render-error-type'><\/div><div class='fr-render-error fr-render-error-targetsite'><\/div><div class='fr-render-error fr-render-error-source'><\/div><div class='fr-render-error fr-render-error-stacktrace'><\/div><\/div><\/div>")),i.options.reportViewer){t=i.element.find(".fr-render-error"),t.hide(),t=i.element.find(".fr-render-error-details");t.on("click",{$Detail:i.element.find(".fr-render-error")},function(n){n.data.$Detail.show(),$(n.target).hide()});t=i.element.find(".fr-render-error-DetailMessage"),t.append("<h4>"+r.message+":<\/h4>"+n.Exception.DetailMessage),t=i.element.find(".fr-render-error-type"),t.append("<h4>"+r.type+":<\/h4>"+n.Exception.Type),t=i.element.find(".fr-render-error-targetsite"),t.html("<h4>"+r.targetSite+":<\/h4>"+n.Exception.TargetSite),t=i.element.find(".fr-render-error-source"),t.html("<h4>"+r.source+":<\/h4>"+n.Exception.Source),t=i.element.find(".fr-render-error-message"),t.html(n.Exception.Message),t=i.element.find(".fr-render-error-stacktrace"),t.html("<h4>"+r.stackTrace+":<\/h4>"+n.Exception.StackTrace)}},_writeSection:function(t){for(var r=this,u=r._getDefaultHTMLTable(),e=$("<TR/>"),o,s,h,c,f=t.CurrObj.Measurement?t.CurrObj.Measurement:t.CurrObjParent.Measurement,i=0;i<f.Count;i++)f.Measurements[i].Type==="PageHeader"&&(s=i),f.Measurements[i].Type==="PageFooter"&&(h=i),f.Measurements[i].Type==="BodyArea"&&(c=i);o=c>=0?f.Measurements[c]:r._getMeasurmentsObj(t.CurrObjParent,t.CurrObjIndex),t.CurrObj.PageHeader&&u.append(r._writeHeaderFooter(t,"PageHeader",s)),t.CurrObjParent.PageHeader&&u.append(r._writeHeaderFooter(new n(t.RS,t.CurrObjParent,null,null,null,null,null),"PageHeader",s)),e.attr("Style","width:"+r._getWidth(o.Width)+"mm;"),u.append(e),$.each(t.CurrObj.Columns,function(i,u){var f=new $("<TD/>");f.append(r._writeRectangle(new n(t.RS,u,i,t.CurrObj,new $("<Div/>"),null,o))),e.append(f)}),t.CurrObj.PageFooter&&u.append(r._writeHeaderFooter(t,"PageFooter",h)),t.CurrObjParent.PageFooter&&u.append(r._writeHeaderFooter(new n(t.RS,t.CurrObjParent,null,null,null,null,null),"PageFooter",h)),t.$HTMLParent.append(u)},_writeHeaderFooter:function(t,i,r){var f=this,u,e,o;if(t.CurrObj[i])return u=$("<TR/>"),e=$("<TD/>"),u.append(e),o=f._getMeasurmentsObj(t.CurrObj,r),u.attr("Style","width:"+f._getWidth(o.Width)+"mm;"),e.append(f._writeRectangle(new n(t.RS,t.CurrObj[i],r,t.CurrObj,new $("<DIV/>"),null,o))),u},_writeRectangle:function(t){var o,e,u,i,r,f=this,s;return u=t.CurrObj.Measurement.Measurements,i=f._getRectangleLayout(u),$.each(t.CurrObj.ReportItems,function(s,h){r="",h.Type!=="Line"&&(r="display:table;border-collapse:collapse;"+f._getFullBorderStyle(h)),o=f._writeReportItems(new n(t.RS,h,s,t.CurrObj,new $("<Div/>"),r,u[s])),e=new $("<Div/>"),e.append(o),r="",i.ReportItems[s].NewHeight=h.Type==="Image"||h.Type==="Chart"||h.Type==="Gauge"||h.Type==="Map"||h.Type==="Line"?u[s].Height:f._getHeight(o),i.ReportItems[s].NewTop=i.ReportItems[s].IndexAbove===null?u[s].Top:parseFloat(i.ReportItems[i.ReportItems[s].IndexAbove].NewTop)+parseFloat(i.ReportItems[i.ReportItems[s].IndexAbove].NewHeight)+parseFloat(i.ReportItems[s].TopDelta),r+="position:absolute;top:"+i.ReportItems[s].NewTop+"mm;left:"+i.ReportItems[s].Left+"mm;",u[s].zIndex&&(r+="z-index:"+u[s].zIndex+";"),t.CurrObj.ReportItems[s].Element&&t.CurrObj.ReportItems[s].Elements.SharedElements.Style&&t.CurrObj.ReportItems[s].Elements.SharedElements.Style.BackgroundColor?r+="background-color:"+t.CurrObj.ReportItems[s].Elements.SharedElements.Style.BackgroundColor+";":t.CurrObj.ReportItems[s].Element&&t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style&&t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style.BackgroundColor&&(r+="background-color:"+t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style.BackgroundColor+";"),e.attr("Style",r),e.append(o),t.$HTMLParent.append(e)}),r="position:relative;"+f._getElementsStyle(t.RS,t.CurrObj.Elements),r+=f._getFullBorderStyle(t.CurrObj),t.CurrLocation&&(r+="width:"+f._getWidth(t.CurrLocation.Width)+"mm;",t.CurrObj.ReportItems.length===0?r+="height:"+(t.CurrLocation.Height+1)+"mm;":(s=parseFloat(i.ReportItems[i.LowestIndex].NewTop)+parseFloat(i.ReportItems[i.LowestIndex].NewHeight)+(parseFloat(t.CurrLocation.Height)-(parseFloat(u[i.LowestIndex].Top)+parseFloat(u[i.LowestIndex].Height)))+1,r+="height:"+s+"mm;")),t.$HTMLParent.attr("Style",r),t.CurrObj.Elements.NonSharedElements.UniqueName&&f._writeUniqueName(t.$HTMLParent,t.CurrObj.Elements.NonSharedElements.UniqueName),f._writeBookMark(t),t.$HTMLParent},_getRectangleLayout:function(n){var t=new i,r=this;return($.each(n,function(i,f){var e,o,s;for(t.ReportItems[i]=new u(i),e=t.ReportItems[i],e.Left=f.Left,r.isNull(t.LowestIndex)?t.LowestIndex=i:f.Top+f.Height>n[t.LowestIndex].Top+n[t.LowestIndex].Height&&(t.LowestIndex=i),o=0;o<n.length;o++)s=n[o].Top+n[o].Height,f.Top>s&&(e.IndexAbove?s>n[e.IndexAbove].Top+n[e.IndexAbove].Height&&(e.IndexAbove=o,e.TopDelta=f.Top-s):(e.IndexAbove=o,e.TopDelta=f.Top-s))}),r.options.responsive)?r._getResponsiveRectangleLayout(n,t):t},_getResponsiveRectangleLayout:function(n,t){var u=this,i=u._convertToMM(u.options.reportViewer.element.width()+"px"),r=!1;return $.each(n,function(u,f){var e=t.ReportItems[u],c,h,o,l,a,s;if(e.OrgBottom=f.Top+f.Height,e.OrgRight=f.Left+f.Width,e.OrgIndexAbove=e.IndexAbove,c=!1,h=!1,e.OrgRight>i)for(e.Left=0,o=0;o<n.length;o++)l=n[o].Top+n[o].Height,a=n[o].Left+n[o].Width,!h&&u!==o&&f.Top<n[o].Top&&e.OrgBottom>n[o].Top&&(t.ReportItems[o].IndexAbove=u,t.ReportItems[o].TopDelta=1,u===t.LowestIndex&&(t.LowestIndex=t.ReportItems[o].Index),r=!0,h=!0),u!==o&&f.Top>=n[o].Top&&f.Top<l&&u>o&&(e.IndexAbove===null||t.ReportItems[e.IndexAbove].OrgBottom<t.ReportItems[o].OrgBottom)&&(e.IndexAbove=o,e.TopDelta=1,o===t.LowestIndex&&(t.LowestIndex=u),c=!0,r=!0);if(r||u===n.length-1)for(s=0;s<e.Index;s++)e.IndexAbove===t.ReportItems[s].IndexAbove&&e.OrgRight<=i&&t.ReportItems[s].OrgRight>i&&(e.IndexAbove=s),(t.ReportItems[s].OrgRight>i||e.OrgRight>i)&&(e.IndexAbove===t.ReportItems[s].IndexAbove?e.IndexAbove=t.ReportItems[s].Index:t.ReportItems[s].OrgIndexAbove===e.IndexAbove&&s>e.Index&&(t.ReportItems[s].IndexAbove=e.Index)),e.IndexAbove===t.ReportItems[s].IndexAbove&&e.Left>=n[s].Left&&e.Left<=t.ReportItems[s].Left+n[s].Width&&(e.IndexAbove=t.ReportItems[s].Index)}),t},_writeReportItems:function(n){var t=this;switch(n.CurrObj.Type){case"RichTextBox":return t._writeRichText(n);case"Image":case"Chart":case"Gauge":case"Map":return t._writeImage(n);case"Tablix":return t._writeTablix(n);case"Rectangle":return t._writeRectangle(n);case"SubReport":return t._writeSubreport(n);case"Line":return t._writeLine(n)}},_writeRichText:function(n){var i=n.Style,r=$("<div/>"),u=null,t=this,f,o,s,h,a,v;if(i+="display:table;",t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0)!==""&&(i+=t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0)),i+=t._getElementsNonTextStyle(n.RS,n.CurrObj.Elements),i+="position:relative;",n.$HTMLParent.attr("Style",i),n.CurrObj.Elements.SharedElements.IsToggleParent===!0||n.CurrObj.Elements.NonSharedElements.IsToggleParent===!0){f=$("<div/>"),f.attr("id",n.CurrObj.Elements.NonSharedElements.UniqueName),f.html("&nbsp"),n.CurrObj.Elements.NonSharedElements.ToggleState!==undefined&&n.CurrObj.Elements.NonSharedElements.ToggleState===!0?f.addClass("fr-render-drilldown-collapse"):f.addClass("fr-render-drilldown-expand");f.on("click",{ToggleID:n.CurrObj.Elements.NonSharedElements.UniqueName},function(n){t.options.reportViewer.toggleItem(n.data.ToggleID)});f.addClass("fr-core-cursorpointer"),n.$HTMLParent.append(f)}if(n.CurrObj.Elements.SharedElements.CanSort!==undefined){u=$("<div/>"),u.html("&nbsp"),o="None",s=forerunner.ssr.constants.sortDirection,n.CurrObj.Elements.NonSharedElements.SortState===2?(u.attr("class","fr-render-sort-descending"),o=s.desc):n.CurrObj.Elements.NonSharedElements.SortState===1?(u.attr("class","fr-render-sort-ascending"),o=s.asc):u.attr("class","fr-render-sort-unsorted");u.on("click",{Viewer:n.RS,SortID:n.CurrObj.Elements.NonSharedElements.UniqueName,Direction:o},function(n){n.data.Viewer.sort(n.data.Direction,n.data.SortID,!n.shiftKey)});n.$HTMLParent.append(u)}if(t._writeActions(n,n.CurrObj.Elements.NonSharedElements,r),n.CurrObj.Elements.NonSharedElements.UniqueName&&t._writeUniqueName(r,n.CurrObj.Elements.NonSharedElements.UniqueName),i="white-space:pre-wrap;word-break:break-word;word-wrap:break-word;",i+="margin:0;display: table-cell;",h=t._getTextDirection(n.CurrObj.Elements),h!==""?(i+="width:"+n.CurrLocation.Height+"mm;height:"+t._getWidth(n.CurrLocation.Width)+"mm;",i+="position:absolute;",a=-(t._getWidth(n.CurrLocation.Width)-n.CurrLocation.Height)/2,v=-(n.CurrLocation.Height-t._getWidth(n.CurrLocation.Width))/2,i+="left:"+v+"mm;top:"+a+"mm;",r.addClass(h)):i+="width:100%;height:100%;",n.CurrObj.Paragraphs.length===0)n.CurrObj.Elements.SharedElements.Value?(r.text(t._getNewLineFormatText(n.CurrObj.Elements.SharedElements.Value)),i+=t._getElementsTextStyle(n.CurrObj.Elements)):n.CurrObj.Elements.NonSharedElements.Value?(r.text(t._getNewLineFormatText(n.CurrObj.Elements.NonSharedElements.Value)),i+=t._getElementsTextStyle(n.CurrObj.Elements)):r.html("&nbsp");else{var c=null,l={},e={};e.Root="",i+="float: right",i+=t._getElementsTextStyle(n.CurrObj.Elements),$.each(n.CurrObj.Paragraphs,function(n,t){c===null&&(c=t.Paragraph.SharedElements.ListLevel),e[t.Paragraph.SharedElements.ListLevel]||(e[t.Paragraph.SharedElements.ListLevel]=[]),l[t.Paragraph.SharedElements.ListLevel]=t.Paragraph.NonSharedElements.UniqueName;var i;i=l[t.Paragraph.SharedElements.ListLevel-1]?l[t.Paragraph.SharedElements.ListLevel-1]:"Root",i={Parent:i,Value:t},e[t.Paragraph.SharedElements.ListLevel].push(i)}),t._writeRichTextItem(n,e,c,"Root",r)}return t._writeBookMark(n),r.attr("Style",i),n.$HTMLParent.append(r),u&&n.$HTMLParent.append(u),n.$HTMLParent},_writeRichTextItem:function(n,t,i,r,u){var f=null,e=this;$.each(t[i],function(o,s){var l,a,h,c,y,v;if(s.Parent===r){for(a="font-size:small;",s=s.Value,s.Paragraph.SharedElements.ListStyle===1?(f&&f.is("ol")||(f=new $("<OL />")),f.addClass(e._getListStyle(1,s.Paragraph.SharedElements.ListLevel)),l=new $("<LI />")):s.Paragraph.SharedElements.ListStyle===2?(f&&f.is("ul")||(f=new $("<UL />")),f.addClass(e._getListStyle(2,s.Paragraph.SharedElements.ListLevel)),l=new $("<LI />")):(f&&f.is("div")||(f=new $("<DIV />")),l=new $("<DIV />")),a+=e._getMeasurements(e._getMeasurmentsObj(s,i)),a+=e._getElementsStyle(n.RS,s.Paragraph),l.attr("Style",a),l.attr("name",s.Paragraph.NonSharedElements.UniqueName),h=0;h<s.TextRunCount;h++)y=!0,s.TextRuns[h].Elements.NonSharedElements.ActionInfo?(c=new $("<A />"),e._writeActions(n,s.TextRuns[h].Elements.NonSharedElements,c)):c=new $("<SPAN />"),s.TextRuns[h].Elements.SharedElements.Value&&s.TextRuns[h].Elements.SharedElements.Value!==""?c.text(e._getNewLineFormatText(s.TextRuns[h].Elements.SharedElements.Value)):s.TextRuns[h].Elements.NonSharedElements.Value&&s.TextRuns[h].Elements.NonSharedElements.Value!==""?c.text(e._getNewLineFormatText(s.TextRuns[h].Elements.NonSharedElements.Value)):(c.html("&nbsp"),y=!1),c.attr("Name",s.TextRuns[h].Elements.NonSharedElements.UniqueName),y&&(v="",v+=e._getMeasurements(e._getMeasurmentsObj(s.TextRuns[h],h)),v+=e._getElementsTextStyle(s.TextRuns[h].Elements),c.attr("Style",v)),l.append(c);t[i+1]&&e._writeRichTextItem(n,t,i+1,s.Paragraph.NonSharedElements.UniqueName,l),f.attr("style","width:100%;height:100%;"),f.append(l),u.append(f)}})},_writeUniqueName:function(n,t){n.attr("name",t)},_getImageURL:function(n,t){var i=this,r;return i.imageList||(i.imageList={}),i.imageList[t]||(r=i.options.reportViewer.options.reportViewerAPI+"/Image/?",r+="SessionID="+i.options.reportViewer.sessionID,r+="&ImageID="+t,r+="&"+i.options.renderTime,i.imageList[t]=r),i.imageList[t]},_writeImage:function(n){var i=new Image,r=this,u=n.Style+"display:block;max-height:100%;max-width:100%;"+r._getElementsStyle(n.RS,n.CurrObj.Elements),e,f,t,o;return u+=r._getMeasurements(r._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0),u+="overflow:hidden;",f="",o=n.CurrObj.Elements.SharedElements.Sizing,n.CurrObj.Type==="Image"?(e=n.CurrObj.Elements.NonSharedElements.ImageDataProperties.ImageName,n.CurrObj.Elements.NonSharedElements.ImageDataProperties.NonSharedImageDataProperties&&(t=n.CurrObj.Elements.NonSharedElements.ImageDataProperties.NonSharedImageDataProperties.ImageConsolidationOffsets)):(e=n.CurrObj.Elements.NonSharedElements.StreamName,n.CurrObj.Elements.NonSharedElements.ImageConsolidationOffsets&&(t=n.CurrObj.Elements.NonSharedElements.ImageConsolidationOffsets,u+="width:"+t.Width+"px;height:"+t.Height+"px")),t&&(f+="position:relative;top:"+t.Top*-1+"px;left:"+t.Left*-1+"px"),n.CurrObj.Elements.NonSharedElements.ActionImageMapAreas&&(i.useMap="#Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),i.onload=function(){var e=r._getNatural(this),u,f;t?(u=t.Width,f=t.Height):(u=i.width,f=i.height),r._writeActionImageMapAreas(n,u,f,t),r._resizeImage(this,o,e.height,e.width,n.CurrLocation.Height,n.CurrLocation.Width)},i.alt=r.options.reportViewer.locData.messages.imageNotDisplay,$(i).attr("style",f?f:"display:block;"),i.src=this._getImageURL(n.RS,e),r._writeActions(n,n.CurrObj.Elements.NonSharedElements,$(i)),r._writeBookMark(n),n.CurrObj.Elements.NonSharedElements.UniqueName&&r._writeUniqueName($(i),n.CurrObj.Elements.NonSharedElements.UniqueName),n.$HTMLParent.attr("style",u).append(i),n.$HTMLParent},_writeActions:function(n,t,i){if(t.ActionInfo)for(var r=0;r<t.ActionInfo.Count;r++)this._writeAction(n,t.ActionInfo.Actions[r],i)},_writeAction:function(n,t,i){var r=this;if(t.HyperLink)i.attr("href",t.HyperLink);else if(t.BookmarkLink){i.attr("href","#"),i.addClass("fr-core-cursorpointer");i.on("click",{BookmarkID:t.BookmarkLink},function(n){r._stopDefaultEvent(n),r.options.reportViewer.navigateBookmark(n.data.BookmarkID)})}else{i.addClass("fr-core-cursorpointer"),i.attr("href","#");i.on("click",{DrillthroughId:t.DrillthroughId},function(n){r._stopDefaultEvent(n),r.options.reportViewer.navigateDrillthrough(n.data.DrillthroughId)})}},_writeActionImageMapAreas:function(n,t,i,r){var y=n.CurrObj.Elements.NonSharedElements.ActionImageMapAreas,w=this,h=0,c=0,l,a,u,f,e,v,s,p,o;if(r&&(h=r.Left,c=r.Top),y){for(l=$("<MAP/>"),l.attr("name","Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),l.attr("id","Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),a=0;a<y.Count;a++)for(u=y.ActionInfoWithMaps[a],f=0;f<u.ImageMapAreas.Count;f++){e=$("<AREA />"),e.attr("tabindex",a+1),e.attr("style","text-decoration:none"),e.attr("alt",u.ImageMapAreas.ImageMapArea[f].Tooltip),u.Actions&&this._writeAction(n,u.Actions[0],e),s="";switch(u.ImageMapAreas.ImageMapArea[f].ShapeType){case 0:v="rect",s=parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[0]*t/100,10)+h+","+(parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[1]*i/100,10)+c)+","+(parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[2]*t/100,10)+h)+","+(parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[3]*i/100,10)+c);break;case 1:for(v="poly",p=u.ImageMapAreas.ImageMapArea[f].CoorCount,o=0;o<p;o++)s+=o%2==0?parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[o]*t/100,10)+h:parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[o]*i/100,10)+c,o<p-1&&(s+=",");break;case 2:v="circ",s=parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[0]*t/100,10)+h+","+(parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[1]*i/100,10)+c)+","+parseInt(u.ImageMapAreas.ImageMapArea[f].Coordinates[2]*t/100,10)}e.attr("shape",v),e.attr("coords",s),l.append(e)}n.$HTMLParent.append(l)}},_resizeImage:function(n,t,i,r,u,f){var e=0,o=this,s;if(i=o._convertToMM(i+"px"),r=o._convertToMM(r+"px"),i!==0&&r!==0)switch(t){case 0:$(n).css("height",i+"mm"),$(n).css("width",r+"mm");break;case 1:$(n).css("height",u+"mm"),$(n).css("width",f+"mm");break;case 2:(i/u>1||r/f>1)&&(i/u>=r/f?(e=u/i,$(n).css("height",u+"mm"),$(n).css("width",r*e+"mm"),$(n).css("max-height",u+"mm"),$(n).css("max-width",r*e+"mm"),$(n).css("min-height",u+"mm"),$(n).css("min-width",r*e+"mm")):(e=f/r,$(n).css("width",f+"mm"),$(n).css("height",i*e+"mm"),$(n).css("max-width",f+"mm"),$(n).css("max-height",i*e+"mm"),$(n).css("min-width",f+"mm"),$(n).css("min-height",i*e+"mm")));break;case 3:s=o._getNatural(n),$(n).css("height",o._convertToMM(s.height+"px")+"mm"),$(n).css("width",o._convertToMM(s.width+"px")+"mm"),$(n).css("max-height",o._convertToMM(s.height+"px")+"mm"),$(n).css("max-width",o._convertToMM(s.width+"px")+"mm")}},_writeBookMark:function(n){var t=$("<a/>");n.CurrObj.Elements.SharedElements.Bookmark?(t.attr("name",n.CurrObj.Elements.SharedElements.Bookmark),t.attr("id",n.CurrObj.Elements.SharedElements.Bookmark)):n.CurrObj.Elements.NonSharedElements.Bookmark&&(t.attr("name",n.CurrObj.Elements.NonSharedElements.Bookmark),t.attr("id",n.CurrObj.Elements.NonSharedElements.Bookmark)),t.attr("id")&&n.$HTMLParent.append(t)},_writeTablixCell:function(t,i,u,f){var o=new $("<TD/>"),e="",s,h,c=this,l,a;return e="vertical-align:top;padding:0;margin:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-ms-box-sizing: border-box;",e+=c._getFullBorderStyle(i.Cell.ReportItem),l=i.ColumnIndex,a=c.isNull(f)?i.RowIndex:f,s=c._getWidth(t.CurrObj.ColumnWidths.Columns[l].Width),h=t.CurrObj.RowHeights.Rows[a].Height,e+="overflow:hidden;width:"+s+"mm;max-width:"+s+"mm;",e+=forerunner.device.isMSIE()?"min-height:"+h+"mm;":"height:"+h+"mm;",i.RowSpan!==undefined&&o.attr("rowspan",i.RowSpan),i.ColSpan!==undefined&&o.attr("colspan",i.ColSpan),i.Cell.ReportItem.Elements.SharedElements.Style&&i.Cell.ReportItem.Elements.SharedElements.Style.BackgroundColor?e+="background-color:"+i.Cell.ReportItem.Elements.SharedElements.Style.BackgroundColor+";":i.Cell.ReportItem.Elements.NonSharedElements.Style&&i.Cell.ReportItem.Elements.NonSharedElements.Style.BackgroundColor&&(e+="background-color:"+i.Cell.ReportItem.Elements.NonSharedElements.Style.BackgroundColor+";"),o.attr("Style",e),o.append(c._writeReportItems(new n(t.RS,i.Cell.ReportItem,u,t.CurrObj,new $("<Div/>"),"margin:0;overflow:hidden;width:100%;height:100%;",new r(h,s)))),o},_writeTablix:function(n){var i=this,r=i._getDefaultHTMLTable(),h="border-collapse:collapse;padding:0;margin:0;",t,l=0,e=new $("<TABLE/>").css({display:"table",position:"absolute",top:"0px",left:"0px",padding:"0",margin:"0","border-collapse":"collapse"}),u=new $("<TABLE/>").css({display:"table",position:"absolute",top:"0px",left:"0px",padding:"0",margin:"0","border-collapse":"collapse"}),o,c,s;u.attr("CELLSPACING",0),u.attr("CELLPADDING",0);var a="",v=!1,y=!1;for(h+=i._getMeasurements(i._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex)),h+=i._getElementsStyle(n.RS,n.CurrObj.Elements),h+=i._getFullBorderStyle(n.CurrObj),r.attr("Style",h),o=$("<colgroup/>"),c=0;c<n.CurrObj.ColumnWidths.ColumnCount;c++)o.append($("<col/>").css("width",i._getWidth(n.CurrObj.ColumnWidths.Columns[c].Width)+"mm"));return r.append(o),forerunner.device.isFirefox()||(e.append(o.clone(!0,!0)),u.append(o.clone(!0,!0))),t=new $("<TR/>"),$.each(n.CurrObj.TablixRows,function(f,o){if(o.RowIndex!==l){r.append(t),n.CurrObj.RowHeights.Rows[o.RowIndex-1].FixRows===1&&e.append(t.clone(!0,!0)),t=new $("<TR/>");for(var s=l+1;s<o.RowIndex;s++)r.append(t),t=new $("<TR/>");l=o.RowIndex}o.UniqueName&&i._writeUniqueName(t,o.UniqueName),o.Type!=="Corner"&&a==="Corner"&&u.append(t.clone(!0,!0)),o.Type!=="RowHeader"&&a==="RowHeader"&&u.append(t.clone(!0,!0)),n.CurrObj.RowHeights.Rows[o.RowIndex].FixRows===1&&(v=!0),o.Type!=="BodyRow"&&n.CurrObj.ColumnWidths.Columns[o.ColumnIndex].FixColumn===1&&(y=!0),o.Type==="BodyRow"?$.each(o.Cells,function(r,u){t.append(i._writeTablixCell(n,u,r,o.RowIndex))}):o.Cell&&t.append(i._writeTablixCell(n,o,f)),a=o.Type}),r.append(t),v?e.hide():e=null,y?u.hide():u=null,s=$("<div style='position:relative'><\/div"),r.append(e),r.append(u),n.CurrObj.Elements.NonSharedElements.UniqueName&&i._writeUniqueName(r,n.CurrObj.Elements.NonSharedElements.UniqueName),n.$HTMLParent=s,i._writeBookMark(n),s.append(r),n.RS.floatingHeaders.push(new f(s,e,u)),s},_writeSubreport:function(n){var t=this;return n.Style+=t._getElementsStyle(n.RS,n.CurrObj.SubReportProperties),n.CurrObj=n.CurrObj.BodyElements,t._writeBookMark(n),t._writeRectangle(n)},_writeLine:function(n){var u=this,t=u._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),e="position:relative;width:"+t.Width+"mm;height:"+t.Height+"mm;",r;if(t.Width===0||t.Height===0)e+=u._getFullBorderStyle(n.CurrObj);else{var o=$("<Div/>"),f=Math.sqrt(Math.pow(t.Height,2)+Math.pow(t.Width,2)),i=Math.atan(t.Height/t.Width),s=f/2*Math.sin(i),h=f/2-Math.sqrt(Math.pow(f/2,2)+Math.pow(s,2));n.CurrObj.Elements.SharedElements.Slant===undefined||n.CurrObj.Elements.SharedElements.Slant===0||(i=i-2*i),r="position:absolute;top:"+s+"mm;left:"+h+"mm;",r+=u._getFullBorderStyle(n.CurrObj),r+="width:"+f+"mm;height:0;",r+="-moz-transform: rotate("+i+"rad);",r+="-webkit-transform: rotate("+i+"rad);",r+="-ms-transform: rotate("+i+"rad);",r+="transform: rotate("+i+"rad);",o.attr("Style",r),n.$HTMLParent.append(o)}return u._writeBookMark(n),n.$HTMLParent.attr("Style",e+n.Style),n.$HTMLParent},_getHeight:function(n){var r=this,i,t=n.clone().css({visibility:"hidden"});return t.find("img").remove(),$("body").append(t),i=t.outerHeight()+"px",t.remove(),r._convertToMM(i)},_getElementsStyle:function(n,t){var i="",r=this;return i+=r._getStyle(n,t.SharedElements.Style,t.NonSharedElements),i+r._getStyle(n,t.NonSharedElements.Style,t.NonSharedElements)},_getElementsTextStyle:function(n){var t="",i=this;return t+=i._getTextStyle(n.SharedElements.Style,n.NonSharedElements),t+i._getTextStyle(n.NonSharedElements.Style,n.NonSharedElements)},_getElementsNonTextStyle:function(n,t){var i="",r=this;return i+=r._getNonTextStyle(n,t.SharedElements.Style,t.NonSharedElements),i+r._getNonTextStyle(n,t.NonSharedElements.Style,t.NonSharedElements)},_getBorderSize:function(n,t){var o=this,i,f,r,e,u;return(i=n.Elements.SharedElements.Style,i?(f=i.BorderStyle,r=i["BorderStyle"+t],e=i.BorderWidth,u=i["BorderWidth"+t]):(i=n.Elements.NonSharedElements.Style,i&&(f=i.BorderStyle,r=i["BorderStyle"+t],e=i.BorderWidth,u=i["BorderWidth"+t])),!r&&f===0)?0:r===0?0:u?o._convertToMM(u):o._convertToMM(e)},_getPaddingSize:function(n,t){var u=this,i,r;return i=n.Elements.SharedElements.Style,i?r=i["Padding"+t]:(i=n.Elements.NonSharedElements.Style,i&&(r=i["Padding"+t])),u._convertToMM(r)},_getFullBorderStyle:function(n){var i=this,r="",t;return n.Elements?(t=n.Elements.SharedElements.Style,t!==undefined&&(t.BorderStyle!==undefined&&t.BorderStyle!==0&&(r+="border:"+t.BorderWidth+" "+i._getBorderStyle(t.BorderStyle)+" "+t.BorderColor+";"),(t.BorderStyleLeft!==undefined||t.BorderWidthLeft!==undefined||t.BorderColorLeft!==undefined)&&(r+="border-left:"+(t.BorderWidthLeft===undefined?t.BorderWidth:t.BorderWidthLeft)+" "+(t.BorderStyleLeft===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleLeft))+" "+(t.BorderColorLeft===undefined?t.BorderColor:t.BorderColorLeft)+";"),(t.BorderStyleRight!==undefined||t.BorderWidthRight!==undefined||t.BorderColorRight!==undefined)&&(r+="border-right:"+(t.BorderWidthRight===undefined?t.BorderWidth:t.BorderWidthRight)+" "+(t.BorderStyleRight===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleRight))+" "+(t.BorderColorRight===undefined?t.BorderColr:t.BorderColorRight)+";"),(t.BorderStyleTop!==undefined||t.BorderWidthTop!==undefined||t.BorderColorTop!==undefined)&&(r+="border-top:"+(t.BorderWidthTop===undefined?t.BorderWidth:t.BorderWidthTop)+" "+(t.BorderStyleTop===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleTop))+" "+(t.BorderColorTop===undefined?t.BorderColor:t.BorderColorTop)+";"),(t.BorderStyleBottom!==undefined||t.BorderWidthBottom!==undefined||t.BorderColorBottom!==undefined)&&(r+="border-bottom:"+(t.BorderWidthBottom===undefined?t.BorderWidth:t.BorderWidthBottom)+" "+(t.BorderStyleBottom===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleBottom))+" "+(t.BorderColorBottom===undefined?t.BorderColor:t.BorderColorBottom)+";")),t=n.Elements.NonSharedElements.Style,t!==undefined&&(t.BorderStyle!==undefined&&t.BorderStyle!==0&&(r+="border:"+t.BorderWidth+" "+i._getBorderStyle(t.BorderStyle)+" "+t.BorderColor+";"),(t.BorderStyleLeft!==undefined||t.BorderWidthLeft!==undefined||t.BorderColorLeft!==undefined)&&(r+="border-left:"+(t.BorderWidthLeft===undefined?t.BorderWidth:t.BorderWidthLeft)+" "+(t.BorderStyleLeft===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleLeft))+" "+(t.BorderColorLeft===undefined?t.BorderColor:t.BorderColorLeft)+";"),(t.BorderStyleRight!==undefined||t.BorderWidthRight!==undefined||t.BorderColorRight!==undefined)&&(r+="border-right:"+(t.BorderWidthRight===undefined?t.BorderWidth:t.BorderWidthRight)+" "+(t.BorderStyleRight===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleRight))+" "+(t.BorderColorRight===undefined?t.BorderColr:t.BorderColorRight)+";"),(t.BorderStyleTop!==undefined||t.BorderWidthTop!==undefined||t.BorderColorTop!==undefined)&&(r+="border-top:"+(t.BorderWidthTop===undefined?t.BorderWidth:t.BorderWidthTop)+" "+(t.BorderStyleTop===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleTop))+" "+(t.BorderColorTop===undefined?t.BorderColor:t.BorderColorTop)+";"),(t.BorderStyleBottom!==undefined||t.BorderWidthBottom!==undefined||t.BorderColorBottom!==undefined)&&(r+="border-bottom:"+(t.BorderWidthBottom===undefined?t.BorderWidth:t.BorderWidthBottom)+" "+(t.BorderStyleBottom===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleBottom))+" "+(t.BorderColorBottom===undefined?t.BorderColor:t.BorderColorBottom)+";")),r):""},_getMeasurementsInvert:function(n){var i=this,t="";return n?(n.Width!==undefined&&(t+="height:"+n.Width+"mm;",t+="min-height:"+n.Width+"mm;",t+="max-height:"+n.Width+"mm;"),n.Height!==undefined&&(t+="width:"+n.Height+"mm;",t+="min-width:"+n.Height+"mm;",t+="max-width:"+n.Height+"mm;"),n.zIndex&&(t+="z-index:"+n.zIndex+";"),t):""},_getMeasurements:function(n,t){var r=this,i="";return n?(n.Width!==undefined&&(i+="width:"+r._getWidth(n.Width)+"mm;",i+="min-width:"+r._getWidth(n.Width)+"mm;",i+="max-width:"+r._getWidth(n.Width)+"mm;"),t&&n.Height!==undefined&&(i+="height:"+n.Height+"mm;",i+="min-height:"+n.Height+"mm;",i+="max-height:"+n.Height+"mm;"),n.zIndex&&(i+="z-index:"+n.zIndex+";"),i):""},_getStyle:function(n,t,i){var u=this,r="";return t?(r+=u._getNonTextStyle(n,t,i),r+u._getTextStyle(t,i)):r},_backgroundRepeatTypesMap:function(){return{0:"repeat",1:"no-repeat",2:"repeat-x",3:"repeat-y"}},_getImageStyleURL:function(n,t){var i=this;return"url("+i._getImageURL(n,t)+")"},_getNonTextStyle:function(n,t){var r=this,i="";return t?(t.BackgroundColor&&(i+="background-color:"+t.BackgroundColor+";"),t.BackgroundImage&&(i+="background-image:"+r._getImageStyleURL(n,t.BackgroundImage.ImageName)+";"),t.BackgroundRepeat!==undefined&&r._backgroundRepeatTypesMap()[t.BackgroundRepeat]&&(i+="background-repeat:"+r._backgroundRepeatTypesMap()[t.BackgroundRepeat]+";"),i):i},_getTextDirection:function(n){var t="";return n.SharedElements.Style&&n.SharedElements.Style.WritingMode!==undefined&&(n.SharedElements.Style.WritingMode===1&&(t="fr-rotate-90"),n.SharedElements.Style.WritingMode===2&&(t="fr-rotate-270")),n.NonSharedElements.Style&&n.NonSharedElements.Style.WritingMode!==undefined&&(n.NonSharedElements.Style.WritingMode===1&&(t="fr-rotate-90"),n.NonSharedElements.Style.WritingMode===2&&(t="fr-rotate-270")),t},_getTextStyle:function(n,t){var r=this,i="";return n?(n.PaddingBottom!==undefined&&(i+="padding-bottom:"+n.PaddingBottom+";"),n.PaddingLeft!==undefined&&(i+="padding-left:"+n.PaddingLeft+";"),n.PaddingRight!==undefined&&(i+="padding-right:"+n.PaddingRight+";"),n.PaddingTop!==undefined&&(i+="padding-top:"+n.PaddingTop+";"),n.UnicodeBiDi!==undefined&&(i+="unicode-bidi:"+r._getBiDi(n.UnicodeBiDi)+";"),n.VerticalAlign!==undefined&&(i+="vertical-align:"+r._getVAligh(n.VerticalAlign)+";"),n.Direction!==undefined&&(i+="Direction:"+r._getDirection(n.Direction)+";"),n.TextAlign!==undefined&&(i+="text-align:"+r._getTextAlign(n.TextAlign,t)+";"),n.FontStyle!==undefined&&(i+="font-style:"+r._getFontStyle(n.FontStyle)+";"),n.FontWeight!==undefined&&(i+="font-weight:"+r._getFontWeight(n.FontWeight)+";"),n.FontFamily!==undefined&&(i+="font-family:"+n.FontFamily+";"),n.FontSize!==undefined&&(i+="font-size:"+n.FontSize+";"),n.TextDecoration!==undefined&&(i+="text-decoration:"+r._getTextDecoration(n.TextDecoration)+";"),n.Color!==undefined&&(i+="color:"+n.Color+";"),i):i},_getCalendar:function(n){switch(n){case 0:return"Gregorian";case 1:return"GregorianArabic";case 2:return"GregorianMiddleEastFrench";case 3:return"GregorianTransliteratedEnglish";case 4:return"GregorianTransliteratedFrench";case 5:return"GregorianUSEnglish";case 6:return"Hebrew";case 7:return"Hijri";case 9:return"Korean";case 10:return"Julian";case 11:return"Taiwan";case 12:return"ThaiBuddist"}return"Gregorian"},_getTextDecoration:function(n){switch(n){case 0:return"None";case 1:return"Underline";case 2:return"Overline";case 3:return"LineThrough"}return"None"},_getFontWeight:function(n){switch(n){case 0:return"Normal";case 1:return"Thin";case 2:return"ExtraLight";case 3:return"Light";case 4:return"Medium";case 5:return"SemiBold";case 6:return"Bold";case 7:return"ExtraBold";case 8:return"Heavy"}return"General"},_getFontStyle:function(n){switch(n){case 0:return"Normal";case 1:return"Italic"}return"Normal"},_getTextAlign:function(n,t){switch(n){case 0:if(t.TypeCode===undefined)return"Left";switch(t.TypeCode){case 3:case 6:case 7:case 9:case 11:case 12:case 13:case 14:case 15:case 16:return"Right";case 4:case 17:case 18:return"Left";default:return"Left"}break;case 1:return"Left";case 2:return"Center";case 3:return"Right"}},_getDirection:function(n){switch(n){case 0:return"LTR";case 1:return"RTL"}return"LTR"},_getLayoutFlow:function(n){switch(n){case 0:return"Horizontal";case 1:return"Vertical";case 2:return"Rotate270"}return"Horizontal"},_getVAligh:function(n){switch(n){case 0:return"Top";case 1:return"Middle";case 2:return"Bottom"}return"Top"},_getBiDi:function(n){switch(n){case 0:return"normal";case 1:return"embed";case 2:return"BiDiOverride"}return"normal"},_getDefaultHTMLTable:function(){var n=$("<Table/>");return n.attr("CELLSPACING",0),n.attr("CELLPADDING",0),n},_getBorderStyle:function(n){switch(n){case 0:return"None";case 1:return"Dotted";case 2:return"Dashed";case 3:return"Solid";case 4:return"Double"}return"None"},_getMeasurmentsObj:function(n,t){var i=null;return n.Measurement&&(i=n.Measurement.Measurements[t]),i},_convertToMM:function(n){if(!n)return 0;var i=n.match(/\D+$/),t=n.match(/\d+/);i.length===1&&(i=i[0]),t.length===1&&(t=t[0]);switch(i){case"px":return t/3.78;case"pt":return t*.352777777778;case"in":return t*25.4;case"mm":return t;case"cm":return t*10;case"em":return t*4.2175176}return t},_getListStyle:function(n,t){var i;if(n===1)switch(t%3){case 1:i="decimal";break;case 2:i="lower-roman";break;case 0:i="lower-latin"}else if(n===2)switch(t%3){case 0:i="square";break;case 1:i="disc";break;case 2:i="circle"}return"fr-render-list-"+i},_stopDefaultEvent:function(n){window.ActiveXObject?window.event.returnValue=!1:(n.preventDefault(),n.stopPropagation())},_getNatural:function(n){if(n.naturalWidth!==undefined&&n.naturalHeight!==undefined)return{width:n.naturalWidth,height:n.naturalHeight};var t=new Image;return t.src=n.src,{width:t.width,height:t.height}},isNull:function(n){return n===null||n===undefined?!0:!1},_getWidth:function(n){return n},_getNewLineFormatText:function(n){return n.replace(/\r\n+/g,"\n")}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events,t="fr-param-container";$.widget(i.getFullname(i.reportParameter),{options:{$reportViewer:null,pageNum:null,$appContainer:null},$params:null,_formInit:!1,_paramCount:0,_defaultValueExist:!1,_loadedForDefault:!0,_reportDesignError:null,_init:function(){var n=this;n.element.html(null)},_destroy:function(){},_render:function(){var n=this,i;n.element.html(null),i=new $("<div class='"+t+" fr-core-widget'><form class='fr-param-form' onsubmit='return false'><div class='fr-param-element-border'><input type='text' style='display:none'><\/div><div><div class='fr-param-submit-container'><input name='Parameter_ViewReport' type='button' class='fr-param-viewreport' value='"+n.options.$reportViewer.locData.paramPane.viewReport+"'/><\/div><div class='fr-param-cancel-container'><input type='button' class='fr-param-cancel' value='"+n.options.$reportViewer.locData.paramPane.cancel+"'/><\/div><\/div><\/form><div style='height:65px;'/><\/div>"),n.element.css("display","block"),n.element.html(i),n.$params=i,n._formInit=!0},getNumOfVisibleParameters:function(){var n=this;return n.$numVisibleParams!==undefined?n.$numVisibleParams:0},_parameterDefinitions:{},_hasPostedBackWithoutSubmitForm:!1,updateParameterPanel:function(n,t,i,r){this.removeParameter(),this._hasPostedBackWithoutSubmitForm=!0,this.writeParameterPanel(n,i,t,r)},writeParameterPanel:function(i,r,u,f){var e=this,o,s;e.$params===null&&e._render(),e.options.pageNum=r,e._paramCount=parseInt(i.Count,10),e._defaultValueExist=i.DefaultValueExist,e._loadedForDefault=!0,e._render(),e.$numVisibleParams=0,o=$(".fr-param-element-border",e.$params),$.each(i.ParametersList,function(n,t){e._parameterDefinitions[t.Name]=t,t.Prompt!==""?(o.append(e._writeParamControl(t,new $("<div />"),r)),e.$numVisibleParams+=1):e._checkHiddenParam(t)}),e._reportDesignError!==null&&(e._reportDesignError+=e.options.$reportViewer.locData.messages.contactAdmin),e._resetLabelWidth(),e.resetValidateMessage(),$(".fr-param-form",e.$params).validate({errorPlacement:function(n,t){$(t).is(":radio")?n.appendTo(t.parent("div").next("span")):$(t).attr("IsMultiple")==="True"?n.appendTo(t.parent("div").next("span")):n.appendTo(t.nextAll(".fr-param-error-placeholder"))},highlight:function(n){$(n).is(":radio")?$(n).parent("div").addClass("fr-param-error"):$(n).addClass("fr-param-error")},unhighlight:function(n){$(n).is(":radio")?$(n).parent("div").removeClass("fr-param-error"):$(n).removeClass("fr-param-error")}});$(".fr-param-viewreport",e.$params).on("click",function(){e._submitForm(r)});$(".fr-param-cancel",e.$params).on("click",function(){e._cancelForm()});u!==!1?e._paramCount===i.DefaultValueCount&&e._loadedForDefault?e._submitForm(r):(f!==!1&&e._trigger(n.render),e.options.$reportViewer.removeLoadingIndicator()):(f!==!1&&e._trigger(n.render),e.options.$reportViewer.removeLoadingIndicator()),s=e.element.find("."+t),s.removeAttr("style"),e._setDatePicker();$(document).on("click",function(n){e._checkExternalClick(n)});$(":text",e.$params).each(function(){var n=$(this);n.on("blur",function(){e.options.$reportViewer.onInputBlur()});n.on("focus",function(){e.options.$reportViewer.onInputFocus()})})},_submittedParamsList:null,_submitForm:function(t){var i=this,r;if(i._closeAllDropdown(),i._reportDesignError!==null){forerunner.dialog.showMessageBox(i.options.$appContainer,i._reportDesignError);return}r=i.getParamsList(),r&&(i.options.$reportViewer.loadReportWithNewParameters(r,t),i._submittedParamsList=r,i._trigger(n.submit)),i._hasPostedBackWithoutSubmitForm=!1},revertParameters:function(){var n=this,e,f,i,u,r,t,o;if(n.getParamsList()!==n._submittedParamsList&&n._submittedParamsList!==null)for(n._hasPostedBackWithoutSubmitForm&&(n.refreshParameters(n._submittedParamsList),n._hasPostedBackWithoutSubmitForm=!1,n.options.$reportViewer.invalidateReportContext()),e=JSON.parse(n._submittedParamsList),f=e.ParamsList,u=0;u<f.length;u++)r=f[u],t=n._parameterDefinitions[r.Parameter],t.MultiValue?t.ValidValues!==""?(i=$(".fr-paramname-"+t.Name+"-dropdown-cb",n.$params),n._setCheckBoxes(i,r.Value),n._setMultipleInputValues(t)):(i=$(".fr-paramname-"+t.Name),o=$(".fr-paramname-"+t.Name+"-dropdown-textArea"),o.val(n._getTextAreaValue(r.Value,!0)),i.val(n._getTextAreaValue(r.Value,!1)),i.attr("jsonValues",JSON.stringify(r.Value))):(i=$(".fr-paramname-"+t.Name,n.$params),t.ValidValues!==""?n._setSelectedIndex(i,r.Value):t.Type==="Boolean"?n._setRadioButton(i,r.Value):i.val(r.Value))},_cancelForm:function(){var t=this;t._closeAllDropdown(),t.revertParameters(),t._trigger(n.cancel,null,{})},_setDatePicker:function(){var n=this,t=n._getDatePickerLoc();t&&$.datepicker.setDefaults(t),$.each(n.element.find(".hasDatepicker"),function(t,i){$(i).datepicker("option","buttonImage",forerunner.config.forerunnerFolder()+"/reportviewer/Images/calendar.png"),$(i).datepicker("option","buttonImageOnly",!0),$(i).datepicker("option","buttonText",n.options.$reportViewer.locData.paramPane.datePicker)})},_getPredefinedValue:function(n){var t=this;return t._hasDefaultValue(n)?n.MultiValue===!1?n.DefaultValues[0]:n.DefaultValues:null},_writeParamControl:function(n,t,i){var r=this,s=new $("<div class='fr-param-label' style='width:100%;'>"+n.Prompt+"<\/div>"),e=!0,f=r._checkDependencies(n),o=new $("<div class='fr-param-item-container'><\/div>"),h=new $("<span class='fr-param-error-placeholder'/>"),u=null;if(n.MultiValue===!0?n.ValidValues!==""?u=r._writeDropDownWithCheckBox(n,f):(e=!1,u=r._writeDropDownWithTextArea(n,f)):u=n.ValidValues!==""?r._writeDropDownControl(n,f,i):n.Type==="Boolean"?r._writeRadioButton(n,f,i):r._writeTextArea(n,f,i),u!==undefined&&e)u.on("keydown",function(n){n.keyCode===13&&r._submitForm(i)});return o.append(u).append(r._addNullableCheckBox(n,u)).append(h),t.append(s).append(o),t},_getParameterControlProperty:function(n,t){var i=this;t.attr("AllowBlank",n.AllowBlank),n.Nullable===!1&&n.AllowBlank===!1&&t.attr("required","true").watermark(i.options.$reportViewer.locData.paramPane.required),t.attr("ErrorMessage",n.ErrorMessage)},_addNullableCheckBox:function(n,t){var f=this,r,i,u;if(n.Nullable===!0){r=new $("<Span />"),i=new $("<Input type='checkbox' class='fr-param-checkbox' name='"+n.Name+"' />");i.on("click",function(){i.attr("checked")==="checked"?(i.removeAttr("checked"),n.Type==="Boolean"?$(".fr-param-radio."+n.Name).removeAttr("disabled"):t.removeAttr("disabled").removeClass("fr-param-disable").addClass("fr-param-enable")):(i.attr("checked","true"),n.Type==="Boolean"?$(".fr-param-radio."+n.Name).attr("disabled","true"):t.attr("disabled","true").removeClass("fr-param-enable").addClass("fr-param-disable"))});return u=new $("<Label class='fr-param-label-null' />"),u.html(f.options.$reportViewer.locData.paramPane.nullField),r.append(i).append(u),r}return null},_setRadioButton:function(n,t){for(var i=0;i<n.length;i++)n[i].checked=n[i].value===t?!0:!1},_writeRadioButton:function(n,t,i){var r=this,s=r._getPredefinedValue(n),h=r.options.$reportViewer.locData.paramPane,f=[],u,e,o,c;for(f[0]={display:h.isTrue,value:"True"},f[1]={display:h.isFalse,value:"False"},u=r._createDiv("fr-param-checkbox-container"),u.attr("ismultiple",n.MultiValue),u.attr("datatype",n.Type),e=0;e<f.length;e++){if(o=new $("<input type='radio' class='fr-param fr-param-radio fr-paramname-"+n.Name+"' name='"+n.Name+"' value='"+f[e].value+"' datatype='"+n.Type+"' />"),t)r._disabledSubSequenceControl(u);else if(r._getParameterControlProperty(n,o),s&&(n.Nullable===!0?o.attr("disabled","true"):s===f[e].value&&o.attr("checked","true")),r._paramCount===1)o.on("click",function(){r._submitForm(i)});c=new $("<label class='fr-param-radio-label'>"+f[e].display+"<\/label>"),u.append(o),u.append(c)}return u},_writeTextArea:function(n,t,i){var u=this,f=u._getPredefinedValue(n),r=new $("<input class='fr-param fr-paramname-"+n.Name+"' name='"+n.Name+"' type='text' size='100' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' />");if(t)return u._disabledSubSequenceControl(r),r;u._getParameterControlProperty(n,r);switch(n.Type){case"DateTime":r.datepicker({showOn:"button",dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,showButtonPanel:!0,onClose:function(){r.removeAttr("disabled"),$(".fr-paramname-"+n.Name,u.$params).valid(),u._paramCount===1&&u._submitForm(i)},beforeShow:function(){r.attr("disabled",!0)}}),r.attr("dateISO","true"),f&&r.datepicker("setDate",u._getDateTimeFromDefault(f));break;case"Integer":case"Float":r.attr("number","true"),f&&r.val(f);break;case"String":f&&r.val(f)}return r},_setSelectedIndex:function(n,t){for(var r=n[0],i=0;i<r.length;i++)if(r[i].value===t){r[i].selected=!0;return}},_writeDropDownControl:function(n,t,i){var u=this,s=!1,h=u._getPredefinedValue(n),r=new $("<select class='fr-param fr-param-select fr-paramname-"+n.Name+"' name='"+n.Name+"' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' readonly='true'>"),c,f,e,o;if(t)return u._disabledSubSequenceControl(r),r;for(u._getParameterControlProperty(n,r),c=new $("<option value=''>&#60Select a Value&#62<\/option>"),r.append(c),f=0;f<n.ValidValues.length;f++)e=n.ValidValues[f].Value,o=new $("<option value='"+e+"'>"+n.ValidValues[f].Key+"<\/option>"),h&&h===e&&(o.attr("selected","true"),r.attr("title",n.ValidValues[f].Key),s=!0),r.append(o);s||(u._loadedForDefault=!1);r.on("change",function(){r.attr("title",$(this).find("option:selected").text())});if(u._paramCount===1)r.on("change",function(){u._submitForm(i)});return r},_createInput:function(n,t,i,r){var u=new $("<Input />"),f;for(u.attr("type",t),u.attr("name",n.Name),u.attr("ismultiple",n.MultiValue),u.attr("datatype",n.Type),i&&u.attr("readonly",!0),f=0;f<r.length;f++)u.addClass(r[f]);return u},_createDiv:function(n){for(var i=new $("<div />"),t=0;t<n.length;t++)i.addClass(n[t]);return i},_createLabel:function(n){for(var i=new $("<label />"),t=0;t<n.length;t++)i.addClass(n[t]);return i},_writeDropDownWithCheckBox:function(n,t){var i=this,o=i._getPredefinedValue(n),s=i._createDiv(["fr-param-element-container"]),u=i._createInput(n,"text",!0,["fr-param-client","fr-param-dropdown-textbox","fr-paramname-"+n.Name]),h=i._createDiv(["fr-param-dropdown-iconcontainer","fr-core-cursorpointer"]),nt=i._createDiv(["fr-param-dropdown-icon"]),y,c,p,l,b,r,a,f,w,e;if(h.append(nt),t)return i._disabledSubSequenceControl(u),s.append(u).append(h),s;i._getParameterControlProperty(n,u),y=i._createInput(n,"hidden",!1,["fr-param","fr-paramname-"+n.Name+"-hidden"]);h.on("click",function(){i._popupDropDownPanel(n)});u.on("click",function(){i._popupDropDownPanel(n)});for(c=i._createDiv(["fr-param-dropdown","fr-paramname-"+n.Name+"-dropdown-container"]),c.attr("value",n.Name),p=i._getDefaultHTMLTable(),n.ValidValues.push({Key:"Select All",Value:"Select All"}),l="",b="",r=0;r<n.ValidValues.length;r++){r===0?(w=n.ValidValues[n.ValidValues.length-1],a=w.Key,f=w.Value):(a=n.ValidValues[r-1].Key,f=n.ValidValues[r-1].Value);var k=new $("<TR />"),d=new $("<TD/>"),g=new $("<Span />"),v=i._createInput(n,"checkbox",!1,["fr-param-dropdown-checkbox","fr-paramname-"+n.Name+"-dropdown-cb"]);v.attr("value",f),o&&i._contains(o,f)&&(v.attr("checked","true"),l+=a+",",b+=f+",");v.on("click",function(){this.value==="Select All"&&(this.checked===!0&&$(".fr-paramname-"+n.Name+"-dropdown-cb",i.$params).each(function(){this.checked=!0}),this.checked===!1&&$(".fr-paramname-"+n.Name+"-dropdown-cb",i.$params).each(function(){this.checked=!1}))});e=i._createLabel(["fr-param-dropdown-label","fr-paramname-"+n.Name+"-dropdown-"+r.toString()+"-label"]),e.attr("for",n.Name+"_DropDown_"+r.toString()),e.attr("value",f),e.html(a),g.append(v).append(e),d.append(g),k.append(d),p.append(k)}return c.append(p),o&&(u.val(l.substr(0,l.length-1)),y.val(JSON.stringify(o))),s.append(u).append(y).append(h).append(c),s},_writeDropDownWithTextArea:function(n,t){var i=this,u=i._getPredefinedValue(n),f=i._createDiv(["fr-param-element-container"]),r=i._createInput(n,"text",!0,["fr-param","fr-param-dropdown-textbox","fr-paramname-"+n.Name]),e=i._createDiv(["fr-param-dropdown-iconcontainer","fr-core-cursorpointer"]),h=i._createDiv(["fr-param-dropdown-icon"]),o,s;if(e.append(h),t)return i._disabledSubSequenceControl(r),f.append(r).append(e),f;i._getParameterControlProperty(n,r);r.on("click",function(){i._popupDropDownPanel(n)});e.on("click",function(){i._popupDropDownPanel(n)});return o=i._createDiv(["fr-param-dropdown","fr-paramname-"+n.Name+"-dropdown-container"]),o.attr("value",n.Name),s=new $("<textarea class='fr-param-dropdown-textarea fr-paramname-"+n.Name+"-dropdown-textArea' />"),u&&(s.val(i._getTextAreaValue(u,!0)),r.val(i._getTextAreaValue(u,!1)).attr("title",i._getTextAreaValue(u,!1)),r.attr("jsonValues",JSON.stringify(u))),o.append(s),f.append(r).append(e).append(o),f},_getTextAreaValue:function(n,t){var i="",r,u;if(t){for(r=0;r<n.length;r++)i+=n[r]+"\n";i=i.substr(0,i.length-1)}else{for(u=0;u<n.length;u++)i+=n[u]+",";i=i.substr(0,i.length-1)}return i},_setCheckBoxes:function(n,t){for(var i=0;i<n.length;i++)n[i].checked=$.inArray(n[i].value,t)>=0?!0:!1},_setMultipleInputValues:function(n){var i=this,t,e,r=$(".fr-paramname-"+n.Name,i.$params).filter(":visible"),u,f,o;e=r.val(),r.hasClass("fr-param-client")?(u="",f=[],$(".fr-paramname-"+n.Name+"-dropdown-cb",i.$params).each(function(t){this.checked&&this.value!=="Select All"&&(u+=$(".fr-paramname-"+n.Name+"-dropdown-"+t.toString()+"-label",i.$params).html()+",",f.push(this.value))}),t=u.substr(0,u.length-1),$(".fr-paramname-"+n.Name,i.$params).val(t).attr("title",t),$(".fr-paramname-"+n.Name+"-hidden",i.$params).val(JSON.stringify(f))):(t=$(".fr-paramname-"+n.Name+"-dropdown-textArea",i.$params).val(),o=t.split("\n"),t=t.replace(/\n+/g,","),t.charAt(t.length-1)===","&&(t=t.substr(0,t.length-1)),r.val(t).attr("title",t),r.attr("jsonValues",JSON.stringify(o))),e!==t&&r.change()},_popupDropDownPanel:function(n){var t=this,u=$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params).is(":visible");if(t._closeAllDropdown(),!u){var f=t.$params,i=$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params),r=$(".fr-paramname-"+n.Name,t.$params),e=r.offset().top;r.parent().css("z-index",1),f.height()-e-r.height()<i.height()?i.css("top",(i.height()+10)*-1+4):i.css("top",r.height()+15),i.is(":hidden")?i.width(r.width()+20).addClass("fr-param-dropdown-show").show(10):t._closeDropDownPanel(n)}},_closeDropDownPanel:function(n){var t=this;t._setMultipleInputValues(n),$(".fr-paramname-"+n.Name+"-dropdown-container",t.$params).removeClass("fr-param-dropdown-show").hide(),$(".fr-paramname-"+n.Name,t.$params).focus().blur().parent().css("z-index","inherit")},_closeAllDropdown:function(){var n=this;$(".fr-param-dropdown-show",n.$params).filter(":visible").each(function(t,i){n._closeDropDownPanel({Name:$(i).attr("value")})})},_checkExternalClick:function(n){var i=this,t=$(n.target);t.hasClass("fr-param-dropdown-img")||t.hasClass("fr-param-dropdown-textbox")||t.hasClass("fr-param-dropdown")||t.hasClass("fr-param-dropdown-label")||t.hasClass("fr-param-dropdown-checkbox")||t.hasClass("fr-param-dropdown-icon")||t.hasClass("fr-param-dropdown-textarea")||i._closeAllDropdown()},getParamsList:function(n){var t=this,i,r,u,f;if(n||$(".fr-param-form",t.$params).length!==0&&$(".fr-param-form",t.$params).valid()===!0){i=[],$(".fr-param",t.$params).filter(":text").each(function(){if($(this).attr("ismultiple")==="false")i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:t._isParamNullable(this)});else{var n=$(this).attr("jsonValues");i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:JSON.parse(n?n:null)})}}),$(".fr-param",t.$params).filter("[type='hidden']").each(function(){$(this).attr("ismultiple")==="false"?i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:t._isParamNullable(this)}):i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:JSON.parse(t._isParamNullable(this))})}),$(".fr-param",t.$params).filter("select").each(function(){i.push({Parameter:this.name,IsMultiple:$(this).attr("ismultiple"),Type:$(this).attr("datatype"),Value:t._isParamNullable(this)})}),r={},$(".fr-param",t.$params).filter(":radio").each(function(){this.name in r||(r[this.name]=null),this.checked===!0&&(r[this.name]=t._isParamNullable(this))});for(u in r)i.push({Parameter:u,IsMultiple:"",Type:"Boolean",Value:r[u]});return f={ParamsList:i},JSON.stringify(f)}return null},_isParamNullable:function(n){var t=$(".fr-param-checkbox",this.$params).filter(".fr-paramname-"+n.Name).first();return t.attr("checked")==="checked"||n.value===""?null:n.value},_resetLabelWidth:function(){var n=0;$(".fr-param-label",this.$params).each(function(t,i){$(i).width()>n&&(n=$(i).width())}),$(".fr-param-label",this.$params).each(function(t,i){$(i).width(n)})},resetValidateMessage:function(){var t=this,n=t.options.$reportViewer.locData.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,remote:n.remote,email:n.email,url:n.url,date:n.date,dateISO:n.dateISO,number:n.number,digits:n.digits,maxlength:$.validator.format(n.maxlength),minlength:$.validator.format(n.minlength),rangelength:$.validator.format(n.rangelength),range:$.validator.format(n.range),max:$.validator.format(n.max),min:$.validator.format(n.min)})},removeParameter:function(){var n=this;n._formInit=!1,n.$params=null,$("."+t,n.element).detach(),n._parameterDefinitions={}},_getDefaultHTMLTable:function(){return $("<Table cellspacing='0' cellpadding='0'/>")},_contains:function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1},_hasDefaultValue:function(n){var t=this;return t._defaultValueExist&&$.isArray(n.DefaultValues)},_getDateTimeFromDefault:function(n){if(!n||n.length<9)return null;if(/^(\d{4})-(0\d{1}|1[0-2])-(0\d{1}|[12]\d{1}|3[01])$/.test(n))return n;var t=new Date(n.substr(0,n.indexOf(" ")));return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},_checkDependencies:function(n){var t=this,i=!1;return $.isArray(n.Dependencies)&&n.Dependencies.length&&$.each(n.Dependencies,function(n,r){var u=$(".fr-paramname-"+r,t.$params);u.change(function(){t.refreshParameters()}),u.val()===""&&(i=!0)}),i},refreshParameters:function(n){var t=this,i=n?n:t.getParamsList(!0);i&&t.options.$reportViewer.refreshParameters(i,!1,-1,!1)},_disabledSubSequenceControl:function(n){n.attr("disabled",!0).addClass("fr-param-disable")},_checkHiddenParam:function(n){var t=this;t._hasDefaultValue(n)||console.log(n.Name+" does not have a default value.")},_getDatePickerLoc:function(){var n=this;return n.options.$reportViewer.locData.datepicker}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportDocumentMap),{options:{$reportViewer:null},_create:function(){},_init:function(){},write:function(n){var i=this,t;this.element.html(""),t=new $("<div class='fr-docmap-panel fr-docmap-panel-layout fr-core-widget'/>"),t.append(i._writeDocumentMapItem(n.DocumentMap,0)),i.element.append(t)},_writeDocumentMapItem:function(n,t){var e=this,i=new $("<div />"),u,f,r,o;t!==0&&i.css("margin-left","34px"),u=new $("<div />"),u.addClass("fr-docmap-item").attr("title","Navigate to "+n.Label).html(n.Label);u.on("click",{UniqueName:n.UniqueName},function(n){e.options.$reportViewer.navigateDocumentMap(n.data.UniqueName)});if(n.Children){f=new $("<DIV />"),f.addClass("fr-docmap-parent-container"),e._setFocus(f),r=new $("<div class='fr-docmap-icon'/>"),t===0?r.addClass("fr-docmap-icon-up"):r.addClass("fr-docmap-icon-down");r.on("click",function(){var n=i.find("[level='"+t+"']");n.is(":visible")?(i.find("[level='"+t+"']").slideUpHide(),r.removeClass("fr-docmap-icon-up").addClass("fr-docmap-icon-down")):(i.find("[level='"+t+"']").slideUpShow(),r.removeClass("fr-docmap-icon-down").addClass("fr-docmap-icon-up"))});u.addClass("fr-docmap-item-root"),f.append(r),f.append(u),i.append(f),o=new $("<div level='"+t+"'>"),$.each(n.Children,function(n,i){o.append(e._writeDocumentMapItem(i,t+1))}),i.append(o),t!==0&&o.hide()}else i.addClass("fr-docmap-item-container"),e._setFocus(i),i.append(u);return i},_setFocus:function(n){n.hover(function(){$(this).addClass("fr-docmap-item-highlight")},function(){$(this).removeClass("fr-docmap-item-highlight")})}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname("settingsPairWidget"),{options:{label1:null,name1:null,text1:null,unit1:null,label2:null,name2:null,text2:null,unit2:null},_init:function(){var n=this,i="",t,r;n.options.name1&&(i="name='"+n.options.name1+"'"),t="",n.options.name2&&(t="name='"+n.options.name2+"'"),n.element.html(""),r=new $("<table class=fr-print-settings><tr><td><label class='fr-print-label'>"+n.options.label1+"<\/label><\/td><td><input class='fr-print-text' "+i+" type='text' value='"+n.options.text1+"'/><\/td><td><label class='fr-print-unit-label'>"+n.options.unit1+"<\/label><\/td><\/tr><tr><td><label class='fr-print-label'>"+n.options.label2+"<\/label><\/td><td><input class='fr-print-text' "+t+" type='text' value='"+n.options.text2+"'/><\/td><td><label class='fr-print-unit-label'>"+n.options.unit2+"<\/label><\/td><\/tr><\/table>"),n.element.append(r),n.element.addClass("fr-print-settings-pair-widget")}}),$.widget(n.getFullname(n.reportPrint),{options:{$reportViewer:null,$appContainer:null},_create:function(){},_init:function(){var n=this;n.locData=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer")},setPrint:function(n){var t=this,i=t.locData.print,r=i.unit,u,f;t.element.html(""),u=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-printreport",i.title,"fr-print-cancel",i.cancel),f=new $("<div class='fr-core-dialog-innerPage fr-core-center'>"+u+"<form class='fr-print-form fr-core-dialog-form'><div class='fr-print-options-label'>"+i.pageLayoutOptions+"<\/div><div class=fr-print-height-width-id><\/div><div class='fr-print-orientation-container'><div class='fr-print-portrait'><\/div><div class='fr-print-landscape'><\/div><\/div><div class='fr-print-margins-label'>"+i.margin+"<\/div><div class=fr-print-top-bottom-id><\/div><div class=fr-print-left-right-id><\/div><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-print-submit-id fr-core-dialog-submit fr-core-dialog-button' value='"+i.print+"'/><\/div><\/div><\/form><\/div>"),t.element.append(f),t.element.find(".fr-print-height-width-id").settingsPairWidget({label1:i.pageHeight,name1:"PageHeight",text1:t._unitConvert(n.PageHeight),unit1:r,label2:i.pageWidth,name2:"PageWidth",text2:t._unitConvert(n.PageWidth),unit2:r}),t.element.find(".fr-print-top-bottom-id").settingsPairWidget({label1:i.marginTop,name1:"MarginTop",text1:t._unitConvert(n.MarginTop),unit1:r,label2:i.marginBottom,name2:"MarginBottom",text2:t._unitConvert(n.MarginBottom),unit2:r}),t.element.find(".fr-print-left-right-id").settingsPairWidget({label1:i.marginLeft,name1:"MarginLeft",text1:t._unitConvert(n.MarginLeft),unit1:r,label2:i.marginRight,name2:"MarginRight",text2:t._unitConvert(n.MarginRight),unit2:r}),t.element.find(".fr-print-text").each(function(){$(this).attr("required","true").attr("number","true"),$(this).parent().addClass("fr-print-item").append($("<span class='fr-print-error-span'/>").clone())}),t._resetValidateMessage(),t._validateForm(t.element.find(".fr-print-form"));t.element.find(".fr-print-submit-id").on("click",function(){var n=t._generatePrintProperty();n!==null&&(t.options.$reportViewer.reportViewer("printReport",n),t.closeDialog())});t.element.find(".fr-print-cancel").on("click",function(){t.closeDialog()});t.$pageWidth=t.element.find("[name=PageWidth]"),t.$pageHeight=t.element.find("[name=PageHeight]");t.$pageWidth.on("change",function(){t._setOrientationIconState.call(t)});t.$pageHeight.on("change",function(){t._setOrientationIconState.call(t)});t.$printPortrait=t.element.find(".fr-print-portrait"),t.$printLandscape=t.element.find(".fr-print-landscape");t.$printPortrait.on("click",function(){t._isPortrait()||t._swapWidthHeight()});t.$printLandscape.on("click",function(){t._isPortrait()&&t._swapWidthHeight()});t._setOrientationIconState(),$(":text",t.element).each(function(){var n=$(this);n.on("blur",function(){t.options.$reportViewer.reportViewer("onInputBlur")});n.on("focus",function(){t.options.$reportViewer.reportViewer("onInputFocus")})})},_isPortrait:function(){var n=this;return Number(n.$pageWidth.val())>Number(n.$pageHeight.val())?!1:!0},_swapWidthHeight:function(){var n=this,t=n.$pageWidth.val();n.$pageWidth.val(n.$pageHeight.val()),n.$pageHeight.val(t),n._setOrientationIconState()},_setOrientationIconState:function(){var n=this;Number(n.$pageWidth.val())>Number(n.$pageHeight.val())?(n.$printLandscape.removeClass("fr-core-cursorpointer"),n.$printLandscape.removeClass("fr-print-landscape-icon"),n.$printLandscape.addClass("fr-print-landscape-icon-active"),n.$printPortrait.removeClass("fr-print-portrait-icon-active"),n.$printPortrait.addClass("fr-core-cursorpointer"),n.$printPortrait.addClass("fr-print-portrait-icon")):(n.$printLandscape.addClass("fr-core-cursorpointer"),n.$printLandscape.removeClass("fr-print-landscape-icon-active"),n.$printLandscape.addClass("fr-print-landscape-icon"),n.$printPortrait.removeClass("fr-print-portrait-icon"),n.$printPortrait.removeClass("fr-core-cursorpointer"),n.$printPortrait.addClass("fr-print-portrait-icon-active"))},openDialog:function(){var n=this;forerunner.dialog.showModalDialog(n.options.$appContainer,n)},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.$appContainer,n)},_validateForm:function(n){n.validate({errorPlacement:function(n,t){n.appendTo($(t).parent().find("span"))},highlight:function(n){$(n).parent().find("span").addClass("fr-print-error-position"),$(n).addClass("fr-print-error")},unhighlight:function(n){$(n).parent().find("span").removeClass("fr-print-error-position"),$(n).removeClass("fr-print-error")}})},_generatePrintProperty:function(){var n=this,t=[],i;return n.element.find(".fr-print-form").valid()===!0?(n.element.find(".fr-print-text").each(function(){t.push({key:this.name,value:n._generateUnitConvert(this.value)})}),i={PrintPropertyList:t},JSON.stringify(i)):null},_resetValidateMessage:function(){var t=this,n=t.locData.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,number:n.number,digits:n.digits})},_unitConvert:function(n){var t=this;return t.locData.print.unit==="in"?Math.round(n/25.4*100)/100:n},_generateUnitConvert:function(n){var t=this;return t.locData.print.unit==="mm"?Math.round(n/25.4*100)/100:n}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var t=forerunner.ssr.constants.widgets,r=forerunner.ssr.constants.events,i=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer"),n=i.manageParamSets;$.widget(t.getFullname(t.manageParamSets),{options:{$reportViewer:null,$appContainer:null,model:null},_initTBody:function(){var n=this;(n.serverData=n.options.model.parameterModel("cloneServerData"),n.serverData!==null&&n.serverData!==undefined)&&n._createRows()},_createRows:function(){var n=this,t;n.element.find(".fr-mps-text-input").off("change"),n.element.find(".fr-mps-default-id").off("click"),n.element.find(".fr-mps-all-users-id").off("click"),n.element.find(".fr-mps-delete-id").off("click"),n.$tbody.html(""),t=n.options.model.parameterModel("getOptionArray",n.serverData.parameterSets),$.each(t,function(t,i){var u=n.serverData.parameterSets[i.id],r=n._createRow(t,u);if(n.$tbody.append(r),n.serverData.canEditAllUsersSet)r.find(".fr-mps-all-users-id").on("click",function(t){n._onClickAllUsers(t)});if(n.serverData.canEditAllUsersSet||!u.isAllUser)r.find(".fr-mps-delete-id").on("click",function(t){n._onClickDelete(t)})});n.element.find(".fr-mps-text-input").on("change",function(t){n._onChangeInput(t)});n.element.find(".fr-mps-default-id").on("click",function(t){n._onClickDefault(t)});n._validateForm(n.$form)},_createRow:function(n,t){var i=this,u="",r,s,h;i.serverData.canEditAllUsersSet&&(u=" fr-core-cursorpointer");var f="<input type='text' required='true' name=name"+n+" class='fr-mps-text-input' value='"+t.name+"'/><span class='fr-mps-error-span'/>",e="fr-mps-all-users-check-id ",o=" class='ui-icon-circle-close ui-icon fr-core-center'";return t.isAllUser&&(i.serverData.canEditAllUsersSet||(f=t.name,o=""),e="fr-mps-all-users-check-id ui-icon-check ui-icon "),r="fr-mps-default-check-id ",t.id===i.serverData.defaultSetId&&(r="fr-mps-default-check-id ui-icon-check ui-icon "),s=n+1&1?" class='fr-mps-odd-row'":"",h=$("<tr"+s+" modelid='"+t.id+"'><td title='"+t.name+"'>"+f+"<\/td><td class='fr-mps-default-id fr-core-cursorpointer'><div class='"+r+"fr-core-center' /><\/td><td class='fr-mps-all-users-id"+u+"'><div class='"+e+"fr-core-center' /><\/td><td class='fr-mps-delete-id ui-state-error-text fr-core-cursorpointer'><div"+o+"/><\/td><\/tr>"),h},_init:function(){var t=this,i,r;t.element.html(""),i=forerunner.dialog.getModalDialogHeaderHtml("fr-icons24x24-parameterSets",n.manageSets,"fr-mps-cancel",n.cancel),r=$("<div class='fr-core-dialog-innerPage fr-core-center'>"+i+"<form class='fr-mps-form fr-core-dialog-form'><div class='fr-core-center'><input name='add' type='button' value='"+n.add+"' title='"+n.addNewSet+"' class='fr-mps-add-id fr-mps-action-button fr-core-dialog-button'/><table class='fr-mps-main-table'><thead><tr><th class='fr-mps-name-header'>"+n.name+"<\/th><th class='fr-mps-property-header'>"+n.defaultHeader+"<\/th><th class='fr-mps-property-header'>"+n.allUsers+"<\/th><th class='fr-mps-property-header'>"+n.deleteHeader+"<\/th><\/tr><\/thead><tbody class='fr-mps-main-table-body-id'><\/tbody><\/table><div class='fr-core-dialog-submit-container'><div class='fr-core-center'><input name='submit' type='button' class='fr-mps-submit-id fr-core-dialog-submit fr-core-dialog-button' value='"+n.apply+"' /><\/div><\/div><\/div><\/form><\/div>"),t.element.append(r),t.$tbody=t.element.find(".fr-mps-main-table-body-id"),t._initTBody(),t.$form=t.element.find(".fr-mps-form"),t._resetValidateMessage();t.element.find(".fr-mps-cancel").on("click",function(){t.closeDialog()});t.element.find(".fr-mps-add-id").on("click",function(n){t._onAdd(n)});t.element.find(".fr-mps-submit-id").on("click",function(){t.$form.valid()===!0&&(t.options.model.parameterModel("applyServerData",t.serverData),t.closeDialog())})},_findId:function(n){for(var i=$(n.target),t=i;!t.is("tr")&&!t.is("table");)t=t.parent();return t.is("tr")?t.attr("modelid"):null},_findRow:function(n){var t=this;return t.$tbody.find("[modelid='"+n+"']")},_onAdd:function(){var t=this,i=t.options.model.parameterModel("getNewSet",n.newSet,t.parameterList),r,u;t.serverData.parameterSets[i.id]=i,t._createRows(),r=t._findRow(i.id),u=r.find("input"),u.focus()},_onChangeInput:function(n){var t=this,i=$(n.target),r;i.attr("title",i.val()),r=t._findId(n),t.serverData.parameterSets[r].name=i.val(),t._createRows()},_onClickDefault:function(n){var i=this,t;i.$tbody.find(".fr-mps-default-id div").removeClass("ui-icon-check ui-icon"),t=$(n.target),t.hasClass("fr-mps-default-check-id")||(t=t.find(".fr-mps-default-check-id")),t.addClass("ui-icon-check ui-icon"),i.serverData.defaultSetId=i._findId(n)},_onClickAllUsers:function(n){var r=this,t=$(n.target),u,i;t.hasClass("fr-mps-all-users-check-id")||(t=t.find(".fr-mps-all-users-check-id")),t.toggleClass("ui-icon-check ui-icon"),u=r._findId(n),i=r.serverData.parameterSets[u],i.isAllUser=!i.isAllUser},_onClickDelete:function(n){var t=this,i,r,u;t.options.model.parameterModel("areSetsEmpty",t.serverData)||(i=t._findId(n),r=t._findRow(i),r.remove(),i=t._findId(n),i===t.serverData.defaultSetId&&(u=t.$tbody.find(".fr-mps-default-check-id").first(),t._onClickDefault({target:u})),delete t.serverData.parameterSets[i])},openDialog:function(n){var t=this;n&&(t.parameterList=JSON.parse(n),t._initTBody(),forerunner.dialog.showModalDialog(t.options.$appContainer,t))},closeDialog:function(){var n=this;forerunner.dialog.closeModalDialog(n.options.$appContainer,n)},_validateForm:function(n){n.validate({errorPlacement:function(n,t){n.appendTo($(t).parent().find("span"))},highlight:function(n){$(n).parent().find("span").addClass("fr-mps-error-position"),$(n).addClass("fr-mps-error")},unhighlight:function(n){$(n).parent().find("span").removeClass("fr-mps-error-position"),$(n).removeClass("fr-mps-error")}})},_resetValidateMessage:function(){var t=this,n=i.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,number:n.number,digits:n.digits})}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var i=forerunner.ssr,n=forerunner.ssr.constants.events,u=i.constants.toolTypes,t=forerunner.ssr.constants.widgets,r=forerunner.localize.getLocData(forerunner.config.forerunnerFolder()+"/ReportViewer/loc/ReportViewer");i.ReportViewerInitializer=function(n){var t=this;t.options={$toolbar:null,$toolPane:null,$viewer:null,$nav:null,$paramarea:null,$lefttoolbar:null,$righttoolbar:null,$docMap:null,ReportViewerAPI:forerunner.config.forerunnerAPIBase()+"ReportViewer",ReportManagerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager",ReportPath:null,toolbarHeight:null,navigateTo:null,isReportManager:!1,userSettings:null,$appContainer:null},n&&$.extend(t.options,n),t.parameterModel=$({}).parameterModel()},i.ReportViewerInitializer.prototype={getParameterModel:function(){var n=this;return n.parameterModel},render:function(){var t=this,i=t.options.$viewer,u,f,s,a,h,e,o,c,l,r;if(t.options.$docMap.hide(),i.reportViewer({reportViewerAPI:t.options.ReportViewerAPI,reportPath:t.options.ReportPath,jsonPath:t.options.jsonPath,pageNum:1,docMapArea:t.options.$docMap,parameterModel:t.parameterModel,userSettings:t.options.userSettings,$appContainer:t.options.$appContainer}),u=t.options.$toolbar,u.toolbar({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer}),f=forerunner.ssr.tools.mergedButtons,s=forerunner.ssr.tools.rightToolbar,t.options.isReportManager&&(u.toolbar("addTools",12,!0,[f.btnHome,f.btnRecent,f.btnFavorite]),u.toolbar("addTools",4,!0,[f.btnFav]),u.toolbar("disableTools",[f.btnFav])),i.reportViewer("option","toolbarHeight",u.outerHeight()),a=t.options.$lefttoolbar,a!==null&&a.leftToolbar({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer}),h=t.options.$righttoolbar,h!==null&&h.rightToolbar({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer}),t.options.isReportManager&&h.rightToolbar("addTools",2,!0,[s.btnRTBManageSets,s.btnSelectSet,s.btnSavParam]),e=forerunner.ssr.tools.mergedItems,o=t.options.$toolPane.toolPane({$reportViewer:i,$ReportViewerInitializer:this,$appContainer:t.options.$appContainer}),t.options.isReportManager){o.toolPane("addTools",2,!0,[e.itemHome]),o.toolPane("addTools",4,!0,[e.itemFav]),o.toolPane("disableTools",[e.itemFav]);i.on(n.reportViewerChangePage(),function(){o.toolPane("enableTools",[e.itemFav]),u.toolbar("enableTools",[f.btnFav])});i.on(n.reportViewerDrillThrough(),function(){t.setFavoriteState(i.reportViewer("option","reportPath"))});i.on(n.reportViewerDrillBack(),function(){t.setFavoriteState(i.reportViewer("option","reportPath"))})}c=t.options.$nav,c!==null&&(c.pageNav({$reportViewer:i}),i.reportViewer("option","pageNavArea",c)),l=t.options.$paramarea,l!==null&&(l.reportParameter({$reportViewer:i}),i.reportViewer("option","paramArea",l)),r=t.options.$appContainer.find(".fr-print-section"),r.length===0&&(r=$("<div class='fr-print-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),r.reportPrint({$appContainer:t.options.$appContainer,$reportViewer:i}),t.options.$appContainer.append(r)),r=t.options.$appContainer.find(".fr-mps-section"),r.length===0&&(r=$("<div class='fr-mps-section fr-dialog-id fr-core-dialog-layout fr-core-widget'/>"),r.manageParamSets({$appContainer:t.options.$appContainer,$reportViewer:i,$reportViewerInitializer:t,model:t.parameterModel}),t.options.$appContainer.append(r)),t._manageParamSetsDialog=r,t.options.isReportManager&&t.setFavoriteState(t.options.ReportPath),i.reportViewer("loadReport",t.options.ReportPath,1)},showManageParamSetsDialog:function(n){var t=this;t._manageParamSetsDialog.manageParamSets("openDialog",n)},setFavoriteState:function(n){var t=this;t.$btnFavorite=null,t.options.$toolbar!==null&&(t.$btnFavorite=t.options.$toolbar.find(".fr-button-update-fav").find("div")),t.$itemFavorite=null,t.options.$toolPane!==null&&(t.$itemFavorite=t.options.$toolPane.find(".fr-item-update-fav").find("div")),forerunner.ajax.ajax({url:t.options.ReportManagerAPI+"/isFavorite?path="+n,dataType:"json",async:!0,success:function(n){t.updateFavoriteState(n.IsFavorite)},fail:function(){t.$btnFavorite&&t.$btnFavorite.hide(),t.$itemFavorite&&t.$itemFavorite.hide()}})},onClickBtnFavorite:function(n){var t=this,u=n.data.me,i="add";t.$btnFavorite.hasClass("fr-icons24x24-favorite-minus")&&(i="delete"),forerunner.ajax.getJSON(t.options.ReportManagerAPI+"/UpdateView",{view:"favorites",action:i,path:u.options.$reportViewer.reportViewer("option","reportPath")},function(){t.updateFavoriteState.call(t,i==="add")},function(){forerunner.dialog.showMessageBox(t.options.$appContainer,r.messages.favoriteFailed)})},onClickItemFavorite:function(t){var i=this,f=t.data.me,u="add";i.$itemFavorite.hasClass("fr-icons24x24-favorite-minus")&&(u="delete"),f._trigger(n.actionStarted,null,f.allTools["fr-item-update-fav"]),forerunner.ajax.getJSON(i.options.ReportManagerAPI+"/UpdateView",{view:"favorites",action:u,path:i.options.ReportPath},function(){i.updateFavoriteState.call(i,u==="add")},function(){forerunner.dialog.showMessageBox(i.options.$appContainer,r.messages.favoriteFailed)})},updateFavoriteState:function(n){var t=this;n?(t.$btnFavorite&&(t.$btnFavorite.addClass("fr-icons24x24-favorite-minus"),t.$btnFavorite.removeClass("fr-icons24x24-favorite-plus")),t.$itemFavorite&&(t.$itemFavorite.addClass("fr-icons24x24-favorite-minus"),t.$itemFavorite.removeClass("fr-icons24x24-favorite-plus"))):(t.$btnFavorite&&(t.$btnFavorite.removeClass("fr-icons24x24-favorite-minus"),t.$btnFavorite.addClass("fr-icons24x24-favorite-plus")),t.$itemFavorite&&(t.$itemFavorite.removeClass("fr-icons24x24-favorite-minus"),t.$itemFavorite.addClass("fr-icons24x24-favorite-plus")))}},$.widget(t.getFullname(t.leftToolbar),$.forerunner.toolBase,{options:{$reportViewer:null,$ReportViewerInitializer:null,toolClass:"fr-toolbar-slide",$appContainer:null},_init:function(){var n=this,t=forerunner.ssr.tools.leftToolbar;n.element.html(""),$toolbar=new $("<div class='"+n.options.toolClass+" fr-core-widget' />"),$(n.element).append($toolbar),n.addTools(1,!0,[t.btnLTBMenu])}}),$.widget(t.getFullname(t.rightToolbar),$.forerunner.toolBase,{options:{$reportViewer:null,$ReportViewerInitializer:null,toolClass:"fr-toolbar-slide",$appContainer:null},_initCallbacks:function(){var t=this;t.parameterModel.on(n.parameterModelChanged(),function(n,i){t._onModelChange.call(t,n,i)});t.parameterModel.on(n.parameterModelSetChanged(),function(n,i){t._onModelChange.call(t,n,i)})},_init:function(){var n=this,t=forerunner.ssr.tools.rightToolbar;n.parameterModel=n.options.$ReportViewerInitializer.getParameterModel(),n.element.html(""),$toolbar=new $("<div class='"+n.options.toolClass+" fr-core-widget' />"),$(n.element).append($toolbar),n.addTools(1,!0,[t.btnRTBParamarea]),n._initCallbacks()},_onModelChange:function(){var n=this,t=forerunner.ssr.tools.rightToolbar;n.parameterModel.parameterModel("canUserSaveCurrentSet")?n.enableTools([t.btnSavParam]):n.disableTools([t.btnSavParam])}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportViewerEZ),$.forerunner.toolBase,{options:{DefaultAppTemplate:null,path:null,jsonPath:null,navigateTo:null,historyBack:null,isReportManager:!1,isFullScreen:!0,userSettings:null},_render:function(){var t=this,n=t.DefaultAppTemplate,r=t.options.path,i,u;forerunner.device.allowZoom(!1),n.$bottomdivspacer.addClass("fr-nav-spacer").hide(),n.$bottomdiv.addClass("fr-nav-container").hide(),n.$bottomdiv.css("position",t.options.isFullScreen?"fixed":"absolute"),r=r!==null?String(r).replace(/%2f/g,"/"):"/",n.$mainsection.html(null),i=new $("<DIV />"),i.addClass("fr-layout-reportviewer"),n.$mainsection.append(i),u=new forerunner.ssr.ReportViewerInitializer({$toolbar:n.$mainheadersection,$toolPane:n.$leftpanecontent,$viewer:i,$nav:n.$bottomdiv,$paramarea:n.$rightpanecontent,$lefttoolbar:n.$leftheader,$righttoolbar:n.$rightheader,$docMap:n.$docmapsection,ReportViewerAPI:forerunner.config.forerunnerAPIBase()+"/ReportViewer",ReportPath:r,jsonPath:t.options.jsonPath,navigateTo:t.options.navigateTo,isReportManager:t.options.isReportManager,userSettings:t.options.userSettings,$appContainer:n.$container}),u.render();i.on("reportviewerback",function(i,r){n._selectedItemPath=r.path,t.options.historyBack&&t.options.historyBack()});i.on("reportvieweractionhistorypop",function(){t.options.historyBack||i.reportViewer("actionHistoryDepth")!=0||(n.$mainheadersection.toolbar("disableTools",[forerunner.ssr.tools.toolbar.btnReportBack]),n.$leftpanecontent.toolPane("disableTools",[forerunner.ssr.tools.toolpane.itemReportBack]))});i.on("reportvieweractionhistorypush",function(){t.options.historyBack||(n.$mainheadersection.toolbar("enableTools",[forerunner.ssr.tools.toolbar.btnReportBack]),n.$leftpanecontent.toolPane("enableTools",[forerunner.ssr.tools.toolpane.itemReportBack]))});t.options.historyBack&&(n.$mainheadersection.toolbar("enableTools",[forerunner.ssr.tools.toolbar.btnReportBack]),n.$leftpanecontent.toolPane("enableTools",[forerunner.ssr.tools.toolpane.itemReportBack])),t.DefaultAppTemplate.bindViewerEvents(),n.$rightheaderspacer.height(n.$topdiv.height()),n.$leftheaderspacer.height(n.$topdiv.height())},_init:function(){var n=this;n.DefaultAppTemplate=n.options.DefaultAppTemplate===null?new forerunner.ssr.DefaultAppTemplate({$container:n.element,isFullScreen:n.options.isFullScreen}).render():n.options.DefaultAppTemplate,n._render()}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},forerunner.ssr.tools=forerunner.ssr.tools||{},forerunner.ssr.tools.reportExplorerToolbar=forerunner.ssr.tools.reportExplorerToolbar||{},$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.tools.reportExplorerToolbar,i={catalog:n.btnHome.selectorClass,favorites:n.btnFav.selectorClass,recent:n.btnRecent.selectorClass};$.widget(t.getFullname(t.reportExplorerEZ),{options:{navigateTo:null,historyBack:null,isFullScreen:!0},_createReportExplorer:function(n,t,i){var u=this,e=n,r=u.DefaultAppTemplate,f;n||(n="/"),t||(t="catalog"),f=r._selectedItemPath,r.$mainsection.html(null),i?r.$mainsection.show():r.$mainsection.hide(),r.$docmapsection.hide(),u.$reportExplorer=r.$mainsection.reportExplorer({reportManagerAPI:forerunner.config.forerunnerAPIBase()+"ReportManager",forerunnerPath:forerunner.config.forerunnerFolder(),path:n,view:t,selectedItemPath:f,navigateTo:u.options.navigateTo,$appContainer:r.$container})},transitionToReportManager:function(n,t){var u=this,e=n,r=u.DefaultAppTemplate,f;u.DefaultAppTemplate.$mainsection.html()!==""&&u.DefaultAppTemplate.$mainsection.html()!==null&&(u.DefaultAppTemplate.$mainsection.html(""),u.DefaultAppTemplate.$mainsection.hide()),r.cleanUp(),forerunner.device.allowZoom(!1),forerunner.dialog.closeAllModalDialogs(r.$container),f=forerunner.device.isWindowsPhone()?500:0,setTimeout(function(){u._createReportExplorer(n,t,!0);var f=r.$mainheadersection;f.reportExplorerToolbar({navigateTo:u.options.navigateTo,$appContainer:r.$container,$reportExplorer:u.$reportExplorer}),f.reportExplorerToolbar("setFolderBtnActive",i[t]),r.$rightheader.height(r.$topdiv.height()),r.$leftheader.height(r.$topdiv.height()),r.$rightheaderspacer.height(r.$topdiv.height()),r.$leftheaderspacer.height(r.$topdiv.height()),r._selectedItemPath=e,u.element.addClass("fr-Explorer-background")},f)},transitionToReportViewer:function(n){var t=this,i,r;t.DefaultAppTemplate.$mainsection.html(""),t.DefaultAppTemplate.$mainsection.hide(),forerunner.dialog.closeAllModalDialogs(t.DefaultAppTemplate.$container),t.$reportExplorer||t._createReportExplorer(!1),i=t.$reportExplorer.reportExplorer("getUserSettings"),t.DefaultAppTemplate._selectedItemPath=null,r=forerunner.device.isWindowsPhone()?500:0,setTimeout(function(){t.DefaultAppTemplate.$mainviewport.reportViewerEZ({DefaultAppTemplate:t.DefaultAppTemplate,path:n,navigateTo:t.options.navigateTo,historyBack:t.options.historyBack,isReportManager:!0,userSettings:i}),t.DefaultAppTemplate.$mainsection.fadeIn("fast")},r),t.element.addClass("fr-Explorer-background"),t.element.removeClass("fr-Explorer-background")},_init:function(){var n=this;n.DefaultAppTemplate=new forerunner.ssr.DefaultAppTemplate({$container:n.element,isFullScreen:n.isFullScreen}).render()}})});
//# sourceMappingURL=Forerunner-widgets.min.js.map