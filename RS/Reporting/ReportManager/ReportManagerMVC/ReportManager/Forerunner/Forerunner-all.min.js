var forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{},jQuery.fn.extend({slideRightShow:function(n){return this.each(function(){$(this).show("slide",{direction:"right",easing:"easeInCubic"},n)})},slideDownShow:function(n){return this.each(function(){$(this).show("slide",{direction:"down",easing:"easeInCubic"},n)})},slideUpShow:function(n){return this.each(function(){$(this).show("slide",{direction:"up",easing:"easeInCubic"},n)})},slideLeftHide:function(n){return this.each(function(){$(this).hide("slide",{direction:"left",easing:"easeOutCubic"},n)})},slideRightHide:function(n){return this.each(function(){$(this).hide("slide",{direction:"right",easing:"easeOutCubic"},n)})},slideLeftShow:function(n){return this.each(function(){$(this).show("slide",{direction:"left",easing:"easeInCubic"},n)})}}),$(function(){forerunner.ssr.constants={widgets:{reportExplorer:"reportExplorer",reportExplorerEZ:"reportExplorerEZ",reportExplorerToolbar:"reportExplorerToolbar",pageNav:"pageNav",reportDocumentMap:"reportDocumentMap",reportParameter:"reportParameter",reportRender:"reportRender",reportViewer:"reportViewer",reportViewerEZ:"reportViewerEZ",toolbar:"toolbar",toolBase:"toolBase",toolPane:"toolPane",namespace:"forerunner",getFullname:function(n){return this.namespace+"."+n}},events:{actionStarted:"actionstarted",toolPaneActionStarted:function(){return forerunner.ssr.constants.widgets.toolPane.toLowerCase()+this.actionStarted},menuClick:"menuclick",toolbarMenuClick:function(){return(forerunner.ssr.constants.widgets.toolbar+this.menuClick).toLowerCase()},paramAreaClick:"paramareaclick",toolbarParamAreaClick:function(){return(forerunner.ssr.constants.widgets.toolbar+this.paramAreaClick).toLowerCase()},setPageDone:"setPageDone",reportViewerSetPageDone:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.setPageDone).toLowerCase()},changePage:"changepage",reportViewerChangePage:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.changePage).toLowerCase()},drillBack:"drillback",reportViewerDrillBack:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.drillBack).toLowerCase()},drillThrough:"drillThrough",reportViewerDrillThrough:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.drillThrough).toLowerCase()},back:"back",reportViewerBack:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.back).toLowerCase()},showNav:"showNav",reportViewerShowNav:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.showNav).toLowerCase()},showDocMap:"showDocMap",reportViewerShowDocMap:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.showDocMap).toLowerCase()},hideDocMap:"hideDocMap",reportViewerHideDocMap:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.hideDocMap).toLowerCase()},showParamArea:"showparamarea",reportViewerShowParamArea:function(){return(forerunner.ssr.constants.widgets.reportViewer+this.showParamArea).toLowerCase()},render:"render",reportParameterRender:function(){return(forerunner.ssr.constants.widgets.reportParameter+this.render).toLowerCase()},submit:"submit",reportParameterSubmit:function(){return(forerunner.ssr.constants.widgets.reportParameter+this.submit).toLowerCase()}},toolTypes:{button:"button",input:"input",textButton:"textbutton",plainText:"plaintext",containerItem:"containeritem",toolGroup:"toolgroup"},sortDirection:{desc:"Descending",asc:"Ascending"},navigateType:{toggle:"toggle",bookmark:"bookmark",drillThrough:"drillthrough",docMap:"documentMap"},exportType:{xml:"XML",csv:"CSV",pdf:"PDF",mhtml:"MHTML",excel:"EXCELOPENXML",tiff:"IMAGE",word:"WORDOPENXML"}},forerunner.config={forerunnerFolder:"../forerunner",forerunnerAPIBase:"../api/"},forerunner.localize={_locData:{},getLocData:function(n){var i=navigator.language||navigator.userLanguage,t=this._loadFile(n,i);return t===null&&(t=this._loadFile(n,"en-us")),t},_loadFile:function(n,t){var i=this;return i._locData[n]===undefined&&(i._locData[n]={}),i._locData[n][t]===undefined&&$.ajax({url:n+"-"+t+".txt",dataType:"json",async:!1,success:function(r){i._locData[n][t]=r},fail:function(){i._locData[n][t]=null}}),i._locData[n][t]}},forerunner.device={isTouch:function(){var n=navigator.userAgent;return!!("ontouchstart"in window)||!!("onmsgesturechange"in window)||n.match(/(iPhone|iPod|iPad)/)||n.match(/BlackBerry/)||n.match(/Android/)},allowZoom:function(n){n===!0?($("head meta[name=viewport]").remove(),$("head").prepend("'<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=10.0, minimum-scale=0, user-scalable=1' />")):($("head meta[name=viewport]").remove(),$("head").prepend("<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=1' />"))},isElementInViewport:function(n){var t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},isSmall:function(){return $(window).height()<768?!0:!1}}}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){function r(n,t){this.reportObj=t,this.$container=n,this.isRendered=!1}var i=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.events,t=forerunner.ssr.constants.navigateType;$.widget(i.getFullname(i.reportViewer),{options:{reportViewerAPI:"../api/ReportViewer",reportPath:null,pageNum:1,pingInterval:3e5,toolbarHeight:0,pageNavArea:null,paramArea:null,DocMapArea:null},_destroy:function(){},_create:function(){var n=this;setInterval(function(){n._sessionPing()},this.options.pingInterval),n.locData=forerunner.localize.getLocData(forerunner.config.forerunnerFolder+"/ReportViewer/loc/ReportViewer"),n.actionHistory=[],n.curPage=0,n.pages={},n.sessionID="",n.numPages=0,n.lock=0,n.$reportContainer=new $("<DIV class='fr-report-container'/>"),n.$reportAreaContainer=null,n.$loadingIndicator=new $("<div class='fr-report-loading-indicator' ><\/div>").text(n.locData.messages.loading),n.floatingHeaders=[],n.paramLoaded=!1,n.scrollTop=0,n.scrollLeft=0,n.loadLock=0,n.finding=!1,n.findStartPage=null,n.hasDocMap=!1,n.docMapData=null,n.togglePageNum=0,n.findKeyword=null,n.element.append(n.$loadingIndicator),n.pageNavOpen=!1,n.savedTop=0,n.savedLeft=0,$(window).scroll(function(){n._updateTableHeaders(n)}),n.element.append(n.$reportContainer),n._addLoadingIndicator(),n._loadParameters(n.options.pageNum),n.hideDocMap()},getCurPage:function(){var n=this;return n.curPage},getNumPages:function(){var n=this;return n.numPages},getReportViewerAPI:function(){var n=this;return n.options.reportViewerAPI},getReportPath:function(){var n=this;return n.options.reportPath},getSessionID:function(){var n=this;return n.sessionID},getHasDocMap:function(){var n=this;return n.hasDocMap},_setColHeaderOffset:function(n,t){if(t){var i=n.offset(),r=$(window).scrollLeft();r>i.left&&r<i.left+n.width()?(t.css("left",Math.min(r-i.left,n.width()-t.width())+"px"),t.fadeIn("fast")):t.hide()}},_setRowHeaderOffset:function(n,t){var u=this,i,r;t&&(i=n.offset(),r=$(window).scrollTop(),r>i.top&&r<i.top+n.height()?(t.css("top",Math.min(r-i.top,n.height()-t.height())+u.options.toolbarHeight+"px"),t.fadeIn("fast")):t.hide())},_addLoadingIndicator:function(){var n=this;n.loadLock=1,setTimeout(function(){n.showLoadingIndictator(n)},500)},showLoadingIndictator:function(n){if(n.loadLock===1){var t=n.$reportContainer.width()-212;n.$loadingIndicator.css("top",n.$reportContainer.scrollTop()+100+"px").css("left",t>0?t/2:"0px"),n.$reportContainer.css({opacity:.5}),n.$loadingIndicator.show()}},removeLoadingIndicator:function(){var n=this;n.loadLock=0,n.$reportContainer.css({opacity:1}),n.$loadingIndicator.hide()},_setPage:function(t){var i=this;i.pages[t].isRendered||i._renderPage(t),i.$reportAreaContainer?(i.$reportAreaContainer.find(".Page").detach(),i.$reportAreaContainer.append(i.pages[t].$container),i.curPage!==null&&i.curPage>t?i.pages[t].$container.show():i.pages[t].$container.show()):(i.$reportAreaContainer=$("<Div/>"),i.$reportAreaContainer.addClass("fr-report-areacontainer"),i.$reportContainer.append(i.$reportAreaContainer),i.$reportAreaContainer.append(i.pages[t].$container),i._touchNav(),i.pages[t].$container.fadeIn(),i._removeDocMap()),i.curPage=t,i._trigger(n.changePage,null,{newPageNum:t,paramLoaded:i.paramLoaded}),$(window).scrollLeft(i.scrollLeft),$(window).scrollTop(i.scrollTop),i.options.setPageDone&&(i._trigger(n.setPageDone),i.options.setPageDone=null),i.lock=0},_touchNav:function(){var n=this;$(n.element).swipe({fallbackToMouseEvents:!1,allowPageScroll:"auto",swipe:function(t,i){i==="left"||i==="up"?n.navToPage(n.curPage+1):n.navToPage(n.curPage-1)},swipeStatus:function(t,i){i==="start"&&n._hideTableHeaders(),i==="end"&&n._updateTableHeaders(n)},tap:function(n,t){$(t).trigger("click")},longTapThreshold:1e3})},refreshReport:function(){var n=this,t=null;n.lock!==1&&(n.sessionID="",n.lock=1,n.paramLoaded===!0&&(t=n.options.paramArea.reportParameter("getParamsList")),n._resetViewer(!0),n._loadPage(1,!1,null,t,!0))},navToPage:function(n){var t=this;n!==t.curPage&&t.lock!==1&&(t.scrollLeft=0,t.scrollTop=0,n>t.numPages&&(n=1),n<1&&(n=t.numPages),n!==t.curPage&&t.lock===0&&(t.lock=1,t._loadPage(n,!1)))},_hideDocMap:function(){var t=this,i=t.options.docMapArea;i.hide(),t.element.show(),t._trigger(n.hideDocMap)},_showDocMap:function(){var t=this,i=t.options.docMapArea;i.reportDocumentMap({$reportViewer:t}),t.docMapData||$.ajax({url:t.options.reportViewerAPI+"/DocMapJSON/",data:{SessionID:t.sessionID},dataType:"json",async:!1,success:function(n){t.docMapData=n,i.reportDocumentMap("write",n)},fail:function(){alert("Fail")}}),t.savedTop=$(window).scrollTop(),t.savedLeft=$(window).scrollLeft(),t.savedTop=$(window).scrollTop(),t.element.hide(),i.slideUpShow(),t._trigger(n.showDocMap)},_removeDocMap:function(){$(".fr-docmap-panel").length!==0&&$(".fr-docmap-panel").remove()},hideDocMap:function(){var n=this,t=n.options.docMapArea;n.hasDocMap&&t&&t.is(":visible")&&n._hideDocMap()},showDocMap:function(){var n=this,t=n.options.docMapArea;if(n.hasDocMap&&t){if(t.is(":visible")){n._hideDocMap();return}n._showDocMap()}},_cachePages:function(n){var i=this,r=n-1,u=n+1,t;for(r<1&&(r=1),u>i.numPages&&(u=i.numPages),t=r;t<=u;t++)i.pages[t]||t!==n&&i._loadPage(t,!0)},back:function(){var t=this,i=t.actionHistory.pop();i?(t.options.reportPath=i.ReportPath,t.sessionID=i.SessionID,t._trigger(n.drillBack),t._removeParameters(),t.scrollLeft=i.ScrollLeft,t.scrollTop=i.ScrollTop,t._loadPage(i.CurrentPage,!1,null,null,i.FlushCache)):t._trigger(n.back,null,{path:t.options.reportPath})},showNav:function(){var n=this;n.pageNavOpen=n.pageNavOpen?!1:!0,n.options.pageNavArea&&n.options.pageNavArea.pageNav("showNav")},flushCache:function(){var n=this;n.pages={},n.options.pageNavArea&&n.options.pageNavArea.pageNav("reset")},_prepareAction:function(){var n=this;(n.togglePageNum!==n.curPage||n.togglePageNum===0)&&$.ajax({url:n.options.reportViewerAPI+"/GetReportJSON/",data:{ReportPath:n.options.reportPath,SessionID:n.sessionID,PageNumber:n.curPage,ParameterList:""},dataType:"json",async:!1,success:function(){n.togglePageNum=n.curPage},fail:function(){alert("Fail")}})},sort:function(n,t){var i=this,u,r=forerunner.ssr.constants.sortDirection;i.lock!==1&&(i.lock=1,u=n===r.asc?r.desc:r.asc,$.getJSON(i.options.reportViewerAPI+"/SortReport/",{SessionID:i.sessionID,SortItem:t,Direction:u}).done(function(n){i.numPages=n.NumPages,i._loadPage(n.NewPage,!1,null,null,!0)}).fail(function(){console.log("error"),i.removeLoadingIndicator()}))},toggleItem:function(n){var i=this;i.lock!==1&&(i.lock=1,i._prepareAction(),$.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.toggle,SessionID:i.sessionID,UniqueID:n}).done(function(n){n.Result===!0&&(i.scrollLeft=$(window).scrollLeft(),i.scrollTop=$(window).scrollTop(),i.pages[i.curPage]=null,i._loadPage(i.curPage,!1))}).fail(function(){console.log("error"),i.removeLoadingIndicator()}))},navigateBookmark:function(n){var i=this;i.lock!==1&&(i.lock=1,i._prepareAction(),$.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.bookmark,SessionID:i.sessionID,UniqueID:n}).done(function(t){t.NewPage===i.curPage?(i._navToLink(n),i.lock=0):(i.backupCurPage(),i._loadPage(t.NewPage,!1,n))}).fail(function(){console.log("error"),i.removeLoadingIndicator()}))},navigateDrillthrough:function(i){var r=this;r.lock!==1&&(r.lock=1,r._prepareAction(),$.getJSON(r.options.reportViewerAPI+"/NavigateTo/",{NavType:t.drillThrough,SessionID:r.sessionID,UniqueID:i}).done(function(t){r.backupCurPage(!0),t.Exception?r.$reportAreaContainer.find(".Page").reportRender("writeError",t):(r.sessionID=t.SessionID,r.options.reportPath=t.ReportPath,r._trigger(n.drillThrough,null,{path:t.ReportPath}),t.ParametersRequired?(r.$reportAreaContainer.find(".Page").detach(),r._setScrollLocation(0,0),r._showParameters(1,t.Parameters)):(r._setScrollLocation(0,0),r._loadPage(1,!1,null,null,!0)))}).fail(function(){console.log("error"),r.removeLoadingIndicator()}))},navigateDocumentMap:function(n){var i=this;i.lock!==1&&(i.lock=1,$.getJSON(i.options.reportViewerAPI+"/NavigateTo/",{NavType:t.docMap,SessionID:i.sessionID,UniqueID:n}).done(function(t){i.backupCurPage(!1,!0),i.hideDocMap(),i._loadPage(t.NewPage,!1,n)}).fail(function(){console.log("error"),i.removeLoadingIndicator()}))},backupCurPage:function(n,t){var i=this,r=$(window).scrollTop(),u=$(window).scrollLeft();n!==!0&&(n=!1),t===!0&&(r=i.savedTop,u=i.savedLeft),i.actionHistory.push({ReportPath:i.options.reportPath,SessionID:i.sessionID,CurrentPage:i.curPage,ScrollTop:r,ScrollLeft:u,FlushCache:n})},_setScrollLocation:function(n,t){var i=this;i.scrollLeft=t,i.scrollTop=n},find:function(n,t,i){var r=this;if(n!==""){if(r.findKeyword&&r.findKeyword===n||(r.findKeyword=n,r.findStartPage=null),t===undefined&&(t=r.getCurPage()),i===undefined&&(i=r.getNumPages()),t>i){r.resetFind(),alert(r.locData.messages.completeFind);return}r.findStartPage===null&&(r.findStartPage=t),$.getJSON(r.options.reportViewerAPI+"/FindString/",{SessionID:r.sessionID,StartPage:t,EndPage:i,FindValue:n}).done(function(t){t.NewPage!==0?(r.finding=!0,t.NewPage!==r.curPage?(r.options.setPageDone=function(){r.setFindHighlight(n)},r.pages[t.NewPage]=null,r._loadPage(t.NewPage,!1)):r.setFindHighlight(n)):r.findStartPage!==1?(r.find(n,1,r.findStartPage-1),r.findStartPage=1):(r.finding===!0?alert(r.locData.messages.completeFind):alert(r.locData.messages.keyNotFound),r.resetFind())}).fail(function(){console.log("error"),r.removeLoadingIndicator()})}},findNext:function(n){var t=this,i;if($(".fr-render-find-keyword").filter(".fr-render-find-highlight").first().removeClass("fr-render-find-highlight"),i=$(".fr-render-find-keyword").filter(":visible").filter(".Unread").first(),i.length>0)i.removeClass("Unread").addClass("fr-render-find-highlight").addClass("Read"),$(window).scrollTop(i.offset().top-150),$(window).scrollLeft(i.offset().left-250);else{if(t.getNumPages()===1){alert(t.locData.messages.completeFind),t.resetFind();return}t.getCurPage()+1<=t.getNumPages()?t.find(n,t.getCurPage()+1):t.findStartPage>1?t.find(n,1,t.findStartPage-1):(alert(t.locData.messages.completeFind),t.resetFind())}},setFindHighlight:function(n){var i=this,t;i._clearHighLightWord(),i._highLightWord(i.$reportContainer,n),t=i.$reportContainer.find(".fr-render-find-keyword").filter(":visible").filter(".Unread").first(),t.length>0&&(t.removeClass("Unread").addClass("fr-render-find-highlight").addClass("Read"),$(window).scrollTop(t.offset().top-150),$(window).scrollLeft(t.offset().left-250))},resetFind:function(){var n=this;n.finding=!1,n.findStartPage=null,n.findKeyword=null},exportReport:function(n){var t=this,i=t.options.reportViewerAPI+"/ExportReport/?ReportPath="+t.getReportPath()+"&SessionID="+t.getSessionID()+"&ParameterList=&ExportType="+n;window.open(i)},_loadParameters:function(n){var t=this;$.getJSON(t.options.reportViewerAPI+"/ParameterJSON/",{ReportPath:t.options.reportPath}).done(function(i){t._addLoadingIndicator(),t._showParameters(n,i)}).fail(function(){console.log("error"),t.removeLoadingIndicator()})},_showParameters:function(t,i){var r=this,u;i.Type==="Parameters"?(r._removeParameters(),u=r.options.paramArea,u&&(r._trigger(n.showParamArea),u.reportParameter({$reportViewer:this}),u.reportParameter("writeParameterPanel",i,r,t,!1),r.paramLoaded=!0)):i.Exception?(r.$reportContainer.reportRender({reportViewer:this}),r.$reportContainer.reportRender("writeError",i),r.removeLoadingIndicator()):r._loadPage(t,!1)},_removeParameters:function(){var n=this,t;n.paramLoaded===!0&&(t=n.options.paramArea,t&&(t.reportParameter("removeParameter"),n.paramLoaded=!1))},_resetViewer:function(n){var t=this;t.numPages=0,t.floatingHeaders=[],n||(t.paramLoaded=!1),t.scrollTop=0,t.scrollLeft=0,t.finding=!1,t.findStartPage=null,t.hasDocMap=!1,t.docMapData=null,t.togglePageNum=0,t.findKeyword=null},loadReport:function(n,t){var i=this;i._resetViewer(),i.options.reportPath=n,i.options.pageNum=t,i._loadParameters(t)},loadReportWithNewParameters:function(n){var t=this;t._resetViewer(!0),t._loadPage(1,!1,null,n,!0)},_loadPage:function(n,t,i,r,u){var f=this;if(u===!0&&f.flushCache(),f.pages[n]&&f.pages[n].$container){t||(f._setPage(n),f.element.is(":visible")||t||f.element.show(),i&&f._navToLink(i),u!==!0&&f._cachePages(n));return}r||(r=""),t||f._addLoadingIndicator(),f.togglePageNum=n,$.getJSON(f.options.reportViewerAPI+"/ReportJSON/",{ReportPath:f.options.reportPath,SessionID:f.sessionID,PageNumber:n,ParameterList:r}).done(function(r){f._writePage(r,n,t),f.element.is(":visible")||t||f.element.show(),i&&f._navToLink(i),t||u===!0||f._cachePages(n)}).fail(function(){console.log("error"),f.removeLoadingIndicator()})},_writePage:function(n,t,i){var u=this,f=$("<Div/>");if(f.addClass("Page"),n){f.reportRender({reportViewer:u}),u.pages[t]?(u.pages[t].$container=f,u.pages[t].reportObj=n):u.pages[t]=new r(f,n),u.sessionID=n.SessionID?n.SessionID:"";try{u.numPages=n.ReportContainer.NumPages===undefined?0:n.ReportContainer.NumPages}catch(e){u.numPages=0}i||(u._renderPage(t),u.removeLoadingIndicator(),u._setPage(t))}},_renderPage:function(n){var t=this;t.pages[n]&&t.pages[n].isRendered===!0||(t.pages[n].reportObj.Exception?t.pages[n].$container.reportRender("writeError",t.pages[n].reportObj):(t.hasDocMap=t.pages[n].reportObj.HasDocMap,t.pages[n].$container.reportRender("render",t.pages[n].reportObj)),t.pages[n].isRendered=!0)},_sessionPing:function(){var n=this;n.sessionID&&n.sessionID!==""&&$.getJSON(n.options.reportViewerAPI+"/PingSession",{PingSessionID:n.sessionID}).done(function(t){t.Status==="Fail"&&(n.sessionID="")}).fail(function(){console.log("ping error")})},_updateTableHeaders:function(n){$.each(n.floatingHeaders,function(t,i){n._setRowHeaderOffset(i.$tablix,i.$rowHeader),n._setColHeaderOffset(i.$tablix,i.$colHeader)})},_hideTableHeaders:function(){var n=this;$.each(n.floatingHeaders,function(n,t){t.$rowHeader&&t.$rowHeader.hide(),t.$colHeader&&t.$colHeader.hide()}),n.$floatingToolbar&&n.$floatingToolbar.hide()},_navToLink:function(n){var t=this,i=t.element.find("[name='"+n+"']");$(document).scrollTop(i.offset().top-100)},_stopDefaultEvent:function(n){window.ActiveXObject?window.event.returnValue=!1:(n.preventDefault(),n.stopPropagation())},_getHeight:function(n){var i,t=n.clone().css({visibility:"hidden"});return t.find("img").remove(),$("body").append(t),i=t.height()+"px",t.remove(),this._convertToMM(i)},_convertToMM:function(n){if(!n)return 0;var i=n.match(/\D+$/),t=n.match(/\d+/);i.length===1&&(i=i[0]),t.length===1&&(t=t[0]);switch(i){case"px":return t/3.78;case"pt":return t*.352777777778;case"in":return t*25.4;case"mm":return t;case"cm":return t*10;case"em":return t*4.2175176}return t},_highLightWord:function(n,t){if(t&&t!==""){var i=this;$(n).each(function(){var n=$(this).get(0);n.normalize(),$.each(n.childNodes,function(n,r){var u,f,e,o,s;if(r.nodeType===3){u=r;try{for(f=u.data.toUpperCase().indexOf(t.toUpperCase());f<u.data.length;){if(f>=0)e=document.createElement("span"),e.className="fr-render-find-keyword Unread",o=u.splitText(f),u=o.splitText(t.length),s=o.cloneNode(!0),e.appendChild(s),r.parentNode.replaceChild(e,o);else break;f=u.data.toUpperCase().indexOf(t.toUpperCase())}}catch(h){}}else i._highLightWord($(r),t)})})}else return;return $(this)},_clearHighLightWord:function(){$(".fr-render-find-keyword").each(function(){var n=document.createTextNode($(this).text());$(this).replaceWith($(n))})}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var t=forerunner.ssr.constants.widgets,n=forerunner.ssr.constants.toolTypes,i="fr-toolbase-dropdown-container";$.widget(t.getFullname(t.toolBase),{options:{toolClass:null},addTools:function(n,t,i){var r=this,u=r.element.find("."+r.options.toolClass);r._addChildTools(u,n,t,i),t?r.enableTools(i):r.disableTools(i)},_addChildTools:function(n,t,i,r){var u=this,e,h,c,f,o,s;for(u.allTools=u.allTools||{},e=$(u._getToolHtml(r[0])),t<=1?n.prepend(e):t>n.children().length?n.append(e):(h=":nth-child("+t+")",c=n.children(h),c.before(e)),f=e,u._addChildTool(f,r[0],i),o=1;o<r.length;o++)s=r[o],f.after(u._getToolHtml(s)),f=f.next(),u._addChildTool(f,s,i)},_addChildTool:function(t,i,r){var u=this;u.allTools[i.selectorClass]=i,i.toolType===n.toolGroup&&i.tools&&u._addChildTools(t,1,r,i.tools),i.sharedClass&&t.addClass(i.sharedClass),i.dropdown&&u._createDropdown(t,i),i.visible===!1&&t.hide()},_createDropdown:function(n,t){var u=this;t.$dropdown=$("<div class='"+i+"'/>"),t.$dropdown.toolDropdown({$reportViewer:u.options.$reportViewer}),t.$dropdown.toolDropdown("addTools",1,!0,t.tools),n.append(t.$dropdown);var r=n.find("."+i),f=t.selectorClass,e=t.imageClass;n.on("click",{toolInfo:t,$tool:n},function(n){r.css("left",n.data.$tool.filter(":visible").offset().left),r.css("top",n.data.$tool.filter(":visible").offset().top+n.data.$tool.height()),r.toggle()});$(document).on("click",function(n){!r.is(":visible")||$(n.target).hasClass(f)||$(n.target).hasClass(e)||r.toggle()})},showTool:function(n){var t=this,i;t.allTools[n]&&(i=$("."+n,t.element),t.allTools[n].Display&&i.fadeIn())},hideTool:function(n){var t=this,i;t.allTools[n]&&(i=$("."+n,t.element),t.allTools[n].Display=i.is(":visible"),i.fadeOut())},hideAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.hideTool(i.selectorClass)})},showAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.showTool(i.selectorClass)})},enableTools:function(t){var i=this;$.each(t,function(t,r){var u=$("."+r.selectorClass,i.element);u.removeClass("fr-toolbase-disabled"),r.events&&(u.addClass("fr-core-cursorpointer"),i._removeEvent(u,r),i._addEvents(u,r)),r.toolType===n.toolGroup&&r.tools&&i.enableTools(r.tools)})},disableTools:function(t){var i=this;$.each(t,function(t,r){var u=$("."+r.selectorClass,i.element);u.addClass("fr-toolbase-disabled"),r.events&&(u.removeClass("fr-core-cursorpointer"),i._removeEvent(u,r)),r.toolType===n.toolGroup&&r.tools&&i.disableTools(r.tools)})},enableAllTools:function(){var n=this;$.each(n.allTools,function(t,i){i.selectorClass&&n.allTools[i.selectorClass].isEnable&&n.enableTools([i])})},disableAllTools:function(){var n=this;$.each(n.allTools,function(t,i){if(i.selectorClass){var r=$("."+i.selectorClass,n.element);n.allTools[i.selectorClass].isEnable=!r.hasClass("fr-toolbase-disabled"),n.disableTools([i])}})},_getToolHtml:function(t){var r=this,u,f,e,o,i,s,h;if(t.toolType===n.button)return"<div class='fr-toolbase-toolcontainer fr-toolbase-state "+t.selectorClass+"'><div class='fr-icons24x24 "+t.imageClass+"' /><\/div>";if(t.toolType===n.input)return u="",t.inputType&&(u=", type='"+t.inputType+"'"),"<input class='"+t.selectorClass+"'"+u+" />";if(t.toolType===n.textButton)return"<div class='fr-toolbase-textcontainer fr-toolbase-state "+t.selectorClass+"'>"+r._getText(t)+"<\/div>";if(t.toolType===n.plainText)return"<span class='"+t.selectorClass+"'> "+r._getText(t)+"<\/span>";if(t.toolType===n.containerItem){if(f="",t.text&&(f=r._getText(t)),e="",o="fr-indent24x24",t.imageClass&&(e=t.imageClass,o="fr-icons24x24"),i="",t.indent)for(s=0;s<t.indent;s++)i=i+"<div class='fr-indent24x24'><\/div>";return h="",t.rightImageClass&&(h="<div class='fr-toolbase-rightimage "+t.rightImageClass+"'><\/div>"),"<div class='fr-toolbase-itemcontainer fr-toolbase-state "+t.selectorClass+"'>"+i+"<div class='"+o+" "+e+"'><\/div>"+f+h+"<\/div>"}if(t.toolType===n.toolGroup)return"<div class='fr-toolbase-groupcontainer "+t.selectorClass+"'><\/div>"},_getText:function(n){var t=this;return typeof n.text=="function"?n.text({$reportViewer:t.options.$reportViewer}):n.text},_removeEvent:function(n,t){var r=this,i;for(i in t.events)typeof t.events[i]=="function"&&n.off(i)},_addEvents:function(n,t){var r=this,i;for(i in t.events)if(typeof t.events[i]=="function")n.on(i,null,{me:r,$reportViewer:r.options.$reportViewer},t.events[i])},_destroy:function(){},_create:function(){}}),$.widget("frInternal.toolDropdown",$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolbase-dropdown"},_init:function(){var n=this;n.element.html("<div class='"+n.options.toolClass+"'/>")}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var a=forerunner.ssr.constants.widgets,i=forerunner.ssr.constants.events,n=forerunner.ssr.constants.toolTypes,t=forerunner.localize.getLocData(forerunner.config.forerunnerFolder+"/ReportViewer/loc/ReportViewer"),r=forerunner.ssr.constants.exportType,v={toolType:n.button,selectorClass:"fr-toolbar-reportback-button",imageClass:"fr-icons24x24-reportback",events:{click:function(n){n.data.$reportViewer.reportViewer("back")}}},l={toolType:n.button,selectorClass:"fr-toolbar-menu-button",imageClass:"fr-icons24x24-menu",events:{click:function(n){n.data.me._trigger(i.menuClick,null,{})}}},f={toolType:n.button,selectorClass:"fr-toolbar-nav-button",imageClass:"fr-icons24x24-nav",sharedClass:"fr-toolbar-touch-hidden",events:{click:function(n){n.data.$reportViewer.reportViewer("showNav")}}},e={toolType:n.button,selectorClass:"fr-toolbar-paramarea-button",imageClass:"fr-icons24x24-paramarea",events:{click:function(n){n.data.me._trigger(i.paramAreaClick,null,{})}}},y={toolType:n.button,selectorClass:"fr-toolbar-refresh-button",imageClass:"fr-icons24x24-refresh",sharedClass:"fr-toolbar-touch-hidden",events:{click:function(n){n.data.$reportViewer.reportViewer("refreshReport")}}},o={toolType:n.button,selectorClass:"fr-toolbar-firstpage-button",imageClass:"fr-icons24x24-firstpage",sharedClass:"fr-toolbar-touch-hidden",events:{click:function(n){n.data.$reportViewer.reportViewer("navToPage",1)}}},s={toolType:n.button,selectorClass:"fr-toolbar-prev-button",imageClass:"fr-icons24x24-prev",sharedClass:"fr-toolbar-touch-hidden",events:{click:function(n){n.data.$reportViewer.reportViewer("navToPage",n.data.$reportViewer.reportViewer("getCurPage")-1)}}},b={toolType:n.input,selectorClass:"fr-toolbar-reportpage-textbox",inputType:"number",events:{keypress:function(n){n.keyCode===13&&n.data.$reportViewer.reportViewer("navToPage",this.value)},click:function(n){n.target.select()}}},k={toolType:n.plainText,selectorClass:"fr-toolbar-pageOf-button",text:t.toolbar.pageOf},d={toolType:n.plainText,selectorClass:"fr-toolbar-numPages-button",text:"0"},h={toolType:n.button,selectorClass:"fr-toolbar-next-button",imageClass:"fr-icons24x24-next",sharedClass:"fr-toolbar-touch-hidden",events:{click:function(n){n.data.$reportViewer.reportViewer("navToPage",n.data.$reportViewer.reportViewer("getCurPage")+1)}}},c={toolType:n.button,selectorClass:"fr-toolbar-lastpage-button",imageClass:"fr-icons24x24-lastpage",sharedClass:"fr-toolbar-touch-hidden",events:{click:function(n){n.data.$reportViewer.reportViewer("navToPage",n.data.$reportViewer.reportViewer("getNumPages"))}}},g={toolType:n.toolGroup,selectorClass:"fr-toolbar-VCR-group-id",tools:[o,s,b,k,d,h,c]},u={toolType:n.button,selectorClass:"fr-toolbar-documentmap-button",sharedClass:"fr-toolbar-touch-hidden",imageClass:"fr-icons24x24-documentmap",events:{click:function(n){n.data.$reportViewer.reportViewer("showDocMap")}}},nt={toolType:n.input,selectorClass:"fr-toolbar-keyword-textbox",sharedClass:"fr-toolbar-touch-hidden",events:{keypress:function(n){n.keyCode===13&&n.data.$reportViewer.reportViewer("find",$.trim(this.value))}}},p={toolType:n.textButton,selectorClass:"fr-toolbar-find-button",sharedClass:"fr-toolbar-touch-hidden",text:t.toolbar.find,events:{click:function(n){var t=$.trim(n.data.me.element.find(".fr-toolbar-keyword-textbox").val());n.data.$reportViewer.reportViewer("find",t)}}},tt={toolType:n.plainText,selectorClass:"fr-toolbar-sparator-text",sharedClass:"fr-toolbar-touch-hidden",text:"|&nbsp"},w={toolType:n.textButton,selectorClass:"fr-toolbar-findnext-button",sharedClass:"fr-toolbar-touch-hidden",text:t.toolbar.next,events:{click:function(n){var t=$.trim(n.data.me.element.find(".fr-toolbar-keyword-textbox").val());n.data.$reportViewer.reportViewer("findNext",t)}}},it={toolType:n.toolGroup,selectorClass:"fr-toolbar-find-group-id",tools:[nt,p,tt,w]},rt={toolType:n.containerItem,selectorClass:"fr-button-exportXML-id",imageClass:"fr-icons24x24-exportXML",sharedClass:"fr-toolbase-dropdown-item",text:t.exportType.xml,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.xml)}}},ut={toolType:n.containerItem,selectorClass:"fr-button-exportCSV-id",imageClass:"fr-icons24x24-exportCSV",sharedClass:"fr-toolbase-dropdown-item",text:t.exportType.csv,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.csv)}}},ft={toolType:n.containerItem,selectorClass:"fr-button-exportPDF-id",imageClass:"fr-icons24x24-exportPDF",sharedClass:"fr-toolbase-dropdown-item",text:t.exportType.pdf,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.pdf)}}},et={toolType:n.containerItem,selectorClass:"fr-button-exportMHTML-id",imageClass:"fr-icons24x24-exportMHT",sharedClass:"fr-toolbase-dropdown-item",text:t.exportType.mhtml,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.mhtml)}}},ot={toolType:n.containerItem,selectorClass:"fr-button-exportExcel-id",imageClass:"fr-icons24x24-exportExcel",sharedClass:"fr-toolbase-dropdown-item",text:t.exportType.excel,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.excel)}}},st={toolType:n.containerItem,selectorClass:"fr-button-exportTiff-id",imageClass:"fr-icons24x24-exportTIFF",sharedClass:"fr-toolbase-dropdown-item",text:t.exportType.tiff,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.tiff)}}},ht={toolType:n.containerItem,selectorClass:"fr-button-exportWord-id",imageClass:"fr-icons24x24-exportWord",sharedClass:"fr-toolbase-dropdown-item",text:t.exportType.word,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.word)}}},ct={toolType:n.textButton,selectorClass:"fr-toolbar-sparator-text",sharedClass:"fr-toolbar-touch-hidden",text:"|&nbsp"},lt={toolType:n.button,selectorClass:"fr-toolbar-export-button",imageClass:"fr-icons24x24-export",sharedClass:"fr-toolbar-touch-hidden",dropdown:!0,tools:[rt,ut,ft,et,ot,st,ht]};$.widget(a.getFullname(a.toolbar),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolbar"},_initCallbacks:function(){var n=this;n.options.$reportViewer.on(i.reportViewerChangePage(),function(t,i){$("input.fr-toolbar-reportpage-textbox",n.$el).val(i.newPageNum);var r=n.options.$reportViewer.reportViewer("getNumPages");n._updateBtnStates(i.newPageNum,r),i.paramLoaded===!1&&n.disableTools([e])});n.options.$reportViewer.on(i.reportViewerDrillBack(),function(){n._clearBtnStates()});n.options.$reportViewer.on(i.reportViewerShowParamArea(),function(){n.enableTools([e])});n.options.$reportViewer.on(i.reportViewerShowDocMap(),function(){n.disableAllTools(),n.enableTools([u,l])});n.options.$reportViewer.on(i.reportViewerHideDocMap(),function(){n.enableAllTools()});n.enableTools([l,e,f,v,y,o,s,h,c,u,p,w])},_init:function(){var n=this;n.element.html("<div class='"+n.options.toolClass+"'/>"),n.addTools(1,!0,[l,v,f,y,g,u,it,ct,lt,e]),n.options.$reportViewer&&n._initCallbacks()},_updateBtnStates:function(n,t){var i=this;i.element.find(".fr-toolbar-numPages-button").html(t),i.element.find(".fr-toolbar-reportpage-textbox").attr({max:t,min:1}),i.options.$reportViewer.reportViewer("getHasDocMap")?i.enableTools([u]):i.disableTools([u]),n<=1?i.disableTools([s,o]):i.enableTools([s,o]),n>=t?i.disableTools([h,c]):i.enableTools([h,c]),t===1?i.disableTools([f]):i.enableTools([f])},_clearBtnStates:function(){var n=this;n.element.find(".fr-toolbar-keyword-textbox").val("")},_destroy:function(){},_create:function(){var n=this}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var c=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events,n=forerunner.ssr.constants.toolTypes,i=forerunner.localize.getLocData(forerunner.config.forerunnerFolder+"/ReportViewer/loc/ReportViewer"),r=forerunner.ssr.constants.exportType,f={toolType:n.containerItem,selectorClass:"fr-id-nav",imageClass:"fr-icons24x24-nav",text:i.toolPane.navigation,events:{click:function(n){n.data.$reportViewer.reportViewer("showNav"),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-id-nav"])}}},w={toolType:n.containerItem,selectorClass:"fr-item-zoom",imageClass:"fr-icons24x24-nav",text:i.toolPane.zoom,events:{click:function(n){forerunner.device.allowZoom(!0),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-item-zoom"])}}},l={toolType:n.containerItem,selectorClass:"fr-id-reportback",imageClass:"fr-icons24x24-reportback",text:i.toolPane.back,events:{click:function(n){n.data.$reportViewer.reportViewer("back"),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-id-reportback"])}}},a={toolType:n.containerItem,selectorClass:"fr-id-refresh",imageClass:"fr-icons24x24-refresh",text:i.toolPane.refresh,events:{click:function(n){n.data.$reportViewer.reportViewer("refreshReport"),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-id-refresh"])}}},e={toolType:n.button,selectorClass:"fr-id-firstpage",imageClass:"fr-icons24x24-firstpage",events:{click:function(n){n.data.$reportViewer.reportViewer("navToPage",1),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-id-firstpage"])}}},o={toolType:n.button,selectorClass:"fr-id-prev",imageClass:"fr-icons24x24-prev",events:{click:function(n){n.data.$reportViewer.reportViewer("navToPage",n.data.$reportViewer.reportViewer("getCurPage")-1),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-id-prev"])}}},b={toolType:n.input,selectorClass:"fr-item-textbox-reportpage",inputType:"number",events:{keypress:function(n){n.keyCode===13&&n.data.$reportViewer.reportViewer("navToPage",this.value)}}},k={toolType:n.plainText,selectorClass:"fr-toolbar-pageOf-button",text:i.toolPane.pageOf},d={toolType:n.plainText,selectorClass:"fr-toolbar-numPages-button",text:""},s={toolType:n.button,selectorClass:"fr-id-next",imageClass:"fr-icons24x24-next",events:{click:function(n){n.data.$reportViewer.reportViewer("navToPage",n.data.$reportViewer.reportViewer("getCurPage")+1),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-id-next"])}}},h={toolType:n.button,selectorClass:"fr-id-lastpage",imageClass:"fr-icons24x24-lastpage",events:{click:function(n){n.data.$reportViewer.reportViewer("navToPage",n.data.$reportViewer.reportViewer("getNumPages")),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-id-lastpage"])}}},g={toolType:n.toolGroup,selectorClass:"fr-item-VCRgroup",tools:[e,o,b,k,d,s,h]},u={toolType:n.containerItem,selectorClass:"fr-id-documentmap",imageClass:"fr-icons24x24-documentmap",text:i.toolPane.docMap,events:{click:function(n){n.data.$reportViewer.reportViewer("showDocMap"),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-id-documentmap"])}}},nt={toolType:n.containerItem,imageClass:"fr-icons24x24-exportXML",text:i.exportType.xml,selectorClass:"fr-item-exportXML",indent:1,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.xml)}}},tt={toolType:n.containerItem,imageClass:"fr-icons24x24-exportCSV",text:i.exportType.csv,selectorClass:"fr-item-exportCSV",indent:1,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.csv)}}},it={toolType:n.containerItem,imageClass:"fr-icons24x24-exportPDF",text:i.exportType.pdf,selectorClass:"fr-item-exportPDF",indent:1,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.pdf)}}},rt={toolType:n.containerItem,imageClass:"fr-icons24x24-exportMHT",text:i.exportType.mhtml,selectorClass:"fr-item-exportMHTML",indent:1,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.mhtml)}}},ut={toolType:n.containerItem,imageClass:"fr-icons24x24-exportExcel",text:i.exportType.excel,selectorClass:"fr-item-exportExcel",indent:1,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.excel)}}},ft={toolType:n.containerItem,imageClass:"fr-icons24x24-exportTIFF",text:i.exportType.tiff,selectorClass:"fr-item-exportTiff",indent:1,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.tiff)}}},et={toolType:n.containerItem,imageClass:"fr-icons24x24-exportWord",text:i.exportType.word,selectorClass:"fr-item-exportWord",indent:1,events:{click:function(n){n.data.$reportViewer.reportViewer("exportReport",r.word)}}},v={toolType:n.toolGroup,visible:!1,selectorClass:"fr-item-export-group",tools:[nt,tt,it,rt,ut,ft,et]},ot={toolType:n.containerItem,selectorClass:"fr-item-export",imageClass:"fr-icons24x24-export",text:i.toolbar.exportMenu,rightImageClass:"fr-toolpane-icon16x16 fr-toolpane-down-icon",accordionGroup:v,events:{click:function(n){var u=n.data.me.allTools["fr-item-export"],t=n.data.me.element.find(".fr-toolpane-icon16x16"),i,r;t.toggleClass("fr-toolpane-down-icon"),t.toggleClass("fr-toolpane-up-icon"),i=u.accordionGroup,r=n.data.me.element.find("."+i.selectorClass),r.toggle()}}},st={toolType:n.input,selectorClass:"fr-item-textbox-keyword",events:{keypress:function(n){n.keyCode===13&&(n.data.$reportViewer.reportViewer("find",$.trim(this.value)),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-item-find"]))}}},y={toolType:n.textButton,selectorClass:"fr-item-find",text:i.toolPane.find,events:{click:function(n){var i=$.trim(n.data.me.element.find(".fr-item-textbox-keyword").val());n.data.$reportViewer.reportViewer("find",i),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-item-find"])}}},ht={toolType:n.plainText,selectorClass:"fr-item-span-sparator",text:"|&nbsp"},p={toolType:n.textButton,selectorClass:"fr-item-findnext",text:i.toolPane.next,events:{click:function(n){var i=$.trim(n.data.me.element.find(".fr-item-textbox-keyword").val());n.data.$reportViewer.reportViewer("findNext",i),n.data.me._trigger(t.actionStarted,null,n.data.me.allTools["fr-item-findnext"])}}},ct={toolType:n.toolGroup,selectorClass:"fr-item-findgroup",tools:[st,y,ht,p]};$.widget(c.getFullname(c.toolPane),$.forerunner.toolBase,{options:{$reportViewer:null,toolClass:"fr-toolpane"},_initCallbacks:function(){var n=this;n.options.$reportViewer.on(t.reportViewerChangePage(),function(t,i){$("input.fr-item-textbox-reportpage",n.$el).val(i.newPageNum);var r=n.options.$reportViewer.reportViewer("getNumPages");n._updateItemStates(i.newPageNum,r)});n.options.$reportViewer.on(t.reportViewerDrillBack(),function(){n._clearItemStates()});n.options.$reportViewer.on(t.reportViewerShowDocMap(),function(){n.disableAllTools(),n.enableTools([u])});n.options.$reportViewer.on(t.reportViewerHideDocMap(),function(){n.enableAllTools()});n.enableTools([e,o,s,h,f,l,a,u,y,p])},_init:function(){var n=this;n.element.html("<div class='"+n.options.toolClass+"'/>"),n.addTools(1,!0,[g,f,l,a,u,w,ot,v,ct]),n.options.$reportViewer&&n._initCallbacks()},_updateItemStates:function(n,t){var i=this;i.element.find(".fr-toolbar-numPages-button").html(t),i.element.find(".fr-item-textbox-reportpage").attr({max:t,min:1}),i.options.$reportViewer.reportViewer("getNumPages",n),i.options.$reportViewer.reportViewer("getHasDocMap")?i.enableTools([u]):i.disableTools([u]),n>1?i.enableTools([o,e]):i.disableTools([o,e]),n<t?i.enableTools([s,h]):i.disableTools([s,h]),t===1?i.disableTools([f]):i.enableTools([f])},_clearItemStates:function(){var n=this;n.element.find(".fr-item-textbox-keyword").val("")}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets,t=forerunner.ssr.constants.events;$.widget(n.getFullname(n.pageNav),{options:{$reportViewer:null},_create:function(){},_setCurrentPage:function(n){var t=this;t.currentPageNum!==null&&t.currentPageNum!==n&&t.listItems[t.currentPageNum-1].removeClass("fr-nav-selected"),t.currentPageNum=n,t._ScrolltoPage(),t.listItems[t.currentPageNum-1].addClass("fr-nav-selected")},_ScrolltoPage:function(){var n=this,t;n.currentPageNum&&!forerunner.device.isElementInViewport(n.listItems[n.currentPageNum-1].get(0))&&(t=n.$ul.scrollLeft()+n.listItems[n.currentPageNum-1].position().left,n.$ul.scrollLeft(t))},_renderList:function(){var n=this,l=forerunner.device.isTouch(),u,t,o,i,f,r;u=new $("<UL />"),u.addClass("fr-nav-container"),n.$ul=u;var e=n.options.$reportViewer.reportViewer("getNumPages"),s=n.options.$reportViewer.reportViewer("getSessionID"),h=n.options.$reportViewer.reportViewer("getReportViewerAPI"),c=n.options.$reportViewer.reportViewer("getReportPath");for(n.listItems=new Array(e),t=1;t<=e;t++)o=h+"/GetThumbnail/?ReportPath="+c+"&SessionID="+s+"&PageNumber="+t,i=new $("<LI />"),u.append(i),n.listItems[t-1]=i,f=new $("<DIV />"),f.html("<h3 class='fr-report-centertext'>"+t.toString()+"<\/h3>"),f.addClass("fr-report-center"),r=new $("<IMG />"),r.addClass("fr-nav-page-thumb"),r.attr("src",o),r.data("pageNumber",t),this._on(r,{click:function(t){n.options.$reportViewer.reportViewer("navToPage",$(t.currentTarget).data("pageNumber")),forerunner.device.isSmall()&&n.options.$reportViewer.reportViewer("showNav")}}),i.addClass("fr-nav-item"),i.append(f),i.append(r);return u.append($("<LI />").addClass("fr-nav-li-spacer"))},reset:function(){var n=this;n.element.hide(),n.isRendered=!1},_render:function(){var n=this,u,t,i,r;n.element.html(""),u=forerunner.device.isTouch(),t=new $("<DIV />"),t.addClass("fr-nav-container"),i=new $("<DIV />"),t.append(i),r=n._renderList(),i.append(r),n.element.css("display","block"),n.element.append(t),n.element.hide(),n._initCallbacks(),n._setCurrentPage(n.options.$reportViewer.reportViewer("getCurPage"))},_makeVisible:function(n){var t=this;n?(t.element.fadeIn("fast"),t._ScrolltoPage()):t.element.fadeOut("fast")},showNav:function(){var n=this;n.isRendered||(n._render(),n.isRendered=!0),n._makeVisible(!n.element.is(":visible"))},_initCallbacks:function(){var n=this;n.options.$reportViewer.on(t.reportViewerChangePage(),function(t,i){n._setCurrentPage(i.newPageNum)})},_init:function(){var n=this;n.listItems=null,n.$ul=null,n.currentPageNum=null,n.isRendered=!1}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.toolTypes,t=forerunner.ssr.constants.widgets;$.widget(t.getFullname(t.reportExplorerToolbar),$.forerunner.toolBase,{options:{navigateTo:null,toolClass:"fr-toolbar"},btnHome:{toolType:n.button,selectorClass:"fr-rm-button-home",imageClass:"fr-icons24x24-home",events:{click:function(n){n.data.me.options.navigateTo("home",null)}}},btnBack:{toolType:n.button,selectorClass:"fr-button-back",imageClass:"fr-icons24x24-back",events:{click:function(n){n.data.me.options.navigateTo("back",null)}}},btnFav:{toolType:n.button,selectorClass:"fr-rm-button-fav",imageClass:"fr-image-fav",events:{click:function(n){n.data.me.options.navigateTo("favorites",null)}}},btnRecent:{toolType:n.button,selectorClass:"fr-rm-button-recent",imageClass:"fr-image-recent",events:{click:function(n){n.data.me.options.navigateTo("recent",null)}}},_initCallbacks:function(){var n=this;n.enableTools([n.btnHome,n.btnBack,n.btnFav,n.btnRecent])},_init:function(){var n=this;n.element.empty(),n.element.append($("<div/>").addClass(n.options.toolClass)),n.addTools(1,!0,[n.btnBack,n.btnHome,n.btnFav,n.btnRecent]),n._initCallbacks()},_destroy:function(){},_create:function(){var n=this}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportExplorer),{options:{reportManagerAPI:"../api/ReportManager",forerunnerPath:"../forerunner",path:null,view:null,selectedItemPath:null,$scrollBarOwner:null,navigateTo:null},_generatePCListItem:function(n,t){var r=this,v=r.options.reportManagerAPI+"/GetThumbnail/?ReportPath="+n.Path+"&DefDate="+n.ModifiedDate,u=new $("<div />"),o,s,f,l,e,i,a,h,c;t&&(u.addClass("fr-explorer-item-selected"),r.$selectedItem=u),u.addClass("fr-explorer-item"),o=new $("<div />"),o.addClass("fr-explorer-item-center"),u.append(o),s=new $("<h3 />"),s.addClass("fr-explorer-item-centertext"),s.html(n.Name),o.append(s),f=new $("<div />"),f.addClass("fr-report-item-image-block"),u.append(f),e=new $("<a />"),i=new $("<img />"),i.addClass("fr-explorer-item-width"),i.addClass("fr-explorer-item-center"),n.Type===1?l=r.options.forerunnerPath+"/ReportExplorer/images/folder-icon.png":(l=v,f.addClass("fr-report-item-image-block-shadow")),a=n.Type===1?"explore":"browse",i.attr("src",l),i.error(function(){$(this).attr("src",r.options.forerunnerPath+"/ReportExplorer/images/Report-icon.png")}),i.removeAttr("height");e.on("click",function(){r.options.navigateTo&&r.options.navigateTo(a,n.Path)});return h=new $("<div />"),h.addClass("fr-report-item-reflection"),c=i.clone(),c.addClass("fr-report-item-reflection"),c.error(function(){$(this).attr("src",r.options.forerunnerPath+"/ReportExplorer/images/Report-icon.png")}),h.append(c),e.append(i),e.append(h),f.append(e),u},_renderPCView:function(n){var t=this,r,i,u,f;for(t.$UL=t.element.find(".fr-report-explorer"),r=t.options.selectedItemPath?decodeURIComponent(t.options.selectedItemPath):null,t.rmListItems=new Array(n.length),i=0;i<n.length;i++)u=n[i],f=!1,r&&r===decodeURIComponent(u.Path)&&(t.selectedItem=i,f=!0),t.rmListItems[i]=t._generatePCListItem(u,f),t.$UL.append(t.rmListItems[i])},_render:function(n){var t=this;t.element.html("<div class='fr-report-explorer'><\/div>"),t._renderPCView(n),t.$selectedItem&&($(window).scrollTop(t.$selectedItem.offset().top-50),$(window).scrollLeft(t.$selectedItem.offset().left-20))},_setSelectionFromScroll:function(){for(var n=this,u=n.$explorer.scrollTop(),f=0,r=0,e=Math.abs(u-n.rmListItems[0].position().top),i,t=1;t<n.rmListItems.length;t++){if(i=Math.abs(u-n.rmListItems[t].position().top),i<e)f=t,e=i;else if(r!==0&&i>r)break;r=i}n.selectedItem=f},_fetch:function(n,t){var i=this;$.ajax({dataType:"json",url:i.options.reportManagerAPI+"/GetItems",async:!1,data:{view:n,path:t},success:function(n){i._render(n)},error:function(n){console.log(n),alert("Failed to load the catalogs from the server.  Please try again.")}})},_initCallbacks:function(){var n=this},_init:function(){var n=this;n.$RMList=null,n.$UL=null,n.rmListItems=null,n.selectedItem=0,n.isRendered=!1,n.$explorer=n.options.$scrollBarOwner?n.options.$scrollBarOwner:$(window),n.$selectedItem=null,n._fetch(n.options.view,n.options.path)}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){function n(n,t,i,r,u,f,e){this.RS=n,this.CurrObj=t,this.CurrObjIndex=i,this.CurrObjParent=r,this.$HTMLParent=u,this.Style=f,this.CurrLocation=e}function i(){this.ReportItems={},this.Height=0,this.LowestIndex=null}function r(n,t){this.Height=n,this.Width=t}function u(n){this.TopDelta=0,this.Height=0,this.Index=n,this.IndexAbove=null,this.NewHeight=null,this.NewTop=null}function f(n,t,i){this.$tablix=n,this.$rowHeader=t,this.$colHeader=i}var t=forerunner.ssr.constants.widgets;$.widget(t.getFullname(t.reportRender),{options:{reportViewer:null},_create:function(){},render:function(t){var i=this,r=i.element,u=i.options.reportViewer;r.attr("Style",i._getStyle(u,t.ReportContainer.Report.PageContent.PageStyle)),$.each(t.ReportContainer.Report.PageContent.Sections,function(f,e){i._writeSection(new n(u,e,f,t.ReportContainer.Report.PageContent,r,""))})},writeError:function(n){var i=this,r=i.options.reportViewer.locData.errorTag,t;if(i.element.html($("<div class='fr-render-error-message'><\/div><div class='fr-render-error-details'>"+r.moreDetail+"<\/div><div class='fr-render-error'><h3>"+r.serverError+"<\/h3><div class='fr-render-error fr-render-error-type'><\/div><div class='fr-render-error fr-render-error-targetsite'><\/div><div class='fr-render-error fr-render-error-source'><\/div><div class='fr-render-error fr-render-error-stacktrace'><\/div><\/div>")),i.options.reportViewer){t=i.element.find(".fr-render-error"),t.hide(),t=i.element.find(".fr-render-error-details");t.on("click",{$Detail:i.element.find(".fr-render-error")},function(n){n.data.$Detail.show(),$(n.target).hide()});t=i.element.find(".fr-render-error-type"),t.append("<h4>"+r.type+":<\/h4>"+n.Exception.Type),t=i.element.find(".fr-render-error-targetsite"),t.html("<h4>"+r.targetSite+":<\/h4>"+n.Exception.TargetSite),t=i.element.find(".fr-render-error-source"),t.html("<h4>"+r.source+":<\/h4>"+n.Exception.Source),t=i.element.find(".fr-render-error-message"),t.html("<h4>"+r.message+":<\/h4>"+n.Exception.Message),t=i.element.find(".fr-render-error-stacktrace"),t.html("<h4>"+r.stackTrace+":<\/h4>"+n.Exception.StackTrace)}},_writeSection:function(t){var i=this,r=i._getDefaultHTMLTable(),e=$("<TR/>"),o=i._getMeasurmentsObj(t.CurrObjParent,t.CurrObjIndex),f,u;t.CurrObj.PageFooter?(u=t.CurrObj.Columns.length,f=u+1):f=t.CurrObj.Columns.length,t.CurrObjParent.PageHeader?(f=1,u=2):t.CurrObjParent.PageFooter&&(u=1),t.CurrObj.PageHeader&&r.append(i._writeHeaderFooter(t,"PageHeader",f)),t.CurrObjParent.PageHeader&&r.append(i._writeHeaderFooter(new n(t.RS,t.CurrObjParent,null,null,null,null,null),"PageHeader",f)),e.attr("Style","width:"+o.Width+"mm;"),r.append(e),$.each(t.CurrObj.Columns,function(r,u){var f=new $("<TD/>");f.append(i._writeRectangle(new n(t.RS,u,r,t.CurrObj,new $("<Div/>"),null,o))),e.append(f)}),t.CurrObj.PageFooter&&r.append(i._writeHeaderFooter(t,"PageFooter",u)),t.CurrObjParent.PageFooter&&r.append(i._writeHeaderFooter(new n(t.RS,t.CurrObjParent,null,null,null,null,null),"PageFooter",u)),t.$HTMLParent.append(r)},_writeHeaderFooter:function(t,i,r){var o=this,u,f,e;if(t.CurrObj[i])return u=$("<TR/>"),f=$("<TD/>"),u.append(f),e=o._getMeasurmentsObj(t.CurrObj,r),u.attr("Style","width:"+e.Width+"mm;"),f.append(o._writeRectangle(new n(t.RS,t.CurrObj[i],r,t.CurrObj,new $("<DIV/>"),null,e))),u},_writeRectangle:function(t){var o,e,u,i,r,f=this,s;return u=t.CurrObj.Measurement.Measurements,i=f._getRectangleLayout(u),$.each(t.CurrObj.ReportItems,function(s,h){r="",h.Type!=="Line"&&(r="display:table;border-collapse:collapse;"+f._getFullBorderStyle(h)),o=f._writeReportItems(new n(t.RS,h,s,t.CurrObj,new $("<Div/>"),r,u[s])),e=new $("<Div/>"),e.append(o),r="",i.ReportItems[s].NewHeight=h.Type==="Image"||h.Type==="Chart"||h.Type==="Gauge"||h.Type==="Map"||h.Type==="Line"?u[s].Height:f._getHeight(o),i.ReportItems[s].NewTop=i.ReportItems[s].IndexAbove===null?u[s].Top:parseFloat(i.ReportItems[i.ReportItems[s].IndexAbove].NewTop)+parseFloat(i.ReportItems[i.ReportItems[s].IndexAbove].NewHeight)+parseFloat(i.ReportItems[s].TopDelta),r+="position:absolute;top:"+i.ReportItems[s].NewTop+"mm;left:"+u[s].Left+"mm;",t.CurrObj.ReportItems[s].Element&&t.CurrObj.ReportItems[s].Elements.SharedElements.Style&&t.CurrObj.ReportItems[s].Elements.SharedElements.Style.BackgroundColor?r+="background-color:"+t.CurrObj.ReportItems[s].Elements.SharedElements.Style.BackgroundColor+";":t.CurrObj.ReportItems[s].Element&&t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style&&t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style.BackgroundColor&&(r+="background-color:"+t.CurrObj.ReportItems[s].Elements.NonSharedElements.Style.BackgroundColor+";"),e.attr("Style",r),e.append(o),t.$HTMLParent.append(e)}),r="position:relative;"+f._getElementsStyle(t.RS,t.CurrObj.Elements),r+=f._getFullBorderStyle(t.CurrObj),t.CurrLocation&&(r+="width:"+t.CurrLocation.Width+"mm;",t.CurrObj.ReportItems.length===0?r+="height:"+(t.CurrLocation.Height+1)+"mm;":(s=parseFloat(i.ReportItems[i.LowestIndex].NewTop)+parseFloat(i.ReportItems[i.LowestIndex].NewHeight)+(parseFloat(t.CurrLocation.Height)-(parseFloat(u[i.LowestIndex].Top)+parseFloat(u[i.LowestIndex].Height)))+1,r+="height:"+s+"mm;")),t.$HTMLParent.attr("Style",r),t.CurrObj.Elements.NonSharedElements.UniqueName&&f._writeUniqueName(t.$HTMLParent,t.CurrObj.Elements.NonSharedElements.UniqueName),t.$HTMLParent},_getRectangleLayout:function(n){var t=new i,r=this;return $.each(n,function(i,f){var e,o,s;for(t.ReportItems[i]=new u(i),e=t.ReportItems[i],r.isNull(t.LowestIndex)?t.LowestIndex=i:f.Top+f.Height>n[t.LowestIndex].Top+n[t.LowestIndex].Height&&(t.LowestIndex=i),o=0;o<n.length;o++)s=n[o].Top+n[o].Height,f.Top>s&&(e.IndexAbove?s>n[e.IndexAbove].Top+n[e.IndexAbove].Height&&(e.IndexAbove=o,e.TopDelta=f.Top-s):(e.IndexAbove=o,e.TopDelta=f.Top-s))}),t},_writeReportItems:function(n){var t=this;switch(n.CurrObj.Type){case"RichTextBox":return t._writeRichText(n);case"Image":case"Chart":case"Gauge":case"Map":return t._writeImage(n);case"Tablix":return t._writeTablix(n);case"Rectangle":return t._writeRectangle(n);case"SubReport":return t._writeSubreport(n);case"Line":return t._writeLine(n)}},_writeRichText:function(n){var f=n.Style,r=$("<div/>"),i=null,t=this,u,o,s;if(f+="display:table;",t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0)!==""&&(f+=t._getMeasurements(t._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0)),f+=t._getElementsNonTextStyle(n.RS,n.CurrObj.Elements),n.$HTMLParent.attr("Style",f),n.CurrObj.Elements.SharedElements.IsToggleParent===!0||n.CurrObj.Elements.NonSharedElements.IsToggleParent===!0){u=$("<div/>"),u.attr("id",n.CurrObj.Elements.NonSharedElements.UniqueName),u.html("&nbsp"),n.CurrObj.Elements.NonSharedElements.ToggleState!==undefined&&n.CurrObj.Elements.NonSharedElements.ToggleState===!0?u.addClass("fr-render-drilldown-collapse"):u.addClass("fr-render-drilldown-expand");u.on("click",{ToggleID:n.CurrObj.Elements.NonSharedElements.UniqueName},function(n){t.options.reportViewer.toggleItem(n.data.ToggleID)});u.addClass("fr-core-cursorpointer"),n.$HTMLParent.append(u)}if(n.CurrObj.Elements.SharedElements.CanSort!==undefined){i=$("<div/>"),i.html("&nbsp"),o="None",s=forerunner.ssr.constants.sortDirection,n.CurrObj.Elements.NonSharedElements.SortState===2?(i.attr("class","fr-render-sort-descending"),o=s.desc):n.CurrObj.Elements.NonSharedElements.SortState===1?(i.attr("class","fr-render-sort-ascending"),o=s.asc):i.attr("class","fr-render-sort-unsorted");i.on("click",{Viewer:n.RS,SortID:n.CurrObj.Elements.NonSharedElements.UniqueName,Direction:o},function(n){n.data.Viewer.sort(n.data.Direction,n.data.SortID)});n.$HTMLParent.append(i)}if(t._writeActions(n,n.CurrObj.Elements.NonSharedElements,r),n.CurrObj.Elements.NonSharedElements.UniqueName&&t._writeUniqueName(r,n.CurrObj.Elements.NonSharedElements.UniqueName),f="display: table-cell;white-space:pre-wrap;word-break:break-word;word-wrap:break-word;",f+=t._getElementsTextStyle(n.CurrObj.Elements),r.attr("Style",f),n.CurrObj.Paragraphs.length===0)n.CurrObj.Elements.SharedElements.Value?r.html(n.CurrObj.Elements.SharedElements.Value):n.CurrObj.Elements.NonSharedElements.Value?r.html(n.CurrObj.Elements.NonSharedElements.Value):r.html("&nbsp");else{var h=null,c={},e={};e.Root="",$.each(n.CurrObj.Paragraphs,function(n,t){h===null&&(h=t.Paragraph.SharedElements.ListLevel),e[t.Paragraph.SharedElements.ListLevel]||(e[t.Paragraph.SharedElements.ListLevel]=[]),c[t.Paragraph.SharedElements.ListLevel]=t.Paragraph.NonSharedElements.UniqueName;var i;i=c[t.Paragraph.SharedElements.ListLevel-1]?c[t.Paragraph.SharedElements.ListLevel-1]:"Root",i={Parent:i,Value:t},e[t.Paragraph.SharedElements.ListLevel].push(i)}),t._writeRichTextItem(n,e,h,"Root",r)}return t._writeBookMark(n),n.$HTMLParent.append(r),i&&n.$HTMLParent.append(i),n.$HTMLParent},_writeRichTextItem:function(n,t,i,r,u){var f=null,e=this;$.each(t[i],function(o,s){var l,a,h,c,y,v;if(s.Parent===r){for(s=s.Value,s.Paragraph.SharedElements.ListStyle===1?(f&&f.is("ol")||(f=new $("<OL />")),f.addClass(e._getListStyle(1,s.Paragraph.SharedElements.ListLevel)),l=new $("<LI />")):s.Paragraph.SharedElements.ListStyle===2?(f&&f.is("ul")||(f=new $("<UL />")),f.addClass(e._getListStyle(2,s.Paragraph.SharedElements.ListLevel)),l=new $("<LI />")):(f&&f.is("div")||(f=new $("<DIV />")),l=new $("<DIV />")),a="",a+=e._getMeasurements(e._getMeasurmentsObj(s,i)),a+=e._getElementsStyle(n.RS,s.Paragraph),l.attr("Style",a),l.attr("name",s.Paragraph.NonSharedElements.UniqueName),h=0;h<s.TextRunCount;h++)y=!0,s.TextRuns[h].Elements.NonSharedElements.ActionInfo?(c=new $("<A />"),e._writeActions(n,s.TextRuns[h].Elements.NonSharedElements,c)):c=new $("<SPAN />"),s.TextRuns[h].Elements.SharedElements.Value&&s.TextRuns[h].Elements.SharedElements.Value!==""?c.html(s.TextRuns[h].Elements.SharedElements.Value):s.TextRuns[h].Elements.NonSharedElements.Value&&s.TextRuns[h].Elements.NonSharedElements.Value!==""?c.html(s.TextRuns[h].Elements.NonSharedElements.Value):(c.html("&nbsp"),y=!1),c.attr("Name",s.TextRuns[h].Elements.NonSharedElements.UniqueName),y&&(v="",v+=e._getMeasurements(e._getMeasurmentsObj(s.TextRuns[h],h)),v+=e._getElementsStyle(n.RS,s.TextRuns[h].Elements),c.attr("Style",v)),l.append(c);t[i+1]&&e._writeRichTextItem(n,t,i+1,s.Paragraph.NonSharedElements.UniqueName,l),f.append(l),u.append(f)}})},_writeUniqueName:function(n,t){n.attr("name",t)},_getImageURL:function(n,t){var i=this,r=i.options.reportViewer.options.reportViewerAPI+"/GetImage/?";return r+="SessionID="+i.options.reportViewer.sessionID,r+("&ImageID="+t)},_writeImage:function(n){var t=new Image,i=this,r=n.Style+"display:block;max-height:100%;max-width:100%;"+i._getElementsStyle(n.RS,n.CurrObj.Elements),u,f;return r+=i._getMeasurements(i._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),!0),r+="overflow:hidden;",f=n.CurrObj.Elements.SharedElements.Sizing,u=n.CurrObj.Type==="Image"?n.CurrObj.Elements.NonSharedElements.ImageDataProperties.ImageName:n.CurrObj.Elements.NonSharedElements.StreamName,n.CurrObj.Elements.NonSharedElements.ActionImageMapAreas&&(t.useMap="#Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),t.onload=function(){var r=i._getNatural(this);i._writeActionImageMapAreas(n,t.width,t.height),i._resizeImage(this,f,r.height,r.width,n.CurrLocation.Height,n.CurrLocation.Width)},t.alt=i.options.reportViewer.locData.messages.imageNotDisplay,$(t).attr("style","display:block;"),t.src=this._getImageURL(n.RS,u),i._writeActions(n,n.CurrObj.Elements.NonSharedElements,$(t)),i._writeBookMark(n),n.CurrObj.Elements.NonSharedElements.UniqueName&&i._writeUniqueName($(t),n.CurrObj.Elements.NonSharedElements.UniqueName),n.$HTMLParent.attr("style",r),n.$HTMLParent.append(t),n.$HTMLParent},_writeActions:function(n,t,i){if(t.ActionInfo)for(var r=0;r<t.ActionInfo.Count;r++)this._writeAction(n,t.ActionInfo.Actions[r],i)},_writeAction:function(n,t,i){var r=this;if(t.HyperLink)i.attr("href",t.HyperLink);else if(t.BookmarkLink){i.attr("href","#"),i.addClass("fr-core-cursorpointer");i.on("click",{BookmarkID:t.BookmarkLink},function(n){r._stopDefaultEvent(n),r.options.reportViewer.navigateBookmark(n.data.BookmarkID)})}else{i.addClass("fr-core-cursorpointer"),i.attr("href","#");i.on("click",{DrillthroughId:t.DrillthroughId},function(n){r._stopDefaultEvent(n),r.options.reportViewer.navigateDrillthrough(n.data.DrillthroughId)})}},_writeActionImageMapAreas:function(n,t,i){var l=n.CurrObj.Elements.NonSharedElements.ActionImageMapAreas,v=v,s,h,r,u,f,c,o,a,e;if(l){for(s=$("<MAP/>"),s.attr("name","Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),s.attr("id","Map_"+n.RS.sessionID+"_"+n.CurrObj.Elements.NonSharedElements.UniqueName),h=0;h<l.Count;h++)for(r=l.ActionInfoWithMaps[h],u=0;u<r.ImageMapAreas.Count;u++){f=$("<AREA />"),f.attr("tabindex",h+1),f.attr("style","text-decoration:none"),f.attr("alt",r.ImageMapAreas.ImageMapArea[u].Tooltip),r.Actions&&this._writeAction(n,r.Actions[0],f),o="";switch(r.ImageMapAreas.ImageMapArea[u].ShapeType){case 0:c="rect",o=parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[0]*t/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[1]*i/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[2]*t/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[3]*i/100,10);break;case 1:for(c="poly",a=r.ImageMapAreas.ImageMapArea[u].CoorCount,e=0;e<a;e++)o+=e%2==0?parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[e]*t/100,10):parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[e]*i/100,10),e<a-1&&(o+=",");break;case 2:c="circ",o=parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[0]*t/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[1]*i/100,10)+","+parseInt(r.ImageMapAreas.ImageMapArea[u].Coordinates[2]*t/100,10)}f.attr("shape",c),f.attr("coords",o),s.append(f)}n.$HTMLParent.append(s)}},_resizeImage:function(n,t,i,r,u,f){var e=0,o=this,s;if(i=o._convertToMM(i+"px"),r=o._convertToMM(r+"px"),i!==0&&r!==0)switch(t){case 0:$(n).css("height",i+"mm"),$(n).css("width",r+"mm");break;case 1:$(n).css("height",u+"mm"),$(n).css("width",f+"mm");break;case 2:(i/u>1||r/f>1)&&(i/u>=r/f?(e=u/i,$(n).css("height",u+"mm"),$(n).css("width",r*e+"mm"),$(n).css("max-height",u+"mm"),$(n).css("max-width",r*e+"mm"),$(n).css("min-height",u+"mm"),$(n).css("min-width",r*e+"mm")):(e=f/r,$(n).css("width",f+"mm"),$(n).css("height",i*e+"mm"),$(n).css("max-width",f+"mm"),$(n).css("max-height",i*e+"mm"),$(n).css("min-width",f+"mm"),$(n).css("min-height",i*e+"mm")));break;case 3:s=o._getNatural(n),$(n).css("height",o._convertToMM(s.height+"px")+"mm"),$(n).css("width",o._convertToMM(s.width+"px")+"mm"),$(n).css("max-height",o._convertToMM(s.height+"px")+"mm"),$(n).css("max-width",o._convertToMM(s.width+"px")+"mm")}},_writeBookMark:function(n){var t=$("<a/>");n.CurrObj.Elements.SharedElements.Bookmark?(t.attr("name",n.CurrObj.Elements.SharedElements.Bookmark),t.attr("id",n.CurrObj.Elements.SharedElements.Bookmark)):n.CurrObj.Elements.NonSharedElements.Bookmark&&(t.attr("name",n.CurrObj.Elements.NonSharedElements.Bookmark),t.attr("id",n.CurrObj.Elements.NonSharedElements.Bookmark)),t.attr("id")&&n.$HTMLParent.append(t)},_writeTablixCell:function(t,i,u,f){var o=new $("<TD/>"),e="",s,h,c=this,l,a;return e="vertical-align:top;padding:0;margin:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-ms-box-sizing: border-box;",e+=c._getFullBorderStyle(i.Cell.ReportItem),l=i.ColumnIndex,a=c.isNull(f)?i.RowIndex:f,s=t.CurrObj.ColumnWidths.Columns[l].Width,h=t.CurrObj.RowHeights.Rows[a].Height,e+="overflow:hidden;width:"+s+"mm;max-width:"+s+"mm;height:"+h+"mm;",i.RowSpan!==undefined&&o.attr("rowspan",i.RowSpan),i.ColSpan!==undefined&&o.attr("colspan",i.ColSpan),i.Cell.ReportItem.Elements.SharedElements.Style&&i.Cell.ReportItem.Elements.SharedElements.Style.BackgroundColor?e+="background-color:"+i.Cell.ReportItem.Elements.SharedElements.Style.BackgroundColor+";":i.Cell.ReportItem.Elements.NonSharedElements.Style&&i.Cell.ReportItem.Elements.NonSharedElements.Style.BackgroundColor&&(e+="background-color:"+i.Cell.ReportItem.Elements.NonSharedElements.Style.BackgroundColor+";"),o.attr("Style",e),o.append(c._writeReportItems(new n(t.RS,i.Cell.ReportItem,u,t.CurrObj,new $("<Div/>"),"margin:0;overflow:hidden;width:100%;height:100%;",new r(h,s)))),o},_writeTablix:function(n){var i=this,e=i._getDefaultHTMLTable(),s="border-collapse:collapse;padding:0;margin:0;",t,c=0,o=new $("<DIV/>").css({display:"table",position:"absolute",top:"0px",left:"0px",padding:"0",margin:"0","border-collapse":"collapse"}),r=new $("<TABLE/>").css({display:"table",position:"absolute",top:"0px",left:"0px",padding:"0",margin:"0","border-collapse":"collapse"}),u;r.attr("CELLSPACING",0),r.attr("CELLPADDING",0);var h="",l=!1,a=!1;return s+=i._getMeasurements(i._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex)),s+=i._getElementsStyle(n.RS,n.CurrObj.Elements),e.attr("Style",s),t=new $("<TR/>"),$.each(n.CurrObj.TablixRows,function(u,f){f.RowIndex!==c&&(e.append(t),n.CurrObj.RowHeights.Rows[f.RowIndex-1].FixRows===1&&o.append(t.clone(!0,!0)),t=new $("<TR/>"),c=f.RowIndex),f.UniqueName&&i._writeUniqueName(t,f.UniqueName),f.Type!=="Corner"&&h==="Corner"&&r.append(t.clone(!0,!0)),f.Type!=="RowHeader"&&h==="RowHeader"&&r.append(t.clone(!0,!0)),n.CurrObj.RowHeights.Rows[f.RowIndex].FixRows===1&&(l=!0),f.Type!=="BodyRow"&&n.CurrObj.ColumnWidths.Columns[f.ColumnIndex].FixColumn===1&&(a=!0),f.Type==="BodyRow"?$.each(f.Cells,function(r,u){t.append(i._writeTablixCell(n,u,r,f.RowIndex))}):f.Cell&&t.append(i._writeTablixCell(n,f,u)),h=f.Type}),e.append(t),l?o.hide():o=null,a?r.hide():r=null,u=$("<div style='position:relative'><\/div"),u.append(o),u.append(r),n.CurrObj.Elements.NonSharedElements.UniqueName&&i._writeUniqueName(e,n.CurrObj.Elements.NonSharedElements.UniqueName),u.append(e),n.RS.floatingHeaders.push(new f(u,o,r)),u},_writeSubreport:function(n){var t=this;return n.Style+=t._getElementsStyle(n.RS,n.CurrObj.SubReportProperties),n.CurrObj=n.CurrObj.BodyElements,t._writeRectangle(n)},_writeLine:function(n){var u=this,t=u._getMeasurmentsObj(n.CurrObjParent,n.CurrObjIndex),e="position:relative;width:"+t.Width+"mm;height:"+t.Height+"mm;",r;if(t.Width===0||t.Height===0)e+=u._getFullBorderStyle(n.CurrObj);else{var o=$("<Div/>"),f=Math.sqrt(Math.pow(t.Height,2)+Math.pow(t.Width,2)),i=Math.atan(t.Height/t.Width),s=f/2*Math.sin(i),h=f/2-Math.sqrt(Math.pow(f/2,2)+Math.pow(s,2));n.CurrObj.Elements.SharedElements.Slant===undefined||n.CurrObj.Elements.SharedElements.Slant===0||(i=i-2*i),r="position:absolute;top:"+s+"mm;left:"+h+"mm;",r+=u._getFullBorderStyle(n.CurrObj),r+="width:"+f+"mm;height:0;",r+="-moz-transform: rotate("+i+"rad);",r+="-webkit-transform: rotate("+i+"rad);",r+="-ms-transform: rotate("+i+"rad);",r+="transform: rotate("+i+"rad);",o.attr("Style",r),n.$HTMLParent.append(o)}return u._writeBookMark(n),n.$HTMLParent.attr("Style",e+n.Style),n.$HTMLParent},_getHeight:function(n){var r=this,i,t=n.clone().css({visibility:"hidden"});return t.find("img").remove(),$("body").append(t),i=t.height()+"px",t.remove(),r._convertToMM(i)},_getElementsStyle:function(n,t){var i="",r=this;return i+=r._getStyle(n,t.SharedElements.Style,t.NonSharedElements),i+r._getStyle(n,t.NonSharedElements.Style,t.NonSharedElements)},_getElementsTextStyle:function(n){var t="",i=this;return t+=i._getTextStyle(n.SharedElements.Style,n.NonSharedElements),t+i._getTextStyle(n.NonSharedElements.Style,n.NonSharedElements)},_getElementsNonTextStyle:function(n,t){var i="",r=this;return i+=r._getNonTextStyle(n,t.SharedElements.Style,t.NonSharedElements),i+r._getNonTextStyle(n,t.NonSharedElements.Style,t.NonSharedElements)},_getBorderSize:function(n,t){var o=this,i,f,r,e,u;return(i=n.Elements.SharedElements.Style,i?(f=i.BorderStyle,r=i["BorderStyle"+t],e=i.BorderWidth,u=i["BorderWidth"+t]):(i=n.Elements.NonSharedElements.Style,i&&(f=i.BorderStyle,r=i["BorderStyle"+t],e=i.BorderWidth,u=i["BorderWidth"+t])),!r&&f===0)?0:r===0?0:u?o._convertToMM(u):o._convertToMM(e)},_getPaddingSize:function(n,t){var u=this,i,r;return i=n.Elements.SharedElements.Style,i?r=i["Padding"+t]:(i=n.Elements.NonSharedElements.Style,i&&(r=i["Padding"+t])),u._convertToMM(r)},_getFullBorderStyle:function(n){var i=this,r="",t;return n.Elements?(t=n.Elements.SharedElements.Style,t!==undefined&&(t.BorderStyle!==undefined&&(r+="border:"+t.BorderWidth+" "+i._getBorderStyle(t.BorderStyle)+" "+t.BorderColor+";"),(t.BorderStyleLeft!==undefined||t.BorderWidthLeft!==undefined||t.BorderColorLeft!==undefined)&&(r+="border-left:"+(t.BorderWidthLeft===undefined?t.BorderWidth:t.BorderWidthLeft)+" "+(t.BorderStyleLeft===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleLeft))+" "+(t.BorderColorLeft===undefined?t.BorderColor:t.BorderColorLeft)+";"),(t.BorderStyleRight!==undefined||t.BorderWidthRight!==undefined||t.BorderColorRight!==undefined)&&(r+="border-right:"+(t.BorderWidthRight===undefined?t.BorderWidth:t.BorderWidthRight)+" "+(t.BorderStyleRight===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleRight))+" "+(t.BorderColorRight===undefined?t.BorderColr:t.BorderColorRight)+";"),(t.BorderStyleTop!==undefined||t.BorderWidthTop!==undefined||t.BorderColorTop!==undefined)&&(r+="border-top:"+(t.BorderWidthTop===undefined?t.BorderWidth:t.BorderWidthTop)+" "+(t.BorderStyleTop===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleTop))+" "+(t.BorderColorTop===undefined?t.BorderColor:t.BorderColorTop)+";"),(t.BorderStyleBottom!==undefined||t.BorderWidthBottom!==undefined||t.BorderColorBottom!==undefined)&&(r+="border-bottom:"+(t.BorderWidthBottom===undefined?t.BorderWidth:t.BorderWidthBottom)+" "+(t.BorderStyleBottom===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleBottom))+" "+(t.BorderColorBottom===undefined?t.BorderColor:t.BorderColorBottom)+";")),t=n.Elements.NonSharedElements.Style,t!==undefined&&(t.BorderStyle!==undefined&&(r+="border:"+t.BorderWidth+" "+i._getBorderStyle(t.BorderStyle)+" "+t.BorderColor+";"),(t.BorderStyleLeft!==undefined||t.BorderWidthLeft!==undefined||t.BorderColorLeft!==undefined)&&(r+="border-left:"+(t.BorderWidthLeft===undefined?t.BorderWidth:t.BorderWidthLeft)+" "+(t.BorderStyleLeft===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleLeft))+" "+(t.BorderColorLeft===undefined?t.BorderColor:t.BorderColorLeft)+";"),(t.BorderStyleRight!==undefined||t.BorderWidthRight!==undefined||t.BorderColorRight!==undefined)&&(r+="border-right:"+(t.BorderWidthRight===undefined?t.BorderWidth:t.BorderWidthRight)+" "+(t.BorderStyleRight===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleRight))+" "+(t.BorderColorRight===undefined?t.BorderColr:t.BorderColorRight)+";"),(t.BorderStyleTop!==undefined||t.BorderWidthTop!==undefined||t.BorderColorTop!==undefined)&&(r+="border-top:"+(t.BorderWidthTop===undefined?t.BorderWidth:t.BorderWidthTop)+" "+(t.BorderStyleTop===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleTop))+" "+(t.BorderColorTop===undefined?t.BorderColor:t.BorderColorTop)+";"),(t.BorderStyleBottom!==undefined||t.BorderWidthBottom!==undefined||t.BorderColorBottom!==undefined)&&(r+="border-bottom:"+(t.BorderWidthBottom===undefined?t.BorderWidth:t.BorderWidthBottom)+" "+(t.BorderStyleBottom===undefined?i._getBorderStyle(t.BorderStyle):i._getBorderStyle(t.BorderStyleBottom))+" "+(t.BorderColorBottom===undefined?t.BorderColor:t.BorderColorBottom)+";")),r):""},_getMeasurements:function(n,t){var r=this,i="";return n?(n.Width!==undefined&&(i+="width:"+n.Width+"mm;",i+="min-width:"+n.Width+"mm;",i+="max-width:"+n.Width+"mm;"),t&&n.Height!==undefined&&(i+="height:"+n.Height+"mm;",i+="min-height:"+n.Height+"mm;",i+="max-height:"+n.Height+"mm;"),i):""},_getStyle:function(n,t,i){var u=this,r="";return t?(r+=u._getNonTextStyle(n,t,i),r+u._getTextStyle(t,i)):r},_backgroundRepeatTypesMap:function(){return{0:"repeat",1:"no-repeat",2:"repeat-x",3:"repeat-y"}},_getImageStyleURL:function(n,t){var i=this;return"url("+i._getImageURL(n,t)+")"},_getNonTextStyle:function(n,t){var r=this,i="";return t?(t.BackgroundColor&&(i+="background-color:"+t.BackgroundColor+";"),t.BackgroundImage&&(i+="background-image:"+r._getImageStyleURL(n,t.BackgroundImage.ImageName)+";"),t.BackgroundRepeat!==undefined&&r._backgroundRepeatTypesMap()[t.BackgroundRepeat]&&(i+="background-repeat:"+r._backgroundRepeatTypesMap()[t.BackgroundRepeat]+";"),i):i},_getTextStyle:function(n,t){var r=this,i="";return n?(n.PaddingBottom!==undefined&&(i+="padding-bottom:"+n.PaddingBottom+";"),n.PaddingLeft!==undefined&&(i+="padding-left:"+n.PaddingLeft+";"),n.PaddingRight!==undefined&&(i+="padding-right:"+n.PaddingRight+";"),n.PaddingTop!==undefined&&(i+="padding-top:"+n.PaddingTop+";"),n.UnicodeBiDi!==undefined&&(i+="unicode-bidi:"+r._getBiDi(n.UnicodeBiDi)+";"),n.VerticalAlign!==undefined&&(i+="vertical-align:"+r._getVAligh(n.VerticalAlign)+";"),n.WritingMode!==undefined&&(i+="layout-flow:"+r._getLayoutFlow(n.WritingMode)+";"),n.Direction!==undefined&&(i+="Direction:"+r._getDirection(n.Direction)+";"),n.TextAlign!==undefined&&(i+="text-align:"+r._getTextAlign(n.TextAlign,t)+";"),n.FontStyle!==undefined&&(i+="font-style:"+r._getFontStyle(n.FontStyle)+";"),n.FontWeight!==undefined&&(i+="font-weight:"+r._getFontWeight(n.FontWeight)+";"),n.FontFamily!==undefined&&(i+="font-family:"+n.FontFamily+";"),n.FontSize!==undefined&&(i+="font-size:"+n.FontSize+";"),n.TextDecoration!==undefined&&(i+="text-decoration:"+r._getTextDecoration(n.TextDecoration)+";"),n.Color!==undefined&&(i+="color:"+n.Color+";"),i):i},_getCalendar:function(n){switch(n){case 0:return"Gregorian";case 1:return"GregorianArabic";case 2:return"GregorianMiddleEastFrench";case 3:return"GregorianTransliteratedEnglish";case 4:return"GregorianTransliteratedFrench";case 5:return"GregorianUSEnglish";case 6:return"Hebrew";case 7:return"Hijri";case 9:return"Korean";case 10:return"Julian";case 11:return"Taiwan";case 12:return"ThaiBuddist"}return"Gregorian"},_getTextDecoration:function(n){switch(n){case 0:return"None";case 1:return"Underline";case 2:return"Overline";case 3:return"LineThrough"}return"None"},_getFontWeight:function(n){switch(n){case 0:return"Normal";case 1:return"Thin";case 2:return"ExtraLight";case 3:return"Light";case 4:return"Medium";case 5:return"SemiBold";case 6:return"Bold";case 7:return"ExtraBold";case 8:return"Heavy"}return"General"},_getFontStyle:function(n){switch(n){case 0:return"Normal";case 1:return"Italic"}return"Normal"},_getTextAlign:function(n,t){switch(n){case 0:if(t.TypeCode===undefined)return"Left";switch(t.TypeCode){case 3:case 6:case 7:case 9:case 11:case 12:case 13:case 14:case 15:case 16:return"Right";case 4:case 17:case 18:return"Left";default:return"Left"}break;case 1:return"Left";case 2:return"Center";case 3:return"Right"}},_getDirection:function(n){switch(n){case 0:return"LTR";case 1:return"RTL"}return"LTR"},_getLayoutFlow:function(n){switch(n){case 0:return"Horizontal";case 1:return"Vertical";case 2:return"Rotate270"}return"Horizontal"},_getVAligh:function(n){switch(n){case 0:return"Top";case 1:return"Middle";case 2:return"Bottom"}return"Top"},_getBiDi:function(n){switch(n){case 0:return"normal";case 1:return"embed";case 2:return"BiDiOverride"}return"normal"},_getDefaultHTMLTable:function(){var n=$("<Table/>");return n.attr("CELLSPACING",0),n.attr("CELLPADDING",0),n},_getBorderStyle:function(n){switch(n){case 0:return"None";case 1:return"Dotted";case 2:return"Dashed";case 3:return"Solid";case 4:return"Double"}return"None"},_getMeasurmentsObj:function(n,t){var i=null;return n.Measurement&&(i=n.Measurement.Measurements[t]),i},_convertToMM:function(n){if(!n)return 0;var i=n.match(/\D+$/),t=n.match(/\d+/);i.length===1&&(i=i[0]),t.length===1&&(t=t[0]);switch(i){case"px":return t/3.78;case"pt":return t*.352777777778;case"in":return t*25.4;case"mm":return t;case"cm":return t*10;case"em":return t*4.2175176}return t},_getListStyle:function(n,t){var i;if(n===1)switch(t%3){case 1:i="decimal";break;case 2:i="lower-roman";break;case 0:i="lower-latin"}else if(n===2)switch(t%3){case 0:i="square";break;case 1:i="disc";break;case 2:i="circle"}return"fr-render-list-"+i},_stopDefaultEvent:function(n){window.ActiveXObject?window.event.returnValue=!1:(n.preventDefault(),n.stopPropagation())},_getNatural:function(n){if(n.naturalWidth!==undefined&&n.naturalHeight!==undefined)return{width:n.naturalWidth,height:n.naturalHeight};var t=new Image;return t.src=n.src,{width:t.width,height:t.height}},isNull:function(n){return n===null||n===undefined?!0:!1}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var t=forerunner.ssr.constants.widgets,i=forerunner.ssr.constants.events,n="fr-param-container";$.widget(t.getFullname(t.reportParameter),{options:{$reportViewer:null,pageNum:null},_formInit:!1,_paramCount:0,_defaultValueExist:!1,_loadedForDefault:!0,_init:function(){var n=this;n.element.html(null)},_destroy:function(){},_render:function(){var t=this,i;t.element.html(null),i=new $("<div class="+n+"><form name='ParameterForm' onsubmit='return false'><div class='fr-param-element-border'><input type='text' style='display:none'><\/div><div class='fr-param-submit-container'><input name='Parameter_ViewReport' type='button' class='fr-param-viewreport' value='"+t.options.$reportViewer.locData.paramPane.viewReport+"'/><\/div><\/form><\/div>"),t.element.css("display","block"),t.element.html(i),t._formInit=!0},writeParameterPanel:function(t,r,u){var f=this,e,o;f.options.pageNum=u,f._paramCount=parseInt(t.Count,10),f._defaultValueExist=t.DefaultValueExist,f._loadedForDefault=!0,f._render(),e=$(".fr-param-element-border"),$.each(t.ParametersList,function(n,t){e.append(f._writeParamControl(t,new $("<div />")))}),f._resetLabelWidth(),f.resetValidateMessage(),$("[name='ParameterForm']").validate({errorPlacement:function(n,t){$(t).is(":radio")?n.appendTo(t.parent("div").next("span")):$(t).attr("IsMultiple")==="True"?n.appendTo(t.parent("div").next("span")):n.appendTo(t.next("span"))},highlight:function(n){$(n).is(":radio")?$(n).parent("div").addClass("fr-param-error"):$(n).addClass("fr-param-error")},unhighlight:function(n){$(n).is(":radio")?$(n).parent("div").removeClass("fr-param-error"):$(n).removeClass("fr-param-error")}});$(".fr-param-viewreport").on("click",function(){f._submitForm()});f._paramCount===t.DefaultValueCount&&f._loadedForDefault?f._submitForm():f._trigger(i.render),o=f.element.find("."+n),o.removeAttr("style"),f.options.$reportViewer.removeLoadingIndicator()},_submitForm:function(){var n=this,t;n._closeAllDropdown(),t=n.getParamsList(),t&&(n.options.$reportViewer.loadReportWithNewParameters(t),n._trigger(i.submit))},_writeParamControl:function(n,t){var i=this,f=new $("<div class='fr-param-label'>"+n.Name+"<\/div>"),u=new $("<div class='fr-param-item-container'><\/div>"),e=new $("<span class='fr-param-error-placeholder'/>"),r=n.ValidValues!==""?n.MultiValue==="True"?i._writeDropDownWithCheckBox(n):i._writeDropDownControl(n):n.Type==="Boolean"?i._writeRadioButton(n):i._writeTextArea(n);r.on("keypress",function(n){n.keyCode===13&&i._submitForm()});return u.append(r).append(i._addNullableCheckBox(n,r)).append(e),t.append(f).append(u),t},_getParameterControlProperty:function(n,t){var i=this;t.attr("AllowBlank",n.AllowBlank),n.Nullable!=="True"&&t.attr("required","true").watermark(i.options.$reportViewer.locData.paramPane.required),t.attr("ErrorMessage",n.ErrorMessage)},_addNullableCheckBox:function(n,t){var f=this,r,i,u;if(n.Nullable==="True"){r=new $("<Span />"),i=new $("<Input type='checkbox' class='fr-param-checkbox' name='"+n.Name+"' />");i.on("click",function(){i.attr("checked")==="checked"?(i.removeAttr("checked"),n.Type==="Boolean"?$(".fr-param-radio."+n.Name).removeAttr("disabled"):t.removeAttr("disabled").removeClass("fr-param-disable").addClass("fr-param-enable")):(i.attr("checked","true"),n.Type==="Boolean"?$(".fr-param-radio."+n.Name).attr("disabled","true"):t.attr("disabled","true").removeClass("fr-param-enable").addClass("fr-param-disable"))});return u=new $("<Label class='fr-param-label-null' />"),u.html(f.options.$reportViewer.locData.paramPane.nullField),r.append(i).append(u),r}return null},_writeRadioButton:function(n){var u=this,e=u.options.$reportViewer.locData.paramPane,t=[],f,i,r,o;for(t[0]={display:e.isTrue,value:"True"},t[1]={display:e.isFalse,value:"False"},f=new $("<div class='fr-param-checkbox-container' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"' ><\/div>"),i=0;i<t.length;i++){if(r=new $("<input type='radio' class='fr-param fr-param-radio "+n.Name+"' name='"+n.Name+"' value='"+t[i].value+"' id='"+n.Name+"_radio_"+t[i].value+"' datatype='"+n.Type+"' />"),u._getParameterControlProperty(n,r),u._hasDefaultValue(n)&&(n.Nullable==="True"?r.attr("disabled","true"):n.DefaultValues[0]===t[i].value&&r.attr("checked","true")),u._paramCount===1)r.on("click",function(){u._submitForm()});o=new $("<label class='fr-param-radio-label' for='"+n.Name+"_radio_"+t[i].value+"'>"+t[i].display+"<\/label>"),f.append(r),f.append(o)}return f},_writeTextArea:function(n){var i=this,t=new $("<input class='fr-param' type='text' size='30' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"'  name='"+n.Name+"'/>");i._getParameterControlProperty(n,t);switch(n.Type){case"DateTime":t.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onClose:function(){$("[name='"+n.Name+"']").valid(),i._paramCount===1&&i._submitForm()}}),t.attr("dateISO","true"),i._hasDefaultValue(n)&&t.datepicker("setDate",i._getDateTimeFromDefault(n.DefaultValues[0]));break;case"Integer":case"Float":t.attr("number","true"),i._hasDefaultValue(n)&&t.val(n.DefaultValues[0]);break;case"String":i._hasDefaultValue(n)&&t.val(n.DefaultValues[0])}return t},_writeDropDownControl:function(n){var t=this,e=!1,i=$("<select class='fr-param fr-param-select' ismultiple='"+n.MultiValue+"' name='"+n.Name+"' datatype='"+n.Type+"' readonly='true'>"),o,r,u,f;for(t._getParameterControlProperty(n,i),o=new $("<option value=''>&#60Select a Value&#62<\/option>"),i.append(o),r=0;r<n.ValidValues.length;r++)u=n.ValidValues[r].Value,f=new $("<option value='"+u+"'>"+n.ValidValues[r].Key+"<\/option>"),t._hasDefaultValue(n)&&n.DefaultValues[0]===u&&(f.attr("selected","true"),e=!0),i.append(f);if(e||(t._loadedForDefault=!1),t._paramCount===1)i.on("change",function(){t._submitForm()});return i},_writeDropDownWithCheckBox:function(n){var t=this,p=new $("<div style='display:inline-block;'/>"),u=new $("<Input type='text' class='fr-param-client' id='"+n.Name+"_fore' name='"+n.Name+"' readonly='true' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"'/>"),s,h,c,l,f,e,r,o,i,a,y;t._getParameterControlProperty(n,u);u.on("click",function(){t._popupDropDownPanel(n)});s=new $("<Input id='"+n.Name+"_hidden' class='fr-param' type='hidden' name='"+n.Name+"' ismultiple='"+n.MultiValue+"' datatype='"+n.Type+"'/>"),h=new $("<Img alt='Open DropDown List' src='../../Forerunner/ReportViewer/images/OpenDropDown.png' name='"+n.Name+"OpenDropDown' />");h.on("click",function(){t._popupDropDownPanel(n)});c=new $("<div class='fr-param-dropdown fr-param-dropdown-hidden' name='"+n.Name+"_DropDownContainer' value='"+n.Name+"' />");$(document).on("click",function(i){$(i.target).hasClass("ViewReport")||$(i.target).hasClass("fr-param-dropdown")||$(i.target).hasClass("fr-param-client")||$(i.target).hasClass(n.Name+"_DropDown_CB")||$(i.target).hasClass(n.Name+"_DropDown_lable")||$(i.target).attr("name")!==n.Name+"OpenDropDown"&&t._closeDropDownPanel(n)});for(l=t._getDefaultHTMLTable(),n.ValidValues.push({Key:"Select All",Value:"Select All"}),f="",e="",r=0;r<n.ValidValues.length;r++){r===0?(a=n.ValidValues[n.ValidValues.length-1],o=a.Key,i=a.Value):(o=n.ValidValues[r-1].Key,i=n.ValidValues[r-1].Value);var w=new $("<TR />"),b=new $("<TD/>"),k=new $("<Span />"),v=new $("<input type='checkbox' class='"+n.Name+"_DropDown_CB' id='"+n.Name+"_DropDown_"+i+"' value='"+i+"' />");t._hasDefaultValue(n)&&t._contains(n.DefaultValues,i)&&(v.attr("checked","true"),f+=o+",",e+=i+",");v.on("click",function(){this.value==="Select All"&&(this.checked===!0&&$("."+n.Name+"_DropDown_CB").each(function(){this.checked=!0}),this.value==="Select All"&&this.checked===!1&&$("."+n.Name+"_DropDown_CB").each(function(){this.checked=!1}))});y=new $("<label for='"+n.Name+"_DropDown_"+i+"' class='"+n.Name+"_DropDown_lable' name='"+n.Name+"_DropDown_"+i+"_lable'/>"),y.html(o),k.append(v).append(y),b.append(k),w.append(b),l.append(w)}return c.append(l),t._hasDefaultValue(n)&&(u.val(f.substr(0,f.length-1)),s.val(e.substr(0,e.length-1))),p.append(u).append(s).append(h).append(c),p},_setMultipleInputValues:function(n){var t="",i="";$("."+n.Name+"_DropDown_CB").each(function(){this.checked&&this.value!=="Select All"&&(t+=$("[name='"+n.Name+"_DropDown_"+this.value+"_lable']").html()+",",i+=this.value+",")}),$("#"+n.Name+"_fore").val(t.substr(0,t.length-1)),$("#"+n.Name+"_hidden").val(i.substr(0,i.length-1))},_popupDropDownPanel:function(t){var f=this,i=$("[name='"+t.Name+"_DropDownContainer']"),e=$("[name='"+t.Name+"']"),r=e.parent(),o=f.element.find("."+n),u=r.position().top+o.scrollTop();o.height()-u<i.height()+r.height()?i.css("top",u-i.height()):i.css("top",u+r.height()),i.hasClass("fr-param-dropdown-hidden")?i.width(e.width()).fadeOut("fast").removeClass("fr-param-dropdown-hidden").addClass("fr-param-dropdown-show"):f._closeDropDownPanel(t)},_closeDropDownPanel:function(n){var t=this;$("[name='"+n.Name+"_DropDownContainer']").hasClass("fr-param-dropdown-show")&&($("[name='"+n.Name+"_DropDownContainer']").fadeIn("fast",function(){t._setMultipleInputValues(n)}),$("[name='"+n.Name+"_DropDownContainer']").addClass("fr-param-dropdown-hidden").removeClass("fr-param-dropdown-show"),$("[name='"+n.Name+"']").focus().blur().focus())},_closeAllDropdown:function(){var n=this;$(".fr-param-dropdown").each(function(t,i){n._closeDropDownPanel({Name:$(i).attr("value")})})},getParamsList:function(){var r=this,n,t,i,o,u,c,e;if($("[name='ParameterForm']").length!==0&&$("[name='ParameterForm']").valid()===!0){t=[],$(".fr-param").filter(":text").each(function(){t.push({name:this.name,ismultiple:$(this).attr("ismultiple"),type:$(this).attr("datatype"),value:r._isParamNullable(this)})}),$(".fr-param").filter("[type='hidden']").each(function(){t.push({name:this.name,ismultiple:$(this).attr("ismultiple"),type:$(this).attr("datatype"),value:r._isParamNullable(this)})}),$(".fr-param").filter("select").each(function(){t.push({name:this.name,ismultiple:$(this).attr("ismultiple"),type:$(this).attr("datatype"),value:r._isParamNullable(this)})}),i={},$(".fr-param").filter(":radio").each(function(){this.name in i||(i[this.name]=null),this.checked===!0&&(i[this.name]=r._isParamNullable(this))});for(o in i)t.push({name:o,ismultiple:"",type:"Boolean",value:i[o]});u="",$(".fr-param").filter(":checkbox").filter(":checked").each(function(){u.indexOf(this.name)===-1&&(u+=this.name+",")});var f=u.split(","),h="",s="";for(n=0;n<f.length-1;n++)h=f[n],c=$("input[name='"+f[n]+"']:checked").length,$("input[name='"+f[n]+"']:checked").each(function(n){s+=n===c-1?this.value:this.value+","}),t.push({name:h,ismultiple:$(this).attr("ismultiple"),type:$(this).attr("datatype"),value:s});for(e="[",n=0;n<t.length;n++)e+=n!==t.length-1?"{'Parameter':'"+t[n].name+"','IsMultiple':'"+t[n].ismultiple+"','Type':'"+t[n].type+"','Value':'"+t[n].value+"'},":"{'Parameter':'"+t[n].name+"','IsMultiple':'"+t[n].ismultiple+"','Type':'"+t[n].type+"','Value':'"+t[n].value+"'}";return e+="]","{'ParamsList':"+e+"}"}return null},_isParamNullable:function(n){var t=$(".fr-param-checkbox").filter("[name='"+n.name+"']").first();return t.attr("checked")==="checked"||n.value===""?null:n.value},_resetLabelWidth:function(){var n=0;$(".fr-param-label").each(function(t,i){$(i).width()>n&&(n=$(i).width())}),$(".fr-param-label").each(function(t,i){$(i).width(n)})},resetValidateMessage:function(){var t=this,n=t.options.$reportViewer.locData.validateError;jQuery.extend(jQuery.validator.messages,{required:n.required,remote:n.remote,email:n.email,url:n.url,date:n.date,dateISO:n.dateISO,number:n.number,digits:n.digits,maxlength:$.validator.format(n.maxlength),minlength:$.validator.format(n.minlength),rangelength:$.validator.format(n.rangelength),range:$.validator.format(n.range),max:$.validator.format(n.max),min:$.validator.format(n.min)})},removeParameter:function(){var n=this;n._formInit=!1,$(".fr-param-container",this.element).detach()},_getDefaultHTMLTable:function(){return $("<Table cellspacing='0' cellpadding='0'/>")},_contains:function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1},_hasDefaultValue:function(n){var t=this;return t._defaultValueExist&&$.isArray(n.DefaultValues)&&n.DefaultValues[0]},_getDateTimeFromDefault:function(n){if(!n||n.length<9)return null;var t=n.substr(0,n.indexOf(" "));return t.substring(0,t.indexOf("/"))+"-"+t.substring(t.indexOf("/")+1,t.lastIndexOf("/"))+"-"+t.substring(t.lastIndexOf("/")+1,n.indexOf(" "))}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportDocumentMap),{options:{$reportViewer:null},_create:function(){},_init:function(){},write:function(n){var i=this,t;this.element.html(""),t=new $("<DIV />"),t.addClass("fr-docmap-panel").addClass("fr-docmap-panel-layout"),t.append(i._writeDocumentMapItem(n.DocumentMap,0)),i.element.append(t)},_writeDocumentMapItem:function(n,t){var e=this,i=new $("<div />"),u,f,r,o;t!==0&&i.css("margin-left","34px"),u=new $("<div />"),u.addClass("fr-docmap-item").attr("title","Navigate to "+n.Label).html(n.Label);u.on("click",{UniqueName:n.UniqueName},function(n){e.options.$reportViewer.navigateDocumentMap(n.data.UniqueName)});if(n.Children){f=new $("<DIV />"),f.addClass("fr-docmap-parent-container"),e._setFocus(f),r=new $("<div class='fr-docmap-icon'/>"),t===0?r.addClass("fr-docmap-icon-up"):r.addClass("fr-docmap-icon-down");r.on("click",function(){var n=i.find("[level='"+t+"']");n.is(":visible")?(i.find("[level='"+t+"']").hide(),r.removeClass("fr-docmap-icon-up").addClass("fr-docmap-icon-down")):(i.find("[level='"+t+"']").show(),r.removeClass("fr-docmap-icon-down").addClass("fr-docmap-icon-up"))});u.addClass("fr-docmap-item-root"),f.append(r),f.append(u),i.append(f),o=new $("<div level='"+t+"'>"),$.each(n.Children,function(n,i){o.append(e._writeDocumentMapItem(i,t+1))}),i.append(o),t!==0&&o.hide()}else i.addClass("fr-docmap-item-container"),e._setFocus(i),i.append(u);return i},_setFocus:function(n){n.hover(function(){$(this).addClass("fr-docmap-item-highlight")},function(){$(this).removeClass("fr-docmap-item-highlight")})}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr,t=n.constants.toolTypes;n.DefaultAppTemplate=function(n){this.options={$container:null},n&&$.extend(this.options,n)},n.DefaultAppTemplate.prototype={render:function(){var n=this,t=n.options.$container,i,f,e,o,s,u,h,c,l,a,v,r,y,p,w;return t.addClass("fr-layout-container"),n.$container=t,i=new $("<div />"),i.addClass("fr-layout-leftpane"),n.$leftpane=i,f=new $("<div />"),f.addClass("fr-layout-leftheader"),n.$leftheader=f,e=new $("<div />"),e.addClass("fr-layout-leftheaderspacer"),n.$leftheaderspacer=e,o=new $("<div />"),o.addClass("fr-layout-leftpanecontent"),n.$leftpanecontent=o,i.append(f),i.append(e),i.append(o),t.append(i),s=new $("<div />"),s.addClass("fr-layout-mainviewport"),n.$mainviewport=s,t.append(s),u=new $("<div />"),u.addClass("fr-layout-topdiv"),n.$topdiv=u,t.append(u),h=new $("<div />"),h.addClass("fr-layout-mainheadersection"),n.$mainheadersection=h,u.append(h),c=new $("<div />"),c.addClass("fr-layout-topdivspacer"),n.$topdivspacer=c,t.append(c),l=new $("<div />"),l.addClass("fr-layout-pagesection"),n.$pagesection=l,t.append(l),n.$mainsection=new $("<div />"),n.$mainsection.addClass("fr-layout-mainsection"),n.$pagesection.append(n.$mainsection),n.$docmapsection=new $("<div />"),n.$docmapsection.addClass("fr-layout-docmapsection"),n.$pagesection.append(n.$docmapsection),a=new $("<div />"),a.addClass("fr-layout-bottomdiv"),n.$bottomdiv=a,t.append(a),v=new $("<div />"),v.addClass("fr-layout-bottomdivspacer"),n.$bottomdivspacer=v,t.append(v),r=new $("<div />"),r.addClass("fr-layout-rightpane"),n.$rightpane=r,y=new $("<div />"),y.addClass("fr-layout-rightheader"),n.$rightheader=y,p=new $("<div />"),p.addClass("fr-layout-rightheaderspacer"),n.$rightheaderspacer=p,w=new $("<div />"),w.addClass("fr-layout-rightpanecontent"),n.$rightpanecontent=w,r.append(y),r.append(p),r.append(w),t.append(r),n.bindEvents(),this},bindEvents:function(){var n=this,t=forerunner.ssr.constants.events,i=$(".fr-layout-mainheadersection",n.$container);i.on(t.toolbarMenuClick(),function(){n.showSlideoutPane(!0)});i.on(t.toolbarParamAreaClick(),function(){n.showSlideoutPane(!1)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterRender(),function(){n.showSlideoutPane(!1)});$(".fr-layout-leftheader",n.$container).on(t.toolbarMenuClick(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-rightheader",n.$container).on(t.toolbarParamAreaClick(),function(){n.hideSlideoutPane(!1)});$(".fr-layout-leftpanecontent",n.$container).on(t.toolPaneActionStarted(),function(){n.hideSlideoutPane(!0)});$(".fr-layout-rightpanecontent",n.$container).on(t.reportParameterSubmit(),function(){n.hideSlideoutPane(!1)});$(window).resize(function(){n.ResetSize()})},ResetSize:function(){var n=this;forerunner.device.allowZoom(!1),$(".fr-layout-mainviewport",n.$container).css({height:"100%"}),$(".fr-layout-leftpane",n.$container).css({height:Math.max($(window).height(),n.$container.height())+50}),$(".fr-layout-rightpane",n.$container).css({height:Math.max($(window).height(),n.$container.height())}),$(".fr-layout-leftpanecontent",n.$container).css({height:"100%"}),$(".fr-layout-rightpanecontent",n.$container).css({height:"100%"}),$(".fr-param-container",n.$container).css({height:$(".fr-layout-rightpane",n.$container).height()})},bindViewerEvents:function(){var n=this,t=forerunner.ssr.constants.events,i=$(".fr-layout-reportviewer",n.$container);i.on(t.reportViewerDrillBack(),function(){n.hideSlideoutPane(!1)});i.on(t.reportViewerDrillThrough(),function(){n.hideSlideoutPane(!0),n.hideSlideoutPane(!1)});i.on(t.reportViewerShowNav(),function(t,i){var r=$(".fr-layout-bottomdivspacer",n.$container);i.open?(r.show(),forerunner.device.isSmall()&&$(".fr-layout-pagesection",n.$container).hide()):(r.hide(),$(".fr-layout-pagesection",n.$container).show())});i.on(t.reportViewerShowDocMap(),function(){n.$container.addClass("fr-docmap-background")});i.on(t.reportViewerHideDocMap(),function(){n.$container.removeClass("fr-docmap-background")});i.on(t.reportViewerChangePage(),function(){$(".fr-layout-pagesection",n.$container).show()})},hideSlideoutPane:function(n){var t=this,u=n?"fr-layout-mainViewPortShiftedRight":"fr-layout-mainViewPortShiftedLeft",e=$(".fr-layout-mainviewport",t.$container),i=n?$(".fr-layout-leftpane",t.$container):$(".fr-layout-rightpane",t.$container),f=$(".fr-layout-topdiv",t.$container),r=Number(200);i.is(":visible")&&(n?i.slideLeftHide(r*.5):i.slideRightHide(r*.5),f.removeClass(u,r),$(".fr-layout-mainheadersection",t.$container).toolbar("showAllTools"))},showSlideoutPane:function(n){var t=this;forerunner.device.allowZoom(!1),t.$container.resize();var u=n?"fr-layout-mainViewPortShiftedRight":"fr-layout-mainViewPortShiftedLeft",f=$(".fr-layout-mainviewport",t.$container),i=n?$(".fr-layout-leftpane",t.$container):$(".fr-layout-rightpane",t.$container),e=$(".fr-layout-topdiv",t.$container),r=Number(200);i.is(":visible")||(i.css({height:Math.max($(window).height(),f.height())}),n?i.slideLeftShow(r):i.slideRightShow(r),e.addClass(u,r),forerunner.device.allowZoom(!1),$(".fr-layout-mainheadersection",t.$container).toolbar("hideAllTools"))},toggleSlideoutPane:function(n){var t=this,i=n?$(".fr-layout-leftpane",t.$container):$(".fr-layout-rightpane",t.$container);i.is(":visible")?this.hideSlideoutPane(n):this.showSlideoutPane(n)}}}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var t=forerunner.ssr,i=forerunner.ssr.constants.events,n=t.constants.toolTypes,r=forerunner.localize.getLocData(forerunner.config.forerunnerFolder+"/ReportViewer/loc/ReportViewer");t.ReportViewerInitializer=function(n){this.options={$toolbar:null,$toolPane:null,$viewer:null,$nav:null,$paramarea:null,$lefttoolbar:null,$righttoolbar:null,$docMap:null,ReportViewerAPI:"./api/ReportViewer",ReportManagerAPI:"./api/ReportManager",ReportPath:null,toolbarHeight:null,navigateTo:null,isReportManager:!1},n&&$.extend(this.options,n)},t.ReportViewerInitializer.prototype={render:function(){var t=this,u=t.options.$viewer,f,v,o,l,a,e,y,s,h,c;if(t.options.$docMap.hide(),u.reportViewer({reportViewerAPI:t.options.ReportViewerAPI,reportPath:t.options.ReportPath,pageNum:1,docMapArea:t.options.$docMap}),f=t.options.$toolbar,f.toolbar({$reportViewer:u}),t.options.isReportManager&&(v={toolType:n.button,selectorClass:"fr-button-home",imageClass:"fr-icons24x24-home",events:{click:function(){t.options.navigateTo("home",null)}}},f.toolbar("addTools",12,!0,[v]),o={toolType:n.button,selectorClass:"fr-button-update-fav",imageClass:"fr-image-delFav",events:{click:function(n){var r,i=$(n.target);i.hasClass("fr-icons24x24")||(i=i.find(".fr-icons24x24")),r=i.hasClass("fr-image-delFav")?"delete":"add",$.getJSON(t.options.ReportManagerAPI+"/UpdateView",{view:"favorites",action:r,path:t.options.ReportPath}).done(function(){r==="add"?(i.addClass("fr-image-delFav"),i.removeClass("fr-image-addFav")):(i.removeClass("fr-image-delFav"),i.addClass("fr-image-addFav"))}).fail(function(){alert("Failed")})}}},f.toolbar("addTools",3,!0,[o]),f.toolbar("disableTools",[o])),u.reportViewer("option","toolbarHeight",f.outerHeight()),l=t.options.$lefttoolbar,l!==null&&l.toolbar({$reportViewer:u,toolClass:"fr-toolbar-slide"}),a=t.options.$righttoolbar,a!==null&&a.toolbar({$reportViewer:u,toolClass:"fr-toolbar-slide"}),e=t.options.$toolPane.toolPane({$reportViewer:u}),t.options.isReportManager){y={toolType:n.containerItem,selectorClass:"fr-id-home",imageClass:"fr-icons24x24-home",text:r.toolPane.home,events:{click:function(){t.options.navigateTo("home",null)}}},e.toolPane("addTools",2,!0,[y]),s={toolType:n.containerItem,selectorClass:"fr-item-update-fav",imageClass:"fr-image-delFav",text:r.toolPane.favorites,events:{click:function(n){var u,r=$(n.target);r.hasClass("fr-icons24x24")||(r=r.find(".fr-icons24x24")),u=r.hasClass("fr-image-delFav")?"delete":"add",n.data.me._trigger(i.actionStarted,null,n.data.me.allTools["fr-item-update-fav"]),$.getJSON(t.options.ReportViewerAPI+"/UpdateView",{view:"favorites",action:u,path:t.options.ReportPath}).done(function(){u==="add"?(r.addClass("fr-image-delFav"),r.removeClass("fr-image-addFav")):(r.removeClass("fr-image-delFav"),r.addClass("fr-image-addFav"))}).fail(function(){alert("Failed")})}}},e.toolPane("addTools",4,!0,[s]),e.toolPane("disableTools",[s]);u.on(i.reportViewerChangePage(),function(){e.toolPane("enableTools",[s]),f.toolbar("enableTools",[o])})}h=t.options.$nav,h!==null&&(h.pageNav({$reportViewer:u}),u.reportViewer("option","pageNavArea",h)),c=t.options.$paramarea,c!==null&&(c.reportParameter({$reportViewer:u}),u.reportViewer("option","paramArea",c)),t.options.isReportManager&&t.setFavoriteState(t.options.ReportPath)},setFavoriteState:function(n){var t=this,i=t.options.$toolbar,r=t.options.$toolPane;$.ajax({url:t.options.ReportManagerAPI+"/isFavorite?path="+n,dataType:"json",async:!0,success:function(n){var t;i!==null&&(t=i.find(".fr-button-update-fav").find("div"),n.IsFavorite?(t.addClass("fr-image-delFav"),t.removeClass("fr-image-addFav")):(t.removeClass("fr-image-delFav"),t.addClass("fr-image-addFav"))),r!==null&&(t=r.find(".fr-item-update-fav").find("div"),n.IsFavorite?(t.addClass("fr-image-delFav"),t.removeClass("fr-image-addFav")):(t.removeClass("fr-image-delFav"),t.addClass("fr-image-addFav")))},fail:function(){i.find(".fr-button-update-fav").hide()}})}}}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportViewerEZ),$.forerunner.toolBase,{options:{DefaultAppTemplate:null,path:null,navigateTo:null,historyBack:null,isReportManager:!1},_render:function(){var t=this,n=t.DefaultAppTemplate,r=t.options.path,i,u;forerunner.device.allowZoom(!0),n.$bottomdivspacer.addClass("fr-nav-spacer").hide(),n.$bottomdiv.addClass("fr-nav-container").hide(),r=r!==null?String(r).replace(/%2f/g,"/"):"/",n.$mainviewport.css({width:"100%",height:"100%"}),n.$mainsection.html(null),i=new $("<DIV />"),i.addClass("fr-layout-reportviewer"),n.$mainsection.append(i),u=new forerunner.ssr.ReportViewerInitializer({$toolbar:n.$mainheadersection,$toolPane:n.$leftpanecontent,$viewer:i,$nav:n.$bottomdiv,$paramarea:n.$rightpanecontent,$lefttoolbar:n.$leftheader,$righttoolbar:n.$rightheader,$docMap:n.$docmapsection,ReportViewerAPI:forerunner.config.forerunnerAPIBase+"/ReportViewer",ReportPath:r,navigateTo:t.options.navigateTo,isReportManager:t.options.isReportManager}),u.render();i.on("reportviewerback",function(n,i){t._selectedItemPath=i.path,t.options.historyBack()});t.DefaultAppTemplate.bindViewerEvents(),n.$rightheaderspacer.height(n.$topdiv.height()),n.$leftheaderspacer.height(n.$topdiv.height())},_init:function(){var n=this;n.DefaultAppTemplate=n.options.DefaultAppTemplate===null?new forerunner.ssr.DefaultAppTemplate({$container:n.element}).render():n.options.DefaultAppTemplate,n._render()}})}),forerunner=forerunner||{},forerunner.ssr=forerunner.ssr||{},$(function(){var n=forerunner.ssr.constants.widgets;$.widget(n.getFullname(n.reportExplorerEZ),{options:{navigateTo:null,historyBack:null},transitionToReportManager:function(n,t){var r=this,e=n,i=r.DefaultAppTemplate,u,f;i.hideSlideoutPane(!0),i.hideSlideoutPane(!1),forerunner.device.allowZoom(!1),i.$bottomdivspacer.hide(),i.$bottomdiv.hide(),i.$topdivspacer.css({height:"38px"}),i.$mainviewport.css({width:"100%",height:"100%"}),n||(n="/"),t||(t="catalog"),u=r._selectedItemPath,i.$mainsection.html(null),i.$mainsection.show(),i.$docmapsection.hide(),i.$mainsection.reportExplorer({reportManagerAPI:forerunner.config.forerunnerAPIBase+"/ReportManager",forerunnerPath:"./forerunner",path:n,view:t,selectedItemPath:u,navigateTo:r.options.navigateTo}),f=i.$mainheadersection,f.reportExplorerToolbar({navigateTo:r.options.navigateTo}),i.$rightheader.height(i.$topdiv.height()),i.$leftheader.height(i.$topdiv.height()),i.$rightheaderspacer.height(i.$topdiv.height()),i.$leftheaderspacer.height(i.$topdiv.height()),r._selectedItemPath=e,r.element.removeClass("fr-docmap-background"),r.element.addClass("fr-Explorer-background")},transitionToReportViewer:function(n){var t=this;t._selectedItemPath=null,t.DefaultAppTemplate.$mainviewport.reportViewerEZ({DefaultAppTemplate:t.DefaultAppTemplate,path:n,navigateTo:t.options.navigateTo,historyBack:t.options.historyBack,isReportManager:!0}),t.element.addClass("fr-Explorer-background"),t.element.removeClass("fr-Explorer-background")},_init:function(){var n=this;n.DefaultAppTemplate=new forerunner.ssr.DefaultAppTemplate({$container:n.element}).render()}})});
//@ sourceMappingURL=Forerunner-all.min.js.map