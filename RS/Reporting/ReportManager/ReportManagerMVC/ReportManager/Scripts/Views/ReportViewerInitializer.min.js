var forerunner=forerunner||{};forerunner.ssr=forerunner.ssr||{},$(function(){var t=forerunner.ssr,i=forerunner.ssr.constants.events,n=t.constants.toolTypes,r=forerunner.localize.getLocData("./forerunner/ReportViewer/loc/","ReportViewer");t.ReportViewerInitializer=function(n){this.options={$toolbar:null,$toolPane:null,$viewer:null,$nav:null,$paramarea:null,$lefttoolbar:null,$righttoolbar:null,ReportServerURL:null,ReportViewerAPI:null,ReportPath:null,toolbarHeight:null,navigateTo:null},n&&$.extend(this.options,n)},t.ReportViewerInitializer.prototype={render:function(){var t=this,u=t.options.$viewer,f,h,o,e,c,s;u.reportViewer({reportServerURL:t.options.ReportServerURL,reportViewerAPI:t.options.ReportViewerAPI,reportPath:t.options.ReportPath,pageNum:1}),f=t.options.$toolbar,f.toolbar({$reportViewer:u}),h={toolType:n.button,selectorClass:"fr-button-home",imageClass:"fr-image-home",events:{click:function(){t.options.navigateTo("home",null)}}},f.toolbar("addTools",12,!0,[h]),o={toolType:n.button,selectorClass:"fr-button-update-fav",imageClass:"fr-image-delFav",events:{click:function(n){var r,i=$(n.target);i.hasClass("fr-toolbase-icon")||(i=i.find(".fr-toolbase-icon")),r=i.hasClass("fr-image-delFav")?"delete":"add",$.getJSON("./api/ReportManager/UpdateView",{view:"favorites",action:r,path:t.options.ReportPath}).done(function(){r=="add"?(i.addClass("fr-image-delFav"),i.removeClass("fr-image-addFav")):(i.removeClass("fr-image-delFav"),i.addClass("fr-image-addFav"))}).fail(function(){alert("Failed")})}}},f.toolbar("addTools",3,!0,[o]),f.toolbar("disableTools",[o]),u.reportViewer("option","toolbarHeight",t.options.toolbarHeight()),$lefttoolbar=t.options.$lefttoolbar,$lefttoolbar!=null&&$lefttoolbar.toolbar({$reportViewer:u,toolClass:"fr-toolbar-slide"}),$righttoolbar=t.options.$righttoolbar,$righttoolbar!=null&&$righttoolbar.toolbar({$reportViewer:u,toolClass:"fr-toolbar-slide"}),e=t.options.$toolPane.toolPane({$reportViewer:u}),c={toolType:n.containerItem,selectorClass:"fr-id-home",imageClass:"fr-image-home",text:r.toolPane.home,events:{click:function(){t.options.navigateTo("home",null)}}},e.toolPane("addTools",2,!0,[c]),s={toolType:n.containerItem,selectorClass:"fr-item-update-fav",imageClass:"fr-image-delFav",text:r.toolPane.favorites,events:{click:function(n){var u,r=$(n.target);r.hasClass("fr-toolbase-icon")||(r=r.find(".fr-toolbase-icon")),u=r.hasClass("fr-image-delFav")?"delete":"add",n.data.me._trigger(i.actionStarted,null,n.data.me.allTools["fr-item-update-fav"]),$.getJSON("./api/ReportManager/UpdateView",{view:"favorites",action:u,path:t.options.ReportPath}).done(function(){u=="add"?(r.addClass("fr-image-delFav"),r.removeClass("fr-image-addFav")):(r.removeClass("fr-image-delFav"),r.addClass("fr-image-addFav"))}).fail(function(){alert("Failed")})}}},e.toolPane("addTools",4,!0,[s]),e.toolPane("disableTools",[s]);u.on(i.reportViewerChangePage(),function(){e.toolPane("enableTools",[s]),f.toolbar("enableTools",[o])});$nav=t.options.$nav,$nav!=null&&($nav.pageNav({$reportViewer:u}),u.reportViewer("option","pageNav",$nav)),$paramarea=t.options.$paramarea,$paramarea!=null&&($paramarea.reportParameter({$reportViewer:u}),u.reportViewer("option","paramArea",$paramarea)),t.setFavoriteState(t.options.ReportPath)},setFavoriteState:function(n){var t=this;$toolbar=t.options.$toolbar,$toolPane=t.options.$toolPane,$.ajax({url:"./api/ReportManager/isFavorite?path="+n,dataType:"json",async:!0,success:function(n){var t;$toolbar!=null&&(t=$toolbar.find(".fr-button-update-fav").find("div"),n.IsFavorite?(t.addClass("fr-image-delFav"),t.removeClass("fr-image-addFav")):(t.removeClass("fr-image-delFav"),t.addClass("fr-image-addFav"))),$toolPane!=null&&(t=$toolPane.find(".fr-item-update-fav").find("div"),n.IsFavorite?(t.addClass("fr-image-delFav"),t.removeClass("fr-image-addFav")):(t.removeClass("fr-image-delFav"),t.addClass("fr-image-addFav")))},fail:function(){$toolbar.find(".fr-button-update-fav").hide()}})}}});
//@ sourceMappingURL=ReportViewerInitializer.min.js.map