@model ReportManager.Models.LoginModel

@{
    ViewBag.Title = "Login";
    Layout = "../Shared/_RMLayout.cshtml"; 
}

@section styles {
    <link href="~/Forerunner/Common/css/Login.css" rel="stylesheet"/>
}

<section id="loginForm">
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    <div class="loginForm">
        <div style="display: table-cell; vertical-align: middle">
            <fieldset class="fieldsetsize">
                <div class="fieldcontainer">
                    <div class="logocontainer">
                        <img class="logosize" src="~/Forerunner/Common/images/ForerunnerLogo.png" />
                    </div>
                    <div class="usernamecontainer">
                        @Html.TextBoxFor(m => m.UserName, new { @placeholder = "User name", autocomplete = "on", @class = "inputsize", @id = "username" })
                    </div>
                    <div class="passwordcontainer">
                        @Html.PasswordFor(m => m.Password, new { @placeholder = "Password", autocomplete = "on", @class = "inputsize", @id = "password" })
                    </div>
                    <div class="logincontainer">
                        <input class="login loginsize" type="submit" value="Log In" id="login"/>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
}
</section>

@section scripts {
  <script type="text/javascript" src="~/Forerunner/Lib/jQuery/js/jquery-1.9.1.min.js"></script>
  <script type="text/javascript" src="~/Forerunner/Bundles/forerunner.min.js"></script>
  <script type="text/javascript" src="~/Forerunner/Lib/Misc/js/Placeholders.min.js"></script>
  <script type="text/javascript">
      $(document).ready(function () {
          var locData = forerunner.localize.getLocData(forerunner.config.forerunnerFolder() + 'ReportViewer/loc/ReportViewer');
          $('#username').attr('placeholder', locData.placeholders.Username);
          if (forerunner.device.isMSIE8())
              $('#password').attr('placeholder', '').attr("data-placeholder-value", '').val('');
          else
              $('#password').attr('placeholder', locData.placeholders.Password);
          $('#login').attr('value', locData.placeholders.Login);

          $form = $("form");
          // Fix up the ReturnUrl
          var urlParts = document.URL.split("ReturnUrl=");
          if (urlParts.length > 1) {
              var returnUrl = urlParts[1];
              urlParts = returnUrl.split("#");
              returnUrl = urlParts[0];
              var hashTag = null;
              if (urlParts.length > 1) {
                  hashTag = urlParts[1];
                  hashTag = hashTag.replace("//", "/%2f");
                  hashTag = hashTag.replace("&", "%26");
              }
              var action = $form.attr("action");
              urlParts = action.split("ReturnUrl=");
              action = urlParts[0] + "ReturnUrl=" + returnUrl;
              if (hashTag)
                  action += "&HashTag=" + hashTag;
              $form.attr("action", action);
          }
      });
  </script>
}